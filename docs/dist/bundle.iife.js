!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VWM=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}},n={},r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,A=s(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(A[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(A[a[c]]=n[a[c]])}}return A};
/** @license React v17.0.2
	 * react.development.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */!function(e){!function(){var t=a,n=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var i=60109,o=60110,s=60112;e.Suspense=60113;var A=60120,l=60115,u=60116,c=60121,d=60122,f=60117,h=60129,p=60131;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;n=g("react.element"),r=g("react.portal"),e.Fragment=g("react.fragment"),e.StrictMode=g("react.strict_mode"),e.Profiler=g("react.profiler"),i=g("react.provider"),o=g("react.context"),s=g("react.forward_ref"),e.Suspense=g("react.suspense"),A=g("react.suspense_list"),l=g("react.memo"),u=g("react.lazy"),c=g("react.block"),d=g("react.server.block"),f=g("react.fundamental"),g("react.scope"),g("react.opaque.id"),h=g("react.debug_trace_mode"),g("react.offscreen"),p=g("react.legacy_hidden")}var m="function"==typeof Symbol&&Symbol.iterator;function v(e){if(null===e||"object"!=typeof e)return null;var t=m&&e[m]||e["@@iterator"];return"function"==typeof t?t:null}var y={current:null},b={current:null},w={},_=null;function x(e){_=e}w.setExtraStackFrame=function(e){_=e},w.getCurrentStack=null,w.getStackAddendum=function(){var e="";_&&(e+=_);var t=w.getCurrentStack;return t&&(e+=t()||""),e};var E={ReactCurrentDispatcher:y,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:t};function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];k("warn",e,n)}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];k("error",e,n)}function k(e,t,n){var r=E.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}E.ReactDebugCurrentFrame=w;var C={};function T(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+t;C[i]||(P("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),C[i]=!0)}var M={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){T(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){T(e,"replaceState")},enqueueSetState:function(e,t,n,r){T(e,"setState")}},I={};function L(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||M}Object.freeze(I),L.prototype.isReactComponent={},L.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},L.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var R={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},O=function(e,t){Object.defineProperty(L.prototype,e,{get:function(){S("%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var D in R)R.hasOwnProperty(D)&&O(D,R[D]);function B(){}function F(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||M}B.prototype=L.prototype;var z=F.prototype=new B;function N(e){return e.displayName||"Context"}function j(t){if(null==t)return null;if("number"==typeof t.tag&&P("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case e.Fragment:return"Fragment";case r:return"Portal";case e.Profiler:return"Profiler";case e.StrictMode:return"StrictMode";case e.Suspense:return"Suspense";case A:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case o:return N(t)+".Consumer";case i:return N(t._context)+".Provider";case s:return f=t,h=t.render,p="ForwardRef",g=h.displayName||h.name||"",f.displayName||(""!==g?p+"("+g+")":p);case l:return j(t.type);case c:return j(t._render);case u:var n=t,a=n._payload,d=n._init;try{return j(d(a))}catch(e){return null}}var f,h,p,g;return null}z.constructor=F,t(z,L.prototype),z.isPureReactComponent=!0;var U,V,W,G=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0};function Q(e){if(G.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function $(e){if(G.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}function q(e,t){var n=function(){U||(U=!0,P("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}function Y(e,t){var n=function(){V||(V=!0,P("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}function Z(e){if("string"==typeof e.ref&&b.current&&e.__self&&b.current.stateNode!==e.__self){var t=j(b.current.type);W[t]||(P('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',t,e.ref),W[t]=!0)}}W={};var X=function(e,t,r,i,o,s,a){var A={$$typeof:n,type:e,key:t,ref:r,props:a,_owner:s,_store:{}};return Object.defineProperty(A._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(A,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(A,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(A.props),Object.freeze(A)),A};function K(e,t,n){var r,i={},o=null,s=null,a=null,A=null;if(null!=t)for(r in Q(t)&&(s=t.ref,Z(t)),$(t)&&(o=""+t.key),a=void 0===t.__self?null:t.__self,A=void 0===t.__source?null:t.__source,t)G.call(t,r)&&!H.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];Object.freeze&&Object.freeze(u),i.children=u}if(e&&e.defaultProps){var d=e.defaultProps;for(r in d)void 0===i[r]&&(i[r]=d[r])}if(o||s){var f="function"==typeof e?e.displayName||e.name||"Unknown":e;o&&q(i,f),s&&Y(i,f)}return X(e,o,s,a,A,b.current,i)}function J(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i,o,s=t({},e.props),a=e.key,A=e.ref,l=e._self,u=e._source,c=e._owner;if(null!=n)for(i in Q(n)&&(A=n.ref,c=b.current),$(n)&&(a=""+n.key),e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)G.call(n,i)&&!H.hasOwnProperty(i)&&(void 0===n[i]&&void 0!==o?s[i]=o[i]:s[i]=n[i]);var d=arguments.length-2;if(1===d)s.children=r;else if(d>1){for(var f=Array(d),h=0;h<d;h++)f[h]=arguments[h+2];s.children=f}return X(e.type,a,A,l,u,c,s)}function ee(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var te=!1,ne=/\/+/g;function re(e){return e.replace(ne,"$&/")}function ie(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function oe(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var A,l,u,c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c){var d=e,f=s(d),h=""===o?"."+ie(d,0):o;if(Array.isArray(f)){var p="";null!=h&&(p=re(h)+"/"),oe(f,t,p,"",(function(e){return e}))}else null!=f&&(ee(f)&&(A=f,l=i+(!f.key||d&&d.key===f.key?"":re(""+f.key)+"/")+h,f=X(A.type,l,A.ref,A._self,A._source,A._owner,A.props)),t.push(f));return 1}var g=0,m=""===o?".":o+":";if(Array.isArray(e))for(var y=0;y<e.length;y++)g+=oe(u=e[y],t,i,m+ie(u,y),s);else{var b=v(e);if("function"==typeof b){var w=e;b===w.entries&&(te||S("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),te=!0);for(var _,x=b.call(w),E=0;!(_=x.next()).done;)g+=oe(u=_.value,t,i,m+ie(u,E++),s)}else if("object"===a){var P=""+e;throw Error("Objects are not valid as a React child (found: "+("[object Object]"===P?"object with keys {"+Object.keys(e).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}}return g}function se(e,t,n){if(null==e)return e;var r=[],i=0;return oe(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function ae(e){if(-1===e._status){var t=(0,e._result)(),n=e;n._status=0,n._result=t,t.then((function(t){if(0===e._status){var n=t.default;void 0===n&&P("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",t);var r=e;r._status=1,r._result=n}}),(function(t){if(0===e._status){var n=e;n._status=2,n._result=t}}))}if(1===e._status)return e._result;throw e._result}function Ae(t){return"string"==typeof t||"function"==typeof t||(t===e.Fragment||t===e.Profiler||t===h||t===e.StrictMode||t===e.Suspense||t===A||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===u||t.$$typeof===l||t.$$typeof===i||t.$$typeof===o||t.$$typeof===s||t.$$typeof===f||t.$$typeof===c||t[0]===d))}function le(){var e=y.current;if(null===e)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");return e}var ue,ce,de,fe,he,pe,ge,me=0;function ve(){}ve.__reactDisabledLog=!0;var ye,be=E.ReactCurrentDispatcher;function we(e,t,n){if(void 0===ye)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);ye=r&&r[1]||""}return"\n"+ye+e}var _e,xe=!1,Ee="function"==typeof WeakMap?WeakMap:Map;function Se(e,n){if(!e||xe)return"";var r,i=_e.get(e);if(void 0!==i)return i;xe=!0;var o,s=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=be.current,be.current=null,function(){if(0===me){ue=console.log,ce=console.info,de=console.warn,fe=console.error,he=console.group,pe=console.groupCollapsed,ge=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ve,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}me++}();try{if(n){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){r=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){r=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var A=t.stack.split("\n"),l=r.stack.split("\n"),u=A.length-1,c=l.length-1;u>=1&&c>=0&&A[u]!==l[c];)c--;for(;u>=1&&c>=0;u--,c--)if(A[u]!==l[c]){if(1!==u||1!==c)do{if(u--,--c<0||A[u]!==l[c]){var d="\n"+A[u].replace(" at new "," at ");return"function"==typeof e&&_e.set(e,d),d}}while(u>=1&&c>=0);break}}}finally{xe=!1,be.current=o,function(){if(0==--me){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:t({},e,{value:ue}),info:t({},e,{value:ce}),warn:t({},e,{value:de}),error:t({},e,{value:fe}),group:t({},e,{value:he}),groupCollapsed:t({},e,{value:pe}),groupEnd:t({},e,{value:ge})})}me<0&&P("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=s}var f=e?e.displayName||e.name:"",h=f?we(f):"";return"function"==typeof e&&_e.set(e,h),h}function Pe(e,t,n){return Se(e,!1)}function ke(t,n,r){if(null==t)return"";if("function"==typeof t)return Se(t,function(e){var t=e.prototype;return!(!t||!t.isReactComponent)}(t));if("string"==typeof t)return we(t);switch(t){case e.Suspense:return we("Suspense");case A:return we("SuspenseList")}if("object"==typeof t)switch(t.$$typeof){case s:return Pe(t.render);case l:return ke(t.type,n,r);case c:return Pe(t._render);case u:var i=t,o=i._payload,a=i._init;try{return ke(a(o),n,r)}catch(e){}}return""}_e=new Ee;var Ce,Te={},Me=E.ReactDebugCurrentFrame;function Ie(e){if(e){var t=e._owner,n=ke(e.type,e._source,t?t.type:null);Me.setExtraStackFrame(n)}else Me.setExtraStackFrame(null)}function Le(e){if(e){var t=e._owner;x(ke(e.type,e._source,t?t.type:null))}else x(null)}function Re(){if(b.current){var e=j(b.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}function Oe(e){return null!=e&&void 0!==(t=e.__source)?"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+".":"";var t}Ce=!1;var De={};function Be(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=Re();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!De[n]){De[n]=!0;var r="";e&&e._owner&&e._owner!==b.current&&(r=" It was passed a child from "+j(e._owner.type)+"."),Le(e),P('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),Le(null)}}}function Fe(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];ee(r)&&Be(r,t)}else if(ee(e))e._store&&(e._store.validated=!0);else if(e){var i=v(e);if("function"==typeof i&&i!==e.entries)for(var o,s=i.call(e);!(o=s.next()).done;)ee(o.value)&&Be(o.value,t)}}function ze(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==s&&n.$$typeof!==l)return;t=n.propTypes}if(t){var r=j(n);!function(e,t,n,r,i){var o=Function.call.bind(Object.prototype.hasOwnProperty);for(var s in e)if(o(e,s)){var a=void 0;try{if("function"!=typeof e[s]){var A=Error((r||"React class")+": "+n+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw A.name="Invariant Violation",A}a=e[s](t,s,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){a=e}!a||a instanceof Error||(Ie(i),P("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,s,typeof a),Ie(null)),a instanceof Error&&!(a.message in Te)&&(Te[a.message]=!0,Ie(i),P("Failed %s type: %s",n,a.message),Ie(null))}}(t,e.props,"prop",r,e)}else if(void 0!==n.PropTypes&&!Ce){Ce=!0,P("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",j(n)||"Unknown")}"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||P("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ne(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){Le(e),P("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),Le(null);break}}null!==e.ref&&(Le(e),P("Invalid attribute `ref` supplied to `React.Fragment`."),Le(null))}function je(t,r,i){var o=Ae(t);if(!o){var s="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(s+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var a,A=Oe(r);s+=A||Re(),null===t?a="null":Array.isArray(t)?a="array":void 0!==t&&t.$$typeof===n?(a="<"+(j(t.type)||"Unknown")+" />",s=" Did you accidentally export a JSX literal instead of a component?"):a=typeof t,P("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",a,s)}var l=K.apply(this,arguments);if(null==l)return l;if(o)for(var u=2;u<arguments.length;u++)Fe(arguments[u],t);return t===e.Fragment?Ne(l):ze(l),l}var Ue=!1;try{var Ve=Object.freeze({});new Map([[Ve,null]]),new Set([Ve])}catch(e){}var We=je,Ge=function(e,t,n){for(var r=J.apply(this,arguments),i=2;i<arguments.length;i++)Fe(arguments[i],r.type);return ze(r),r},He=function(e){var t=je.bind(null,e);return t.type=e,Ue||(Ue=!0,S("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(t,"type",{enumerable:!1,get:function(){return S("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},Qe={map:se,forEach:function(e,t,n){se(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return se(e,(function(){t++})),t},toArray:function(e){return se(e,(function(e){return e}))||[]},only:function(e){if(!ee(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};e.Children=Qe,e.Component=L,e.PureComponent=F,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E,e.cloneElement=Ge,e.createContext=function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&P("createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null};n.Provider={$$typeof:i,_context:n};var r=!1,s=!1,a=!1,A={$$typeof:o,_context:n,_calculateChangedBits:n._calculateChangedBits};return Object.defineProperties(A,{Provider:{get:function(){return s||(s=!0,P("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),n.Provider},set:function(e){n.Provider=e}},_currentValue:{get:function(){return n._currentValue},set:function(e){n._currentValue=e}},_currentValue2:{get:function(){return n._currentValue2},set:function(e){n._currentValue2=e}},_threadCount:{get:function(){return n._threadCount},set:function(e){n._threadCount=e}},Consumer:{get:function(){return r||(r=!0,P("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),n.Consumer}},displayName:{get:function(){return n.displayName},set:function(e){a||(S("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",e),a=!0)}}}),n.Consumer=A,n._currentRenderer=null,n._currentRenderer2=null,n},e.createElement=We,e.createFactory=He,e.createRef=function(){var e={current:null};return Object.seal(e),e},e.forwardRef=function(e){null!=e&&e.$$typeof===l?P("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof e?P("forwardRef requires a render function but was given %s.",null===e?"null":typeof e):0!==e.length&&2!==e.length&&P("forwardRef render functions accept exactly two parameters: props and ref. %s",1===e.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=e&&(null==e.defaultProps&&null==e.propTypes||P("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"));var t,n={$$typeof:s,render:e};return Object.defineProperty(n,"displayName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n,null==e.displayName&&(e.displayName=n)}}),n},e.isValidElement=ee,e.lazy=function(e){var t,n,r={$$typeof:u,_payload:{_status:-1,_result:e},_init:ae};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return t},set:function(e){P("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),t=e,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(e){P("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=e,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},e.memo=function(e,t){Ae(e)||P("memo: The first argument must be a component. Instead received: %s",null===e?"null":typeof e);var n,r={$$typeof:l,type:e,compare:void 0===t?null:t};return Object.defineProperty(r,"displayName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(t){n=t,null==e.displayName&&(e.displayName=t)}}),r},e.useCallback=function(e,t){return le().useCallback(e,t)},e.useContext=function(e,t){var n=le();if(void 0!==t&&P("useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",t,"number"==typeof t&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://reactjs.org/link/rules-of-hooks":""),void 0!==e._context){var r=e._context;r.Consumer===e?P("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):r.Provider===e&&P("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return n.useContext(e,t)},e.useDebugValue=function(e,t){return le().useDebugValue(e,t)},e.useEffect=function(e,t){return le().useEffect(e,t)},e.useImperativeHandle=function(e,t,n){return le().useImperativeHandle(e,t,n)},e.useLayoutEffect=function(e,t){return le().useLayoutEffect(e,t)},e.useMemo=function(e,t){return le().useMemo(e,t)},e.useReducer=function(e,t,n){return le().useReducer(e,t,n)},e.useRef=function(e){return le().useRef(e)},e.useState=function(e){return le().useState(e)},e.version="17.0.2"}()}(n),t.exports=n;var A=t.exports;function l(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const u={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},c=u.global||u.self||u.window||{},d="object"!=typeof process||"[object process]"!==String(process)||process.browser,f="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);f&&parseFloat(f[1]);function h(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}"object"!=typeof process||"[object process]"!==String(process)||process.browser;const p="undefined"!=typeof window&&void 0!==window.orientation,g="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g&&parseFloat(g[1]);class v{constructor(e,t){m(this,"name",void 0),m(this,"workerThread",void 0),m(this,"isRunning",void 0),m(this,"result",void 0),m(this,"_resolve",void 0),m(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){h(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){h(this.isRunning),this.isRunning=!1,this._reject(e)}}const y=new Map;function b(e){h(e.source&&!e.url||!e.source&&e.url);let t=y.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return w((t=e,`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var t}(e.url),y.set(e.url,t)),e.source&&(t=w(e.source),y.set(e.source,t))),h(t),t}function w(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function _(e,t=!0,n){const r=n||new Set;if(e){if(x(e))r.add(e);else if(x(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const n in e)_(e[n],t,r)}else;return void 0===n?Array.from(r):[]}function x(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const E=()=>{};class S{static isSupported(){return"undefined"!=typeof Worker}constructor(e){m(this,"name",void 0),m(this,"source",void 0),m(this,"url",void 0),m(this,"terminated",!1),m(this,"worker",void 0),m(this,"onMessage",void 0),m(this,"onError",void 0),m(this,"_loadableURL","");const{name:t,source:n,url:r}=e;h(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=E,this.onError=e=>console.log(e),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=E,this.onError=E,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||_(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=b({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}}class P{constructor(e){m(this,"name","unnamed"),m(this,"source",void 0),m(this,"url",void 0),m(this,"maxConcurrency",1),m(this,"maxMobileConcurrency",1),m(this,"onDebug",(()=>{})),m(this,"reuseWorkers",!0),m(this,"props",{}),m(this,"jobQueue",[]),m(this,"idleQueue",[]),m(this,"count",0),m(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t=((e,t,n)=>e.done(n)),n=((e,t)=>e.error(t))){const r=new Promise((r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new v(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new S({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return p?this.maxMobileConcurrency:this.maxConcurrency}}const k={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class C{static isSupported(){return S.isSupported()}static getWorkerFarm(e={}){return C._workerFarm=C._workerFarm||new C({}),C._workerFarm.setProps(e),C._workerFarm}constructor(e){m(this,"props",void 0),m(this,"workerPools",new Map),this.props={...k},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let i=this.workerPools.get(t);return i||(i=new P({name:t,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}m(C,"_workerFarm",void 0);async function T(e,t,n,r,i){const o=e.id,s=function(e,t={}){const n=t[e.id]||{},r=`${e.id}-worker.js`;let i=n.workerUrl;if("test"===t._workerType&&(i=`modules/${e.module}/dist/${r}`),!i){let t=e.version;"latest"===t&&(t="latest");const n=t?`@${t}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${n}/dist/${r}`}return h(i),i}(e,n),a=C.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n));const A=await a.startJob("process-on-worker",M.bind(null,i));A.postMessage("process",{input:t,options:n});const l=await A.result;return await l.result}async function M(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(r.error);break;case"process":const{id:i,input:o,options:s}=r;try{const n=await e(o,s);t.postMessage("done",{id:i,result:n})}catch(e){const n=e instanceof Error?e.message:"unknown error";t.postMessage("error",{id:i,error:n})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function I(e){var t;if((t=e)&&"object"==typeof t&&t.isBuffer&&(e=e),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}async function L(e){const t=[];for await(const n of e)t.push(n);return function(...e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);let i=0;for(const e of t)r.set(e,i),i+=e.byteLength;return r.buffer}(...t)}function R(){let e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class O{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=R(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(R()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class D{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(e=[]){e.forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:n}=e;return this.stats[t]||(this.stats[t]=e instanceof O?e:new O(t,n)),this.stats[t]}}const B={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class F{constructor(e={}){m(this,"props",void 0),m(this,"stats",void 0),m(this,"activeRequestCount",0),m(this,"requestQueue",[]),m(this,"requestMap",new Map),m(this,"deferredUpdate",null),this.props={...B,...e},this.stats=new D({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e,t=(()=>0)){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:t},r=new Promise((e=>(n.resolve=e,n)));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}_issueRequest(e){const{handle:t,resolve:n}=e;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}const z={};const N=e=>"function"==typeof e,j=e=>null!==e&&"object"==typeof e,U=e=>j(e)&&e.constructor==={}.constructor,V=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,W=e=>"undefined"!=typeof Blob&&e instanceof Blob,G=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||j(e)&&N(e.tee)&&N(e.cancel)&&N(e.getReader))(e)||(e=>j(e)&&N(e.read)&&N(e.pipe)&&(e=>"boolean"==typeof e)(e.readable))(e),H=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Q=/^([-\w.]+\/[-\w.+]+)/;function $(e){const t=Q.exec(e);return t?t[1]:e}function q(e){const t=H.exec(e);return t?t[1]:""}const Y=/\?.*/;function Z(e){if(V(e)){const t=X(e.url||"");return{url:t,type:$(e.headers.get("content-type")||"")||q(t)}}return W(e)?{url:X(e.name||""),type:e.type||""}:"string"==typeof e?{url:X(e),type:q(e)}:{url:"",type:""}}function X(e){return e.replace(Y,"")}async function K(e){if(V(e))return e;const t={},n=function(e){return V(e)?e.headers["content-length"]||-1:W(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const{url:r,type:i}=Z(e);i&&(t["content-type"]=i);const o=await async function(e){const t=5;if("string"==typeof e)return`data:,${e.slice(0,t)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>{var n;return e(null==t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return`data:base64,${function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return btoa(t)}(e.slice(0,t))}`}return null}(e);o&&(t["x-first-bytes"]=o),"string"==typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function J(e,t){if("string"==typeof e){e=function(e){for(const t in z)if(e.startsWith(t)){const n=z[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e=`${e}`),e}(e);let n=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(n=t.fetch),await fetch(e,n)}return await K(e)}function ee(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)}function te(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||ee()}const ne={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},re=ne.window||ne.self||ne.global,ie=ne.process||{},oe="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",se=te();class ae{constructor(e,t,n="sessionStorage"){this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(n),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function Ae(e,t,n,r=600){const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));const o=e.width*n,s=e.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}const le={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function ue(e){return"string"==typeof e?le[e.toUpperCase()]||le.WHITE:e}function ce(e,t){if(!e)throw new Error(t||"Assertion failed")}function de(){let e;if(se&&re.performance)e=re.performance.now();else if(ie.hrtime){const t=ie.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const fe={debug:se&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},he={enabled:!0,level:0};function pe(){}const ge={},me={once:!0};function ve(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}class ye{constructor({id:e}={id:""}){this.id=e,this.VERSION=oe,this._startTs=de(),this._deltaTs=de(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new ae("__probe-".concat(this.id,"__"),he),this.userData={},this.timeStamp("".concat(this.id," started")),function(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n);for(const n of r)"function"==typeof e[n]&&(t.find((e=>n===e))||(e[n]=e[n].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((de()-this._startTs).toPrecision(10))}getDelta(){return Number((de()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,t){ce(e,t)}warn(e){return this._getLogFunction(0,e,fe.warn,arguments,me)}error(e){return this._getLogFunction(0,e,fe.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,fe.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,fe.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,fe.debug||fe.info,arguments,me)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||pe,n&&[n],{tag:ve(t)}):pe}image({logLevel:e,priority:t,image:n,message:r="",scale:i=1}){return this._shouldLog(e||t)?se?function({image:e,message:t="",scale:n=1}){if("string"==typeof e){const r=new Image;return r.onload=()=>{const e=Ae(r,t,n);console.log(...e)},r.src=e,pe}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...Ae(e,t,n)),pe;if("canvas"===r.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...Ae(r,t,n)),r.src=e.toDataURL(),pe}return pe}({image:n,message:r,scale:i}):function({image:e,message:t="",scale:n=1}){let r=null;try{r=module.require("asciify-image")}catch(e){}if(r)return()=>r(e,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then((e=>console.log(e)));return pe}({image:n,message:r,scale:i}):pe}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||pe)}group(e,t,n={collapsed:!1}){n=we({logLevel:e,message:t,opts:n});const{collapsed:r}=n;return n.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}groupCollapsed(e,t,n={}){return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||pe)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=be(e)}_getLogFunction(e,t,n,r=[],i){if(this._shouldLog(e)){i=we({logLevel:e,message:t,args:r,opts:i}),ce(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=de();const o=i.tag||i.message;if(i.once){if(ge[o])return pe;ge[o]=de()}return t=function(e,t,n){if("string"==typeof t){const s=n.time?function(e,t=8){const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=n.time?"".concat(e,": ").concat(s,"  ").concat(t):"".concat(e,": ").concat(t),r=t,i=n.color,o=n.background,se||"string"!=typeof r||(i&&(i=ue(i),r="[".concat(i,"m").concat(r,"[39m")),o&&(i=ue(o),r="[".concat(o+10,"m").concat(r,"[49m"))),t=r}var r,i,o;return t}(this.id,i.message,i),n.bind(console,t,...i.args)}return pe}}function be(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return ce(Number.isFinite(t)&&t>=0),t}function we(e){const{logLevel:t,message:n}=e;e.logLevel=be(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(e.args=r,typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const i=typeof e.message;return ce("string"===i||"object"===i),Object.assign(e,e.opts)}ye.VERSION=oe;const _e=new ye({id:"loaders.gl"});class xe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const Ee={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){m(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Se={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Pe(){c.loaders=c.loaders||{};const{loaders:e}=c;return e._state=e._state||{},e._state}const ke=()=>{const e=Pe();return e.globalOptions=e.globalOptions||{...Ee},e.globalOptions};function Ce(e,t,n,r){return n=n||[],function(e,t){Me(e,null,Ee,Se,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Me(r,n.id,i,o,t)}}(e,n=Array.isArray(n)?n:[n]),function(e,t,n){const r={...e.options||{}};(function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)})(r,n),null===r.log&&(r.log=new xe);return Le(r,ke()),Le(r,t),r}(t,e,r)}function Te(e,t){const n=ke(),r=e||n;return"function"==typeof r.fetch?r.fetch:j(r.fetch)?e=>J(e,r):null!=t&&t.fetch?null==t?void 0:t.fetch:J}function Me(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const A=!t&&j(e[a]),l="baseUri"===a&&!t,u="workerUrl"===a&&t;if(!(a in n)&&!l&&!u)if(a in r)_e.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!A){const e=Ie(a,i);_e.warn(`${o} loader option '${s}${a}' not recognized. ${e}`)()}}}function Ie(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const t in i.options){if(e===t)return`Did you mean '${i.id}.${t}'?`;const o=t.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||`Did you mean '${i.id}.${t}'?`)}return r}function Le(e,t){for(const n in t)if(n in t){const r=t[n];U(r)&&U(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Re(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function Oe(e){var t,n;let r;return l(e,"null loader"),l(Re(e),"invalid loader"),Array.isArray(e)&&(r=e[1],e=e[0],e={...e,options:{...e.options,...r}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const De=()=>{const e=Pe();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};const Be=/\.([^.]+)$/;function Fe(e,t=[],n,r){if(!ze(e))return null;if(t&&!Array.isArray(t))return Oe(t);let i=[];t&&(i=i.concat(t)),null!=n&&n.ignoreRegisteredLoaders||i.push(...De()),function(e){for(const t of e)Oe(t)}(i);const o=function(e,t,n,r){const{url:i,type:o}=Z(e),s=i||(null==r?void 0:r.url);let a=null;null!=n&&n.mimeType&&(a=je(t,null==n?void 0:n.mimeType));return a=a||function(e,t){const n=t&&Be.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,s),a=a||je(t,o),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"==typeof t){if(Ue(t,n))return n}else if(ArrayBuffer.isView(t)){if(Ve(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(Ve(t,0,n))return n}return null}(t,e),a=a||je(t,null==n?void 0:n.fallbackMimeType),a}(e,i,n,r);if(!(o||null!=n&&n.nothrow))throw new Error(Ne(e));return o}function ze(e){return!(e instanceof Response&&204===e.status)}function Ne(e){const{url:t,type:n}=Z(e);let r="No valid loader found";return e&&(r+=` data: "${function(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return We(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return We(e,0,t)}return""}(e)}", contentType: "${n}"`),t&&(r+=` url: ${t}`),r}function je(e,t){for(const n of e){if(n.mimeTypes&&n.mimeTypes.includes(t))return n;if(t===`application/x.${n.id}`)return n}return null}function Ue(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function Ve(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let e=0;e<r.length;++e)if(r[e]!==i[e])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e,n);case"string":return r===We(e,t,r.length);default:return!1}}(e,t,n,r)))}function We(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let e=0;e<n;e++)i+=String.fromCharCode(r.getUint8(t+e));return i}const Ge=262144;function He(e,t){return d?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();null!=t&&t._streamReadAhead&&(r=n.read());const{done:i,value:o}=await e;if(i)return;yield I(o)}}catch(e){n.releaseLock()}}(e,t):async function*(e,t){for await(const t of e)yield I(t)}(e)}function Qe(e,t){if("string"==typeof e)return function*(e,t){const n=(null==t?void 0:t.chunkSize)||262144;let r=0;const i=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),o=e.slice(r,r+t);r+=t,yield i.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function*(e,t={}){const{chunkSize:n=Ge}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),i=new ArrayBuffer(t),o=new Uint8Array(e,r,t);new Uint8Array(i).set(o),r+=t,yield i}}(e,t);if(W(e))return async function*(e,t){const n=(null==t?void 0:t.chunkSize)||1048576;let r=0;for(;r<e.size;){const t=r+n,i=await e.slice(r,t).arrayBuffer();r=t,yield i}}(e,t);if(G(e))return He(e,t);if(V(e)){return He(e.body,t)}throw new Error("makeIterator")}const $e="Cannot convert supplied data type";async function qe(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||r)return function(e,t,n){if(t.text&&"string"==typeof e)return e;var r;if((r=e)&&"object"==typeof r&&r.isBuffer&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error($e)}(e,t);if(W(e)&&(e=await K(e)),V(e)){const n=e;return await async function(e){if(!e.ok){const t=await async function(e){let t=`Failed to fetch resource ${e.url} (${e.status}): `;try{const n=e.headers.get("Content-Type");let r=e.statusText;n.includes("application/json")&&(r+=` ${await e.text()}`),t+=r,t=t.length>60?`${t.slice(60)}...`:t}catch(e){}return t}(e);throw new Error(t)}}(n),t.binary?await n.arrayBuffer():await n.text()}if(G(e)&&(e=Qe(e,n)),(i=e)&&"function"==typeof i[Symbol.iterator]||(e=>e&&"function"==typeof e[Symbol.asyncIterator])(e))return L(e);var i;throw new Error($e)}async function Ye(e,t,n,r){h(!r||"object"==typeof r),!t||Array.isArray(t)||Re(t)||(r=void 0,n=t,t=void 0),e=await e,n=n||{};const{url:i}=Z(e),o=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:null}(t,r),s=await async function(e,t=[],n,r){if(!ze(e))return null;let i=Fe(e,t,{...n,nothrow:!0},r);if(i)return i;if(W(e)&&(i=Fe(e=await e.slice(0,10).arrayBuffer(),t,n,r)),!(i||null!=n&&n.nothrow))throw new Error(Ne(e));return i}(e,o,n);return s?(r=function(e,t,n=null){if(n)return n;const r={fetch:Te(t,e),...e};return Array.isArray(r.loaders)||(r.loaders=null),r}({url:i,parse:Ye,loaders:o},n=Ce(n,s,o,i),r),await async function(e,t,n,r){if(function(e,t="3.0.12"){h(e,"no worker provided");const n=e.version}(e),t=await qe(t,e,n),e.parseTextSync&&"string"==typeof t)return n.dataType="text",e.parseTextSync(t,n,r,e);if(function(e,t){return!!C.isSupported()&&e.worker&&(null==t?void 0:t.worker)}(e,n))return await T(e,t,n,0,Ye);if(e.parseText&&"string"==typeof t)return await e.parseText(t,n,r,e);if(e.parse)return await e.parse(t,n,r,e);throw h(!e.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}(s,e,n,r)):null}async function Ze(e,t,n,r){Array.isArray(t)||Re(t)||(n=t,t=void 0);const i=Te(n);let o=e;return"string"==typeof e&&(o=await i(e)),W(e)&&(o=await i(e)),await Ye(o,t,n)}function Xe(e,t){if(!e)throw new Error(t)}const Ke={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Je=Ke.global||Ke.self||Ke.window,et="object"!=typeof process||"[object process]"!==String(process)||process.browser,tt="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);tt&&parseFloat(tt[1]);const{_parseImageNode:nt}=Je,rt="undefined"!=typeof Image,it="undefined"!=typeof ImageBitmap,ot=Boolean(nt),st=!!et||ot;function at(e){const t=function(e){if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)return"imagebitmap";if("undefined"!=typeof Image&&e instanceof Image)return"image";if(e&&"object"==typeof e&&e.data&&e.width&&e.height)return"data";return null}(e);if(!t)throw new Error("Not an image");return t}const At=/^data:image\/svg\+xml/,lt=/\.svg((\?|#).*)?$/;function ut(e){return e&&(At.test(e)||lt.test(e))}function ct(e,t){if(ut(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function dt(e,t,n){const r=function(e,t){if(ut(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(e){throw new Error(e.message)}return`data:image/svg+xml;base64,${btoa(t)}`}return ct(e,t)}(e,n),i=self.URL||self.webkitURL,o="string"!=typeof r&&i.createObjectURL(r);try{return await async function(e,t){const n=new Image;if(n.src=e,t.image&&t.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((t,r)=>{try{n.onload=()=>t(n),n.onerror=t=>r(new Error(`Could not load image ${e}: ${t}`))}catch(e){r(e)}}))}(o||r,t)}finally{o&&i.revokeObjectURL(o)}}const ft={};let ht=!0;async function pt(e,t,n){let r;if(ut(n)){r=await dt(e,t,n)}else r=ct(e,n);const i=t&&t.imagebitmap;return await async function(e,t=null){!function(e){for(const t in e||ft)return!1;return!0}(t)&&ht||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(e){console.warn(e),ht=!1}return await createImageBitmap(e)}(r,i)}const gt=!1,mt=!0;function vt(e){const t=yt(e);return function(e){const t=yt(e);if(!(t.byteLength>=24&&2303741511===t.getUint32(0,gt)))return null;return{mimeType:"image/png",width:t.getUint32(16,gt),height:t.getUint32(20,gt)}}(t)||function(e){const t=yt(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,gt)&&255===t.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)e.add(t);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let i=2;for(;i+9<t.byteLength;){const e=t.getUint16(i,gt);if(r.has(e))return{mimeType:"image/jpeg",height:t.getUint16(i+5,gt),width:t.getUint16(i+7,gt)};if(!n.has(e))return null;i+=2,i+=t.getUint16(i,gt)}return null}(t)||function(e){const t=yt(e);if(!(t.byteLength>=10&&1195984440===t.getUint32(0,gt)))return null;return{mimeType:"image/gif",width:t.getUint16(6,mt),height:t.getUint16(8,mt)}}(t)||function(e){const t=yt(e);if(!(t.byteLength>=14&&16973===t.getUint16(0,gt)&&t.getUint32(2,mt)===t.byteLength))return null;return{mimeType:"image/bmp",width:t.getUint32(18,mt),height:t.getUint32(22,mt)}}(t)}function yt(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const bt={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(e,t,n){const r=((t=t||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(e){switch(e){case"auto":case"data":return function(){if(it)return"imagebitmap";if(rt)return"image";if(st)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return it||rt||st;case"imagebitmap":return it;case"image":return rt;case"data":return st;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}(e),e}}(r)){case"imagebitmap":o=await pt(e,t,i);break;case"image":o=await dt(e,t,i);break;case"data":o=await function(e,t){const{mimeType:n}=vt(e)||{},{_parseImageNode:r}=Je;return Xe(r),r(e,n,t)}(e,t);break;default:Xe(!1)}return"data"===r&&(o=function(e){switch(at(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}(o)),o},tests:[e=>Boolean(vt(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};var wt={},_t={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(_t);var xt={exports:{}};!function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(xt);var Et={},St=_t.exports;Object.defineProperty(Et,"__esModule",{value:!0}),Et.console=Et.process=Et.document=Et.global=Et.window=Et.self=void 0;var Pt=St(xt.exports),kt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,Pt.default)(process))&&process},Ct=kt.self||kt.window||kt.global;Et.self=Ct;var Tt=kt.window||kt.self||kt.global;Et.window=Tt;var Mt=kt.global||kt.self||kt.window;Et.global=Mt;var It=kt.document||{};Et.document=It;var Lt=kt.process||{};Et.process=Lt;var Rt=console;Et.console=Rt;var Ot={},Dt={},Bt=_t.exports;Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=function(e){if("undefined"!=typeof window&&"object"===(0,Ft.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===(0,Ft.default)(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,Ft.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;if(n&&n.indexOf("Electron")>=0)return!0;return!1};var Ft=Bt(xt.exports);var zt=_t.exports;Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=Ut,Ot.isBrowserMainThread=function(){return Ut()&&"undefined"!=typeof document};var Nt=zt(xt.exports),jt=zt(Dt);function Ut(){return!("object"===("undefined"==typeof process?"undefined":(0,Nt.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,jt.default)()}var Vt={},Wt=_t.exports;Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.isMobile=function(){return void 0!==Gt.window.orientation},Vt.default=function(e){if(!e&&!(0,Ht.default)())return"Node";if((0,Qt.default)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");if(r||i)return"IE";if(Gt.window.chrome)return"Chrome";if(Gt.window.safari)return"Safari";if(Gt.window.mozInnerScreenX)return"Firefox";return"Unknown"};var Gt=Et,Ht=Wt(Ot),Qt=Wt(Dt);!function(e){var t=_t.exports,n=xt.exports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return r.self}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return r.window}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return r.global}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return r.document}}),Object.defineProperty(e,"process",{enumerable:!0,get:function(){return r.process}}),Object.defineProperty(e,"console",{enumerable:!0,get:function(){return r.console}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"isBrowserMainThread",{enumerable:!0,get:function(){return i.isBrowserMainThread}}),Object.defineProperty(e,"getBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),Object.defineProperty(e,"isElectron",{enumerable:!0,get:function(){return s.default}});var r=Et,i=A(Ot),o=A(Vt),s=t(Dt);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var A=o?Object.getOwnPropertyDescriptor(e,s):null;A&&(A.get||A.set)?Object.defineProperty(i,s,A):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}}(wt);var $t=wt,qt=new ye({id:"deck"});const Yt={attributeUpdateMessages:[]};let Zt={};function Xt(e){qt.level>0&&Zt[e]&&Zt[e].call(...arguments)}Zt=(e=>({"layer.changeFlag":(t,n,r)=>{e.log(3,"".concat(t.id," ").concat(n,": "),r[n])()},"layer.initialize":t=>{e.log(1,"Initializing ".concat(t))()},"layer.update":(t,n)=>{if(n){const n=t.getChangeFlags();e.log(2,"Updating ".concat(t," because: ").concat(Object.keys(n).filter((e=>n[e])).join(", ")))()}else e.log(4,"".concat(t," does not need update"))()},"layer.matched":(t,n)=>{n&&e.log(4,"Matched ".concat(t,", state transfered"))()},"layer.finalize":t=>{e.log(1,"Finalizing ".concat(t))()},"compositeLayer.renderLayers":(t,n,r)=>{n?e.log(2,"Composite layer rendered new subLayers ".concat(t),r)():e.log(4,"Composite layer reused subLayers ".concat(t),r)()},"layerManager.setLayers":(t,n,r)=>{n&&e.log(2,"Updating ".concat(r.length," deck layers"))()},"layerManager.activateViewport":(t,n)=>{e.log(3,"Viewport changed",n)()},"attributeManager.invalidate":(t,n,r)=>{e.log(1,r?"invalidated attributes ".concat(r," (").concat(n,") for ").concat(t.id):"invalidated all attributes for ".concat(t.id))()},"attributeManager.updateStart":e=>{Yt.attributeUpdateMessages.length=0,Yt.attributeManagerUpdateStart=Date.now()},"attributeManager.updateEnd":(t,n)=>{const r=Math.round(Date.now()-Yt.attributeManagerUpdateStart);e.groupCollapsed(2,"Updated attributes for ".concat(n," instances in ").concat(t.id," in ").concat(r,"ms"))();for(const t of Yt.attributeUpdateMessages)e.log(3,t)();e.groupEnd(2)()},"attribute.updateStart":e=>{Yt.attributeUpdateStart=Date.now()},"attribute.allocate":(e,t)=>{const n="".concat(e.id," allocated ").concat(t);Yt.attributeUpdateMessages.push(n)},"attribute.updateEnd":(e,t)=>{const n=Math.round(Date.now()-Yt.attributeUpdateStart),r="".concat(e.id," updated ").concat(t," in ").concat(n,"ms");Yt.attributeUpdateMessages.push(r)},"deckRenderer.renderLayers":(t,n,r)=>{const{pass:i,redrawReason:o,stats:s}=r;for(const r of n){const{totalCount:n,visibleCount:a,compositeCount:A,pickableCount:l}=r,u=n-A-a;e.log(2,"RENDER #".concat(t.renderCount,"   ").concat(a," (of ").concat(n," layers) to ").concat(i," because ").concat(o,"   (").concat(u," hidden, ").concat(A," composite ").concat(l," pickable)"))(),s&&s.get("Redraw Layers").add(a)}}}))(qt);var Kt={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};const Jt="8.5.10",en=$t.global.deck&&$t.global.deck.VERSION;if(en&&en!==Jt)throw new Error("deck.gl - multiple versions detected: ".concat(en," vs ").concat(Jt));en||(qt.log(1,"deck.gl ".concat(Jt))(),$t.global.deck=Object.assign($t.global.deck||{},{VERSION:Jt,version:Jt,log:qt,_registerLoggers:function(e){Zt=e}}),function(e){const t=De();e=Array.isArray(e)?e:[e];for(const n of e){const e=Oe(n);t.find((t=>e===t))||t.unshift(e)}}([Kt,[bt,{imagebitmap:{premultiplyAlpha:"none"}}]]));var tn=$t.global.deck;const nn=new ye({id:"luma.gl"});function rn(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function on(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&Number.isFinite(e._version)))}function sn(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function an(e){return rn(on(e),"Invalid WebGLRenderingContext"),e}function An(e){return rn(sn(e),"Requires WebGL2"),e}const ln={};function un(e,t){var n;ln[e]=!0,void 0!==t&&(n=t,$t.global.console&&$t.global.console.error&&$t.global.console.error(n))}const cn=function e(t){const n=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let t=0;t<this.attribs.length;t++){const r=new e.VertexAttrib(n);this.attribs[t]=r}this.maxAttrib=0};(cn.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const dn=function(e){const t=this;this.gl=e,function(e){const t=e.getError;e.getError=function(){let n;do{n=t.apply(e),0!==n&&(ln[n]=!0)}while(0!==n);for(n in ln)if(ln[n])return delete ln[n],parseInt(n,10);return 0}}(e);const n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){const r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);const i=r.attribs[e];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){const r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);const i=r.attribs[e];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,r){switch(e){case 34962:t.currentArrayBuffer=r;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,r){const i=t.currentVertexArrayObject,o=i.attribs[e];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,r,i,o,s,a){const A=t.currentVertexArrayObject;A.maxAttrib=Math.max(A.maxAttrib,e);const l=A.attribs[e];return l.buffer=t.currentArrayBuffer,l.size=r,l.type=i,l.normalized=o,l.stride=s,l.offset=a,l.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(()=>{var e;e="OESVertexArrayObject emulation library context restored",$t.global.console&&$t.global.console.log&&$t.global.console.log(e),t.reset_()}),!0),this.reset_()};dn.prototype.VERTEX_ARRAY_BINDING_OES=34229,dn.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new cn(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},dn.prototype.createVertexArrayOES=function(){const e=new cn(this);return this.vertexArrayObjects.push(e),e},dn.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},dn.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof cn&&e.hasBeenBound&&e.ext===this)},dn.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void un(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(t,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let e=0;e<=s;e++){const s=i.attribs[e],a=r?r.attribs[e]:null;if(r&&s.enabled===a.enabled||(s.enabled?n.enableVertexAttribArray.call(t,e):n.disableVertexAttribArray.call(t,e)),s.enabled){let i=!1;r&&s.buffer===a.buffer||(o!==s.buffer&&(n.bindBuffer.call(t,34962,s.buffer),o=s.buffer),i=!0),(i||s.cached!==a.cached)&&n.vertexAttribPointer.call(t,e,s.size,s.type,s.normalized,s.stride,s.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(t,34962,this.currentArrayBuffer)};const fn="OES_element_index",hn="WEBGL_draw_buffers",pn="WEBGL_debug_renderer_info",gn=e=>sn(e)?void 0:0,mn={3074:e=>sn(e)?void 0:36064,35723:e=>sn(e)?void 0:4352,35977:gn,32937:gn,36795:(e,t)=>{const n=sn(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0},37445:(e,t)=>{const n=e.getExtension(pn);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(e,t)=>{const n=e.getExtension(pn);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(e,t)=>{const n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:gn,35071:gn,37447:gn,36063:(e,t)=>{if(!sn(e)){const n=e.getExtension(hn);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:gn,35374:gn,35377:gn,34852:e=>{if(!sn(e)){const t=e.getExtension(hn);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},36203:e=>e.getExtension(fn)?2147483647:65535,33001:e=>e.getExtension(fn)?16777216:65535,33e3:e=>16777216,37157:gn,35373:gn,35657:gn,36183:gn,37137:gn,34045:gn,35978:gn,35979:gn,35968:gn,35376:gn,35375:gn,35659:gn,37154:gn,35371:gn,35658:gn,35076:gn,35077:gn,35380:gn};const vn="ANGLE_instanced_arrays";const yn={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{rn(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[vn]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){rn(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{rn(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{rn(!1)},deleteQuery:()=>{rn(!1)},beginQuery:()=>{rn(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},bn={readBuffer:(e,t,n)=>{sn(e)&&t(n)},getVertexAttrib:(e,t,n,r)=>{const{webgl2:i,ext:o}=function(e,t){return{webgl2:sn(e),ext:e.getExtension(t)}}(e,vn);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:t(n,r)},getProgramParameter:(e,t,n,r)=>{if(!sn(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:(e,t,n,r,i)=>sn(e)||32937!==i?e.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(e,t,n,r){if(34046===r){const{extensions:t}=e.luma,n=t.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){const r=mn[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:(e,t,n,r)=>t(n,r)};function wn(e,{extension:t,target:n,target2:r}){const i=yn[t];rn(i);const{meta:o={}}=i,{suffix:s=""}=o,a=e.getExtension(t);for(const t of Object.keys(i)){const o=`${t}${s}`;let A=null;"meta"===t||"function"==typeof e[t]||(a&&"function"==typeof a[o]?A=(...e)=>a[o](...e):"function"==typeof i[t]&&(A=i[t].bind(n))),A&&(n[t]=A,r[t]=A)}}("undefined"!=typeof global?global:window).polyfillContext=function(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(!function(e){if("function"==typeof e.createVertexArray)return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};const n=e.getExtension;e.getExtension=function(t){return n.call(this,t)||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new dn(this)),this.__OESVertexArrayObject))}}(e),function(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const n of t)e.luma[n]=e.getExtension(n)}(e),function(e,t){for(const n of Object.getOwnPropertyNames(t))"overrides"!==n&&wn(e,{extension:n,target:e.luma,target2:e})}(e,yn),function(e,{target:t,target2:n}){Object.keys(bn).forEach((r=>{if("function"==typeof bn[r]){const i=e[r]?e[r].bind(e):()=>{},o=bn[r].bind(null,e,i);t[r]=o,n[r]=o}}))}(e,{target:t,target2:e}),t.polyfilled=!0),e};const _n={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},xn=(e,t,n)=>t?e.enable(n):e.disable(n),En=(e,t,n)=>e.hint(n,t),Sn=(e,t,n)=>e.pixelStorei(n,t);function Pn(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const kn={3042:xn,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:xn,2885:(e,t)=>e.cullFace(t),2929:xn,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:xn,35723:En,36006:(e,t)=>{const n=sn(e)?36009:36160;return e.bindFramebuffer(n,t)},2886:(e,t)=>e.frontFace(t),33170:En,2849:(e,t)=>e.lineWidth(t),32823:xn,32824:"polygonOffset",10752:"polygonOffset",35977:xn,32938:"sampleCoverage",32939:"sampleCoverage",3089:xn,3088:(e,t)=>e.scissor(...t),2960:xn,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),3333:Sn,3317:Sn,37440:Sn,37441:Sn,37443:Sn,3330:Sn,3332:Sn,3331:Sn,36010:(e,t)=>e.bindFramebuffer(36008,t),3314:Sn,32878:Sn,3316:Sn,3315:Sn,32877:Sn,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Pn(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Pn(t)&&2===t.length?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Pn(t)?t:[t,t];const[n,r]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,r)},stencilFunc:(e,t)=>{t=Pn(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilFuncSeparate(1028,n,r,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Pn(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilOpSeparate(1028,n,r,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function Cn(e,t,n){return void 0!==t[e]?t[e]:n[e]}const Tn={blendEquation:(e,t,n)=>e.blendEquationSeparate(Cn(32777,t,n),Cn(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(Cn(32969,t,n),Cn(32968,t,n),Cn(32971,t,n),Cn(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(Cn(32824,t,n),Cn(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(Cn(32938,t,n),Cn(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,Cn(2962,t,n),Cn(2967,t,n),Cn(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,Cn(34816,t,n),Cn(36003,t,n),Cn(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,Cn(2964,t,n),Cn(2965,t,n),Cn(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,Cn(34817,t,n),Cn(34818,t,n),Cn(34819,t,n))},Mn={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},blendColor:(e,t,n,r,i)=>e({32773:new Float32Array([t,n,r,i])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,r,i)=>e({32969:t,32968:n,32971:r,32970:i}),clearColor:(e,t,n,r,i)=>e({3106:new Float32Array([t,n,r,i])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,r,i)=>e({3107:[t,n,r,i]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,r,i)=>e({3088:new Int32Array([t,n,r,i])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,r)=>e({2962:t,2967:n,2963:r,34816:t,36003:n,36004:r}),stencilFuncSeparate:(e,t,n,r,i)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:r,[1028===t?2963:36004]:i}),stencilOp:(e,t,n,r)=>e({2964:t,2965:n,2966:r,34817:t,34818:n,34819:r}),stencilOpSeparate:(e,t,n,r,i)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:r,[1028===t?2966:34819]:i}),viewport:(e,t,n,r,i)=>e({2978:[t,n,r,i]})},In=(e,t)=>e.isEnabled(t),Ln={3042:In,2884:In,2929:In,3024:In,32823:In,32926:In,32928:In,3089:In,2960:In,35977:In};function Rn(e){for(const t in e)return!1;return!0}function On(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}function Dn(e,t){const n=e[t].bind(e);e[t]=function(...t){const r=t[0];return r in e.state.cache||(e.state.cache[r]=n(...t)),e.state.enable?e.state.cache[r]:n(...t)},Object.defineProperty(e[t],"name",{value:`${t}-from-cache`,configurable:!1})}function Bn(e,t,n){const r=e[t].bind(e);e[t]=function(...t){const{valueChanged:i,oldValue:o}=n(e.state._updateCache,...t);return i&&r(...t),o},Object.defineProperty(e[t],"name",{value:`${t}-to-cache`,configurable:!1})}class Fn{constructor(e,{copyState:t=!1,log:n=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(e,t){if("number"==typeof(t=t||_n)){const n=t,r=Ln[n];return r?r(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),r={};for(const t of n){const n=Ln[t];r[t]=n?n(e,Number(t)):e.getParameter(Number(t))}return r}(e):Object.assign({},_n),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){rn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];jn(this.gl,e),this.stateStack.pop()}_updateCache(e){let t,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in e){rn(void 0!==i);const o=e[i],s=this.cache[i];On(o,s)||(n=!0,t=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:t}}}function zn(e,t={}){const{enable:n=!0,copyState:r}=t;if(rn(void 0!==r),!e.state){const t="undefined"!=typeof global?global:window,{polyfillContext:n}=t;n&&n(e),e.state=new Fn(e,{copyState:r}),function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}(e);for(const t in Mn){Bn(e,t,Mn[t])}Dn(e,"getParameter"),Dn(e,"isEnabled")}return e.state.enable=n,e}function Nn(e){rn(e.state),e.state.pop()}function jn(e,t){if(rn(on(e),"setParameters requires a WebGL context"),Rn(t))return;const n={};for(const r in t){const i=Number(r),o=kn[r];o&&("string"==typeof o?n[o]=!0:o(e,t[r],i))}const r=e.state&&e.state.cache;if(r)for(const i in n){(0,Tn[i])(e,t,r)}}function Un(e,t,n){if(Rn(t))return n(e);const{nocatch:r=!0}=t;let i;if(function(e){e.state||zn(e,{copyState:!1}),e.state.push()}(e),jn(e,t),r)i=n(e),Nn(e);else try{i=n(e)}finally{Nn(e)}return i}function Vn(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:n}=t.canvasSizeInfo;return n?e.drawingBufferWidth/n:1}return 1}function Wn(e,t,n=!0){return function(e,t,n,r,i){const o=Gn(e[0],t,n);let s=Hn(e[1],t,r,i),a=Gn(e[0]+1,t,n);const A=a===n-1?a:a-1;let l;a=Hn(e[1]+1,t,r,i),i?(a=0===a?a:a+1,l=s,s=a):l=a===r-1?a:a-1;return{x:o,y:s,width:Math.max(A-o+1,1),height:Math.max(l-s+1,1)}}(t,Vn(e),e.drawingBufferWidth,e.drawingBufferHeight,n)}function Gn(e,t,n){return Math.min(Math.round(e*t),n-1)}function Hn(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}const Qn=$t.isBrowser(),$n=Qn&&"undefined"!=typeof document,qn={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Yn(e={}){rn(Qn,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),e=Object.assign({},qn,e);const{width:t,height:n}=e;function r(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}let i;e.onError=r;const{canvas:o}=e,s=function({canvas:e,width:t=800,height:n=600,onError:r}){let i;if("string"==typeof e){$n&&"complete"===document.readyState||r(`createGLContext called on canvas '${e}' before page was loaded`),i=document.getElementById(e)}else e?i=e:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(t)?`${t}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",document.body.insertBefore(i,document.body.firstChild));return i}({canvas:o,width:t,height:n,onError:r});return i=function(e,t){const{onError:n}=t;let r=null;const i=e=>r=e.statusMessage||r;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=t;let a=null;s&&(a=a||e.getContext("webgl2",t),a=a||e.getContext("experimental-webgl2",t));o&&(a=a||e.getContext("webgl",t),a=a||e.getContext("experimental-webgl",t));if(e.removeEventListener("webglcontextcreationerror",i,!1),!a)return n(`Failed to create ${s&&!o?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`);t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1);t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1);return a}(s,e),i?(i=Zn(i,e),function(e){const t=sn(e)?"WebGL2":"WebGL1",n=function(e){const t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info"),i=r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?`(${n.vendor},${n.renderer})`:"",i=e.debug?" debug":"";nn.info(1,`${t}${i} context ${r}`)()}(i),i):null}function Zn(e,t={}){if(!e||e._instrumented)return e;e._version=e._version||function(e){if("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)return 2;return 1}(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},qn,t);const{manageState:n,debug:r}=t;return n&&zn(e,{copyState:!1,log:(...e)=>nn.log(1,...e)()}),Qn&&r&&($t.global.makeDebugContext?(e=$t.global.makeDebugContext(e,t),nn.level=Math.max(nn.level,1)):nn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Xn(e,t={}){if(e.canvas){return void function(e,t,n){let r="width"in n?n.width:e.canvas.clientWidth,i="height"in n?n.height:e.canvas.clientHeight;r&&i||(nn.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,r=e.canvas.width||1,i=e.canvas.height||1);e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==t){let n=t;const o=Math.floor(r*n),s=Math.floor(i*n);e.canvas.width=o,e.canvas.height=s,e.drawingBufferWidth===o&&e.drawingBufferHeight===s||(nn.warn("Device pixel ratio clamped")(),n=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*n),e.canvas.height=Math.floor(i*n)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}(e,function(e){const t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}(t.useDevicePixels),t)}const n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}const Kn="8.5.7";const Jn=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new D({id:e})),this.stats.get(e)}};if($t.global.luma&&$t.global.luma.VERSION!==Kn)throw new Error(`luma.gl - multiple VERSIONs detected: ${$t.global.luma.VERSION} vs 8.5.7`);function er(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function tr(e,t){if("string"!=typeof t)return t;const n=Number(t);if(!isNaN(n))return n;const r=e[t=t.replace(/^.*\./,"")];return er(void 0!==r,`Accessing undefined constant GL.${t}`),r}function nr(e,t){t=Number(t);for(const n in e)if(e[n]===t)return`GL.${n}`;return String(t)}$t.global.luma||($t.isBrowser()&&nn.log(1,"luma.gl 8.5.7 - set luma.log.level=1 (or higher) to trace rendering")(),$t.global.luma=$t.global.luma||{VERSION:Kn,version:Kn,log:nn,stats:Jn,globals:{modules:{},nodeIO:{}}}),$t.global.luma;const rr={};function ir(e="id"){rr[e]=rr[e]||1;return`${e}-${rr[e]++}`}function or(e){return er("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function sr(e){let t=!0;for(const n in e){t=!1;break}return t}function ar(e,t,n,r){const i=`See luma.gl ${n} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,o=Object.getPrototypeOf(e);r.forEach((e=>{o.methodName||(o[e]=()=>{throw nn.removed(`Calling removed method ${t}.${e}: `,i)(),new Error(e)})}))}const Ar="Resource subclass must define virtual methods";class lr{constructor(e,t={}){an(e);const{id:n,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=n||ir(this.constructor.name),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach((e=>e.delete())),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){er(e=tr(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=sn(this.gl);if(!((!("webgl2"in n)||e)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const t=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return e?r:t}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:n}=e,r=this.constructor.PARAMETERS||{},i=sn(this.gl),o={},s=t||Object.keys(r);for(const t of s){const s=r[t];if(s&&(!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension))){const r=n?nr(this.gl,t):t;o[r]=this.getParameter(t,e),n&&"GLenum"===s.type&&(o[r]=nr(this.gl,o[r]))}}return o}setParameter(e,t){er(e=tr(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=sn(this.gl);if(!((!("webgl2"in n)||e)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=tr(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,n){return ar(this,e,t,n)}initialize(e){}_createHandle(){throw new Error(Ar)}_deleteHandle(){throw new Error(Ar)}_bindHandle(e){throw new Error(Ar)}_getOptsFromHandle(){throw new Error(Ar)}_getParameter(e,t){throw new Error(Ar)}_setParameter(e,t){throw new Error(Ar)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,t=Jn.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;Jn.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this.constructor.name){const n=Jn.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const t=Jn.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function ur(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function cr(e,{clamped:t=!0}={}){switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function dr({data:e,width:t,height:n}){const r=Math.round(t/2),i=Math.round(n/2),o=new Uint8Array(r*i*4);for(let n=0;n<i;n++)for(let i=0;i<r;i++)for(let s=0;s<4;s++)o[4*(n*r+i)+s]=e[4*(2*n*t+2*i)+s];return{data:o,width:r,height:i}}function fr(e,t,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const n in r)if(n in t){const t=r[n]?`${e}.${r[n]}`:"N/A";nn.removed(`${e}.${n}`,t)()}for(const n in i)if(n in t){const t=i[n];nn.deprecated(`${e}.${n}`,`${e}.${t}`)()}let s=null;for(const n in o)if(n in t){const r=o[n];nn.deprecated(`${e}.${n}`,`${e}.${r}`)(),s=s||Object.assign({},t),s[r]=t[n],delete s[n]}return s||t}const hr={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},pr={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class gr{static getBytesPerElement(e){return cr(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){er(e.size);return cr(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new gr(...[hr,...e])}constructor(...e){e.forEach((e=>this._assign(e))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return gr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return gr.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=fr("Accessor",e,pr)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const mr={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},vr={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:mr},yr={removedProps:mr};class br extends lr{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/gr.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/gr.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=fr("Buffer",e,vr),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=fr("Buffer",e,yr))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new gr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:n=0,srcOffset:r=0}=e,i=e.byteLength||e.length;er(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(An(this.gl),this.gl.bufferSubData(this.target,n,t,r,i)):this.gl.bufferSubData(o,n,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:n=0,size:r}){const{gl:i}=this;return An(i),i.bindBuffer(36662,e.handle),i.bindBuffer(36663,this.handle),i.copyBufferSubData(36662,36663,t,n,r),i.bindBuffer(36662,null),i.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:n=0,length:r=0}={}){An(this.gl);const i=cr(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),s=n;let a,A;e?(A=e.length,a=A-s):(a=Math.min(o,r||o),A=s+a);const l=Math.min(o,a);return er((r=r||l)<=l),e=e||new i(A),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,n,r),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:n=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,n,r):(er(0===n),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,n=e.byteLength+t){er(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=ur(e);return er(i),this.setAccessor(new gr(this.accessor,{type:i})),this}_setByteLength(e,t=this.usage){er(e>=0),this._trackDeallocatedMemory();let n=e;0===e&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=e/cr(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}_inferType(e){this.accessor.type||this.setAccessor(new gr(this.accessor,{type:ur(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return nn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return nn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return nn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return nn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new gr(this.accessor,e),this}}const wr={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},_r={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},xr={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const Er=[9729,9728],Sr=$t.global.WebGLBuffer||function(){};class Pr extends lr{static isSupported(e,t={}){const{format:n,linearFiltering:r}=t;let i=!0;return n&&(i=i&&function(e,t){const n=wr[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=sn(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}(e,n),i=i&&(!r||function(e,t){const n=wr[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}(e,n))),i}constructor(e,t){const{id:n=ir("texture"),handle:r,target:i}=t;super(e,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then((t=>this.initialize(Object.assign({},e,{pixels:t,data:t})))),this;const n="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(n&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",(()=>this.initialize(e))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:A={},textureUnit:l}=e;t||(t=r);let{width:u,height:c,dataFormat:d,type:f,compressed:h=!1,mipmaps:p=!0}=e;const{depth:g=0}=e;return({width:u,height:c,compressed:h,dataFormat:d,type:f}=this._deduceParameters({format:i,type:f,dataFormat:d,compressed:h,data:t,width:u,height:c})),this.width=u,this.height=c,this.depth=g,this.format=i,this.type=f,this.dataFormat=d,this.border=o,this.textureUnit=l,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),p&&this._isNPOT()&&(nn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),p=!1,this._updateForNPOT(a)),this.mipmaps=p,this.setImageData({data:t,width:u,height:c,depth:g,format:i,type:f,dataFormat:d,border:o,mipmaps:p,parameters:A,compressed:h}),p&&this.generateMipmap(),this.setParameters(a),s&&(this.data=t),n&&(this._video={video:t,parameters:a,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:n=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this}generateMipmap(e={}){return this._isNPOT()?(nn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Un(this.gl,e,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=e;let{data:A=null,type:l=this.type,width:u=this.width,height:c=this.height,dataFormat:d=this.dataFormat,compressed:f=!1}=e;A||(A=n),({type:l,dataFormat:d,compressed:f,width:u,height:c}=this._deduceParameters({format:i,type:l,dataFormat:d,compressed:f,data:A,width:u,height:c}));const{gl:h}=this;h.bindTexture(this.target,this.handle);let p,g=null;if(({data:A,dataType:g}=this._getDataType({data:A,compressed:f})),Un(this.gl,a,(()=>{switch(g){case"null":h.texImage2D(t,r,i,u,c,o,d,l,A);break;case"typed-array":h.texImage2D(t,r,i,u,c,o,d,l,A,s);break;case"buffer":p=An(h),p.bindBuffer(35052,A.handle||A),p.texImage2D(t,r,i,u,c,o,d,l,s),p.bindBuffer(35052,null);break;case"browser-object":sn(h)?h.texImage2D(t,r,i,u,c,o,d,l,A):h.texImage2D(t,r,i,d,l,A);break;case"compressed":for(const[e,n]of A.entries())h.compressedTexImage2D(t,e,n.format,n.width,n.height,o,n.data);break;default:er(!1,"Unknown image data type")}})),A&&A.byteLength)this._trackAllocatedMemory(A.byteLength,"Texture");else{const e=_r[this.dataFormat]||4,t=xr[this.type]||1;this._trackAllocatedMemory(this.width*this.height*e*t,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:n=null,x:r=0,y:i=0,width:o=this.width,height:s=this.height,level:a=0,format:A=this.format,type:l=this.type,dataFormat:u=this.dataFormat,compressed:c=!1,offset:d=0,border:f=this.border,parameters:h={}}){if(({type:l,dataFormat:u,compressed:c,width:o,height:s}=this._deduceParameters({format:A,type:l,dataFormat:u,compressed:c,data:n,width:o,height:s})),er(0===this.depth,"texSubImage not supported for 3D textures"),n||(n=t),n&&n.data){const e=n;n=e.data,o=e.shape[0],s=e.shape[1]}n instanceof br&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),Un(this.gl,h,(()=>{if(c)this.gl.compressedTexSubImage2D(e,a,r,i,o,s,A,n);else if(null===n)this.gl.texSubImage2D(e,a,r,i,o,s,u,l,null);else if(ArrayBuffer.isView(n))this.gl.texSubImage2D(e,a,r,i,o,s,u,l,n,d);else if(n instanceof Sr){const t=An(this.gl);t.bindBuffer(35052,n),t.texSubImage2D(e,a,r,i,o,s,u,l,d),t.bindBuffer(35052,null)}else if(sn(this.gl)){An(this.gl).texSubImage2D(e,a,r,i,o,s,u,l,n)}else this.gl.texSubImage2D(e,a,r,i,u,l,n)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return nn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof br?{data:e.handle,dataType:"buffer"}:e instanceof Sr?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:n}=e;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=e;const A=wr[t];return o=o||A&&A.dataFormat,s=s||A&&A.types[0],a=a||A&&A.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:t,data:n}}_deduceImageSize(e,t,n){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},er(r,"Could not deduced texture size"),er(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),er(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:er(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!sn(this.gl)&&(!(!this.width||!this.height)&&(!or(this.width)||!or(this.height)))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Er.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}class kr extends Pr{static isSupported(e,t){return Pr.isSupported(e,t)}constructor(e,t={}){var n,r;an(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:(n=t.data,er("string"==typeof n),n=""+n,new Promise(((e,t)=>{try{const i=new Image;i.onload=()=>e(i),i.onerror=()=>t(new Error(`Could not load image ${n}.`)),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(e){t(e)}})))})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Cr=[34069,34070,34071,34072,34073,34074];class Tr extends Pr{constructor(e,t={}){an(e),super(e,Object.assign({},t,{target:34067})),this.initialize(t),Object.seal(this)}initialize(e={}){const{mipmaps:t=!0,parameters:n={}}=e;return this.opts=e,this.setCubeMapImageData(e).then((()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setParameters(n)})),this}subImage({face:e,data:t,x:n=0,y:r=0,mipmapLevel:i=0}){return this._subImage({target:e,data:t,x:n,y:r,mipmapLevel:i})}async setCubeMapImageData({width:e,height:t,pixels:n,data:r,border:i=0,format:o=6408,type:s=5121}){const{gl:a}=this,A=n||r,l=await Promise.all(Cr.map((e=>{const t=A[e];return Promise.all(Array.isArray(t)?t:[t])})));this.bind(),Cr.forEach(((n,r)=>{l[r].length>1&&!1!==this.opts.mipmaps&&nn.warn(`${this.id} has mipmap and multiple LODs.`)(),l[r].forEach(((r,A)=>{e&&t?a.texImage2D(n,A,o,e,t,i,o,s,r):a.texImage2D(n,A,o,o,s,r)}))})),this.unbind()}setImageDataForFace(e){const{face:t,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:A=5121}=e,{gl:l}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?l.texImage2D(t,0,a,n,r,s,a,A,u):l.texImage2D(t,0,a,a,A,u),this}}Tr.FACES=Cr;class Mr extends Pr{static isSupported(e){return sn(e)}constructor(e,t={}){An(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:n,height:r,depth:i=1,border:o=0,format:s,type:a=5121,offset:A=0,data:l,parameters:u={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Un(this.gl,u,(()=>{ArrayBuffer.isView(l)&&this.gl.texImage3D(this.target,e,t,n,r,i,o,s,a,l),l instanceof br&&(this.gl.bindBuffer(35052,l.handle),this.gl.texImage3D(this.target,e,t,n,r,i,o,s,a,A))})),l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const e=_r[this.dataFormat]||4,t=xr[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*e*t,"Texture")}return this.loaded=!0,this}}const Ir="EXT_color_buffer_float";var Lr={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ir,bpp:2},33327:{gl2:Ir,bpp:4},34842:{gl2:Ir,bpp:8},33326:{gl2:Ir,bpp:4},33328:{gl2:Ir,bpp:8},34836:{gl2:Ir,bpp:16},35898:{gl2:Ir,bpp:4}};class Rr extends lr{static isSupported(e,{format:t}={format:null}){return!t||function(e,t,n){const r=n[t];if(!r)return!1;const i=sn(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}(e,t,Lr)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:n=1,samples:r=0}){return er(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&sn(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,t,n):this.gl.renderbufferStorage(36161,e,t,n),this.format=e,this.width=t,this.height=n,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Lr[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,e)}}const Or="clear: bad arguments";function Dr(e,{framebuffer:t=null,color:n=null,depth:r=null,stencil:i=null}={}){const o={};t&&(o.framebuffer=t);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),er(0!==s,Or),Un(e,o,(()=>{e.clear(s)}))}function Br(e,t={}){const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:A,sourceType:l}=t;const{framebuffer:u,deleteFramebuffer:c}=zr(e);er(u);const{gl:d,handle:f,attachments:h}=u;a=a||u.width,A=A||u.height,36064===o&&null===f&&(o=1028),er(h[o]),l=l||h[o].type,s=function(e,t,n,r,i){if(e)return e;const o=cr(t=t||5121,{clamped:!1}),s=function(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return er(!1),0}}(n);return new o(r*i*s)}(s,l,i,a,A),l=l||ur(s);const p=d.bindFramebuffer(36160,f);return d.readPixels(n,r,a,A,i,l,s),d.bindFramebuffer(36160,p||null),c&&u.delete(),s}function Fr(e,{sourceAttachment:t=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}={}){let r=Br(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>n;)({data:r,width:i,height:o}=dr({data:r,width:i,height:o}));!function({data:e,width:t,height:n,bytesPerPixel:r=4,temp:i}){const o=t*r;i=i||new Uint8Array(o);for(let t=0;t<n/2;++t){const r=t*o,s=(n-t-1)*o;i.set(e.subarray(r,r+o)),e.copyWithin(r,s,s+o),e.set(i,s)}}({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),A=a.createImageData(i,o);return A.data.set(r),a.putImageData(A,0,0),s.toDataURL()}function zr(e){return e instanceof Hr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:$r(e),deleteFramebuffer:!0}}const Nr="TIMER_QUERY",jr="ELEMENT_INDEX_UINT32";var Ur={["WEBGL2"]:[!1,!0],["VERTEX_ARRAY_OBJECT"]:["OES_vertex_array_object",!0],[Nr]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],["INSTANCED_RENDERING"]:["ANGLE_instanced_arrays",!0],["MULTIPLE_RENDER_TARGETS"]:["WEBGL_draw_buffers",!0],[jr]:["OES_element_index_uint",!0],["BLEND_EQUATION_MINMAX"]:["EXT_blend_minmax",!0],["FLOAT_BLEND"]:["EXT_float_blend"],["COLOR_ENCODING_SRGB"]:["EXT_sRGB",!0],["TEXTURE_DEPTH"]:["WEBGL_depth_texture",!0],["TEXTURE_FLOAT"]:["OES_texture_float",!0],["TEXTURE_HALF_FLOAT"]:["OES_texture_half_float",!0],["TEXTURE_FILTER_LINEAR_FLOAT"]:["OES_texture_float_linear"],["TEXTURE_FILTER_LINEAR_HALF_FLOAT"]:["OES_texture_half_float_linear"],["TEXTURE_FILTER_ANISOTROPIC"]:["EXT_texture_filter_anisotropic"],["COLOR_ATTACHMENT_RGBA32F"]:[function(e){const t=new kr(e,{format:6408,type:5126,dataFormat:6408}),n=new Hr(e,{id:"test-framebuffer",check:!1,attachments:{36064:t}}),r=n.getStatus();return t.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],["COLOR_ATTACHMENT_FLOAT"]:[!1,"EXT_color_buffer_float"],["COLOR_ATTACHMENT_HALF_FLOAT"]:["EXT_color_buffer_half_float"],["GLSL_FRAG_DATA"]:["WEBGL_draw_buffers",!0],["GLSL_FRAG_DEPTH"]:["EXT_frag_depth",!0],["GLSL_DERIVATIVES"]:["OES_standard_derivatives",!0],["GLSL_TEXTURE_LOD"]:["EXT_shader_texture_lod",!0]};function Vr(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>Wr(e,t)))}function Wr(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){const n=Ur[t];let r;er(n,t);const i=sn(e)&&n[1]||n[0];if("function"==typeof i)r=i(e);else if(Array.isArray(i)){r=!0;for(const t of i)r=r&&Boolean(e.getExtension(t))}else"string"==typeof i?r=Boolean(e.getExtension(i)):"boolean"==typeof i?r=i:er(!1);return r}(e,t)),e.luma.caps[t]||nn.log(2,`Feature: ${t} not supported`)(),e.luma.caps[t]}const Gr="Multiple render targets not supported";class Hr extends lr{static isSupported(e,t={}){const{colorBufferFloat:n,colorBufferHalfFloat:r}=t;let i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Hr(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=An(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=An(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:n=null,color:r=!0,depth:i=!0,stencil:o=!1,check:s=!0,readBuffer:a,drawBuffers:A}){if(er(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,n)for(const r in n){const i=n[r];(Array.isArray(i)?i[0]:i).resize({width:e,height:t})}else n=this._createDefaultAttachments(r,i,o,e,t);this.update({clearAttachments:!0,attachments:n,readBuffer:a,drawBuffers:A}),n&&s&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:n,clearAttachments:r=!1,resizeAttachments:i=!0}){this.attach(e,{clearAttachments:r,resizeAttachments:i});const{gl:o}=this,s=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),n&&this._setDrawBuffers(n),o.bindFramebuffer(36160,s||null),this}resize(e={}){let{width:t,height:n}=e;if(null===this.handle)return er(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&nn.log(2,`Resizing framebuffer ${this.id} to ${t}x${n}`)();for(const e in this.attachments)this.attachments[e].resize({width:t,height:n});return this.width=t,this.height=n,this}attach(e,{clearAttachments:t=!1,resizeAttachments:n=!0}={}){const r={};t&&Object.keys(this.attachments).forEach((e=>{r[e]=null})),Object.assign(r,e);const i=this.gl.bindFramebuffer(36160,this.handle);for(const e in r){er(void 0!==e,"Misspelled framebuffer binding point?");const t=Number(e),i=r[t];let o=i;if(o)if(o instanceof Rr)this._attachRenderbuffer({attachment:t,renderbuffer:o});else if(Array.isArray(i)){const[e,n=0,r=0]=i;o=e,this._attachTexture({attachment:t,texture:e,layer:n,level:r})}else this._attachTexture({attachment:t,texture:o,layer:0,level:0});else this._unattach(t);n&&o&&o.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((e=>!this.attachments[e])).forEach((e=>{delete this.attachments[e]}))}checkStatus(){const e=this.getStatus();if(36053!==e)throw new Error(function(e){return(Hr.STATUS||{})[e]||`Framebuffer error ${e}`}(e));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}clear(e={}){const{color:t,depth:n,stencil:r,drawBuffers:i=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&Dr(this.gl,{color:t,depth:n,stencil:r}),i.forEach(((e,t)=>{!function(e,{framebuffer:t=null,buffer:n=6144,drawBuffer:r=0,value:i=[0,0,0,0]}={}){An(e),Un(e,{framebuffer:t},(()=>{switch(n){case 6144:switch(i.constructor){case Int32Array:e.clearBufferiv(n,r,i);break;case Uint32Array:e.clearBufferuiv(n,r,i);break;case Float32Array:default:e.clearBufferfv(n,r,i)}break;case 6145:e.clearBufferfv(6145,0,[i]);break;case 6146:e.clearBufferiv(6146,0,[i]);break;case 34041:const[t,o]=i;e.clearBufferfi(34041,0,t,o);break;default:er(!1,Or)}}))}(this.gl,{drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return nn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return nn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return nn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return nn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return nn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return nn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:n=0,width:r,height:i}){const o=An(this.gl),s=o.bindFramebuffer(36008,this.handle);return 0===t&&0===n&&void 0===r&&void 0===i?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,n,r,i),o.bindFramebuffer(36008,s),this}getAttachmentParameter(e,t,n){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=nr(this.gl,r)),r}getAttachmentParameters(e=36064,t,n=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const i of n){r[t?nr(this.gl,i):i]=this.getAttachmentParameter(e,i,t)}return r}getParameters(e=!0){const t=Object.keys(this.attachments),n={};for(const r of t){const t=Number(r);n[e?nr(this.gl,t):t]=this.getAttachmentParameters(t,e)}return n}show(){return"undefined"!=typeof window&&window.open(Fr(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>nn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const n=Fr(this,{targetMaxHeight:100});return nn.image({logLevel:e,message:t,image:n},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,n,r,i){let o=null;return e&&(o=o||{},o[36064]=new kr(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&n?(o=o||{},o[33306]=new Rr(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new Rr(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&er(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof Rr?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:n}=this;n.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:n,level:r}){const{gl:i}=this;switch(i.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:An(i).framebufferTextureLayer(36160,e,t.target,r,n);break;case 34067:const o=function(e){return e<34069?e+34069:e}(n);i.framebufferTexture2D(36160,e,o,t.handle,r);break;case 3553:i.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:er(!1,"Illegal texture type")}i.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=sn(n=this.gl)?n:null;var n;t?t.readBuffer(e):er(36064===e||1029===e,Gr),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,n=An(t);if(n)n.drawBuffers(e);else{const n=t.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(e):er(1===e.length&&(36064===e[0]||1029===e[0]),Gr)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in Ur)void 0===e.luma.caps[t]&&(e.luma.caps[t]=Wr(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function Qr(e,t){er(e instanceof kr||e instanceof Tr||e instanceof Mr);const n=e.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:A,border:l,mipmaps:u}=e;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:A,border:l,mipmaps:u},t))}function $r(e,t){const{gl:n,width:r,height:i,id:o}=e;return new Hr(n,Object.assign({},t,{id:`framebuffer-for-${o}`,width:r,height:i,attachments:{36064:e}}))}function qr(e,t="unnamed"){const n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}Hr.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];function Yr(e,t,n,r){const i=e.split(/\r?\n/),o={},s={},a=r||qr(t)||"(unnamed)",A=`${function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)} shader ${a}`;for(let t=0;t<i.length;t++){const n=i[t];if(n.length<=1)continue;const r=n.split(":"),a=r[0],l=parseInt(r[2],10);if(isNaN(l))throw new Error(`GLSL compilation error in ${A}: ${e}`);"WARNING"!==a?o[l]=n:s[l]=n}const l=function(e,t=1,n=": "){const r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(((e,r)=>{const o=String(r+t),s=o.length;return Xr(o,i-s)+n+e}))}(t);return{shaderName:A,errors:Zr(o,l),warnings:Zr(s,l)}}function Zr(e,t){let n="";for(let r=0;r<t.length;r++){const i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+=`${i}\n`,e[r+1])){const t=e[r+1],i=t.split(":",3),o=i[0],s=parseInt(i[1],10)||0;n+=Xr(`^^^ ${o}: ${t.substring(i.join(":").length+1).trim()}\n\n`,s)}}return n}function Xr(e,t){let n="";for(let e=0;e<t;++e)n+=" ";return`${n}${e}`}function Kr(e){let t=100;const n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}class Jr extends lr{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return er(!1),"unknown"}}constructor(e,t){an(e),er("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string");super(e,{id:qr(t.source,null)||t.id||ir(`unnamed ${Jr.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=qr(e,null);t&&(this.id=ir(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${Jr.getTypeName(this.shaderType)}:${this.id}`}getName(){return qr(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const e=this.gl.getShaderInfoLog(this.handle),{shaderName:t,errors:n,warnings:r}=Yr(e,this.source,this.shaderType,this.id);throw nn.error(`GLSL compilation errors in ${t}\n${n}`)(),nn.warn(`GLSL compilation warnings in ${t}\n${r}`)(),new Error(`GLSL compilation errors in ${t}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class ei extends Jr{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ti extends Jr{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ni={5126:gi.bind(null,"uniform1fv",Ai,1,mi),35664:gi.bind(null,"uniform2fv",Ai,2,mi),35665:gi.bind(null,"uniform3fv",Ai,3,mi),35666:gi.bind(null,"uniform4fv",Ai,4,mi),5124:gi.bind(null,"uniform1iv",li,1,mi),35667:gi.bind(null,"uniform2iv",li,2,mi),35668:gi.bind(null,"uniform3iv",li,3,mi),35669:gi.bind(null,"uniform4iv",li,4,mi),35670:gi.bind(null,"uniform1iv",li,1,mi),35671:gi.bind(null,"uniform2iv",li,2,mi),35672:gi.bind(null,"uniform3iv",li,3,mi),35673:gi.bind(null,"uniform4iv",li,4,mi),35674:gi.bind(null,"uniformMatrix2fv",Ai,4,vi),35675:gi.bind(null,"uniformMatrix3fv",Ai,9,vi),35676:gi.bind(null,"uniformMatrix4fv",Ai,16,vi),35678:pi,35680:pi,5125:gi.bind(null,"uniform1uiv",ui,1,mi),36294:gi.bind(null,"uniform2uiv",ui,2,mi),36295:gi.bind(null,"uniform3uiv",ui,3,mi),36296:gi.bind(null,"uniform4uiv",ui,4,mi),35685:gi.bind(null,"uniformMatrix2x3fv",Ai,6,vi),35686:gi.bind(null,"uniformMatrix2x4fv",Ai,8,vi),35687:gi.bind(null,"uniformMatrix3x2fv",Ai,6,vi),35688:gi.bind(null,"uniformMatrix3x4fv",Ai,12,vi),35689:gi.bind(null,"uniformMatrix4x2fv",Ai,8,vi),35690:gi.bind(null,"uniformMatrix4x3fv",Ai,12,vi),35678:pi,35680:pi,35679:pi,35682:pi,36289:pi,36292:pi,36293:pi,36298:pi,36299:pi,36300:pi,36303:pi,36306:pi,36307:pi,36308:pi,36311:pi},ri={},ii={},oi={},si=[0];function ai(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(si[0]=e,e=si);const i=e.length;if(i%t&&nn.warn(`Uniform size should be multiples of ${t}`,e)(),e instanceof n)return e;let o=r[i];o||(o=new n(i),r[i]=o);for(let t=0;t<i;t++)o[t]=e[t];return o}function Ai(e,t){return ai(e,t,Float32Array,ri)}function li(e,t){return ai(e,t,Int32Array,ii)}function ui(e,t){return ai(e,t,Uint32Array,oi)}function ci(e,t,n){const r=ni[n.type];if(!r)throw new Error(`Unknown GLSL uniform type ${n.type}`);return r().bind(null,e,t)}function di(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${e}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function fi(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;const t=Math.min(e.length,16);for(let n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof Pr||(e instanceof Rr||e instanceof Hr&&Boolean(e.texture))))}function hi(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t]){const r=e[t];for(let e=0,t=n.length;e<t;++e)r[e]=n[e]}else e[t]=n.slice();else e[t]=n}function pi(){let e=null;return(t,n,r)=>{const i=e!==r;return i&&(t.uniform1i(n,r),e=r),i}}function gi(e,t,n,r){let i=null,o=null;return(s,a,A)=>{const l=t(A,n),u=l.length;let c=!1;if(null===i)i=new Float32Array(u),o=u,c=!0;else{er(o===u,"Uniform length cannot change.");for(let e=0;e<u;++e)if(l[e]!==i[e]){c=!0;break}}return c&&(r(s,e,a,l),i.set(l)),c}}function mi(e,t,n,r){e[t](n,r)}function vi(e,t,n,r){e[t](n,!1,r)}const yi=5126,bi=5124,wi=5125,_i={[yi]:[yi,1,"float"],35664:[yi,2,"vec2"],35665:[yi,3,"vec3"],35666:[yi,4,"vec4"],[bi]:[bi,1,"int"],35667:[bi,2,"ivec2"],35668:[bi,3,"ivec3"],35669:[bi,4,"ivec4"],[wi]:[wi,1,"uint"],36294:[wi,2,"uvec2"],36295:[wi,3,"uvec3"],36296:[wi,4,"uvec4"],35670:[yi,1,"bool"],35671:[yi,2,"bvec2"],35672:[yi,3,"bvec3"],35673:[yi,4,"bvec4"],35674:[yi,8,"mat2"],35685:[yi,8,"mat2x3"],35686:[yi,8,"mat2x4"],35675:[yi,12,"mat3"],35687:[yi,12,"mat3x2"],35688:[yi,12,"mat3x4"],35676:[yi,16,"mat4"],35689:[yi,16,"mat4x2"],35690:[yi,16,"mat4x3"]};function xi(e){const t=_i[e];if(!t)return null;const[n,r]=t;return{type:n,components:r}}function Ei(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=yi}for(const n in _i){const[r,i,o]=_i[n];if(r===e&&i===t)return{glType:n,name:o}}return null}class Si{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,n=t.getProgramParameter(e.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=t.getActiveAttrib(e.handle,r),s=t.getAttribLocation(e.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((e,t)=>e.location-t.location))}_readVaryingsFromProgram(e){const{gl:t}=e;if(!sn(t))return;const n=t.getProgramParameter(e.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((e,t)=>e.location-t.location))}_addAttribute(e,t,n,r){const{type:i,components:o}=xi(n),s={type:i,size:r*o};this._inferProperties(e,t,s);const a={location:e,name:t,accessor:new gr(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[e]=a,this.attributeInfosByName[a.name]=a}_inferProperties(e,t,n){/instance/i.test(t)&&(n.divisor=1)}_addVarying(e,t,n,r){const{type:i,components:o}=xi(n),s={location:e,name:t,accessor:new gr({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const Pi=35981,ki=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Ci extends lr{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",ki),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:n,fs:r,varyings:i,bufferMode:o=Pi}=e;return this.hash=t||"",this.vs="string"==typeof n?new ei(this.gl,{id:`${e.id}-vs`,source:n}):n,this.fs="string"==typeof r?new ti(this.gl,{id:`${e.id}-fs`,source:r}):r,er(this.vs instanceof ei),er(this.fs instanceof ti),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(An(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Si(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:n,offset:r=0,start:i,end:o,isIndexed:s=!1,indexType:a=5123,instanceCount:A=0,isInstanced:l=A>0,vertexArray:u=null,transformFeedback:c,framebuffer:d,parameters:f={},uniforms:h,samplers:p}){if((h||p)&&(nn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(h||{})),nn.priority>=e){const r=d?d.id:"default",i=`mode=${nr(this.gl,t)} verts=${n} instances=${A} indexType=${nr(this.gl,a)} isInstanced=${l} isIndexed=${s} Framebuffer=${r}`;nn.log(e,i)()}return er(u),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===n||l&&0===A)&&(u.bindForDraw(n,A,(()=>{if(void 0!==d&&(f=Object.assign({},f,{framebuffer:d})),c){const e=function(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return er(!1),0}}(t);c.begin(e)}this._bindTextures(),Un(this.gl,f,(()=>{s&&l?this.gl2.drawElementsInstanced(t,n,a,r,A):s&&sn(this.gl)&&!isNaN(i)&&!isNaN(o)?this.gl2.drawRangeElements(t,i,o,n,a,r):s?this.gl.drawElements(t,n,a,r):l?this.gl2.drawArraysInstanced(t,r,n,A):this.gl.drawArrays(t,r,n)})),c&&c.end()})),!0)}setUniforms(e={}){nn.priority>=2&&function(e,t,n){for(const r in e){const i=e[r];if((!n||Boolean(n[r]))&&!fi(i))throw t=t?`${t} `:"",console.error(`${t} Bad uniform ${r}`,i),new Error(`${t} Bad uniform ${r}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const n=e[t],r=this._uniformSetters[t];if(r){let e=n,i=!1;if(e instanceof Hr&&(e=e.texture),e instanceof Pr)if(i=this.uniforms[t]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=e,{textureIndex:i}=r;n.bind(i),e=i,this._textureUniforms[t]=n}else e=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(e)||i)&&hi(this.uniforms,t,n)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const n=this._textureUniforms[t];n.update(),e=e&&n.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),n={};for(const e of t){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new ei({handle:e});break;case 35632:n.fs=new ti({handle:e})}}return n}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const e=this._getName();this.id=ir(e)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),nn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),nn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||nn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);e.validateProgram(this.handle);if(!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const n=this.gl.getActiveUniform(this.handle,t),{name:r}=di(n.name);let i=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=ci(e,i,n),n.size>1)for(let t=0;t<n.size;t++)i=e.getUniformLocation(this.handle,`${r}[${t}]`),this._uniformSetters[`${r}[${t}]`]=ci(e,i,n)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class Ti extends lr{static isSupported(e,t=[]){const n=sn(e),r=Vr(e,Nr);let i=n||r;for(const e of t)switch(e){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:er(!1)}return i}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return Ti.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class Mi extends lr{static isSupported(e){return sn(e)}constructor(e,t={}){An(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,sr(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])})),this}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(t);return n<0?(this.unused[e]=r,nn.warn((()=>`${this.id} unused varying buffer ${e}`))(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,n,r;return e instanceof br==!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,n=0,r){const i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Ii=null;function Li(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Ii||Ii.byteLength<n)&&(Ii=new ArrayBuffer(n)),Ii),0,t)}class Ri extends lr{static isSupported(e,t={}){return!t.constantAttributeZero||(sn(e)||"Chrome"===function(e){if(!e&&!te())return"Node";if(ee(e))return"Electron";const t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":re.chrome?"Chrome":re.safari?"Safari":re.mozInnerScreenX?"Firefox":"Unknown"}())}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ri(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ri.MAX_ATTRIBUTES=Ri.MAX_ATTRIBUTES||e.getParameter(34921),Ri.MAX_ATTRIBUTES}static setConstant(e,t,n){switch(n.constructor){case Float32Array:Ri._setConstantFloatArray(e,t,n);break;case Int32Array:Ri._setConstantIntArray(e,t,n);break;case Uint32Array:Ri._setConstantUintArray(e,t,n);break;default:er(!1)}}constructor(e,t={}){const n=t.id||t.program&&t.program.id;super(e,Object.assign({},t,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ri.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return er(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,e?e.handle:null)})),this}setBuffer(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:A,divisor:l}=n,{gl:u,gl2:c}=this;return e=Number(e),this.bind((()=>{u.bindBuffer(34962,t.handle),A?(er(sn(u)),c.vertexAttribIPointer(e,r,i,o,s)):u.vertexAttribPointer(e,r,i,a,o,s),u.enableVertexAttribArray(e),c.vertexAttribDivisor(e,l||0)})),this}enable(e,t=!0){return!t&&0===e&&!Ri.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind((()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)))),this}getConstantBuffer(e,t){const n=this._normalizeConstantArrayValue(t),r=n.byteLength*e,i=n.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new br(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const e=Li(t.constructor,i);!function({target:e,source:t,start:n=0,count:r=1}){const i=t.length,o=r*i;let s=0;for(let r=n;s<i;s++)e[r++]=t[s];for(;s<o;)s<o-s?(e.copyWithin(n+s,n,n+s),s*=2):(e.copyWithin(n+s,n,n+o-s),s=o)}({target:e,source:n,start:0,count:i}),this.buffer.subData(e),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}static _setConstantFloatArray(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:er(!1)}}static _setConstantIntArray(e,t,n){switch(er(sn(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:er(!1)}}static _setConstantUintArray(e,t,n){switch(er(sn(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:er(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return er(Number.isFinite(t)),this.bind((()=>34373===e?this.gl.getVertexAttribOffset(t,e):this.gl.getVertexAttrib(t,e)))}}const Oi=/^(.+)__LOCATION_([0-9]+)$/,Di=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Bi{constructor(e,t={}){const n=t.id||t.program&&t.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ri(e),ar(this,"VertexArray","v6.0",Di),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind((()=>{for(const t in e){const n=e[t];this._setAttribute(t,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,n={}){if(34963===t.target)return this.setElementBuffer(t,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(e,t,t.accessor,n);return r>=0&&(this.values[r]=t,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,i)),this}setConstant(e,t,n={}){const{location:r,accessor:i}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new br(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof br&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof br&&this.setBuffer(e,t)}})),this}bindForDraw(e,t,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(e,t),r=n()})),r}_resolveLocationAndAccessor(e,t,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,nn.once(3,(()=>`unused value ${e} in ${this.id}`))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const A=this.accessors[o]||{},l=gr.resolve(a.accessor,A,n,r),{size:u,type:c}=l;return er(Number.isFinite(u)&&Number.isFinite(c)),{location:o,accessor:l}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const n=Oi.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof br)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof br){const n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){const n=t;this.setConstant(e,n)}else{if(!(t.buffer instanceof br))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=t;this.setBuffer(e,n.buffer,n)}}}_setConstantAttributes(e,t){const n=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let e=1;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)r=this.values[e],ArrayBuffer.isView(r)&&this._setConstantAttribute(e,r)}_setConstantAttributeZero(e,t){if(Ri.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(e,t){Ri.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const n=this.values[t],r=this.accessors[t];if(!n)return;const{divisor:i}=r,o=i>0;if(e.isInstanced=e.isInstanced||o,n instanceof br){const t=n;if(o){const n=t.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,n)}else{const n=t.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,n)}}}setElements(e=null,t={}){return nn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function Fi(e,t={}){const{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){const{maxElts:n=16,size:r=1}=t;let i="[";for(let o=0;o<e.length&&o<n;++o)o>0&&(i+=","+(o%r==0?" ":"")),i+=Fi(e[o],t);return`${i}${e.length>n?"...":"]"}`}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const r=e.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function zi({header:e="Uniforms",program:t,uniforms:n,undefinedOnly:r=!1}){er(t);const i=".*Matrix",o=t._uniformSetters,s={},a=Object.keys(o).sort();let A=0;for(const t of a)t.match(".*_.*")||t.match(i)||Ni({table:s,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&A++;for(const t of a)t.match(i)&&Ni({table:s,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&A++;for(const t of a)s[t]||Ni({table:s,header:e,uniforms:n,uniformName:t,undefinedOnly:r})&&A++;let l=0;const u={};if(!r)for(const t in n){const r=n[t];s[t]||(l++,u[t]={Type:`NOT USED: ${r}`,[e]:Fi(r)})}return{table:s,count:A,unusedTable:u,unusedCount:l}}function Ni({table:e,header:t,uniforms:n,uniformName:r,undefinedOnly:i}){const o=n[r],s=function(e){return null!=e}(o);return(!i||!s)&&(e[r]={[t]:s?Fi(o):"N/A","Uniform Type":s?o:"NOT PROVIDED"},!0)}function ji(e,t,n,r){const{gl:i}=e;if(!t)return{[r]:"null","Format ":"N/A"};let o,s,a,A="NOT PROVIDED",l=1,u=0,c=0;if(n&&(A=n.type,l=n.size,A=String(A).replace("Array",""),o=-1!==A.indexOf("nt")),t instanceof br){const e=t,{data:d,changed:f}=e.getDebugData();let h;if(s=f?"*":"",a=d,c=e.byteLength,u=c/d.BYTES_PER_ELEMENT/l,n){h=`${n.divisor>0?"I ":"P "} ${u} (x${l}=${c} bytes ${nr(i,A)})`}else o=!0,h=`${c} bytes`;return{[r]:`${s}${Fi(a,{size:l,isInteger:o})}`,"Format ":h}}return a=t,l=t.length,A=String(t.constructor.name).replace("Array",""),o=-1!==A.indexOf("nt"),{[r]:`${Fi(a,{size:l,isInteger:o})} (constant)`,"Format ":`${l}x${A} (constant)`}}function Ui(e,t){const{type:n,size:r}=t,i=Ei(n,r);return i?`${e} (${i.name})`:e}function Vi(e){const{type:t,size:n}=e.accessor,r=Ei(t,n);return r?`${r.name} ${e.name}`:e.name}const Wi=$t.isBrowser()&&"undefined"!=typeof document;let Gi=0;class Hi{constructor(e={}){const{onCreateContext:t=(e=>Yn(e)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:A={},debug:l=!1,createFramebuffer:u=!1,autoResizeViewport:c=!0,autoResizeDrawingBuffer:d=!0,stats:f=Jn.get("animation-loop-"+Gi++)}=e;let{useDevicePixels:h=!0}=e;"useDevicePixelRatio"in e&&(nn.deprecated("useDevicePixelRatio","useDevicePixels")(),h=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:A,debug:l,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:c,autoResizeDrawingBuffer:d,useDevicePixels:h}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return er("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Ti.isSupported(this.gl,["timers"])?new Ti(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((e=>{this._running&&(this._addCallbackData(e||{}),!1!==e&&this._startLoop())}));return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const n=document.getElementById(e);return n?Number(n.value):t}setViewParameters(){return nn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Wi?new Promise(((e,t)=>{Wi&&"complete"===document.readyState?e(document):window.addEventListener("load",(()=>{e(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):(t=e,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t));var t}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60));var t}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Zn(this.props.gl,e):this.onCreateContext(e),!on(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");jn(this.gl,_n),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Xn(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Hr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Qi="vs",$i="fs";function qi(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const Yi={number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},array:{validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function Zi(e){let t=Xi(e);return"object"===t?e?"type"in e?Object.assign({},e,Yi[e.type]):"value"in e?(t=Xi(e.value),Object.assign({type:t},e,Yi[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},Yi[t])}function Xi(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}class Ki{constructor({name:e,vs:t,fs:n,dependencies:r=[],uniforms:i,getUniforms:o,deprecations:s=[],defines:a={},inject:A={},vertexShader:l,fragmentShader:u}){qi("string"==typeof e),this.name=e,this.vs=t||l,this.fs=n||u,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(s),this.defines=a,this.injections=function(e){const t={vs:{},fs:{}};for(const n in e){let r=e[n];const i=n.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),t[i][n]=r}return t}(A),i&&(this.uniforms=function(e){const t={};for(const n in e){const r=Zi(e[n]);t[n]=r}return t}(i))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:qi(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp(`\\b${e.old}\\(`);else e.regex=new RegExp(`${e.type} ${e.old};`)})),e}_defaultGetUniforms(e={}){const t={},n=this.uniforms;for(const r in n){const i=n[r];r in e&&!i.private?(i.validate&&qi(i.validate(e[r],i),`${this.name}: invalid ${r}`),t[r]=e[r]):t[r]=i.value}return t}}function Ji(e){return function(e){const t={},n={};return eo({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}(to(e))}function eo({modules:e,level:t,moduleMap:n,moduleDepth:r}){if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const i of e)n[i.name]=i,(void 0===r[i.name]||r[i.name]<t)&&(r[i.name]=t);for(const i of e)i.dependencies&&eo({modules:i.dependencies,level:t+1,moduleMap:n,moduleDepth:r})}function to(e,t){return e.map((e=>(e instanceof Ki||(qi("string"!=typeof e,`Shader module use by name is deprecated. Import shader module '${e}' and use it directly.`),qi(e.name,"shader module has no name"),(e=new Ki(e)).dependencies=to(e.dependencies)),e)))}const no={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ro={};Object.keys(no).forEach((e=>{ro[e]=e}));const io={};function oo(e,t,n={}){const r=no[t];if(qi(r,t),!function(e={}){const t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(t in io)return io[t];const i=`#extension GL_${r[0]} : ${n.behavior||"enable"}\nvoid main(void) {}`,o=e.createShader(35633);e.shaderSource(o,i),e.compileShader(o);const s=e.getShaderParameter(o,35713);return e.deleteShader(o),io[t]=s,s}function so(e,t){const n=no[t];qi(n,t);const r=function(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return qi(!1===i||!0===i),i}function ao(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>so(e,t)))}const Ao={[Qi]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[$i]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},lo="__LUMA_INJECT_DECLARATIONS__",uo=/void\s+main\s*\([^)]*\)\s*\{\n?/,co=/}\n?[^{}]*$/,fo=[];function ho(e,t,n,r=!1){const i=t===Qi;for(const t in n){const r=n[t];r.sort(((e,t)=>e.order-t.order)),fo.length=r.length;for(let e=0,t=r.length;e<t;++e)fo[e]=r[e].injection;const o=`${fo.join("\n")}\n`;switch(t){case"vs:#decl":i&&(e=e.replace(lo,o));break;case"vs:#main-start":i&&(e=e.replace(uo,(e=>e+o)));break;case"vs:#main-end":i&&(e=e.replace(co,(e=>o+e)));break;case"fs:#decl":i||(e=e.replace(lo,o));break;case"fs:#main-start":i||(e=e.replace(uo,(e=>e+o)));break;case"fs:#main-end":i||(e=e.replace(co,(e=>o+e)));break;default:e=e.replace(t,(e=>e+o))}}return e=e.replace(lo,""),r&&(e=e.replace(/\}\s*$/,(e=>e+Ao[t]))),e}function po(e){const t={};return qi(Array.isArray(e)&&e.length>1),e.forEach((e=>{for(const n in e)t[n]=t[n]?`${t[n]}\n${e[n]}`:e[n]})),t}function go(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const mo=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],vo=[...mo,[go("attribute"),"in $1"],[go("varying"),"out $1"]],yo=[...mo,[go("varying"),"in $1"]],bo=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],wo=[...bo,[go("in"),"attribute $1"],[go("out"),"varying $1"]],_o=[...bo,[go("in"),"varying $1"]],xo="gl_FragColor",Eo=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,So=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Po(e,t,n){switch(t){case 300:return n?ko(e,vo):function(e){const t=(e=ko(e,yo)).match(Eo);if(t){const n=t[1];e=e.replace(new RegExp("\\bgl_FragColor\\b","g"),n)}else{const t="fragmentColor";e=e.replace(So,(e=>`out vec4 ${t};\n${e}`)).replace(new RegExp("\\bgl_FragColor\\b","g"),t)}return e}(e);case 100:return n?ko(e,wo):function(e){const t=(e=ko(e,_o)).match(Eo);if(t){const n=t[1];e=e.replace(Eo,"").replace(new RegExp(`\\b${n}\\b`,"g"),xo)}return e}(e);default:throw new Error(`unknown GLSL version ${t}`)}}function ko(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}const Co={[Qi]:"vertex",[$i]:"fragment"};function To(e,{id:t,source:n,type:r,modules:i,defines:o={},hookFunctions:s=[],inject:a={},transpileToGLSL100:A=!1,prologue:l=!0,log:u}){qi("string"==typeof n,"shader source must be a string");const c=r===Qi,d=n.split("\n");let f=100,h="",p=n;0===d[0].indexOf("#version ")?(f=300,h=d[0],p=d.slice(1).join("\n")):h=`#version ${f}`;const g={};i.forEach((e=>{Object.assign(g,e.getDefines())})),Object.assign(g,o);let m=l?`${h}\n${function({id:e,source:t,type:n}){return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${e}_${Co[n]}\n\n`:""}({id:t,source:n,type:r})}\n${function({type:e}){return`\n#define SHADER_TYPE_${Co[e].toUpperCase()}\n`}({type:r})}\n${function(e){const t=function(e){const t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937),i=function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/Apple/i)||t.match(/Apple/i)?"APPLE":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN"}(n,r);return{gpuVendor:i,vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e);switch(t.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}(e)}\n${function(e,t,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return ao(e,ro.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),ao(e,ro.GLSL_DERIVATIVES)&&oo(e,ro.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),ao(e,ro.GLSL_FRAG_DATA)&&oo(e,ro.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),ao(e,ro.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(e)}\n${function(e={}){let t=0,n="";for(const r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;const i=e[r];(i||Number.isFinite(i))&&(n+=`#define ${r.toUpperCase()} ${e[r]}\n`)}0===t&&(n+="\n");return n}(g)}\n${c?"":"precision highp float;\n\n"}\n`:`${h}\n`;const v=function(e){const t={vs:{},fs:{}};return e.forEach((e=>{let n;"string"!=typeof e?(n=e,e=n.hook):n={},e=e.trim();const[r,i]=e.split(":"),o=e.replace(/\(.+/,"");t[r][o]=Object.assign(n,{signature:i})})),t}(s),y={},b={},w={};for(const e in a){const t="string"==typeof a[e]?{injection:a[e],order:0}:a[e],n=e.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){const r=n[2],i=n[3];r?"decl"===i?b[e]=[t]:w[e]=[t]:y[e]=[t]}else w[e]=[t]}for(const e of i){u&&e.checkDeprecations(p,u);m+=e.getModuleSource(r,f);const t=e.injections[r];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?b:w;r[e]=r[e]||[],r[e].push(t[e])}else y[e]=y[e]||[],y[e].push(t[e])}}return m+="\n\n__LUMA_INJECT_DECLARATIONS__\n\n",m=ho(m,r,b),m+=function(e,t){let n="";for(const r in e){const i=e[r];if(n+=`void ${i.signature} {\n`,i.header&&(n+=`  ${i.header}`),t[r]){const e=t[r];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+=`  ${t.injection}\n`}i.footer&&(n+=`  ${i.footer}`),n+="}\n"}return n}(v[r],y),m+=p,m=ho(m,r,w),m=Po(m,A?100:f,c),m}function Mo(e){return function(t){const n={};for(const r of e){const e=r.getUniforms(t,n);Object.assign(n,e)}return n}}const Io="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Lo=`#version 300 es\n${Io}`;function Ro(e,t){t=Array.isArray(t)?t:[t];const n=e.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!t.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function Oo(e={}){const{version:t=100,input:n,inputType:r,output:i}=e;if(!n)return 300===t?Lo:t>300?`#version ${t}\n${Io}`:"void main() {gl_FragColor = vec4(0);}";const o=function(e,t){switch(t){case"float":return`vec4(${e}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${e}, 0.0, 1.0)`;case"vec3":return`vec4(${e}, 1.0)`;case"vec4":return e;default:return qi(!1),null}}(n,r);return t>=300?`#version ${t} ${300===t?"es":""}\nin ${r} ${n};\nout vec4 ${i};\nvoid main() {\n  ${i} = ${o};\n}`:`varying ${r} ${n};\nvoid main() {\n  gl_FragColor = ${o};\n}`}const Do={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function Bo(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}const Fo={};function zo(e,{precision:t=Fo.precision||4}={}){return e=function(e){return Math.round(e/Fo.EPSILON)*Fo.EPSILON}(e),`${parseFloat(e.toPrecision(t))}`}function No(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jo(e,t,n){if(No(e)){n=n||((r=e).clone?r.clone():new Array(r.length));for(let r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}var r;return t(e)}function Uo(e,t,n){return jo(e,(e=>Math.max(t,Math.min(n,e))))}function Vo(e,t,n){return No(e)?e.map(((e,r)=>Vo(e,t[r],n))):n*t+(1-n)*e}function Wo(e,t,n){const r=Fo.EPSILON;n&&(Fo.EPSILON=n);try{if(e===t)return!0;if(No(e)&&No(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Wo(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=Fo.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{Fo.EPSILON=r}}Fo.EPSILON=1e-12,Fo.debug=!1,Fo.precision=4,Fo.printTypes=!1,Fo.printDegrees=!1,Fo.printRowMajor=!0;class Go extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)){get ELEMENTS(){return Bo(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}to(e){return e===this?this:No(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Fo)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+zo(this[n],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Wo(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){void 0===n&&(n=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]+=t[e];return this.check()}subtract(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]-=t[e];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Fo.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function Ho(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${e}`);return e}function Qo(e,t,n=""){if(Fo.debug&&!function(e,t){if(e.length!==t)return!1;for(let t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}(e,t))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return e}const $o={};function qo(e,t){$o[e]||($o[e]=!0,console.warn(`${e} has been removed in version ${t}, see upgrade guide for more information`))}class Yo extends Go{get ELEMENTS(){return Bo(!1),0}copy(e){return Bo(!1),this}get x(){return this[0]}set x(e){this[0]=Ho(e)}get y(){return this[1]}set y(e){this[1]=Ho(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];t+=r*r}return Ho(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Ho(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t[e];return this.check()}divide(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Bo(e>=0&&e<this.ELEMENTS,"index is out of range"),Ho(this[e])}setComponent(e,t){return Bo(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Zo=1e-6,Xo="undefined"!=typeof Float32Array?Float32Array:Array;function Ko(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Jo(e,t){return e[0]=-t[0],e[1]=-t[1],e}function es(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ts,ns=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};function rs(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/s,e[1]=(n[1]*r+n[5]*i+n[9]*o)/s,e[2]=(n[2]*r+n[6]*i+n[10]*o)/s,e}function is(){var e=new Xo(3);return Xo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function os(e,t,n){var r=new Xo(3);return r[0]=e,r[1]=t,r[2]=n,r}function ss(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function as(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],A=n[2];return e[0]=i*A-o*a,e[1]=o*s-r*A,e[2]=r*a-i*s,e}function As(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e}function ls(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}ts=new Xo(2),Xo!=Float32Array&&(ts[0]=0,ts[1]=0);var us=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},cs=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},ds=function(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)};!function(){var e=is()}();const fs=[0,0,0],hs={};class ps extends Yo{static get ZERO(){return hs.ZERO=hs.ZERO||Object.freeze(new ps(0,0,0,0))}constructor(e=0,t=0,n=0){super(-0,-0,-0),1===arguments.length&&No(e)?this.copy(e):(Fo.debug&&(Ho(e),Ho(t),Ho(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Fo.debug&&(Ho(e.x),Ho(e.y),Ho(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Ho(e)}angle(e){return n=e,r=(t=this)[0],i=t[1],o=t[2],s=n[0],a=n[1],A=n[2],l=Math.sqrt(r*r+i*i+o*o)*Math.sqrt(s*s+a*a+A*A),u=l&&ss(t,n)/l,Math.acos(Math.min(Math.max(u,-1),1));var t,n,r,i,o,s,a,A,l,u}cross(e){return as(this,this,e),this.check()}rotateX({radians:e,origin:t=fs}){return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=fs}){return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=fs}){return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return As(this,this,e),this.check()}transformAsVector(e){return rs(this,this,e),this.check()}transformByMatrix3(e){return ls(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(e,t,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=t[0],A=t[1],l=t[2],u=i*l-o*A,c=o*a-r*l,d=r*A-i*a,f=i*d-o*c,h=o*u-r*d,p=r*c-i*u,g=2*s;u*=g,c*=g,d*=g,f*=2,h*=2,p*=2,e[0]=a+u+f,e[1]=A+c+h,e[2]=l+d+p}(this,this,e),this.check()}}class gs extends Go{get ELEMENTS(){return Bo(!1),0}get RANK(){return Bo(!1),0}toString(){let e="[";if(Fo.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Ho(n),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let e=0;e<this.RANK;++e)t[e]=this[n+e];return t}setColumn(e,t){const n=e*this.RANK;for(let e=0;e<this.RANK;++e)this[n+e]=t[e];return this}}function ms(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],A=t[5],l=t[6],u=t[7],c=t[8],d=n[0],f=n[1],h=n[2],p=n[3],g=n[4],m=n[5],v=n[6],y=n[7],b=n[8];return e[0]=d*r+f*s+h*l,e[1]=d*i+f*a+h*u,e[2]=d*o+f*A+h*c,e[3]=p*r+g*s+m*l,e[4]=p*i+g*a+m*u,e[5]=p*o+g*A+m*c,e[6]=v*r+y*s+b*l,e[7]=v*i+y*a+b*u,e[8]=v*o+y*A+b*c,e}function vs(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}const ys=Object.freeze([1,0,0,0,1,0,0,0,1]),bs=Object.freeze([0,0,0,0,0,0,0,0,0]),ws=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),_s={};class xs extends gs{static get IDENTITY(){return _s.IDENTITY=_s.IDENTITY||Object.freeze(new xs(ys)),_s.IDENTITY}static get ZERO(){return _s.ZERO=_s.ZERO||Object.freeze(new xs(bs)),_s.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ws}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,n,r,i,o,s,a,A){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=A,this.check()}setRowMajor(e,t,n,r,i,o,s,a,A){return this[0]=e,this[1]=r,this[2]=s,this[3]=t,this[4]=i,this[5]=a,this[6]=n,this[7]=o,this[8]=A,this.check()}determinant(){return t=(e=this)[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],A=e[7],l=e[8],t*(l*o-s*A)+n*(-l*i+s*a)+r*(A*i-o*a);var e,t,n,r,i,o,s,a,A,l}identity(){return this.copy(ys)}fromQuaternion(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,A=i+i,l=n*s,u=r*s,c=r*a,d=i*s,f=i*a,h=i*A,p=o*s,g=o*a,m=o*A;e[0]=1-c-h,e[3]=u-m,e[6]=d+g,e[1]=u+m,e[4]=1-l-h,e[7]=f-p,e[2]=d-g,e[5]=f+p,e[8]=1-l-c}(this,e),this.check()}transpose(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],u=t[8],c=u*s-a*l,d=-u*o+a*A,f=l*o-s*A,h=n*c+r*d+i*f;h&&(h=1/h,e[0]=c*h,e[1]=(-u*r+i*l)*h,e[2]=(a*r-i*s)*h,e[3]=d*h,e[4]=(u*n-i*A)*h,e[5]=(-a*n+i*o)*h,e[6]=f*h,e[7]=(-l*n+r*A)*h,e[8]=(s*n-r*o)*h)}(this,this),this.check()}multiplyLeft(e){return ms(this,e,this),this.check()}multiplyRight(e){return ms(this,this,e),this.check()}rotate(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],A=t[5],l=t[6],u=t[7],c=t[8],d=Math.sin(n),f=Math.cos(n);e[0]=f*r+d*s,e[1]=f*i+d*a,e[2]=f*o+d*A,e[3]=f*s-d*r,e[4]=f*a-d*i,e[5]=f*A-d*o,e[6]=l,e[7]=u,e[8]=c}(this,this,e),this.check()}scale(e){return Array.isArray(e)?vs(this,this,e):vs(this,this,[e,e,e]),this.check()}translate(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],A=t[5],l=t[6],u=t[7],c=t[8],d=n[0],f=n[1];e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=A,e[6]=d*r+f*s+l,e[7]=d*i+f*a+u,e[8]=d*o+f*A+c}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}(t||[-0,-0],e,this);break;case 3:t=ls(t||[-0,-0,-0],e,this);break;case 4:t=function(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[3]*i+n[6]*o,e[1]=n[1]*r+n[4]*i+n[7]*o,e[2]=n[2]*r+n[5]*i+n[8]*o,e[3]=t[3],e}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Qo(t,e.length),t}transformVector(e,t){return qo("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return qo("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return qo("Matrix3.transformVector"),this.transform(e,t)}}function Es(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],h=t[12],p=t[13],g=t[14],m=t[15],v=n*a-r*s,y=n*A-i*s,b=n*l-o*s,w=r*A-i*a,_=r*l-o*a,x=i*l-o*A,E=u*p-c*h,S=u*g-d*h,P=u*m-f*h,k=c*g-d*p,C=c*m-f*p,T=d*m-f*g,M=v*T-y*C+b*k+w*P-_*S+x*E;return M?(M=1/M,e[0]=(a*T-A*C+l*k)*M,e[1]=(i*C-r*T-o*k)*M,e[2]=(p*x-g*_+m*w)*M,e[3]=(d*_-c*x-f*w)*M,e[4]=(A*P-s*T-l*S)*M,e[5]=(n*T-i*P+o*S)*M,e[6]=(g*b-h*x-m*y)*M,e[7]=(u*x-d*b+f*y)*M,e[8]=(s*C-a*P+l*E)*M,e[9]=(r*P-n*C-o*E)*M,e[10]=(h*_-p*b+m*v)*M,e[11]=(c*b-u*_-f*v)*M,e[12]=(a*S-s*k-A*E)*M,e[13]=(n*k-r*S+i*E)*M,e[14]=(p*y-h*w-g*v)*M,e[15]=(u*w-c*y+d*v)*M,e):null}function Ss(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],A=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n[0],b=n[1],w=n[2],_=n[3];return e[0]=y*r+b*a+w*c+_*p,e[1]=y*i+b*A+w*d+_*g,e[2]=y*o+b*l+w*f+_*m,e[3]=y*s+b*u+w*h+_*v,y=n[4],b=n[5],w=n[6],_=n[7],e[4]=y*r+b*a+w*c+_*p,e[5]=y*i+b*A+w*d+_*g,e[6]=y*o+b*l+w*f+_*m,e[7]=y*s+b*u+w*h+_*v,y=n[8],b=n[9],w=n[10],_=n[11],e[8]=y*r+b*a+w*c+_*p,e[9]=y*i+b*A+w*d+_*g,e[10]=y*o+b*l+w*f+_*m,e[11]=y*s+b*u+w*h+_*v,y=n[12],b=n[13],w=n[14],_=n[15],e[12]=y*r+b*a+w*c+_*p,e[13]=y*i+b*A+w*d+_*g,e[14]=y*o+b*l+w*f+_*m,e[15]=y*s+b*u+w*h+_*v,e}function Ps(e,t,n){var r,i,o,s,a,A,l,u,c,d,f,h,p=n[0],g=n[1],m=n[2];return t===e?(e[12]=t[0]*p+t[4]*g+t[8]*m+t[12],e[13]=t[1]*p+t[5]*g+t[9]*m+t[13],e[14]=t[2]*p+t[6]*g+t[10]*m+t[14],e[15]=t[3]*p+t[7]*g+t[11]*m+t[15]):(r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],A=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=A,e[6]=l,e[7]=u,e[8]=c,e[9]=d,e[10]=f,e[11]=h,e[12]=r*p+a*g+c*m+t[12],e[13]=i*p+A*g+d*m+t[13],e[14]=o*p+l*g+f*m+t[14],e[15]=s*p+u*g+h*m+t[15]),e}function ks(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Cs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],A=t[7],l=t[8],u=t[9],c=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=s*i+u*r,e[6]=a*i+c*r,e[7]=A*i+d*r,e[8]=l*i-o*r,e[9]=u*i-s*r,e[10]=c*i-a*r,e[11]=d*i-A*r,e}function Ts(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],A=t[3],l=t[4],u=t[5],c=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=s*i+u*r,e[2]=a*i+c*r,e[3]=A*i+d*r,e[4]=l*i-o*r,e[5]=u*i-s*r,e[6]=c*i-a*r,e[7]=d*i-A*r,e}function Ms(e,t,n,r,i){var o,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Is(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],A=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],h=e[12],p=e[13],g=e[14],m=e[15],v=t[0],y=t[1],b=t[2],w=t[3],_=t[4],x=t[5],E=t[6],S=t[7],P=t[8],k=t[9],C=t[10],T=t[11],M=t[12],I=t[13],L=t[14],R=t[15];return Math.abs(n-v)<=Zo*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-y)<=Zo*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-b)<=Zo*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=Zo*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-_)<=Zo*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-x)<=Zo*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(A-E)<=Zo*Math.max(1,Math.abs(A),Math.abs(E))&&Math.abs(l-S)<=Zo*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-P)<=Zo*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(c-k)<=Zo*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(d-C)<=Zo*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-T)<=Zo*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-M)<=Zo*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-I)<=Zo*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-L)<=Zo*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(m-R)<=Zo*Math.max(1,Math.abs(m),Math.abs(R))}function Ls(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Rs(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}!function(){var e=function(){var e=new Xo(4);return Xo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();const Os=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ds=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Bs=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Fs={};class zs extends gs{static get IDENTITY(){return Fs.IDENTITY=Fs.IDENTITY||Object.freeze(new zs(Os)),Fs.IDENTITY}static get ZERO(){return Fs.ZERO=Fs.ZERO||Object.freeze(new zs(Ds)),Fs.ZERO}get INDICES(){return Bs}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,i,o,s,a,A,l,u,c,d,f,h,p){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=A,this[9]=l,this[10]=u,this[11]=c,this[12]=d,this[13]=f,this[14]=h,this[15]=p,this.check()}setRowMajor(e,t,n,r,i,o,s,a,A,l,u,c,d,f,h,p){return this[0]=e,this[1]=i,this[2]=A,this[3]=d,this[4]=t,this[5]=o,this[6]=l,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=h,this[12]=r,this[13]=a,this[14]=c,this[15]=p,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Os)}fromQuaternion(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,A=i+i,l=n*s,u=r*s,c=r*a,d=i*s,f=i*a,h=i*A,p=o*s,g=o*a,m=o*A;e[0]=1-c-h,e[1]=u+m,e[2]=d-g,e[3]=0,e[4]=u-m,e[5]=1-l-h,e[6]=f+p,e[7]=0,e[8]=d+g,e[9]=f-p,e[10]=1-l-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:n,top:r,near:i,far:o}){return o===1/0?zs._computeInfinitePerspectiveOffCenter(this,e,t,n,r,i):function(e,t,n,r,i,o,s){var a=1/(n-t),A=1/(i-r),l=1/(o-s);e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*A,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*A,e[10]=(s+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*l,e[15]=0}(this,e,t,n,r,i,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,n,r,i,o){const s=2*o/(n-t),a=2*o/(i-r),A=(n+t)/(n-t),l=(i+r)/(i-r),u=-2*o;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=A,e[9]=l,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=u,e[15]=0,e}lookAt(e,t,n){return 1===arguments.length&&({eye:e,center:t,up:n}=e),function(e,t,n,r){var i,o,s,a,A,l,u,c,d,f,h=t[0],p=t[1],g=t[2],m=r[0],v=r[1],y=r[2],b=n[0],w=n[1],_=n[2];Math.abs(h-b)<Zo&&Math.abs(p-w)<Zo&&Math.abs(g-_)<Zo?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(u=h-b,c=p-w,d=g-_,i=v*(d*=f=1/Math.hypot(u,c,d))-y*(c*=f),o=y*(u*=f)-m*d,s=m*c-v*u,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=c*s-d*o,A=d*i-u*s,l=u*o-c*i,(f=Math.hypot(a,A,l))?(a*=f=1/f,A*=f,l*=f):(a=0,A=0,l=0),e[0]=i,e[1]=a,e[2]=u,e[3]=0,e[4]=o,e[5]=A,e[6]=c,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(i*h+o*p+s*g),e[13]=-(a*h+A*p+l*g),e[14]=-(u*h+c*p+d*g),e[15]=1)}(this,e,t=t||[0,0,0],n=n||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:n,top:r,near:i=.1,far:o=500}){return function(e,t,n,r,i,o,s){var a=1/(t-n),A=1/(r-i),l=1/(o-s);e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*A,e[14]=(s+o)*l,e[15]=1}(this,e,t,n,r,i,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:n=1,near:r=.1,far:i=500}){if(e>2*Math.PI)throw Error("radians");const o=e/2,s=n*Math.tan(o),a=s*t;return(new zs).ortho({left:-a,right:a,bottom:-s,top:s,near:r,far:i})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return Ms(this,e,n,r,i),this.check()}determinant(){return t=(e=this)[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],A=e[7],l=e[8],u=e[9],c=e[10],d=e[11],f=e[12],h=e[13],p=e[14],g=e[15],(t*s-n*o)*(c*g-d*p)-(t*a-r*o)*(u*g-d*h)+(t*A-i*o)*(u*p-c*h)+(n*a-r*s)*(l*g-d*f)-(n*A-i*s)*(l*p-c*f)+(r*A-i*a)*(l*h-u*f);var e,t,n,r,i,o,s,a,A,l,u,c,d,f,h,p,g}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return Es(this,this),this.check()}multiplyLeft(e){return Ss(this,e,this),this.check()}multiplyRight(e){return Ss(this,this,e),this.check()}rotateX(e){return Cs(this,this,e),this.check()}rotateY(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],A=t[3],l=t[8],u=t[9],c=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=s*i-u*r,e[2]=a*i-c*r,e[3]=A*i-d*r,e[8]=o*r+l*i,e[9]=s*r+u*i,e[10]=a*r+c*i,e[11]=A*r+d*i}(this,this,e),this.check()}rotateZ(e){return Ts(this,this,e),this.check()}rotateXYZ([e,t,n]){return this.rotateX(e).rotateY(t).rotateZ(n)}rotateAxis(e,t){return function(e,t,n,r){var i,o,s,a,A,l,u,c,d,f,h,p,g,m,v,y,b,w,_,x,E,S,P,k,C=r[0],T=r[1],M=r[2],I=Math.hypot(C,T,M);I<Zo||(C*=I=1/I,T*=I,M*=I,i=Math.sin(n),s=1-(o=Math.cos(n)),a=t[0],A=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],h=t[7],p=t[8],g=t[9],m=t[10],v=t[11],y=C*C*s+o,b=T*C*s+M*i,w=M*C*s-T*i,_=C*T*s-M*i,x=T*T*s+o,E=M*T*s+C*i,S=C*M*s+T*i,P=T*M*s-C*i,k=M*M*s+o,e[0]=a*y+c*b+p*w,e[1]=A*y+d*b+g*w,e[2]=l*y+f*b+m*w,e[3]=u*y+h*b+v*w,e[4]=a*_+c*x+p*E,e[5]=A*_+d*x+g*E,e[6]=l*_+f*x+m*E,e[7]=u*_+h*x+v*E,e[8]=a*S+c*P+p*k,e[9]=A*S+d*P+g*k,e[10]=l*S+f*P+m*k,e[11]=u*S+h*P+v*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?ks(this,this,e):ks(this,this,[e,e,e]),this.check()}translate(e){return Ps(this,this,e),this.check()}transform(e,t){return 4===e.length?(Qo(t=Rs(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;switch(n){case 2:t=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}(t||[-0,-0],e,this);break;case 3:t=As(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Qo(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(e,t,n){const r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}(t||[-0,-0],e,this);break;case 3:t=rs(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Qo(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}transformPoint(e,t){return qo("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return qo("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return qo("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function Ns(){var e=new Xo(4);return Xo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function js(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Us(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=n[0],A=n[1],l=n[2],u=n[3];return e[0]=r*u+s*a+i*l-o*A,e[1]=i*u+s*A+o*a-r*l,e[2]=o*u+s*l+r*A-i*a,e[3]=s*u-r*a-i*A-o*l,e}function Vs(e,t,n,r){var i,o,s,a,A,l=t[0],u=t[1],c=t[2],d=t[3],f=n[0],h=n[1],p=n[2],g=n[3];return(o=l*f+u*h+c*p+d*g)<0&&(o=-o,f=-f,h=-h,p=-p,g=-g),1-o>Zo?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,A=Math.sin(r*i)/s):(a=1-r,A=r),e[0]=a*l+A*f,e[1]=a*u+A*h,e[2]=a*c+A*p,e[3]=a*d+A*g,e}function Ws(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*s+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+s]-t[3*s+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[s]=(t[3*s+i]+t[3*i+s])*n}return e}var Gs,Hs,Qs,$s=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},qs=Ls,Ys=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},Zs=function(e,t,n,r){var i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e[3]=a+r*(n[3]-a),e},Xs=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)},Ks=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},Js=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s,e},ea=(Gs=is(),Hs=os(1,0,0),Qs=os(0,1,0),function(e,t,n){var r=ss(t,n);return r<-.999999?(as(Gs,Hs,t),ds(Gs)<1e-6&&as(Gs,Qs,t),function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o}(Gs,Gs),js(e,Gs,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(as(Gs,t,n),e[0]=Gs[0],e[1]=Gs[1],e[2]=Gs[2],e[3]=1+r,Js(e,e))});Ns(),Ns(),function(){var e=new Xo(9);Xo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1}();const ta=[0,0,0,1];class na extends Go{constructor(e=0,t=0,n=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,n,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}fromMatrix3(e){return Ws(this,e),this.check()}identity(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this),this.check()}fromAxisRotation(e,t){return js(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Ho(e)}get y(){return this[1]}set y(e){this[1]=Ho(e)}get z(){return this[2]}set z(e){this[2]=Ho(e)}get w(){return this[3]}set w(e){this[3]=Ho(e)}len(){return Xs(this)}lengthSquared(){return Ks(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return Ys(this,e)}rotationTo(e,t){return ea(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return $s(this,this,e),this.check()}calculateW(){return function(e,t){var n=t[0],r=t[1],i=t[2];e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=o*a}(this,this),this.check()}lerp(e,t,n){return Zs(this,e,t,n),this.check()}multiplyRight(e,t){return Bo(!t),Us(this,this,e),this.check()}multiplyLeft(e,t){return Bo(!t),Us(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),A=Math.cos(n);e[0]=r*A+s*a,e[1]=i*A+o*a,e[2]=o*A-i*a,e[3]=s*A-r*a}(this,this,e),this.check()}rotateY(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),A=Math.cos(n);e[0]=r*A-o*a,e[1]=i*A+s*a,e[2]=o*A+r*a,e[3]=s*A-i*a}(this,this,e),this.check()}rotateZ(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),A=Math.cos(n);e[0]=r*A+i*a,e[1]=i*A-r*a,e[2]=o*A+s*a,e[3]=s*A-o*a}(this,this,e),this.check()}scale(e){return qs(this,this,e),this.check()}slerp(e,t,n){switch(arguments.length){case 1:({start:e=ta,target:t,ratio:n}=arguments[0]);break;case 2:[t,n]=arguments,e=this}return Vs(this,e,t,n),this.check()}transformVector4(e,t=e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],A=n[2],l=n[3],u=l*r+a*o-A*i,c=l*i+A*r-s*o,d=l*o+s*i-a*r,f=-s*r-a*i-A*o;e[0]=u*l+f*-s+c*-A-d*-a,e[1]=c*l+f*-a+d*-s-u*-A,e[2]=d*l+f*-A+u*-a-c*-s,e[3]=t[3]}(t,e,this),Qo(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}var ra=1e-15,ia=1e-20,oa=(Math.PI,Math.PI,Math.PI,Math.PI,"#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n");const sa={lightSources:{}};function aa({color:e=[0,0,0],intensity:t=1}={}){return e.map((e=>e*t/255))}const Aa={name:"lights",vs:oa,fs:oa,getUniforms:function e(t=sa){if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},function({ambientLight:e,pointLights:t=[],directionalLights:n=[]}){const r={};return r["lighting_uAmbientLight.color"]=e?aa(e):[0,0,0],t.forEach(((e,t)=>{r[`lighting_uPointLight[${t}].color`]=aa(e),r[`lighting_uPointLight[${t}].position`]=e.position,r[`lighting_uPointLight[${t}].attenuation`]=e.attenuation||[1,0,0]})),r.lighting_uPointLightCount=t.length,n.forEach(((e,t)=>{r[`lighting_uDirectionalLight[${t}].color`]=aa(e),r[`lighting_uDirectionalLight[${t}].direction`]=e.direction})),r.lighting_uDirectionalLightCount=n.length,r}({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const n={pointLights:[],directionalLights:[]};for(const e of t.lights||[])switch(e.type){case"ambient":n.ambientLight=e;break;case"directional":n.directionalLights.push(e);break;case"point":n.pointLights.push(e)}return e({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},la={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const ua={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(e=la){const t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){const n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){const n=Array.from(e.pickingHighlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.picking_uHighlightColor=n}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}};var ca="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";const da={};function fa(e=da){if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}const ha={name:"gouraud-lighting",dependencies:[Aa],vs:ca,defines:{LIGHTING_VERTEX:1},getUniforms:fa},pa={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};class ga{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new ga(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find((t=>t.name===e.name))||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t)),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=e,A=this._getModuleList(e.modules),l=this._getHash(t),u=this._getHash(n),c=A.map((e=>this._getHash(e.name))).sort(),d=o.map((e=>this._getHash(e))),f=Object.keys(r).sort(),h=Object.keys(i).sort(),p=[],g=[];for(const e of f)p.push(this._getHash(e)),p.push(this._getHash(r[e]));for(const e of h)g.push(this._getHash(e)),g.push(this._getHash(i[e]));const m=`${l}/${u}D${p.join("/")}M${c.join("/")}I${g.join("/")}V${d.join("/")}H${this.stateHash}B${s}${a?"T":""}`;if(!this._programCache[m]){const e=function(e,t){const{vs:n,fs:r}=t,i=Ji(t.modules||[]);return{gl:e,vs:To(e,Object.assign({},t,{source:n,type:Qi,modules:i})),fs:To(e,Object.assign({},t,{source:r,type:$i,modules:i})),getUniforms:Mo(i)}}(this.gl,{vs:t,fs:n,modules:A,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[m]=new Ci(this.gl,{hash:m,vs:e.vs,fs:e.fs,varyings:o,bufferMode:s}),this._getUniforms[m]=e.getUniforms||(e=>{}),this._useCounts[m]=0}return this._useCounts[m]++,this._programCache[m]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),n={};let r=0;for(let e=0,i=this._defaultModules.length;e<i;++e){const i=this._defaultModules[e],o=i.name;t[r++]=i,n[o]=!0}for(let i=0,o=e.length;i<o;++i){const o=e[i],s=o.name;n[s]||(t[r++]=o,n[s]=!0)}return t.length=r,t}}const ma={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function va(e,t){const{attributeMap:n=ma}=t||{};return n&&n[e]||e}function ya(e,t){let n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}er(Number.isFinite(t.size),`attribute ${e} needs size`)}const ba=()=>{},wa={};class _a{constructor(e,t={}){const{id:n=ir("model")}=t;er(on(e)),this.id=n,this.gl=e,this.id=t.id||ir("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||ga.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:A,transpileToGLSL100:l}=e;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:A,transpileToGLSL100:l},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},er(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:A,transpileToGLSL100:l}=e;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:A,transpileToGLSL100:l},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return er(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return er(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){const r={};let i=t.indices;for(const o in t.attributes){const s=t.attributes[o],a=va(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const t=s.value,n={...s};delete n.value,r[a]=[new br(e,t),n],ya(o,n)}}if(i){const t=i.value||i;er(t instanceof Uint16Array||t instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new br(e,{data:t,target:34963}),n]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(sr(e))return this;const t={};for(const n in e){const r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return Dr(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=e;let A;this.setAttributes(i),this.updateModuleSettings(t),this.setUniforms(r),nn.priority>=2&&(A=this._logDrawCallStart(2));const l=this.vertexArray.getDrawParams(),{isIndexed:u=l.isIndexed,indexType:c=l.indexType,indexOffset:d=l.indexOffset,vertexArrayInstanced:f=l.isInstanced}=this.props;f&&!this.isInstanced&&nn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:h,instanceCount:p}=this,{onBeforeRender:g=ba,onAfterRender:m=ba}=this.props;g(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(wa,e,{logPriority:A,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:c,isInstanced:h,instanceCount:p,offset:u?d:0}));return m(),nn.priority>=2&&this._logDrawCallEnd(A,a,n),v}transform(e={}){const{discard:t=!0,feedbackBuffers:n,unbindModels:r=[]}=e;let{parameters:i}=e;n&&this._setFeedbackBuffers(n),t&&(i=Object.assign({},i,{35977:t})),r.forEach((e=>e.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},e,{parameters:i}))}finally{r.forEach((e=>e.vertexArray.bindBuffers()))}return this}render(e={}){return nn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:e}=this.programProps;if(e)this._managedProgram=!1;else{const{vs:t,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:A}=this.programProps;e=this.programManager.get({vs:t,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:A}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}er(e instanceof Ci,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Bi(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof br&&t.delete()}}_setAnimationProps(e){this.animated&&er(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(sr(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new Mi(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),nn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:nn.level<=2})(),e}_logDrawCallEnd(e,t,n,r){if(void 0===e)return;const i=function({vertexArray:e,header:t="Attributes"}){if(!e.configuration)return{};const n={};e.elements&&(n.ELEMENT_ARRAY_BUFFER=ji(e,e.elements,null,t));const r=e.values;for(const i in r){const o=e._getAttributeInfo(i);if(o){let s=`${i}: ${o.name}`;const a=e.accessors[o.location];a&&(s=`${i}: ${Ui(o.name,a)}`),n[s]=ji(e,r[i],a,t)}}return n}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=zi({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:A,count:l}=zi({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});l>0&&nn.log("MISSING UNIFORMS",Object.keys(A))(),a>0&&nn.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(e){const t={},n=`Accessors for ${e.id}`;for(const r of e.attributeInfos)r&&(t[`in ${Vi(r)}`]={[n]:JSON.stringify(r.accessor)});for(const r of e.varyingInfos)r&&(t[`out ${Vi(r)}`]={[n]:JSON.stringify(r.accessor)});return t}(this.vertexArray.configuration);nn.table(e,i)(),nn.table(e,o)(),nn.table(e+1,u)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),nn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class xa{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=t;return{attributes:Object.assign({},n,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],n=e?t[e]:null;return n?n instanceof br?n:n.buffer:null}getData(e={}){const{varyingName:t}=e,n=this.getBuffer(t);return n?n.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&er(sn(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const e in this.feedbackMap){const r=this.feedbackMap[e];e in t&&(n[r]=e)}Object.assign(n,e.feedbackBuffers);for(const e in n){const r=n[e];if("string"==typeof r){const i=t[r],{byteLength:o,usage:s,accessor:a}=i;n[e]=this._createNewBuffer(e,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:n})}_setupTransformFeedback(e,{model:t}){const{program:n}=t;e.transformFeedback=new Mi(this.gl,{program:n,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:e,feedbackBuffers:t}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:e,feedbackBuffers:t})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],er(n[i]instanceof br)}return{sourceBuffers:t,feedbackBuffers:n}}_createNewBuffer(e,t){const n=new br(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function Ea({vs:e,sourceTextureMap:t,targetTextureVarying:n,targetTexture:r}){let i=Object.keys(t).length,o=null;const s={};let a=e,A={};if(i>0||n){const e=a.split("\n"),l=e.slice();if(e.forEach(((e,r,a)=>{if(i>0){const n=function(e,t){const n={},r=function(e){return Ro(e,["attribute","in"])}(e);if(!r)return null;const{type:i,name:o}=r;if(o&&t[o]){const t=`// ${e} => Replaced by Transform with a sampler`,{samplerName:r,sizeName:s,uniformDeclerations:a}=function(e){const t=`transform_uSampler_${e}`,n=`transform_uSize_${e}`;return{samplerName:t,sizeName:n,uniformDeclerations:`  uniform sampler2D ${t};\n  uniform vec2 ${n};`}}(o),A=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return qi(!1),null}}(i),l=`  ${i} ${o} = transform_getInput(${r}, ${s}).${A};\n`;n[r]=o;return{updatedLine:t,inject:{"vs:#decl":a,"vs:#main-start":l},samplerTextureMap:n}}return null}(e,t);if(n){const{updatedLine:e,inject:t}=n;l[r]=e,A=po([A,t]),Object.assign(s,n.samplerTextureMap),i--}}n&&!o&&(o=function(e,t){const n=Ro(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,n))})),n){er(r);const e=`transform_uSize_${n}`;A=po([A,{"vs:#decl":`uniform vec2 ${e};\n`,"vs:#main-start":`     vec2 transform_position = transform_getPos(${e});\n     gl_Position = vec4(transform_position, 0, 1.);\n`}])}a=l.join("\n")}return{vs:a,targetTextureType:o,inject:A,samplerTextureMap:s}}const Sa={10241:9728,10240:9728,10242:33071,10243:33071};class Pa{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),s=Object.assign({},e.uniforms),a=Object.assign({},e.parameters);let A=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];s[e]=n[t]}this._setSourceTextureParameters();const e=function({sourceTextureMap:e,targetTextureVarying:t,targetTexture:n}){const r={};let i,o;t&&(({width:i,height:o}=n),r[`transform_uSize_${t}`]=[i,o]);for(const t in e)({width:i,height:o}=e[t]),r[`transform_uSize_${t}`]=[i,o];return r}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,e)}return this.hasTargetTexture&&(A=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:A,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],n=Br(t);if(!e)return n;const r=n.constructor,i=function(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return qi(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let e=0;e<n.length;e+=4)for(let t=0;t<i;t++)o[s++]=n[e+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:n}=e;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:n}=e;if(n instanceof kr)return n;const r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:n={},_targetTexture:r}=e,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:n,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach(((e,t,n)=>{n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new br(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:e,targetTexture:t}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:e,targetTexture:t})}}_updateBinding(e,t){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,n),i){e.targetTexture=i;const{width:t,height:n}=i,{framebuffer:r}=e;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:t,height:n})):e.framebuffer=new Hr(this.gl,{id:"transform-framebuffer",width:t,height:n,attachments:{36064:i}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const e in t)t[e].setParameters(Sa)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);t[this._swapTexture]=e.targetTexture;return{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=Qr(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=Ea({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),A=po([e.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:e._fs||Oo({version:Kr(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[pa].concat(e.modules||[]):e.modules,uniforms:i,inject:A}}}class ka{static isSupported(e){return sn(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:n}=this;e&&e.delete(),t&&t.delete(),n&&n.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,n=this._updateDrawOptions(e);t&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)e=e||n.swap();er(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t){const t=n.getData(e);if(t)return t}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)n.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new _a(t,Object.assign({},e,{fs:e.fs||Oo({version:Kr(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const e of n)t=e.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(e){if(!sr(e.feedbackBuffers)||!sr(e.feedbackMap)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new xa(e,t)),function(e){if(!sr(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new Pa(e,t)),er(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const e of n)t=Object.assign(t,e.getDrawOptions(t));return t}}const Ca={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ta{static get DRAW_MODE(){return Ca}constructor(e={}){const{id:t=ir("geometry"),drawMode:n=Ca.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const t in e){let n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,er(ArrayBuffer.isView(n.value),`${this._print(t)}: must be typed array or object with value as typed array`),"POSITION"!==t&&"positions"!==t||n.size||(n.size=3),"indices"===t?(er(!this.indices),this.indices=n):this.attributes[t]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const t in e){const r=e[t],{value:i,size:o,constant:s}=r;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return er(Number.isFinite(n)),n}}let Ma=1,Ia=1;class La{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=e,o=Ma++,s={time:0,delay:t,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const e of t)this._setChannelTime(e,this.time);const n=this.animations.values();for(const e of n){const{animation:t,channel:n}=e;t.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=Ia++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}var Ra={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"};const Oa={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Oa,"IDENTITY",{get:()=>qt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Da={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ba={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Fa=Object.keys(Oa).map((e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(Oa[e],";"))).join(""),za=Object.keys(Da).map((e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Da[e],";"))).join("");var Na="".concat(Fa,"\n").concat(za,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");function ja(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function Ua(e){let t,n={};return r=>{for(const i in r)if(!ja(r[i],n[i])){t=e(r),n=r;break}return t}}const Va=[0,0,0,0],Wa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Ga=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ha=[0,0,0],Qa=[0,0,0],$a=Ua((function({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:A,geospatialOrigin:l}=function(e,t,n){const{viewMatrixUncentered:r,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=Va,A=Va,l=e.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:c,offsetMode:d}=qa(e,t,n);d&&(A=e.projectPosition(u||c),l=[l[0]-A[0],l[1]-A[1],l[2]-A[2]],A[3]=1,a=Rs([],A,s),o=r||o,s=Ss([],i,o),s=Ss([],s,Wa));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:A,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}}(e,n,r),u=e.getDistanceScales(),c=[e.width*t,e.height*t],d=e.projectionMatrix.transform([0,0,-e.focalDistance,1])[3]||1,f={project_uCoordinateSystem:n,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:A,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uViewportSize:c,project_uDevicePixelRatio:t,project_uFocalDistance:d,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Ha,project_uScale:e.scale,project_uViewProjectionMatrix:o,project_uCameraPosition:a};if(l){const t=e.getDistanceScales(l);switch(n){case Oa.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case Oa.LNGLAT:case Oa.LNGLAT_OFFSETS:f.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case Oa.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return f}));function qa(e,t,n=Qa){let r,i=n,o=!0;switch(r=t===Oa.LNGLAT_OFFSETS||t===Oa.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Da.WEB_MERCATOR:t!==Oa.LNGLAT&&t!==Oa.CARTESIAN||(o=!1);break;case Da.WEB_MERCATOR_AUTO_OFFSET:t===Oa.LNGLAT?i=r:t===Oa.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Da.IDENTITY:i=e.position.map(Math.fround);break;case Da.GLOBE:o=!1,r=null;break;default:o=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const Ya={};var Za={name:"project",dependencies:[Do],vs:Na,getUniforms:function(e=Ya){return e.viewport?function({viewport:e,devicePixelRatio:t=1,modelMatrix:n=null,coordinateSystem:r=Oa.DEFAULT,coordinateOrigin:i,autoWrapLongitude:o=!1}={}){r===Oa.DEFAULT&&(r=e.isGeospatial?Oa.LNGLAT:Oa.CARTESIAN);const s=$a({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||Ga,s}(e):{}}};var Xa={name:"project32",dependencies:[Za],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"};function Ka(e,t){const n=Rs([],t,e);return Ls(n,n,1/n[3]),n}function Ja(e,t){const n=e%t;return n<0?t+n:n}const eA=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function tA(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const nA=Math.PI,rA=nA/4,iA=nA/180,oA=180/nA,sA=512,aA=4003e4;function AA(e){return Math.pow(2,e)}function lA(e){return eA(e)}function uA([e,t]){tA(Number.isFinite(e)),tA(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude");const n=t*iA;return[sA*(e*iA+nA)/(2*nA),sA*(nA+Math.log(Math.tan(rA+.5*n)))/(2*nA)]}function cA([e,t]){const n=e/sA*(2*nA)-nA,r=2*(Math.atan(Math.exp(t/sA*(2*nA)-nA))-rA);return[n*oA,r*oA]}function dA({latitude:e,longitude:t,highPrecision:n=!1}){tA(Number.isFinite(e)&&Number.isFinite(t));const r={},i=Math.cos(e*iA),o=512/360,s=o/i,a=12790407194604047e-21/i;if(r.unitsPerMeter=[a,a,a],r.metersPerUnit=[1/a,1/a,1/a],r.unitsPerDegree=[o,s,a],r.degreesPerUnit=[.703125,1/s,1/a],n){const t=iA*Math.tan(e*iA)/i,n=o*t/2,A=12790407194604047e-21*t,l=A/s*a;r.unitsPerDegree2=[0,n,A],r.unitsPerMeter2=[l,0,l]}return r}function fA(e,t){const[n,r,i]=e,[o,s,a]=t,{unitsPerMeter:A,unitsPerMeter2:l}=dA({longitude:n,latitude:r,highPrecision:!0}),u=uA(e);u[0]+=o*(A[0]+l[0]*s),u[1]+=s*(A[1]+l[1]*s);const c=cA(u),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[c[0],c[1],d]:c}function hA({height:e,pitch:t,bearing:n,altitude:r,scale:i,center:o=null}){const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return Ps(s,s,[0,0,-r]),Cs(s,s,-t*iA),Ts(s,s,n*iA),ks(s,s,[i/=e,i,i]),o&&Ps(s,s,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],o)),s}function pA({width:e,height:t,fovy:n=gA(1.5),altitude:r,pitch:i=0,nearZMultiplier:o=1,farZMultiplier:s=1}){void 0!==r&&(n=gA(r));const a=.5*n*iA,A=mA(n),l=i*iA,u=Math.sin(a)*A/Math.sin(Math.min(Math.max(Math.PI/2-l-a,.01),Math.PI-.01));return{fov:2*a,aspect:e/t,focalDistance:A,near:o,far:(Math.sin(l)*u+A)*s}}function gA(e){return 2*Math.atan(.5/e)*oA}function mA(e){return.5/Math.tan(.5*e*iA)}function vA(e,t){const[n,r,i=0]=e;return tA(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Ka(t,[n,r,i,1])}function yA(e,t,n=0){const[r,i,o]=e;if(tA(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Ka(t,[r,i,o,1])}const s=Ka(t,[r,i,0,1]),a=Ka(t,[r,i,1,1]),A=s[2],l=a[2];return es([],s,a,A===l?0:((n||0)-A)/(l-A))}function bA({width:e,height:t,bounds:n,minExtent:r=0,maxZoom:i=24,padding:o=0,offset:s=[0,0]}){const[[a,A],[l,u]]=n;if(Number.isFinite(o)){o={top:o,bottom:o,left:o,right:o}}else tA(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));const c=new EA({width:e,height:t,longitude:0,latitude:0,zoom:0}),d=c.project([a,u]),f=c.project([l,A]),h=[Math.max(Math.abs(f[0]-d[0]),r),Math.max(Math.abs(f[1]-d[1]),r)],p=[e-o.left-o.right-2*Math.abs(s[0]),t-o.top-o.bottom-2*Math.abs(s[1])];tA(p[0]>0&&p[1]>0);const g=p[0]/h[0],m=p[1]/h[1],v=(o.right-o.left)/2/g,y=(o.bottom-o.top)/2/m,b=[(f[0]+d[0])/2+v,(f[1]+d[1])/2+y],w=c.unproject(b),_=Math.min(i,c.zoom+eA(Math.abs(Math.min(g,m))));return tA(Number.isFinite(_)),{longitude:w[0],latitude:w[1],zoom:_}}const wA=Math.PI/180;function _A(e,t=0){const{width:n,height:r,unproject:i}=e,o={targetZ:t},s=i([0,r],o),a=i([n,r],o);let A,l;return(e.fovy?.5*e.fovy*wA:Math.atan(.5/e.altitude))>(90-e.pitch)*wA-.01?(A=xA(e,0,t),l=xA(e,n,t)):(A=i([0,0],o),l=i([n,0],o)),[s,a,l,A]}function xA(e,t,n){const{pixelUnprojectionMatrix:r}=e,i=Ka(r,[t,0,1,1]),o=Ka(r,[t,e.height,1,1]),s=cA(es([],i,o,(n*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s[2]=n,s}class EA{constructor({width:e,height:t,latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:s=0,altitude:a=null,fovy:A=null,position:l=null,nearZMultiplier:u=.02,farZMultiplier:c=1.01}={width:1,height:1}){e=e||1,t=t||1,null===A&&null===a?A=gA(a=1.5):null===A?A=gA(a):null===a&&(a=mA(A));const d=AA(i);a=Math.max(.75,a);const f=dA({longitude:r,latitude:n}),h=uA([r,n]);h[2]=0,l&&function(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}(h,h,cs([],l,f.unitsPerMeter)),this.projectionMatrix=function({width:e,height:t,pitch:n,altitude:r,fovy:i,nearZMultiplier:o,farZMultiplier:s}){const{fov:a,aspect:A,near:l,far:u}=pA({width:e,height:t,altitude:r,fovy:i,pitch:n,nearZMultiplier:o,farZMultiplier:s});return Ms([],a,A,l,u)}({width:e,height:t,pitch:o,fovy:A,nearZMultiplier:u,farZMultiplier:c}),this.viewMatrix=hA({height:t,scale:d,center:h,pitch:o,bearing:s,altitude:a}),this.width=e,this.height=t,this.scale=d,this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=a,this.fovy=A,this.center=h,this.meterOffset=l||[0,0,0],this.distanceScales=f,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:n,viewMatrix:r}=this,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ss(i,i,n),Ss(i,i,r),this.viewProjectionMatrix=i;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ks(o,o,[e/2,-t/2,1]),Ps(o,o,[1,-1,0]),Ss(o,o,i);const s=Es([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!s)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=s}equals(e){return e instanceof EA&&(e.width===this.width&&e.height===this.height&&Is(e.projectionMatrix,this.projectionMatrix)&&Is(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const n=vA(this.projectPosition(e),this.pixelProjectionMatrix),[r,i]=n,o=t?i:this.height-i;return 2===e.length?[r,o]:[r,o,n[2]]}unproject(e,{topLeft:t=!0,targetZ:n}={}){const[r,i,o]=e,s=t?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],A=yA([r,s,o],this.pixelUnprojectionMatrix,a),[l,u,c]=this.unprojectPosition(A);return Number.isFinite(o)?[l,u,c]:Number.isFinite(n)?[l,u,n]:[l,u]}projectPosition(e){const[t,n]=uA(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=cA(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){return uA(e)}unprojectFlat(e){return cA(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const n=yA(t,this.pixelUnprojectionMatrix),r=Ko([],uA(e),Jo([],n));return cA(Ko([],this.center,r))}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}fitBounds(e,t={}){const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=bA(Object.assign({width:n,height:r,bounds:e},t));return new EA({width:n,height:r,longitude:i,latitude:o,zoom:s})}getBounds(e){const t=this.getBoundingRegion(e),n=Math.min(...t.map((e=>e[0]))),r=Math.max(...t.map((e=>e[0])));return[[n,Math.min(...t.map((e=>e[1])))],[r,Math.max(...t.map((e=>e[1])))]]}getBoundingRegion(e={}){return _A(this,e.z||0)}}const SA=["longitude","latitude","zoom"],PA={curve:1.414,speed:1.2};function kA(e,t,n){const r=(n=Object.assign({},PA,n)).curve,i=e.zoom,o=[e.longitude,e.latitude],s=AA(i),a=t.zoom,A=[t.longitude,t.latitude],l=AA(a-i),u=uA(o),c=uA(A),d=ns([],c,u),f=Math.max(e.width,e.height),h=f/l,p=(m=(g=d)[0],v=g[1],Math.hypot(m,v)*s);var g,m,v;const y=Math.max(p,.01),b=r*r,w=(h*h-f*f+b*b*y*y)/(2*f*b*y),_=(h*h-f*f-b*b*y*y)/(2*h*b*y),x=Math.log(Math.sqrt(w*w+1)-w),E=Math.log(Math.sqrt(_*_+1)-_);return{startZoom:i,startCenterXY:u,uDelta:d,w0:f,u1:p,S:(E-x)/r,rho:r,rho2:b,r0:x,r1:E}}const CA=Ua((function({viewport:e,center:t}){return new zs(e.viewProjectionMatrix).invert().transform(t)})),TA=Ua((function({viewport:e,shadowMatrices:t}){const n=[],r=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((e=>function(e,t){const[n,r,i]=e,o=yA([n,r,i],t);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(e,r)));for(const r of t){const t=r.clone().translate(new ps(e.center).negate()),i=o.map((e=>t.transform(e))),s=(new zs).ortho({left:Math.min(...i.map((e=>e[0]))),right:Math.max(...i.map((e=>e[0]))),bottom:Math.min(...i.map((e=>e[1]))),top:Math.max(...i.map((e=>e[1]))),near:Math.min(...i.map((e=>-e[2]))),far:Math.max(...i.map((e=>-e[2])))});n.push(s.multiplyRight(r))}return n})),MA=[0,0,0,1],IA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];var LA={name:"shadow",dependencies:[Za],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(e={},t={})=>{if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){const{shadowEnabled:n=!0}=e;return n&&e.shadowMatrices&&e.shadowMatrices.length>0?function(e={},t={}){const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||MA,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=CA({viewport:e.viewport,center:t.project_uCenter}),i=[],o=TA({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let n=0;n<e.shadowMatrices.length;n++){const s=o[n],a=s.clone().translate(new ps(e.viewport.center).negate());t.project_uCoordinateSystem===Oa.LNGLAT&&t.project_uProjectionMode===Da.WEB_MERCATOR?(o[n]=a,i[n]=r):(o[n]=s.clone().multiplyRight(IA),i[n]=a.transform(r))}for(let t=0;t<o.length;t++)n["shadow_uViewProjectionMatrices[".concat(t,"]")]=o[t],n["shadow_uProjectCenters[".concat(t,"]")]=i[t],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(t)]=e.shadowMaps[t]:n["shadow_uShadowMap".concat(t)]=e.dummyShadowMap;return n}(e,t):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},RA={inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...ua};const OA=[Ra,Za],DA=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function BA(e){const t=ga.getDefaultProgramManager(e);for(const e of OA)t.addDefaultModule(e);for(const e of DA)t.addShaderHook(e);return t}const FA=[255,255,255],zA=1;let NA=0;class jA{constructor(e={}){const{color:t=FA}=e,{intensity:n=zA}=e;this.id=e.id||"ambient-".concat(NA++),this.color=t,this.intensity=n,this.type="ambient"}}const UA=[255,255,255],VA=1,WA=[0,0,-1];let GA=0;class HA{constructor(e={}){const{color:t=UA}=e,{intensity:n=VA}=e,{direction:r=WA}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-".concat(GA++),this.color=t,this.intensity=n,this.type="directional",this.direction=new ps(r).normalize().toArray(),this.shadow=i}getProjectedLight(){return this}}class QA{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props={...e}}preRender(){}getModuleParameters(){}cleanup(){}}class $A extends class{constructor(e,t={}){const{id:n="pass"}=t;this.id=n,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return jn(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:n,onViewportActive:r,clearCanvas:i=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;i&&function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;jn(e,{viewport:[0,0,t,n]}),e.clear(16640)}(o);const s=[];for(const i of t){const t=i.viewport||i,a=n&&n[t.id];r(t);const A=this._getDrawLayerParams(t,e);e.view=a;const l=t.subViewports||[t];for(const t of l){e.viewport=t;const n=this._drawLayersInViewport(o,e,A);s.push(n)}}return s}_getDrawLayerParams(e,{layers:t,pass:n,layerFilter:r,effects:i,moduleParameters:o}){const s=[],a=qA(),A={viewport:e,isPicking:n.startsWith("picking"),renderPass:n};for(let e=0;e<t.length;e++){const l=t[e],u=this._shouldDrawLayer(l,A,r),c={shouldDrawLayer:u,layerRenderIndex:a(l,u)};u&&(c.moduleParameters=this._getModuleParameters(l,i,n,o),c.layerParameters=this.getLayerParameters(l,e)),s[e]=c}return s}_drawLayersInViewport(e,{layers:t,pass:n,viewport:r,view:i},o){const s=function(e,{viewport:t}){const n=e.canvas?e.canvas.clientHeight||e.canvas.height:100,r=t,i=Vn(e);return[r.x*i,(n-r.y-r.height)*i,r.width*i,r.height*i]}(e,{viewport:r});if(i&&i.props.clear){const t=!0===i.props.clear?{color:!0,depth:!0}:i.props.clear;Un(e,{scissorTest:!0,scissor:s},(()=>Dr(e,t)))}const a={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};jn(e,{viewport:s});for(let e=0;e<t.length;e++){const i=t[e],{shouldDrawLayer:s,layerRenderIndex:A,moduleParameters:l,layerParameters:u}=o[e];if(s&&i.props.pickable&&a.pickableCount++,i.isComposite)a.compositeCount++;else if(s){a.visibleCount++,l.viewport=r;try{i.drawLayer({moduleParameters:l,uniforms:{layerIndex:A},parameters:u})}catch(e){i.raiseError(e,"drawing ".concat(i," to ").concat(n))}}}return a}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,n){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;if(t.layer=e,n&&!n(t))return!1;let r=e.parent;for(;r;){if(!r.filterSubLayer(t))return!1;t.layer=r,r=r.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,n,r){const i=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Vn(this.gl)});if(t)for(const n of t)Object.assign(i,n.getModuleParameters(e));return Object.assign(i,this.getModuleParameters(e,t),r)}}function qA(e=0,t={}){const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,A=i.parent&&i.parent.id;let l;if(A&&!(A in t)&&r(i.parent,!1),A in n){const e=n[A]=n[A]||qA(t[A],t);l=e(i,o),n[a]=e}else Number.isFinite(s)?(l=s+(t[A]||0),n[a]=null):l=e;return o&&l>=e&&(e=l+1),t[a]=l,l};return r}class YA extends $A{constructor(e,t){super(e,t),this.shadowMap=new kr(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Rr(e,{format:33189,width:1,height:1}),this.fbo=new Hr(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;Un(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=e.viewports[0],r=Vn(this.gl),i=n.width*r,o=n.height*r;i===t.width&&o===t.height||t.resize({width:i,height:o}),super.render({...e,target:t,pass:"shadow"})}))}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const ZA={color:[255,255,255],intensity:1},XA=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],KA=[0,0,0,200/255];class JA extends QA{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=KA,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow))}preRender(e,{layers:t,layerFilter:n,viewports:r,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=ga.getDefaultProgramManager(e),LA&&this.programManager.addDefaultModule(LA)),this.dummyShadowMap||(this.dummyShadowMap=new kr(e,{width:1,height:1}));for(let e=0;e<this.shadowPasses.length;e++){this.shadowPasses[e].render({layers:t,layerFilter:n,viewports:r,onViewportActive:i,views:o,moduleParameters:{shadowLightId:e,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(LA),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const n=(new zs).lookAt({eye:new ps(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new YA(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new jA(ZA),this.directionalLights.push(new HA(XA[0]),new HA(XA[1])))}}var el=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:n=1,type:r,padding:i=0,copy:o=!1,initialize:s=!1,maxCount:a}){const A=r||e&&e.constructor||Float32Array,l=t*n+i;if(ArrayBuffer.isView(e)){if(l<=e.length)return e;if(l*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new A(e.buffer,0,l)}let u;a&&(u=a*n+i);const c=this._allocate(A,l,s,u);return e&&o?c.set(e):s||c.fill(0,0,4),this._release(e),c}release(e){this._release(e)}_allocate(e,t,n,r){let i=Math.max(Math.ceil(t*this.props.overAlloc),1);i>r&&(i=r);const o=this._pool,s=e.BYTES_PER_ELEMENT*i,a=o.findIndex((e=>e.byteLength>=s));if(a>=0){const t=new e(o.splice(a,1)[0],0,i);return n&&t.fill(0),t}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:r}=n,i=t.findIndex((e=>e.byteLength>=r));i<0?t.push(n):(i>0||t.length<this.props.poolSize)&&t.splice(i,0,n),t.length>this.props.poolSize&&t.shift()}};const tl=new ps;function nl(e,t,n,r){tl.set(e,t,n);const i=tl.len();return{distance:r/i,normal:new ps(-e/i,-t/i,-n/i)}}let rl;function il(e,{size:t=1,startIndex:n=0,endIndex:r}){Number.isFinite(r)||(r=e.length);const i=(r-n)/t;rl=el.allocate(rl,i,{type:Float32Array,size:2*t});let o=n,s=0;for(;o<r;){for(let n=0;n<t;n++){const r=e[o++];rl[s+n]=r,rl[s+n+t]=(a=r)-Math.fround(a)}s+=2*t}var a;return rl.subarray(0,i*t*2)}const ol=Math.PI/180,sl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],al=[0,0,0],Al={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class ll{constructor(e={}){const{id:t=null,x:n=0,y:r=0,width:i=1,height:o=1}=e;this.id=t||this.constructor.displayName||"viewport",this.x=n,this.y=r,this.width=i||1,this.height=o||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Da.WEB_MERCATOR:Da.WEB_MERCATOR_AUTO_OFFSET:Da.IDENTITY}equals(e){return e instanceof ll&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Wo(e.projectionMatrix,this.projectionMatrix)&&Wo(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const n=vA(this.projectPosition(e),this.pixelProjectionMatrix),[r,i]=n,o=t?i:this.height-i;return 2===e.length?[r,o]:[r,o,n[2]]}unproject(e,{topLeft:t=!0,targetZ:n}={}){const[r,i,o]=e,s=t?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],A=yA([r,s,o],this.pixelUnprojectionMatrix,a),[l,u,c]=this.unprojectPosition(A);return Number.isFinite(o)?[l,u,c]:Number.isFinite(n)?[l,u,n]:[l,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){return this.isGeospatial?uA(e):e}unprojectFlat(e){return this.isGeospatial?cA(e):e}getBounds(e={}){const t={targetZ:e.z||0},n=this.unproject([0,0],t),r=this.unproject([this.width,0],t),i=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}getDistanceScales(e=null){return e?dA({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:n=1,height:r=1}){return e<this.x+this.width&&this.x<e+n&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(e){const t={};return t.left=nl(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),t.right=nl(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),t.bottom=nl(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),t.top=nl(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),t.near=nl(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),t.far=nl(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14]),t}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:e,fovyRadians:t,aspect:n,focalDistance:r,near:i,far:o}){return e?(new zs).orthographic({fovy:t,aspect:n,focalDistance:r,near:i,far:o}):(new zs).perspective({fovy:t,aspect:n,near:i,far:o})}_initViewMatrix(e){const{viewMatrix:t=sl,longitude:n=null,latitude:r=null,zoom:i=null,position:o=null,modelMatrix:s=null,focalDistance:a=1,distanceScales:A=null}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this.zoom=i,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:e}){tA(Number.isFinite(e));const t=Math.cos(e*iA);return lA(aA*t)-9}({latitude:r})+Math.log2(a):0);const l=Math.pow(2,this.zoom);this.scale=l,this.distanceScales=this.isGeospatial?dA({latitude:r,longitude:n}):A||Al,this.focalDistance=a,this.distanceScales.metersPerUnit=new ps(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new ps(this.distanceScales.unitsPerMeter),this.position=al,this.meterOffset=al,o&&(this.position=o,this.modelMatrix=s,this.meterOffset=s?s.transformVector(o):o),this.isGeospatial?(this.longitude=n,this.latitude=r,this.center=this._getCenterInWorld({longitude:n,latitude:r})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=t,this.viewMatrix=(new zs).multiplyRight(this.viewMatrixUncentered).translate(new ps(this.center||al).negate())}_getCenterInWorld({longitude:e,latitude:t}){const{meterOffset:n,distanceScales:r}=this,i=new ps(this.projectPosition([e,t,0]));if(n){const e=new ps(n).scale(r.unitsPerMeter);i.add(e)}return i}_initProjectionMatrix(e){const{projectionMatrix:t=null,orthographic:n=!1,fovyRadians:r,fovy:i=75,near:o=.1,far:s=1e3,focalDistance:a=1}=e;this.projectionMatrix=t||this._createProjectionMatrix({orthographic:n,fovyRadians:r||i*ol,aspect:this.width/this.height,focalDistance:a,near:o,far:s})}_initPixelMatrices(){const e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var t;Ss(e,e,this.projectionMatrix),Ss(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=Es([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(t=this.viewMatrixInverse)[12],t[13],t[14]];const n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ks(n,n,[this.width/2,-this.height/2,1]),Ps(n,n,[1,-1,0]),Ss(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=Es([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||qt.warn("Pixel project matrix not invertible")()}}ll.displayName="Viewport";class ul extends ll{constructor(e={}){const{latitude:t=0,longitude:n=0,zoom:r=11,pitch:i=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,orthographic:A=!1,repeat:l=!1,worldOffset:u=0}=e;let{width:c,height:d,altitude:f=1.5}=e;const h=Math.pow(2,r);c=c||1,d=d||1,f=Math.max(.75,f);const{fov:p,aspect:g,focalDistance:m,near:v,far:y}=pA({width:c,height:d,pitch:i,altitude:f,nearZMultiplier:s,farZMultiplier:a});let b=hA({height:d,pitch:i,bearing:o,scale:h,altitude:f});if(u){b=(new zs).translate([512*u,0,0]).multiplyLeft(b)}super({...e,width:c,height:d,viewMatrix:b,longitude:n,latitude:t,zoom:r,orthographic:A,fovyRadians:p,aspect:g,focalDistance:m,near:v,far:y}),this.latitude=t,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=f,this.orthographic=A,this._subViewports=l?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let e=t;e<=n;e++){const t=e?new ul({...this,worldOffset:e}):this;this._subViewports.push(t)}}return this._subViewports}addMetersToLngLat(e,t){return fA(e,t)}panByPosition(e,t){const n=yA(t,this.pixelUnprojectionMatrix),r=Ko([],this.projectFlat(e),Jo([],n)),i=Ko([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(e={}){const t=_A(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=bA({width:n,height:r,bounds:e,...t});return new ul({width:n,height:r,longitude:i,latitude:o,zoom:s})}}function cl(e,t,n=!1){const r=t.projectPosition(e);if(n&&t instanceof ul){const[n,i,o=0]=e,s=t.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function dl(e,{viewport:t,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[s,a,A=0]=e;switch(n&&([s,a,A]=Rs([],[s,a,A,1],n)),r){case Oa.LNGLAT:return cl([s,a,A],t,o);case Oa.LNGLAT_OFFSETS:return cl([s+i[0],a+i[1],A+(i[2]||0)],t,o);case Oa.METER_OFFSETS:return cl(fA(i,[s,a,A]),t,o);default:return t.isGeospatial?[s+i[0],a+i[1],A+i[2]]:t.projectPosition([s,a,A])}}function fl(e,t){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(e){const t={...e};let{coordinateSystem:n}=e;const{viewport:r,coordinateOrigin:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return n===Oa.DEFAULT&&(n=r.isGeospatial?Oa.LNGLAT:Oa.CARTESIAN),void 0===o&&(t.fromCoordinateSystem=n),void 0===s&&(t.fromCoordinateOrigin=i),t.coordinateSystem=n,t}(t),{geospatialOrigin:A,shaderCoordinateOrigin:l,offsetMode:u}=qa(n,r,i),c=dl(e,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:u});if(u){const e=n.projectPosition(A||l);us(c,c,e)}return c}ul.displayName="WebMercatorViewport";const hl="Awaiting state",pl="Matched. State transferred from previous layer",gl="Initialized",ml="Discarded. Awaiting garbage collection",vl="No longer matched. Awaiting garbage collection",yl="Finalized! Awaiting garbage collection",bl={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")};function wl(e,t=(()=>!0)){return Array.isArray(e)?_l(e,t,[]):t(e)?[e]:[]}function _l(e,t,n){let r=-1;for(;++r<e.length;){const i=e[r];Array.isArray(i)?_l(i,t,n):t(i)&&n.push(i)}return n}function xl({target:e,source:t,start:n=0,count:r=1}){const i=t.length,o=r*i;let s=0;for(let r=n;s<i;s++)e[r++]=t[s];for(;s<o;)s<o-s?(e.copyWithin(n+s,n,n+s),s*=2):(e.copyWithin(n+s,n,n+o-s),s=o);return e}class El{constructor(e,t,n){this.id=e,this.context=n,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let r=e;"string"==typeof e&&(r=Ze(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=null,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=null,this._content=e);for(const e of this._subscribers)e.onChange(this.getData())}}class Sl{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:n=!1,persistent:r=!0}){let i=this._resources[e];i?i.setData(t,n):(i=new El(e,t,this._context),this._resources[e]=i),i.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const e in t){const n=t[e];n.resource&&n.resource.unsubscribe(n)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:n,requestId:r="default"}){const{_resources:i,protocol:o}=this;e.startsWith(o)&&(i[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const s=i[e];if(this._track(n,r,s,t),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,r){const i=this._consumers,o=i[e]=i[e]||{},s=o[t]||{};s.resource&&(s.resource.unsubscribe(s),s.resource=null,this.prune()),n&&(o[t]=s,s.onChange=r,s.resource=n,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}const Pl=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class kl{constructor(e,{deck:t,stats:n,viewport:r,timeline:i}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Sl({gl:e,protocol:"deck://"}),this.context={...Pl,layerManager:this,gl:e,deck:t,programManager:e&&BA(e),stats:n||new D({id:"deck.gl"}),viewport:r||new ll({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new La,resourceManager:this.resourceManager},this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Xt("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=wl(e,Boolean);for(const t of e)t.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return Xt("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,n){n.raiseError(t,"".concat(e," of ").concat(n))}_updateLayers(e,t){const n={};for(const t of e)n[t.id]?qt.warn("Multiple old layers with same id ".concat(t.id))():n[t.id]=t;const r=[];this._updateSublayersRecursively(t,n,r),this._finalizeOldLayers(n);let i=!1;for(const e of r)if(e.hasUniformTransition()){i=!0;break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(e,t,n){for(const r of e){r.context=this.context;const e=t[r.id];null===e&&qt.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let i=null;try{this._debug&&e!==r&&r.validateProps(),e?(this._transferLayerState(e,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),i=r.isComposite&&r.getSubLayers()}catch(e){this._handleError("matching",e,r)}i&&this._updateSublayersRecursively(i,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=gl}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=pl,t!==e&&(e.lifecycle=ml)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=vl;try{e._finalize(),e.lifecycle=yl}catch(t){this._handleError("finalization",t,e)}}}function Cl(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const n in e){const r=e[n],i=t[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Cl(r,i)))return!1}return!0}class Tl{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return"string"==typeof e?this.views.find((t=>t.id===e)):e}getViewState(e){const t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),r={x:e[0],y:e[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=e.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=wl(e,Boolean);this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){if(e){!Cl(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else qt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>e._getViewport(t,{width:t.width,height:t.height}),...t})}_updateController(e,t,n,r){let i=e.controller;return i?(i={...t,...e.props,...i,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height},r?r.setProps(i):r=this._createController(e,i),r):null}_rebuildViewports(){const{width:e,height:t,views:n}=this,r=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let o=n.length;o--;){const s=n[o],a=this.getViewState(s),A=s.makeViewport({width:e,height:t,viewState:a});let l=r[s.id];s.controller&&!l&&(i=!0),!i&&s.controller||!l||(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,a,A,l),this._viewports.unshift(A)}for(const e in r)r[e]&&!this.controllers[e]&&r[e].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,r)=>!e[r].equals(t[r])))}}const Ml=/([0-9]+\.?[0-9]*)(%|px)/;function Il(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=e.match(Ml);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error("Could not parse position string ".concat(e))}}function Ll(e,t){return e.relative?Math.round(e.position*t):e.position}function Rl(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Ol{constructor(e={}){const{id:t=null,x:n=0,y:r=0,width:i="100%",height:o="100%",projectionMatrix:s=null,fovy:a=50,near:A=.1,far:l=1e3,modelMatrix:u=null,viewportInstance:c=null,type:d=ll}=e;Rl(!c||c instanceof ll),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.type=d,this.props={...e,id:this.id,projectionMatrix:s,fovy:a,near:A,far:l,modelMatrix:u},this._parseDimensions({x:n,y:r,width:i,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){if(this===e)return!0;if(this.viewportInstance)return e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance);return Cl(this.props,e.props)}makeViewport({width:e,height:t,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const r=this.getDimensions({width:e,height:t});return this._getViewport(n,r)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions({width:e,height:t}){return{x:Ll(this._x,e),y:Ll(this._y,t),width:Ll(this._width,e),height:Ll(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),{...e,...t}):null}_getViewport(e,t){const{type:n}=this;return new n({...e,...this.props,...t})}_parseDimensions({x:e,y:t,width:n,height:r}){this._x=Il(e),this._y=Il(t),this._width=Il(n),this._height=Il(r)}}function Dl(){}const Bl={onStart:Dl,onUpdate:Dl,onInterrupt:Dl,onEnd:Dl};class Fl{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings={...Bl,...e},this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const zl=()=>{},Nl=1,jl=2,Ul=3,Vl={transitionEasing:e=>e,transitionInterruption:Nl,onTransitionStart:zl,onTransitionInterrupt:zl,onTransitionEnd:zl};class Wl{constructor(e,t={}){this.ControllerState=e,this.props={...Vl,...t},this.propsInTransition=null,this.transition=new Fl(t.timeline),this.onViewStateChange=t.onViewStateChange||zl,this.onStateChange=t.onStateChange||zl,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(e={...Vl,...e},this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){const{interruption:r,endProps:i}=this.transition.settings,o={...n,...r===jl?i:this.propsInTransition||n};this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.settings.interruption===Ul||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),{transitionInterpolator:i}=t,o=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0===o)return;const s=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:s.start,endProps:s.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=e,a=s(t/o),A=n.interpolateProps(r,i,a);this.propsInTransition=new this.ControllerState({...this.props,...A}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}class Gl{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:n,required:r}=e;this._propsToCompare=t,this._propsToExtract=n,this._requiredProps=r}arePropsEqual(e,t){for(const n of this._propsToCompare||Object.keys(t))if(!(n in e)||!(n in t)||!Wo(e[n],t[n]))return!1;return!0}initializeProps(e,t){let n;if(this._propsToExtract){const r={},i={};for(const n of this._propsToExtract)r[n]=e[n],i[n]=t[n];n={start:r,end:i}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}interpolateProps(e,t,n){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];Rl(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}const Hl=["longitude","latitude","zoom","bearing","pitch"],Ql=["longitude","latitude","zoom"];class $l extends Gl{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:Hl,extract:Hl,required:Ql}),this.opts=e}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(e),s=r(t),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const r={};for(const i of this._propsToExtract)r[i]=Vo(e[i]||0,t[i]||0,n);if(t.aroundPosition){const i=this.opts.makeViewport({...t,...r});Object.assign(r,i.panByPosition(t.aroundPosition,Vo(e.around,t.around,n)))}return r}}const ql={transitionDuration:0},Yl={transitionDuration:300,transitionEasing:e=>e,transitionInterruption:Nl},Zl=e=>1-(1-e)*(1-e),Xl=["wheel"],Kl=["panstart","panmove","panend"],Jl=["pinchstart","pinchmove","pinchend"],eu=["tripanstart","tripanmove","tripanend"],tu=["doubletap"],nu=["keydown"];const ru=0,iu=0,ou=1.5,su=0,au=20,Au=0,lu=60;class uu extends class{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}{constructor({makeViewport:e,width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s=iu,pitch:a=ru,altitude:A=ou,maxZoom:l=au,minZoom:u=su,maxPitch:c=lu,minPitch:d=Au,startPanLngLat:f,startZoomLngLat:h,startRotatePos:p,startBearing:g,startPitch:m,startZoom:v,normalize:y}={}){Rl(Number.isFinite(i)),Rl(Number.isFinite(r)),Rl(Number.isFinite(o)),super({width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s,pitch:a,altitude:A,maxZoom:l,minZoom:u,maxPitch:c,minPitch:d,normalize:y}),this._state={startPanLngLat:f,startZoomLngLat:h,startRotatePos:p,startBearing:g,startPitch:m,startZoom:v},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const n=this._state.startPanLngLat||this._unproject(t);if(!n)return this;const r=this.makeViewport(this._viewportProps).panByPosition(n,e);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:n=0}){const{startRotatePos:r,startBearing:i,startPitch:o}=this._state;if(!r||!Number.isFinite(i)||!Number.isFinite(o))return this;let s;return s=e?this._calculateNewPitchAndBearing({...this._getRotationParams(e,r),startBearing:i,startPitch:o}):{bearing:i+t,pitch:o+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:n}){let{startZoom:r,startZoomLngLat:i}=this._state;Number.isFinite(r)||(r=this._viewportProps.zoom,i=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:n,startZoom:r}),s=this.makeViewport({...this._viewportProps,zoom:o});return this._getUpdatedState({zoom:o,...s.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this._viewportProps},{bearing:r,longitude:i}=n;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}_zoomFromCenter(e){const{width:t,height:n}=this._viewportProps;return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this._viewportProps;return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this._viewportProps,...this._state,...e})}_applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:r}=e;e.zoom=Uo(r,n,t);const{maxPitch:i,minPitch:o,pitch:s}=e;e.pitch=Uo(s,o,i);const{normalize:a=!0}=e;return a&&Object.assign(e,function({width:e,height:t,longitude:n,latitude:r,zoom:i,pitch:o=0,bearing:s=0}){(n<-180||n>180)&&(n=Ja(n+180,360)-180),(s<-180||s>180)&&(s=Ja(s+180,360)-180);const a=eA(t/512);if(i<=a)i=a,r=0;else{const e=t/2/Math.pow(2,i),n=cA([0,e])[1];if(r<n)r=n;else{const t=cA([0,512-e])[1];r>t&&(r=t)}}return{width:e,height:t,longitude:n,latitude:r,zoom:i,pitch:o,bearing:s}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:n,minZoom:r}=this._viewportProps;return Uo(t+Math.log2(e),r,n)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:n,startPitch:r}){t=Uo(t,-1,1);const{minPitch:i,maxPitch:o}=this._viewportProps;let s=r;return t>0?s=r+t*(o-r):t<0&&(s=r-t*(i-r)),{pitch:s,bearing:n+180*e}}_getRotationParams(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[1],o=t[1],{width:s,height:a}=this._viewportProps,A=n/s;let l=0;return r>0?Math.abs(a-o)>5&&(l=r/(o-a)*1.2):r<0&&o>5&&(l=1-i/o),l=Math.min(1,Math.max(-1,l)),{deltaScaleX:A,deltaScaleY:l}}}class cu extends class{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new Wl(e,{...t,onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)});const n=this.linearTransitionProps;this._transition=n&&{...Yl,transitionInterpolator:new $l({transitionProps:n})},this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state});const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:n}=this.controllerStateProps,{offsetCenter:r}=e;return[r.x-t,r.y-n]}isPointInBounds(e,t){const{width:n,height:r}=this.controllerStateProps;if(t&&t.handled)return!1;const i=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r;return i&&t&&t.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:A=!0}=e,l=Boolean(this.onViewStateChange);this.toggleEvents(Xl,l&&n),this.toggleEvents(Kl,l&&(r||i)),this.toggleEvents(Jl,l&&(s||a)),this.toggleEvents(eu,l&&a),this.toggleEvents(tu,l&&o),this.toggleEvents(nu,l&&A),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=A}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e,t={},n={}){const r={...e.getViewportProps(),...t},i=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(n),i){const e=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:e})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,ql,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,ql,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Zl},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,ql,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Zl},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:n=.01,smooth:r=!1}=this.scrollZoom,{delta:i}=e;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,ql,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,ql,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Zl},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,ql,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-n})}return this.updateViewport(t,ql,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:n}=this;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const r=this.getCenter(e);let i=this.controllerState.rotateEnd();const o=Math.log2(e.scale),s=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),a=Math.pow(2,o+s*t/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:Zl},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=this.keyboard,{controllerState:s}=this;let a;const A={};switch(e.srcEvent.code){case"Minus":a=t?s.zoomOut(n).zoomOut(n):s.zoomOut(n),A.isZooming=!0;break;case"Equal":a=t?s.zoomIn(n).zoomIn(n):s.zoomIn(n),A.isZooming=!0;break;case"ArrowLeft":t?(a=s.rotateLeft(i),A.isRotating=!0):(a=s.moveLeft(r),A.isPanning=!0);break;case"ArrowRight":t?(a=s.rotateRight(i),A.isRotating=!0):(a=s.moveRight(r),A.isPanning=!0);break;case"ArrowUp":t?(a=s.rotateUp(o),A.isRotating=!0):(a=s.moveUp(r),A.isPanning=!0);break;case"ArrowDown":t?(a=s.rotateDown(o),A.isRotating=!0):(a=s.moveDown(r),A.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),A),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?{...t,transitionInterpolator:new $l({...e,transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport})}:t:ql}}{constructor(e){e.dragMode=e.dragMode||"pan",super(uu,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e);(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state}))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}class du extends Ol{constructor(e){super({...e,type:ul})}get controller(){return this._getControllerProps({type:cu})}}du.displayName="MapView";const fu=new JA;class hu{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length===this.effects.length&&Cl(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some((e=>e instanceof JA))||this._internalEffects.push(fu)}}class pu extends $A{}const gu={blendFunc:[1,0,32771,0],blendEquation:32774};class mu extends $A{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:n,viewports:r,onViewportActive:i,pickingFBO:o,deviceRect:{x:s,y:a,width:A,height:l},pass:u="picking",redrawReason:c,pickZ:d}){const f=this.gl;return this.pickZ=d,Un(f,{scissorTest:!0,scissor:[s,a,A,l],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...gu,blend:!d},(()=>{super.render({target:o,layers:e,layerFilter:t,views:n,viewports:r,onViewportActive:i,pass:u,redrawReason:c})}))}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const n=this.pickZ?{blend:!1}:{...gu,blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]};return{...e.props.parameters,...n}}}class vu{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new pu(e),this.pickLayersPass=new mu(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||Hr.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:n});this._postRender(e.effects,e),this.renderCount++,Xt("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let n=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(n=r);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Hr(this.gl),new Hr(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:n}=this,r={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of e)if(i.postRender){if(i===this.lastPostProcessEffect){r.target=t.target,i.postRender(this.gl,r);break}const e=i.postRender(this.gl,r);r.inputBuffer=e,r.swapBuffer=e===n[0]?n[1]:n[0]}}}const yu={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function bu({pickedColors:e,layers:t,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){if(e){const{x:s,y:a,width:A,height:l}=o;let u=i*i,c=-1,d=0;for(let t=0;t<l;t++){const i=t+a-r,o=i*i;if(o>u)d+=4*A;else for(let t=0;t<A;t++){if(e[d+3]-1>=0){const e=t+s-n,r=e*e+o;r<=u&&(u=r,c=d)}d+=4}}if(c>=0){const n=e[c+3]-1,r=e.slice(c,c+4),i=t[n];if(i){const e=i.decodePickingColor(r),t=Math.floor(c/4/A);return{pickedColor:r,pickedLayer:i,pickedObjectIndex:e,pickedX:s+(c/4-t*A),pickedY:a+t}}qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return yu}function wu({pickInfo:e,mode:t,viewports:n,layerFilter:r,pixelRatio:i,x:o,y:s,z:a}){const A=e&&e.pickedLayer,l=function(e,t,n){for(let r=e.length-1;r>=0;r--){const i=e[r];if(i.containsPixel(t)&&(!n||n(i)))return i}return e[0]}(n,{x:o,y:s},r&&A&&(e=>r({layer:A,viewport:e,isPicking:!0,renderPass:"picking:".concat(t)}))),u=l&&l.unproject([o-l.x,s-l.y],{targetZ:a});return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:u,devicePixel:e&&[e.pickedX,e.pickedY],pixelRatio:i}}function _u(e){const{pickInfo:t,lastPickedInfo:n,mode:r,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,A=s?[s]:[];if("hover"===r){const e=n.index,t=n.layerId,r=s&&s.props.id;if(r!==t||a!==e){if(r!==t){const e=i.find((e=>e.props.id===t));e&&A.unshift(e)}n.layerId=r,n.index=a,n.info=null}}const l=wu(e),u=new Map;return u.set(null,l),A.forEach((e=>{let t={...l};e===s&&(t.color=o,t.index=a,t.picked=!0),t=xu({layer:e,info:t,mode:r}),e===s&&"hover"===r&&(n.info=t),u.set(t.layer.id,t),"hover"===r&&t.layer.updateAutoHighlight(t)})),u}function xu({layer:e,info:t,mode:n}){for(;e&&t;){const r=t.layer||null;t.sourceLayer=r,t.layer=e,t=e.getPickingInfo({info:t,mode:n,sourceLayer:r}),e=e.parent}return t}class Eu{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new mu(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:n,viewports:r},i=this.lastPickedInfo.info){const o=i&&i.layer&&i.layer.id,s=i&&i.viewport&&i.viewport.id,a=o?n.find((e=>e.id===o)):null,A=s&&r.find((e=>e.id===s))||r[0],l=A&&A.unproject([e-A.x,t-A.y]),u={x:e,y:t,viewport:A,coordinate:l,layer:a};return a?{...i,...u}:Object.assign(u,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new Hr(e),Hr.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Hr(e),this.depthFBO.attach({36064:new kr(e,{format:sn(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>e.isPickable()&&!e.isComposite));return t.length>255?(qt.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:n,x:r,y:i,radius:o=0,depth:s=1,mode:a="query",unproject3D:A,onViewportActive:l}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:wu({viewports:n,x:r,y:i})};this._resizeBuffer();const u=Vn(this.gl),c=Wn(this.gl,[r,i],!0),d=[c.x+Math.floor(c.width/2),c.y+Math.floor(c.height/2)],f=Math.round(o*u),{width:h,height:p}=this.pickingFBO,g=this._getPickingRect({deviceX:d[0],deviceY:d[1],deviceRadius:f,deviceWidth:h,deviceHeight:p});let m;const v=[],y={};for(let o=0;o<s;o++){const c=bu({pickedColors:g&&this._drawAndSample({layers:e,views:t,viewports:n,onViewportActive:l,deviceRect:g,pass:"picking:".concat(a),redrawReason:a}),layers:e,deviceX:d[0],deviceY:d[1],deviceRadius:f,deviceRect:g});let h;if(c.pickedLayer&&A&&this.depthFBO){h=this._drawAndSample({layers:[c.pickedLayer],views:t,viewports:n,onViewportActive:l,deviceRect:{x:c.pickedX,y:c.pickedY,width:1,height:1},pass:"picking:".concat(a),redrawReason:"pick-z",pickZ:!0})[0]*n[0].distanceScales.metersPerUnit[2]+n[0].position[2]}if(c.pickedColor&&o+1<s){const t=c.pickedColor[3]-1;y[t]=!0,e[t].disablePickingIndex(c.pickedObjectIndex)}m=_u({pickInfo:c,lastPickedInfo:this.lastPickedInfo,mode:a,layers:e,layerFilter:this.layerFilter,viewports:n,x:r,y:i,z:h,pixelRatio:u});for(const e of m.values())e.layer&&v.push(e);if(!c.pickedColor)break}for(const t in y)e[t].restorePickingColors();return{result:v,emptyInfo:m&&m.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:n,x:r,y:i,width:o=1,height:s=1,mode:a="query",maxObjects:A=null,onViewportActive:l}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const u=Vn(this.gl),c=Wn(this.gl,[r,i],!0),d=c.x,f=c.y+c.height,h=Wn(this.gl,[r+o,i+s],!0),p=h.x+h.width,g=h.y,m={x:d,y:g,width:p-d,height:f-g},v=function({pickedColors:e,layers:t}){const n=new Map;if(e)for(let r=0;r<e.length;r+=4){const i=e[r+3]-1;if(i>=0){const o=e.slice(r,r+4),s=o.join(",");if(!n.has(s)){const e=t[i];e?n.set(s,{pickedColor:o,pickedLayer:e,pickedObjectIndex:e.decodePickingColor(o)}):qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:n,onViewportActive:l,deviceRect:m,pass:"picking:".concat(a),redrawReason:a}),layers:e}),y=new Map,b=Number.isFinite(A);for(let e=0;e<v.length&&!(b&&y.size>=A);e++){const t=v[e];let n={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:r,y:i,width:o,height:s,pixelRatio:u};n=xu({layer:t.pickedLayer,info:n,mode:a}),y.has(n.object)||y.set(n.object,n)}return Array.from(y.values())}_drawAndSample({layers:e,views:t,viewports:n,onViewportActive:r,deviceRect:i,pass:o,redrawReason:s,pickZ:a}){if(e.length<1)return null;const A=a?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:n,onViewportActive:r,pickingFBO:A,deviceRect:i,pass:o,redrawReason:s,pickZ:a});const{x:l,y:u,width:c,height:d}=i,f=new(a?Float32Array:Uint8Array)(c*d*4);return Br(A,{sourceX:l,sourceY:u,sourceWidth:c,sourceHeight:d,target:f}),f}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:n,deviceWidth:r,deviceHeight:i}){const o=Math.max(0,e-n),s=Math.max(0,t-n),a=Math.min(r,e+n+1)-o,A=Math.min(i,t+n+1)-s;return a<=0||A<=0?null:{x:o,y:s,width:a,height:A}}}const Su={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class Pu{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Su),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,n){const r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}remove(){this.el&&this.el.remove()}}var ku={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */!function(e){!function(t,n,r,i){var o,s=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),A=Math.round,l=Math.abs,u=Date.now;function c(e,t,n){return setTimeout(v(e,n),t)}function d(e,t,n){return!!Array.isArray(e)&&(f(e,n[t],n),!0)}function f(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function h(e,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,i,r),e.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var p=h((function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===i)&&(e[r[o]]=t[r[o]]),o++;return e}),"extend","Use `assign`."),g=h((function(e,t){return p(e,t,!0)}),"merge","Use `assign`.");function m(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&o(r,n)}function v(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return"function"==typeof e?e.apply(t&&t[0]||i,t):e}function b(e,t){return e===i?t:e}function w(e,t,n){f(S(t),(function(t){e.addEventListener(t,n,!1)}))}function _(e,t,n){f(S(t),(function(t){e.removeEventListener(t,n,!1)}))}function x(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function E(e,t){return e.indexOf(t)>-1}function S(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function C(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];P(i,s)<0&&r.push(e[o]),i[o]=s,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function T(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),a=0;a<s.length;){if((r=(n=s[a])?n+o:t)in e)return r;a++}return i}var M=1;function I(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var L="ontouchstart"in t,R=T(t,"PointerEvent")!==i,O=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D="touch",B="mouse",F=24,z=["x","y"],N=["clientX","clientY"];function j(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&n.handler(t)},this.init()}function U(e,t,n){var r=n.pointers.length,o=n.changedPointers.length,s=1&t&&r-o==0,a=12&t&&r-o==0;n.isFirst=!!s,n.isFinal=!!a,s&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,o=r.length;n.firstInput||(n.firstInput=V(t));o>1&&!n.firstMultiple?n.firstMultiple=V(t):1===o&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,A=a?a.center:s.center,c=t.center=W(r);t.timeStamp=u(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=$(A,c),t.distance=Q(A,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=H(t.deltaX,t.deltaY);var d=G(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=l(d.x)>l(d.y)?d.x:d.y,t.scale=a?(f=a.pointers,h=r,Q(h[0],h[1],N)/Q(f[0],f[1],N)):1,t.rotation=a?function(e,t){return $(t[1],t[0],N)+$(e[1],e[0],N)}(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,o,s,a=e.lastInterval||t,A=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(A>25||a.velocity===i)){var u=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,d=G(A,u,c);r=d.x,o=d.y,n=l(d.x)>l(d.y)?d.x:d.y,s=H(u,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=s}(n,t);var f,h;var p=e.element;x(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:A(e.pointers[n].clientX),clientY:A(e.pointers[n].clientY)},n++;return{timeStamp:u(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:A(e[0].clientX),y:A(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:A(n/t),y:A(r/t)}}function G(e,t,n){return{x:t/e||0,y:n/e||0}}function H(e,t){return e===t?1:l(e)>=l(t)?e<0?2:4:t<0?8:16}function Q(e,t,n){n||(n=z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function $(e,t,n){n||(n=z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}j.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(I(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4},Y="mousedown",Z="mousemove mouseup";function X(){this.evEl=Y,this.evWin=Z,this.pressed=!1,j.apply(this,arguments)}m(X,j,{handler:function(e){var t=q[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:B,srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:D,3:"pen",4:B,5:"kinect"},ee="pointerdown",te="pointermove pointerup pointercancel";function ne(){this.evEl=ee,this.evWin=te,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(ee="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),m(ne,j,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=K[r],o=J[e.pointerType]||e.pointerType,s=o==D,a=P(t,e.pointerId,"pointerId");1&i&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&i&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ie="touchstart",oe="touchstart touchmove touchend touchcancel";function se(){this.evTarget=ie,this.evWin=oe,this.started=!1,j.apply(this,arguments)}function ae(e,t){var n=k(e.touches),r=k(e.changedTouches);return 12&t&&(n=C(n.concat(r),"identifier",!0)),[n,r]}m(se,j,{handler:function(e){var t=re[e.type];if(1===t&&(this.started=!0),this.started){var n=ae.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:e})}}});var Ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8},le="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=le,this.targetIds={},j.apply(this,arguments)}function ce(e,t){var n=k(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=k(e.changedTouches),a=[],A=this.target;if(o=n.filter((function(e){return x(e.target,A)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&t&&delete r[s[i].identifier],i++;return a.length?[C(o.concat(a),"identifier",!0),a]:void 0}m(ue,j,{handler:function(e){var t=Ae[e.type],n=ce.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:e})}});function de(){j.apply(this,arguments);var e=v(this.handler,this);this.touch=new ue(this.manager,e),this.mouse=new X(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function fe(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function pe(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}m(de,j,{handler:function(e,t,n){var r=n.pointerType==D,i=n.pointerType==B;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)fe.call(this,t,n);else if(i&&pe.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ge=T(a.style,"touchAction"),me=ge!==i,ve="compute",ye="auto",be="manipulation",we="none",_e="pan-x",xe="pan-y",Ee=function(){if(!me)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!n||t.CSS.supports("touch-action",r)})),e}();function Se(e,t){this.manager=e,this.set(t)}Se.prototype={set:function(e){e==ve&&(e=this.compute()),me&&this.manager.element.style&&Ee[e]&&(this.manager.element.style[ge]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return f(this.manager.recognizers,(function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(E(e,we))return we;var t=E(e,_e),n=E(e,xe);if(t&&n)return we;if(t||n)return t?_e:xe;if(E(e,be))return be;return ye}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=E(r,we)&&!Ee.none,o=E(r,xe)&&!Ee["pan-y"],s=E(r,_e)&&!Ee["pan-x"];if(i){var a=1===e.pointers.length,A=e.distance<2,l=e.deltaTime<250;if(a&&A&&l)return}if(!s||!o)return i||o&&6&n||s&&n&F?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Pe=32;function ke(e){this.options=o({},this.defaults,e||{}),this.id=M++,this.manager=null,this.options.enable=b(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ce(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Te(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Me(e,t){var n=t.manager;return n?n.get(e):e}function Ie(){ke.apply(this,arguments)}function Le(){Ie.apply(this,arguments),this.pX=null,this.pY=null}function Re(){Ie.apply(this,arguments)}function Oe(){ke.apply(this,arguments),this._timer=null,this._input=null}function De(){Ie.apply(this,arguments)}function Be(){Ie.apply(this,arguments)}function Fe(){ke.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ze(e,t){return(t=t||{}).recognizers=b(t.recognizers,ze.defaults.preset),new Ne(e,t)}ke.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(d(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Me(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return d(e,"dropRecognizeWith",this)||(e=Me(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(d(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=Me(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(d(e,"dropRequireFailure",this))return this;e=Me(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ce(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ce(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Pe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=Pe);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},m(Ie,ke,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:Pe}}),m(Le,Ie,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(xe),e&F&&t.push(_e),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,s=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Ie.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),m(Re,Ie,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[we]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),m(Oe,ke,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ye]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=c((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Pe},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),m(De,Ie,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[we]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),m(Be,Ie,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Le.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&F&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),m(Fe,ke,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[be]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||Q(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=c((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Pe},failTimeout:function(){return this._timer=c((function(){this.state=Pe}),this.options.interval,this),Pe},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ze.VERSION="2.0.7",ze.defaults={domEvents:!1,touchAction:ve,enable:!0,inputTarget:null,inputClass:null,preset:[[De,{enable:!1}],[Re,{enable:!1},["rotate"]],[Be,{direction:6}],[Le,{direction:6},["swipe"]],[Fe],[Fe,{event:"doubletap",taps:2},["tap"]],[Oe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ne(e,t){var n;this.options=o({},ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(R?ne:O?ue:L?de:X))(n,U),this.touchAction=new Se(this,this.options.touchAction),je(this,!0),f(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function je(e,t){var n,r=e.element;r.style&&(f(e.options.cssProps,(function(i,o){n=T(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Ne.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ke)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(d(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(d(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return f(S(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==i){var n=this.handlers;return f(S(e),(function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=n.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](t),i++}},destroy:function(){this.element&&je(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(ze,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Pe,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:F,DIRECTION_ALL:30,Manager:Ne,Input:j,TouchAction:Se,TouchInput:ue,MouseInput:X,PointerEventInput:ne,TouchMouseInput:de,SingleTouchInput:se,Recognizer:ke,AttrRecognizer:Ie,Tap:Fe,Pan:Le,Swipe:Be,Pinch:Re,Rotate:De,Press:Oe,on:w,off:_,each:f,merge:g,extend:p,assign:o,inherit:m,bindFn:v,prefixed:T}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=ze,e.exports?e.exports=ze:t.Hammer=ze}(window,document)}(ku);var Cu=ku.exports;const Tu={mousedown:1,mousemove:2,mouseup:4};!function(e){const t=e.prototype.handler;e.prototype.handler=function(e){const n=this.store;e.button>0&&"pointerdown"===e.type&&(function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(n,(t=>t.pointerId===e.pointerId))||n.push(e)),t.call(this,e)}}(Cu.PointerEventInput),Cu.MouseInput.prototype.handler=function(e){let t=Tu[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};const Mu=Cu.Manager,Iu=Cu?[[Cu.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Cu.Rotate,{enable:!1}],[Cu.Pinch,{enable:!1}],[Cu.Swipe,{enable:!1}],[Cu.Pan,{threshold:0,enable:!1}],[Cu.Press,{enable:!1}],[Cu.Tap,{event:"doubletap",taps:2,enable:!1}],[Cu.Tap,{event:"anytap",enable:!1}],[Cu.Tap,{enable:!1}]]:null,Lu={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ru={doubletap:["tap"]},Ou={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Du={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Bu={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Fu={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},zu="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Nu="undefined"!=typeof window?window:global;let ju=!1;try{const e={get passive(){return ju=!0,!0}};Nu.addEventListener("test",e,e),Nu.removeEventListener("test",e,e)}catch(e){}const Uu=-1!==zu.indexOf("firefox"),{WHEEL_EVENTS:Vu}=Du,Wu="wheel",Gu=4.000244140625;class Hu{constructor(e,t,n={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.events=Vu.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((t=>e.addEventListener(t,this.handleEvent,!!ju&&{passive:!1})))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Wu&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;Nu.WheelEvent&&(Uu&&e.deltaMode===Nu.WheelEvent.DOM_DELTA_PIXEL&&(t/=Nu.devicePixelRatio),e.deltaMode===Nu.WheelEvent.DOM_DELTA_LINE&&(t*=40));const n={x:e.clientX,y:e.clientY};0!==t&&t%Gu==0&&(t=Math.floor(t/Gu)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}_onWheel(e,t,n){this.callback({type:Wu,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:Qu}=Du,$u="pointermove",qu="pointerover",Yu="pointerout",Zu="pointerleave";class Xu{constructor(e,t,n={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},n),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=Qu.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===$u&&(this.enableMoveEvent=t),e===qu&&(this.enableOverEvent=t),e===Yu&&(this.enableOutEvent=t),e===Zu&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:qu,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:Yu,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:Zu,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:$u,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:Ku}=Du,Ju="keydown",ec="keyup";class tc{constructor(e,t,n={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Ku.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=n.tabIndex||0,e.style.outline="none",this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Ju&&(this.enableDownEvent=t),e===ec&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:Ju,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:ec,srcEvent:e,key:e.key,target:e.target}))}}const nc="contextmenu";class rc{constructor(e,t,n={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===nc&&(this.options.enable=t)}handleEvent(e){this.options.enable&&this.callback({type:nc,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ic={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};const oc={srcElement:"root",priority:0};class sc{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,n,r=!1,i=!1){const{handlers:o,handlersByElement:s}=this;n&&("object"!=typeof n||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},oc,n):oc;let a=s.get(n.srcElement);a||(a=[],s.set(n.srcElement,a));const A={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(A.once=!0),i&&(A.passive=!0),o.push(A),this._active=this._active||!A.passive;let l=a.length-1;for(;l>=0&&!(a[l].priority>=A.priority);)l--;a.splice(l+1,0,A)}remove(e,t){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);const e=r.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&r.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const r=()=>{e.handled=!0},i=()=>{e.handled=!0,t=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:A,once:l}=n[s];if(A(Object.assign({},e,{type:a,stopPropagation:r,stopImmediatePropagation:i})),l&&o.push(n[s]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(e){const t=ic[e.srcEvent.type];if(!t)return null;const{buttons:n,button:r,which:i}=e.srcEvent;let o=!1,s=!1,a=!1;return 4===t||2===t&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===t?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===t&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}(e),function(e,t){const{srcEvent:n}=e;if(!e.center&&!Number.isFinite(n.clientX))return null;const r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth||1,s=i.height/t.offsetHeight||1;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/s}}}(e,t),{handled:!1,rootElement:t})}}const ac={events:null,recognizers:null,recognizerOptions:{},Manager:Mu,touchAction:"none",tabIndex:0};class Ac{constructor(e=null,t={}){this.options=Object.assign({},ac,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:n}=t;n&&this.on(n)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,n=t.Manager;this.manager=new n(e,{touchAction:t.touchAction,recognizers:t.recognizers||Iu}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(Lu).forEach((e=>{const t=this.manager.get(e);t&&Lu[e].forEach((e=>{t.recognizeWith(e)}))}));for(const e in t.recognizerOptions){const n=this.manager.get(e);if(n){const r=t.recognizerOptions[e];delete r.enable,n.set(r)}}this.wheelInput=new Hu(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Xu(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tc(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new rc(e,this._onOtherEvent,{enable:!1});for(const[e,t]of this.events)t.isEmpty()||(this._toggleRecognizer(t.recognizerName,!0),this.manager.on(e,t.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const i=Ru[e];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);t?(o.requireFailure(e),r.dropRequireFailure(i)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,n,r,i){if("string"!=typeof e){n=t;for(const t in e)this._addEventHandler(t,e[t],n,r,i);return}const{manager:o,events:s}=this,a=Fu[e]||e;let A=s.get(a);A||(A=new sc(this),s.set(a,A),A.recognizerName=Bu[a]||a,o&&o.on(a,A.handleEvent)),A.add(e,t,n,r,i),A.isEmpty()||this._toggleRecognizer(A.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const t in e)this._removeEventHandler(t,e[t]);return}const{events:n}=this,r=Fu[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){const{recognizerName:e}=i;let t=!1;for(const r of n.values())if(r.recognizerName===e&&!r.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}_onBasicInput(e){const{srcEvent:t}=e,n=Ou[t.type];n&&this.manager.emit(n,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function lc(){}const uc={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:lc,onResize:lc,onViewStateChange:lc,onInteractionStateChange:lc,onBeforeRender:lc,onAfterRender:lc,onLoad:lc,onError:(e,t)=>qt.error(e)(),_onMetrics:null,getCursor:({isDragging:e})=>e?"grabbing":"grab",debug:!1,drawPickingColors:!1};class cc{constructor(e){e={...uc,...e},this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&qt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===$t.getBrowser()&&qt.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new D({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&el.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&qt.removed("onLayerHover","onHover")(),"onLayerClick"in e&&qt.removed("onLayerClick","onClick")(),e.initialViewState&&!Cl(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,n){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,...n});return r.get(t).timeEnd(),i}_createCanvas(e){let t=e.canvas;if("string"==typeof t&&(t=document.getElementById(t),Rl(t)),!t){t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay";(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:n}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}_createAnimationLoop(e){const{width:t,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:A,useDevicePixels:l,autoResizeDrawingBuffer:u}=e;return new Hi({width:t,height:n,useDevicePixels:l,autoResizeDrawingBuffer:u,autoResizeViewport:!1,gl:r,onCreateContext:e=>Yn({...i,...e,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:e=>this._setGLContext(e.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:A,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new du({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:n}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=n,i=!1;for(const n of t)r=n,i=n.layer.onHover(n,e.event);if(!i&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const e=this.props.getTooltip(r);this.tooltip.setTooltip(e,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Zn(e,{enable:!0,copyState:!0})),this.tooltip=new Pu(this.canvas),jn(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new La;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Ac(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const e in Ba)this.eventManager.on(e,this._onEvent);this.viewManager=new Tl({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new kl(e,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new hu,this.deckRenderer=new vu(e),this.deckPicker=new Eu(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:n}=this.layerManager.context;jn(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:n})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),qt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=Ba[e.type],n=e.offsetCenter;if(!t||!n)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[t.handler]||o.props[t.handler]),a=this.props[t.handler];let A=!1;s&&(A=s.call(o,i,e)),!A&&a&&a(i,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=Jn.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}cc.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(QA)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,eventRecognizerOptions:e.object,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onInteractionStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool,_pickable:e.bool,_typedArrayManagerProps:e.object}},cc.defaultProps=uc,cc.VERSION=tn.VERSION;class dc{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:n}=this.source,{size:r}=t;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const e=t.elementOffset||0;for(let t=0;t<r;++t)i[t]=n[e+t]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function fc(e){return e.stride||e.size*e.bytesPerElement}function hc(e,t){t.offset&&qt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=fc(e),r=("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}const pc=[],gc=[];function mc(e,t=0,n=1/0){let r=pc;const i={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?r=e:e.length>0&&(gc.length=e.length,r=gc):r=pc,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function vc(e){return e&&e[Symbol.asyncIterator]}function yc(e,{size:t,stride:n,offset:r,startIndices:i,nested:o}){const s=e.BYTES_PER_ELEMENT,a=n?n/s:t,A=r?r/s:0,l=Math.floor((e.length-A)/a);return(n,{index:r,target:s})=>{if(!i){const n=r*a+A;for(let r=0;r<t;r++)s[r]=e[n+r];return s}const u=i[r],c=i[r+1]||l;let d;if(o){d=new Array(c-u);for(let n=u;n<c;n++){const r=n*a+A;s=new Array(t);for(let n=0;n<t;n++)s[n]=e[r+n];d[n-u]=s}}else if(a===t)d=e.subarray(u*t+A,c*t+A);else{d=new e.constructor((c-u)*t);let n=0;for(let r=u;r<c;r++){const i=r*a+A;for(let r=0;r<t;r++)d[n++]=e[i+r]}}return d}}const bc=[],wc=[[0,1/0]];function _c({source:e,target:t,start:n=0,end:r,size:i,getData:o}){r=r||t.length;const s=e.length,a=r-n;if(s>a)return void t.set(e.subarray(0,a),n);if(t.set(e,n),!o)return;let A=s;for(;A<a;){const r=o(A,e);for(let e=0;e<i;e++)t[n+A]=r[e]||0,A++}}const xc={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function Ec(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",{...xc[e.type],...t,...e}):null}function Sc(e,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function Pc(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function kc(e){e.push(e.shift())}function Cc(e,t){const{doublePrecision:n,settings:r,value:i,size:o}=e,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:t*o)*s}function Tc({buffer:e,numInstances:t,attribute:n,fromLength:r,fromStartIndices:i,getData:o=(e=>e)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,A=n.byteOffset,l=n.startIndices,u=i&&l,c=Cc(n,t),d=n.state.constant;if(!u&&r>=c)return;const f=d?n.value:n.getBuffer().getData({srcByteOffset:A});if(n.settings.normalized&&!d){const e=o;o=(t,r)=>n._normalizeConstant(e(t,r))}const h=d?(e,t)=>o(f,t):(e,t)=>o(f.subarray(e,e+a),t),p=e.getData({length:r}),g=new Float32Array(c);!function({source:e,target:t,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return _c({source:e,target:t,size:n,getData:r}),t;let s=0,a=0;const A=r&&((e,t)=>r(e+a,t)),l=Math.min(i.length,o.length);for(let r=1;r<l;r++){const l=i[r]*n,u=o[r]*n;_c({source:e.subarray(s,l),target:t,start:a,end:u,size:n,getData:A}),s=l,a=u}a<t.length&&_c({source:[],target:t,start:a,size:n,getData:A})}({source:p,target:g,sourceStartIndices:i,targetStartIndices:l,size:a,getData:h}),e.byteLength<g.byteLength+A&&e.reallocate(g.byteLength+A),e.subData({data:g,offset:A})}class Mc extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const n=t.logicalType||t.type,r=5130===n;let{defaultValue:i}=t;i=Number.isFinite(i)?[i]:i||new Array(this.size).fill(0),t.defaultValue=i;let o=n;r?o=5126:!o&&t.isIndexed?o=e&&function(e,t){return Vr(e,t)}(e,jr)?5125:5123:o||(o=5126),t.logicalType=n,t.type=o;let s=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(n||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===t.fp64&&(s=Float32Array),t.bytesPerElement=s.BYTES_PER_ELEMENT,this.defaultType=s,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new br(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*fc(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),el.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(e,t){const n=hc(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(this.getAccessor(),t||{});return n[e]=new dc(this,i.high),n["".concat(e,"64Low")]=r?new dc(this,i.low):new Float32Array(this.size),n}if(t){const n=hc(this.getAccessor(),t);return{[e]:new dc(this,n)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof br&&(e={buffer:e});const n={...this.settings,...e};if(t.bufferAccessor=n,e.constant){let n=e.value;n=this._normalizeValue(n,[],0),this.settings.normalized&&(n=this._normalizeConstant(n));if(!(!t.constant||!this._areValuesEqual(n,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=n}else if(e.buffer){const r=e.buffer;t.externalBuffer=r,t.constant=!1,this.value=e.value;const i=e.value instanceof Float64Array;n.type=e.type||r.accessor.type,n.bytesPerElement=r.accessor.BYTES_PER_ELEMENT*(i?2:1),n.stride=fc(n)}else if(e.value){this._checkExternalBuffer(e);let r=e.value;t.externalBuffer=null,t.constant=!1,this.value=r,n.bytesPerElement=r.BYTES_PER_ELEMENT,n.stride=fc(n);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&r instanceof Float64Array&&(r=il(r,n));const s=r.byteLength+o+2*n.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:r,offset:o}),n.type=e.type||i.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:n=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?il(t,{size:this.size,startIndex:n,endIndex:r}):t.subarray(n,r),offset:n*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:n}=this,r=n.allocatedValue,i=el.allocate(r,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),t&&r&&o.subData({data:r instanceof Float64Array?il(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const n=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||qt.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((e=>(e+128)/255*2-1));case 5122:return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case 5121:return new Float32Array(e).map((e=>e/255));case 5123:return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e)return t[n]=r[0],t;switch(i){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=i;for(;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:n=!1,noAlloc:r=!1,update:i=null,accessor:o=null,transform:s=null,startIndices:a=null}=t;Object.assign(this.settings,{transition:n,noAlloc:r,update:i||o&&this._autoUpdater,accessor:o,transform:s}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:wc,startIndices:a}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition;return Ec(Array.isArray(t)?e[t.find((t=>e[t]))]:e[t],n)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===wc)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],r=e.length;let i=0;for(let o=0;o<r;o++){const r=e[o];r[1]<t[0]?(n.push(r),i=o+1):r[0]>t[1]?n.push(r):t=[Math.min(r[0],t[0]),Math.max(r[1],t[1])]}return n.splice(i,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=wc}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=bc}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==wc}),!0))}updateBuffer({numInstances:e,data:t,props:n,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:o,noAlloc:s}}=this;let a=!0;if(o){for(const[s,a]of i)o.call(r,this,{data:t,startRow:s,endRow:a,props:n,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of i){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):s||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(e){if(void 0===e||"function"==typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e});if(r.transform||t!==this.startIndices){Rl(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor));const i=e.size&&e.size!==this.size;return n.binaryAccessor=yc(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:i}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const n in e)Object.assign(t,super.getShaderAttributes(n,e[n]));return t}_autoUpdater(e,{data:t,startRow:n,endRow:r,props:i,numInstances:o}){if(e.constant)return;const{settings:s,state:a,value:A,size:l,startIndices:u}=e,{accessor:c,transform:d}=s,f=a.binaryAccessor||("function"==typeof c?c:i[c]);Rl("function"==typeof f,'accessor "'.concat(c,'" is not a function'));let h=e.getVertexOffset(n);const{iterable:p,objectInfo:g}=mc(t,n,r);for(const t of p){g.index++;let n=f(t,g);if(d&&(n=d.call(this,n)),u){const t=(g.index<u.length-1?u[g.index+1]:o)-u[g.index];if(n&&Array.isArray(n[0])){let t=h;for(const r of n)e._normalizeValue(r,A,t),t+=l}else n&&n.length>l?A.set(n,h):(e._normalizeValue(n,g.target,0),xl({target:A,source:g.target,start:h,count:t}));h+=t*l}else e._normalizeValue(n,A,h),h+=l}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const Ic="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const Lc={interpolation:class{constructor({gl:e,attribute:t,timeline:n}){this.gl=e,this.type="interpolation",this.transition=new Fl(n),this.attribute=t,this.attributeInTransition=new Mc(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(e,t){const n=Pc(t.size);return new ka(e,{vs:Ic,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new br(e,r),new br(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{gl:n,buffers:r,attribute:i}=this;kc(r);const o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const e of r)Tc({buffer:e,...o});this.currentStartIndices=i.startIndices,this.currentLength=Cc(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Sc(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{time:e,settings:{duration:t,easing:n}}=this.transition,r=n(e/t);this.transform.run({uniforms:{time:r}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:n}){this.gl=e,this.type="spring",this.transition=new Fl(n),this.attribute=t,this.attributeInTransition=new Mc(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(e){return new kr(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(e,t){return new Hr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:t}})}(e,this.texture),this.transform=function(e,t,n){const r=Pc(t.size);return new ka(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new br(e,r),new br(e,r),new br(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const e of r)Tc({buffer:e,...o});this.currentStartIndices=i.startIndices,this.currentLength=Cc(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Sc(0,i)}})}update(){const{buffers:e,transform:t,framebuffer:n,transition:r}=this;if(!r.update())return!1;t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),kc(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value});return Br(n)[0]>0||r.end(),!0}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class Rc{constructor(e,{id:t,timeline:n}){this.id=t,this.gl=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=ka.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:n}){this.numInstances=n||1;for(const n in e){const r=e[n],i=r.getTransitionSetting(t);i&&this._updateAttribute(n,r,i)}for(const n in this.transitions){const r=e[n];r&&r.getTransitionSetting(t)||this._removeTransition(n)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,n){const r=this.transitions[e];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void qt.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=Lc[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(qt.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const Oc="attributeManager.invalidate";class Dc{constructor(e,{id:t="attribute-manager",stats:n,timeline:r}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Rc(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}invalidate(e,t){const n=this._invalidateTrigger(e,t);Xt(Oc,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Xt(Oc,this,"all")}update({data:e,numInstances:t,startIndices:n=null,transitions:r,props:i={},buffers:o={},context:s={}}={}){let a=!1;Xt("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const r in this.attributes){const A=this.attributes[r],l=A.settings.accessor;A.startIndices=n,i[r]&&qt.removed("props.".concat(r),"data.attributes.".concat(r))(),A.setExternalBuffer(o[r])||A.setBinaryValue(o[l],e.startIndices)||!o[l]&&A.setConstantValue(i[l])||A.needsUpdate()&&(a=!0,this._updateAttribute({attribute:A,numInstances:t,data:e,props:i,context:s})),this.needsRedraw|=A.needsRedraw()}a&&Xt("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in t){const o=t[i];o.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const n={};for(const r in e)t[r]||Object.assign(n,e[r].getShaderAttributes());return n}getAccessors(){return this.updateTriggers}_add(e,t,n={}){t&&qt.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const t in e){const r=e[t];this.attributes[t]=this._createAttribute(t,r,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,n){const r={...t,id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor||0};return new Mc(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:r}=this,i=r[e];return i&&i.forEach((e=>{const r=n[e];r&&r.setNeedsUpdate(r.id,t)})),i}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if(Xt("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&Xt("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,Xt("attribute.updateEnd",t,n))}}const Bc=1e-5;function Fc(e,t,n,r,i){const o=t-e;return(n-t)*i+-o*r+o+t}function zc(e,t){if(Array.isArray(e)){let n=0;for(let r=0;r<e.length;r++){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}const Nc={interpolation:class extends Fl{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:r,easing:i}}=this,o=i(e/r);this._value=Vo(t,n,o)}},spring:class extends Fl{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:r}=this.settings,{_prevValue:i=e,_currValue:o=e}=this;let s=function(e,t,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Fc(e[s],t[s],n[s],r,i);return o}return Fc(e,t,n,r,i)}(i,o,t,n,r);const a=zc(s,t),A=zc(s,o);a<Bc&&A<Bc&&(s=t,this.end()),this._prevValue=o,this._currValue=s}}};class jc{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,r){const{transitions:i}=this;if(i.has(e)){const n=i.get(e),{value:r=n.settings.fromValue}=n;t=r,this.remove(e)}if(!(r=Ec(r)))return;const o=Nc[r.type];if(!o)return void qt.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:t,toValue:n}),i.set(e,s)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const{COMPONENT:Uc}=bl;function Vc(e,t){const n=Gc({newProps:e,oldProps:t,propTypes:qc(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=null;const{dataComparator:r,_dataDiff:i}=e;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t);let i=!1;return r||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if($c(e,t,"all"))return{all:!0}}const n={};let r=!1;for(const i in e.updateTriggers)if("all"!==i){$c(e,t,i)&&(n[i]=!0,r=n)}return r}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Qc(e,t),transitionsChanged:Wc(e,t)}}function Wc(e,t){if(!e.transitions)return null;const n={},r=qc(e);for(const i in e.transitions){const o=r[i],s=o&&o.type;("number"===s||"color"===s||"array"===s)&&Hc(e[i],t[i],o)&&(n[i]=!0)}return n}function Gc({newProps:e,oldProps:t,ignoreProps:n={},propTypes:r={},triggerName:i="props"}={}){if(t===e)return null;if("object"!=typeof e||null===e)return"".concat(i," changed shallowly");if("object"!=typeof t||null===t)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," added");const n=Hc(e[o],t[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const n=Hc(e[o],t[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}}return null}function Hc(e,t,n){let r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||(r=e&&t&&e.equals,!r||r.call(e,t))?r||t===e?null:"changed shallowly":"changed deeply"}function Qc(e,t){if(null===t)return"oldProps is null, initial diff";const n=t.extensions,{extensions:r}=e;if(r===n)return!1;if(r.length!==n.length)return!0;for(let e=0;e<r.length;e++)if(!r[e].equals(n[e]))return!0;return!1}function $c(e,t,n){let r=e.updateTriggers[n];r=null==r?{}:r;let i=t.updateTriggers[n];i=null==i?{}:i;return Gc({oldProps:i,newProps:r,triggerName:n})}function qc(e){const t=e[Uc],n=t&&t.constructor;return n?n._propTypes:{}}function Yc(e){if(null===(t=e)||"object"!=typeof t)throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"==typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function Zc(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const r={...e.inject};for(const e in t.inject)r[e]=(r[e]||"")+t.inject[e];n.inject=r}else n.inject=t.inject;return n}const Xc={10241:9987,10240:9729,10242:33071,10243:33071},Kc={};const Jc={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||rd(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>ed(e,t)},accessor:{validate(e,t){const n=id(e);return"function"===n||n===id(t.value)},equal:(e,t,n)=>"function"==typeof t||ed(e,t)},array:{validate:(e,t)=>t.optional&&!e||rd(e),equal:(e,t,n)=>n.compare?ed(e,t):e===t},function:{validate:(e,t)=>t.optional&&!e||"function"==typeof e,equal:(e,t,n)=>!n.compare||e===t},data:{transform:(e,t,n)=>{const{dataTransform:r}=n?n.props:{};return r&&e?r(e):e}},image:{transform:(e,t,n)=>function(e,t){const n=e.context&&e.context.gl;if(!n||!t)return null;if(t instanceof kr)return t;t.constructor&&"Object"!==t.constructor.name&&(t={data:t});let r=null;t.compressed&&(r={10241:t.data.length>1?9985:9729});const i=new kr(n,{...t,parameters:{...Xc,...r,...e.props.textureParameters}});return Kc[i.id]=!0,i}(n,e),release:e=>{var t;(t=e)&&t instanceof kr&&Kc[t.id]&&(t.delete(),delete Kc[t.id])}}};function ed(e,t){if(e===t)return!0;if(!rd(e)||!rd(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function td(e,t){switch(id(t)){case"object":return nd(e,t);case"array":return nd(e,{type:"array",value:t,compare:!1});case"boolean":return nd(e,{type:"boolean",value:t});case"number":return nd(e,{type:"number",value:t});case"function":return nd(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function nd(e,t){return"type"in t?{name:e,...Jc[t.type],...t}:"value"in t?{name:e,type:id(t.value),...t}:{name:e,type:"object",value:t}}function rd(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function id(e){return rd(e)?"array":null===e?"null":typeof e}const{COMPONENT:od,ASYNC_ORIGINAL:sd,ASYNC_RESOLVED:ad,ASYNC_DEFAULTS:Ad}=bl;function ld(){const e=this,t=ud(e.constructor),n=Object.create(t);n[od]=e,n[sd]={},n[ad]={};for(let e=0;e<arguments.length;++e){const t=arguments[e];for(const e in t)n[e]=t[e]}return Object.freeze(n),n}function ud(e){const t=fd(e,"_mergedDefaultProps");return t||(function(e){if(!e.prototype)return;const t=Object.getPrototypeOf(e),n=ud(t),r=function(e){const t={},n={},r={};for(const[i,o]of Object.entries(e))if(o&&o.deprecatedFor)r[i]=Array.isArray(o.deprecatedFor)?o.deprecatedFor:[o.deprecatedFor];else{const e=td(i,o);t[i]=e,n[i]=e.value}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(fd(e,"defaultProps")||{}),i=function(e,t,n){const r=Object.create(null);Object.assign(r,t,e);const i=function(e){const t=fd(e,"layerName")||fd(e,"componentName");t||qt.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(n);return delete e.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,e),o={...t._propTypes,...r.propTypes};!function(e,t){const n={},r={};for(const e in t){const i=t[e],{name:o,value:s}=i;i.async&&(n[o]=s,r[o]=cd(o))}e[Ad]=n,e[sd]={},Object.defineProperties(e,r)}(i,o);const s={...t._deprecatedProps,...r.deprecatedProps};(function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const r="".concat(this.id,": ").concat(n);for(const r of t[n])dd(this,r)||(this[r]=e);qt.deprecated(r,t[n].join("/"))()}})})(i,s),e._mergedDefaultProps=i,e._propTypes=o,e._deprecatedProps=s}(e),e._mergedDefaultProps)}function cd(e){return{enumerable:!0,set(t){"string"==typeof t||t instanceof Promise||vc(t)?this[sd][e]=t:this[ad][e]=t},get(){if(this[ad]){if(e in this[ad]){return this[ad][e]||this[Ad][e]}if(e in this[sd]){const t=this[od]&&this[od].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Ad][e]}}return this[Ad][e]}}}function dd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fd(e,t){return dd(e,t)&&e[t]}const{ASYNC_ORIGINAL:hd,ASYNC_RESOLVED:pd,ASYNC_DEFAULTS:gd}=bl,md=Object.freeze({});class vd{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=md,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[pd]||{},n=e[hd]||e,r=e[gd]||{};for(const e in t){const n=t[e];this._createAsyncPropData(e,r[e]),this._updateAsyncProp(e,n),t[e]=this.getAsyncProp(e)}for(const e in n){const t=n[e];this._createAsyncPropData(e,r[e]),this._updateAsyncProp(e,t)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var n;const r=null===(n=this.layer)||void 0===n?void 0:n.props.fetch,i=t;r&&(t=r(i,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):vc(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this.freezeAsyncOldProps();const n=this.asyncProps[e];t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}_setAsyncPropValue(e,t,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];n.pendingLoadCount++;const r=n.pendingLoadCount;t.then((t=>{var i;t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,r);const o=null===(i=this.layer)||void 0===i?void 0:i.props.onDataLoad;"data"===e&&o&&o(t,{propName:e,layer:this.layer})})).catch((t=>{var n;null===(n=this.layer)||void 0===n||n.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}))}async _resolveAsyncIterable(e,t){var n;"data"!==e&&this._setPropValue(e,t);const r=this.asyncProps[e];r.pendingLoadCount++;const i=r.pendingLoadCount;let o=[],s=0;for await(const n of t){const{dataTransform:t}=this.component?this.component.props:{};o=t?t(n,o):o.concat(n),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,i)}const a=null===(n=this.layer)||void 0===n?void 0:n.props.onDataLoad;a&&a(o,{propName:e,layer:this.layer})}_postProcessValue(e,t){const n=e.type;return n&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:yd,ASYNC_RESOLVED:bd,ASYNC_DEFAULTS:wd}=bl;let _d=0;class xd{constructor(){this.props=ld.apply(this,arguments),this.id=this.props.id,this.count=_d++,this.lifecycle=hl,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(e){const{props:t}=this,n={};for(const e in t[wd])e in t[bd]?n[e]=t[bd][e]:e in t[yd]&&(n[e]=t[yd][e]);return new this.constructor({...t,...n,...e})}get stats(){return this.internalState.stats}_initState(){this.internalState=new vd({})}}xd.componentName="Component",xd.defaultProps={};class Ed extends vd{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const Sd=2**24-1,Pd=Object.freeze([]),kd=Ua((({oldViewport:e,viewport:t})=>e.equals(t)));let Cd=new Uint8ClampedArray(0);const Td={data:{type:"data",value:Pd,async:!0},dataComparator:null,_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:n,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:s}=n.context;var a;(i=i||n.getLoadOptions(),r=r||n.props.loaders,o)&&(i={...i,fetch:{...null===(a=i)||void 0===a?void 0:a.fetch,signal:o}});let A=s.contains(e);return A||i||(s.add({resourceId:e,data:Ze(e,r),persistent:!1}),A=!0),A?s.subscribe({resourceId:e,onChange:e=>n.internalState.reloadAsyncProp(t,e),consumerId:n.id,requestId:t}):Ze(e,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Oa.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,100*-e],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Md extends xd{toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}raiseError(e,t){var n,r,i,o;(t&&(e.message="".concat(t,": ").concat(e.message)),null===(n=(r=this.props).onError)||void 0===n?void 0:n.call(r,e))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,e,this))}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(e=!0){this.internalState&&(this.internalState.needsRedraw=e)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(e){const{viewport:t}=this.context,n=dl(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=vA(n,t.pixelProjectionMatrix);return 2===e.length?[r,i]:[r,i,o]}unproject(e){const{viewport:t}=this.context;return t.unproject(e)}projectPosition(e){return fl(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Oa.DEFAULT||e===Oa.LNGLAT||e===Oa.CARTESIAN}onHover(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}onClick(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Rl(e instanceof Uint8Array);const[t,n,r]=e;return t+256*n+65536*r-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(e){for(const t of this.props.extensions)e=Zc(e,t.getShaders.call(this,t));return e}shouldUpdateState({oldProps:e,props:t,context:n,changeFlags:r}){return r.propsOrDataChanged}updateState({oldProps:e,props:t,context:n,changeFlags:r}){const i=this.getAttributeManager();if(r.dataChanged&&i){const{dataChanged:e}=r;if(Array.isArray(e))for(const t of e)i.invalidateAll(t);else i.invalidateAll()}const o=e.highlightedObjectIndex>=0||e.pickable,s=t.highlightedObjectIndex>=0||t.pickable;if(o!==s&&i){const{pickingColors:e,instancePickingColors:t}=i.attributes,n=e||t;n&&(s&&n.constant&&(n.constant=!1,i.invalidate(n.id)),n.value||s||(n.constant=!0,n.value=[0,0,0]))}}finalizeState(){for(const e of this.getModels())e.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e,mode:t}){const{index:n}=e;return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}activateViewport(e){const t=this.internalState.viewport;this.internalState.viewport=e,t&&kd({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all",t=""){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(e){const t=this.getAttributeManager();if(!t)return;const n=this.getNumInstances(e),r=this.getStartIndices(e);t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const n=Math.floor(Cd.length/3);if(this.internalState.usesPickingColorCache=!0,n<t){t>Sd&&qt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Cd=el.allocate(Cd,t,{size:3,copy:!0,maxCount:Math.max(t,Sd)});const e=Math.floor(Cd.length/3),r=[];for(let t=n;t<e;t++)this.encodePickingColor(t,r),Cd[3*t+0]=r[0],Cd[3*t+1]=r[1],Cd[3*t+2]=r[2]}e.value=Cd.subarray(0,3*t)}_setModelAttributes(e,t){const n=this.getAttributeManager(),r=e.userData.excludeAttributes||{},i=n.getShaderAttributes(t,r);e.setAttributes(i)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,r=t||n,i=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;this.internalState.usesPickingColorCache&&n.value.buffer!==Cd.buffer&&(n.value=Cd.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0})}getNumInstances(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Yc(e.data)}getStartIndices(e){return void 0!==(e=e||this.props).startIndices?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){Xt("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const e=this.needsUpdate();Xt("layer.update",this,e),e&&this._updateState()}_updateState(){const e=this.props,t=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||t,this.props=n;try{const n=this._getUpdateParams(),r=this.getModels();if(this.context.gl)this.updateState(n);else try{this.updateState(n)}catch(e){}for(const e of this.props.extensions)e.updateState.call(this,n,e);const i=this.getModels()[0]!==r[0];this._updateModules(n,i),this.isComposite?this._renderLayers(n):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=t,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){Xt("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}drawLayer({moduleParameters:e=null,uniforms:t={},parameters:n={}}){this._updateAttributeTransition();const r=this.props;this.props=this.internalState.propsInTransition||r;const{opacity:i}=this.props;t.opacity=Math.pow(i,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:i}=this.props,o=i&&i(t)||[0,0];jn(this.context.gl,{polygonOffset:o}),Un(this.context.gl,n,(()=>{const r={moduleParameters:e,uniforms:t,parameters:n,context:this.context};for(const e of this.props.extensions)e.draw.call(this,r,e);this.draw(r)}))}finally{this.props=r}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(e){const{changeFlags:t}=this.internalState;for(const n in e)if(e[n]){let r=!1;"dataChanged"===n&&Array.isArray(t[n])&&(t[n]=Array.isArray(e[n])?t[n].concat(e[n]):e[n],r=!0),t[n]||(t[n]=e[n],r=!0),r&&Xt("layer.changeFlag",this,n,e)}const n=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;t.propsOrDataChanged=n,t.somethingChanged=n||e.viewportChanged||e.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(e,t){const n=Vc(e,t);if(n.updateTriggersChanged)for(const e in n.updateTriggersChanged)n.updateTriggersChanged[e]&&this.invalidateAttribute(e);if(n.transitionsChanged)for(const r in n.transitionsChanged)this.internalState.uniformTransitions.add(r,t[r],e[r],e.transitions[r]);return this.setChangeFlags(n)}validateProps(){!function(e){const t=qc(e);for(const n in t){const r=t[n],{validate:i}=r;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}updateAutoHighlight(e){this.props.autoHighlight&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"==typeof n&&(t.pickingHighlightColor=n(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_updateModules({props:e,oldProps:t},n){const{autoHighlight:r,highlightedObjectIndex:i,highlightColor:o}=e;if(n||t.autoHighlight!==r||t.highlightedObjectIndex!==i||t.highlightColor!==o){const e={};r||(e.pickingSelectedColor=null),Array.isArray(o)&&(e.pickingHighlightColor=o),Number.isInteger(i)&&(e.pickingSelectedColor=i>=0?this.encodePickingColor(i):null),this.setModuleParameters(e)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(e);return t=t||r,t}_getAttributeManager(){return new Dc(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){Rl(!this.internalState&&!this.state),Rl(isFinite(this.props.coordinateSystem));const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Ed({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(qt.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new jc(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(e){Xt("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Md.layerName="Layer",Md.defaultProps=Td;class Id extends Md{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id?(e.object=t.__source.object,e.index=t.__source.index,e):e}renderLayers(){return null}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"==typeof e){const t={data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}return e}getSubLayerProps(e={}){const{opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:A,coordinateSystem:l,coordinateOrigin:u,wrapLongitude:c,positionFormat:d,modelMatrix:f,extensions:h,fetch:p,_subLayerProps:g}=this.props,m={opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:A,coordinateSystem:l,coordinateOrigin:u,wrapLongitude:c,positionFormat:d,modelMatrix:f,extensions:h,fetch:p},v=g&&g[e.id],y=v&&v.updateTriggers,b=e.id||"sublayer";if(v){const t=this.constructor._propTypes,n=e.type?e.type._propTypes:{};for(const e in v){const r=n[e]||t[e];r&&"accessor"===r.type&&(v[e]=this.getSubLayerAccessor(v[e]))}}Object.assign(m,e,v),m.id="".concat(this.props.id,"-").concat(b),m.updateTriggers={all:this.props.updateTriggers.all,...e.updateTriggers,...y};for(const e of h){const t=e.getSubLayerProps.call(this,e);t&&Object.assign(m,t,{updateTriggers:Object.assign(m.updateTriggers,t.updateTriggers)})}return m}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:e}=this.internalState;const t=!e||this.needsUpdate();t&&(e=this.renderLayers(),e=wl(e,Boolean),this.internalState.subLayers=e),Xt("compositeLayer.renderLayers",this,t,e);for(const t of e)t.parent=this}}Id.layerName="CompositeLayer";const Ld=["bearing","pitch"],Rd={speed:1.2,curve:1.414};class Od extends Gl{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}),this.props={...Rd,...e}}interpolateProps(e,t,n){const r=function(e,t,n,r={}){const i={},{startZoom:o,startCenterXY:s,uDelta:a,w0:A,u1:l,S:u,rho:c,rho2:d,r0:f}=kA(e,t,r);if(l<.01){for(const r of SA){const o=e[r],s=t[r];i[r]=(h=n)*s+(1-h)*o}return i}var h;const p=n*u,g=Math.cosh(f)/Math.cosh(f+c*p),m=A*((Math.cosh(f)*Math.tanh(f+c*p)-Math.sinh(f))/d)/l,v=o+lA(1/g),y=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}([],a,m);Ko(y,y,s);const b=cA(y);return i.longitude=b[0],i.latitude=b[1],i.zoom=v,i}(e,t,n,this.props);for(const i of Ld)r[i]=Vo(e[i]||0,t[i]||0,n);return r}getDuration(e,t){let{transitionDuration:n}=t;return"auto"===n&&(n=function(e,t,n={}){n=Object.assign({},PA,n);const{screenSpeed:r,speed:i,maxDuration:o}=n,{S:s,rho:a}=kA(e,t,n),A=1e3*s;let l;return l=Number.isFinite(r)?A/(r/a):A/i,Number.isFinite(o)&&l>o?0:l}(e,t,this.props)),n}}class Dd{constructor(e={}){const{attributes:t={}}=e;this.typedArrayManager=el,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e),Object.seal(this)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=t,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,i&&(Rl(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(s))for(const e of s)this._rebuildGeometry(e);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:t}){this._rebuildGeometry({startRow:e,endRow:t})}normalizeGeometry(e){return e}updateGeometryAttributes(e,t,n){throw new Error("Not implemented")}getGeometrySize(e){throw new Error("Not implemented")}getGeometryFromBuffer(e){const t=e.value||e;return Rl(ArrayBuffer.isView(t)),yc(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}_allocate(e,t){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const s in i)if(s in r)o.release(n[s]),n[s]=null;else{const r=i[s];r.copy=t,n[s]=o.allocate(n[s],e,r)}}_forEachGeometry(e,t,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:s}=mc(r,t,n);for(const t of o){s.index++;e(i(t,s),s.index)}}_rebuildGeometry(e){if(!this.data||!this.getGeometry)return;let{indexStarts:t,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=e||{},A={};if(e||(t=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((e,t)=>{e=this.normalizeGeometry(e),A[t]=e,n[t+1]=n[t]+this.getGeometrySize(e)}),s,a),r=n[n.length-1];else if(o.buffer instanceof br){const e=o.stride||4*this.positionSize;n=i.startIndices,r=n[i.length]||o.buffer.byteLength/e}else{const e=o.value||o,t=o.stride/e.BYTES_PER_ELEMENT||this.positionSize;n=i.startIndices,r=n[i.length]||e.length/t}this._allocate(r,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=r;const l={};this._forEachGeometry(((e,i)=>{e=A[i]||e,l.vertexStart=n[i],l.indexStart=t[i];const o=i<n.length-1?n[i+1]:r;l.geometrySize=o-n[i],l.geometryIndex=i,this.updateGeometryAttributes(e,l)}),s,a),this.vertexCount=t[t.length-1]}}var Bd={exports:{}},Fd={exports:{}},zd={};!function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,A=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,c=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,m=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var d=e.$$typeof;switch(d){case t:var p=e.type;switch(p){case A:case l:case r:case o:case i:case c:return p;default:var g=p&&p.$$typeof;switch(g){case a:case u:case h:case f:case s:return g;default:return d}}case n:return d}}}var b=A,w=l,_=a,x=s,E=t,S=u,P=r,k=h,C=f,T=n,M=o,I=i,L=c,R=!1;function O(e){return y(e)===l}zd.AsyncMode=b,zd.ConcurrentMode=w,zd.ContextConsumer=_,zd.ContextProvider=x,zd.Element=E,zd.ForwardRef=S,zd.Fragment=P,zd.Lazy=k,zd.Memo=C,zd.Portal=T,zd.Profiler=M,zd.StrictMode=I,zd.Suspense=L,zd.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),O(e)||y(e)===A},zd.isConcurrentMode=O,zd.isContextConsumer=function(e){return y(e)===a},zd.isContextProvider=function(e){return y(e)===s},zd.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},zd.isForwardRef=function(e){return y(e)===u},zd.isFragment=function(e){return y(e)===r},zd.isLazy=function(e){return y(e)===h},zd.isMemo=function(e){return y(e)===f},zd.isPortal=function(e){return y(e)===n},zd.isProfiler=function(e){return y(e)===o},zd.isStrictMode=function(e){return y(e)===i},zd.isSuspense=function(e){return y(e)===c},zd.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===l||e===o||e===i||e===c||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===f||e.$$typeof===s||e.$$typeof===a||e.$$typeof===u||e.$$typeof===g||e.$$typeof===m||e.$$typeof===v||e.$$typeof===p)},zd.typeOf=y}(),Fd.exports=zd;var Nd,jd="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ud={},Vd=Function.call.bind(Object.prototype.hasOwnProperty);function Wd(e,t,n,r,i){for(var o in e)if(Vd(e,o)){var s;try{if("function"!=typeof e[o]){var a=Error((r||"React class")+": "+n+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.");throw a.name="Invariant Violation",a}s=e[o](t,o,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}if(!s||s instanceof Error||Nd((r||"React class")+": type specification of "+n+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof s+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),s instanceof Error&&!(s.message in Ud)){Ud[s.message]=!0;var A=i?i():"";Nd("Failed "+n+" type: "+s.message+(null!=A?A:""))}}}Nd=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},Wd.resetWarningCache=function(){Ud={}};var Gd,Hd=Wd,Qd=Fd.exports,$d=a,qd=jd,Yd=Hd,Zd=Function.call.bind(Object.prototype.hasOwnProperty);function Xd(){return null}Gd=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}};var Kd=Fd.exports;Bd.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,r="<<anonymous>>",i={array:A("array"),bool:A("boolean"),func:A("function"),number:A("number"),object:A("object"),string:A("string"),symbol:A("symbol"),any:a(Xd),arrayOf:function(e){return a((function(t,n,r,i,o){if("function"!=typeof e)return new s("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a))return new s("Invalid "+i+" `"+o+"` of type `"+u(a)+"` supplied to `"+r+"`, expected an array.");for(var A=0;A<a.length;A++){var l=e(a,A,r,i,o+"["+A+"]",qd);if(l instanceof Error)return l}return null}))},element:a((function(t,n,r,i,o){var a=t[n];return e(a)?null:new s("Invalid "+i+" `"+o+"` of type `"+u(a)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:a((function(e,t,n,r,i){var o=e[t];return Qd.isValidElementType(o)?null:new s("Invalid "+r+" `"+i+"` of type `"+u(o)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return a((function(t,n,i,o,a){if(!(t[n]instanceof e)){var A=e.name||r;return new s("Invalid "+o+" `"+a+"` of type `"+((l=t[n]).constructor&&l.constructor.name?l.constructor.name:r)+"` supplied to `"+i+"`, expected instance of `"+A+"`.")}var l;return null}))},node:a((function(e,t,n,r,i){return l(e[t])?null:new s("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return a((function(t,n,r,i,o){if("function"!=typeof e)return new s("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[n],A=u(a);if("object"!==A)return new s("Invalid "+i+" `"+o+"` of type `"+A+"` supplied to `"+r+"`, expected an object.");for(var l in a)if(Zd(a,l)){var c=e(a,l,r,i,o+"."+l,qd);if(c instanceof Error)return c}return null}))},oneOf:function(e){if(!Array.isArray(e))return Gd(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Xd;function t(t,n,r,i,a){for(var A=t[n],l=0;l<e.length;l++)if(o(A,e[l]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===c(t)?String(t):t}));return new s("Invalid "+i+" `"+a+"` of value `"+String(A)+"` supplied to `"+r+"`, expected one of "+u+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return Gd("Invalid argument supplied to oneOfType, expected an instance of array."),Xd;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Gd("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+d(n)+" at index "+t+"."),Xd}return a((function(t,n,r,i,o){for(var a=0;a<e.length;a++)if(null==(0,e[a])(t,n,r,i,o,qd))return null;return new s("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")}))},shape:function(e){return a((function(t,n,r,i,o){var a=t[n],A=u(a);if("object"!==A)return new s("Invalid "+i+" `"+o+"` of type `"+A+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var c=e[l];if(c){var d=c(a,l,r,i,o+"."+l,qd);if(d)return d}}return null}))},exact:function(e){return a((function(t,n,r,i,o){var a=t[n],A=u(a);if("object"!==A)return new s("Invalid "+i+" `"+o+"` of type `"+A+"` supplied to `"+r+"`, expected `object`.");var l=$d({},t[n],e);for(var c in l){var d=e[c];if(!d)return new s("Invalid "+i+" `"+o+"` key `"+c+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(a,c,r,i,o+"."+c,qd);if(f)return f}return null}))}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){this.message=e,this.stack=""}function a(e){var n={},i=0;function o(o,a,A,l,u,c,d){if(l=l||r,c=c||A,d!==qd){if(t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}if("undefined"!=typeof console){var h=l+":"+A;!n[h]&&i<3&&(Gd("You are manually calling a React.PropTypes validation function for the `"+c+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[h]=!0,i++)}}return null==a[A]?o?null===a[A]?new s("The "+u+" `"+c+"` is marked as required in `"+l+"`, but its value is `null`."):new s("The "+u+" `"+c+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:e(a,A,l,u,c)}var a=o.bind(null,!1);return a.isRequired=o.bind(null,!0),a}function A(e){return a((function(t,n,r,i,o,a){var A=t[n];return u(A)!==e?new s("Invalid "+i+" `"+o+"` of type `"+c(A)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function l(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(l);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!l(i.value))return!1}else for(;!(i=o.next()).done;){var s=i.value;if(s&&!l(s[1]))return!1}return!0;default:return!1}}function u(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function c(e){if(null==e)return""+e;var t=u(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function d(e){var t=c(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return s.prototype=Error.prototype,i.checkPropTypes=Yd,i.resetWarningCache=Yd.resetWarningCache,i.PropTypes=i,i}(Kd.isElement,!0);var Jd=Bd.exports;var ef="undefined"!=typeof window?t.exports.useLayoutEffect:t.exports.useEffect;function tf(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function nf(e){return e?"function"==typeof e?t.exports.createElement(Ol,{},e):Array.isArray(e)?e.map(nf):e.type===A.Fragment?nf(e.props.children):(tf(e.type,Ol),e):e}const rf={position:"absolute",zIndex:-1};function of(e,n){return e?"function"==typeof e?e(n):Array.isArray(e)?e.map((e=>of(e,n))):function(e){const t=e&&e.type,n=t&&t.defaultProps;return n&&n.mapStyle}(e)?(n.style=rf,t.exports.cloneElement(e,n)):function(e){const t=e&&e.type;return t&&t.deckGLViewProps}(e)?t.exports.cloneElement(e,n):e:e}const sf={mixBlendMode:null};function af(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const Af=t.exports.forwardRef(((e,n)=>{const r=t.exports.useRef({}).current,[i,o]=t.exports.useState(0);r.forceUpdate=o;const s=t.exports.useRef(null),a=t.exports.useRef(null),l=t.exports.useMemo((()=>function({children:e,layers:t,views:n}){const r=[],i=[],o={};return A.Children.forEach(nf(e),(e=>{if(e){const t=e.type;if(tf(t,Md)){const n=function(e,t){const n={},r=e.defaultProps||{};for(const e in t)r[e]!==t[e]&&(n[e]=t[e]);return new e(n)}(t,e.props);i.push(n)}else r.push(e);if(t!==Ol&&tf(t,Ol)&&e.props.id){const n=new t(e.props);o[n.id]=n}}})),Object.keys(o).length>0&&(Array.isArray(n)?n.forEach((e=>{o[e.id]=e})):n&&(o[n.id]=n),n=Object.values(o)),{layers:t=i.length>0?[...i,...t]:t,children:r,views:n}}(e)),[e.layers,e.views,e.children]);let u=!0;const c=t=>u&&e.viewState?(r.viewStateUpdateRequested=t,null):(r.viewStateUpdateRequested=null,e.onViewStateChange(t)),d=t=>{u?r.interactionStateUpdateRequested=t:(r.interactionStateUpdateRequested=null,e.onInteractionStateChange(t))},f=t.exports.useMemo((()=>{const t={...e,style:null,width:"100%",height:"100%",layers:l.layers,views:l.views,onViewStateChange:c,onInteractionStateChange:d};return r.deck&&r.deck.setProps(t),t}),[e]);t.exports.useEffect((()=>(r.deck=function(e,t){const n=new(t.Deck||cc)({...t,style:null,width:"100%",height:"100%",_customRender:t=>{e.redrawReason=t;const r=n.viewManager.getViewports();e.lastRenderedViewports!==r?e.forceUpdate((e=>e+1)):af(e)}});return n}(r,{...f,parent:s.current,canvas:a.current}),()=>r.deck.finalize())),[]),ef((()=>{af(r);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=r;e&&c(e),t&&d(t)})),t.exports.useImperativeHandle(n,(()=>function(e){const t={pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)};return Object.defineProperty(t,"deck",{get:()=>e.deck}),t}(r)),[]);const{viewManager:h}=r.deck||{},p=h&&h.getViewports(),{ContextProvider:g,width:m,height:v,id:y,style:b}=e,{containerStyle:w,canvasStyle:_}=t.exports.useMemo((()=>function({width:e,height:t,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:e,height:t},i={left:0,top:0};if(n)for(const e in n)e in sf?i[e]=n[e]:r[e]=n[e];return{containerStyle:r,canvasStyle:i}}({width:m,height:v,style:b})),[m,v,b]);if(!r.viewStateUpdateRequested&&r.lastRenderedViewports===p||r.version!==i){r.lastRenderedViewports=p,r.version=i;const e=function({children:e,deck:n,ContextProvider:r}){const{viewManager:i}=n||{};if(!i||!i.views.length)return[];const o={},s=i.views[0].id;for(const t of e){let e=s,n=t;tf(t.type,Ol)&&(e=t.props.id||s,n=t.props.children);const r=i.getViewport(e),a=i.getViewState(e);if(r){const{x:t,y:i,width:s,height:A}=r;n=of(n,{x:t,y:i,width:s,height:A,viewport:r,viewState:a}),o[e]||(o[e]={viewport:r,children:[]}),o[e].children.push(n)}}return Object.keys(o).map((e=>{const{viewport:i,children:s}=o[e],{x:a,y:A,width:l,height:u}=i,c={position:"absolute",left:a,top:A,width:l,height:u},d="view-".concat(e),f=t.exports.createElement("div",{key:d,id:d,style:c},...s);if(r){const o={viewport:i,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:t=>{t.viewId=e,n._onViewStateChange(t)}};return t.exports.createElement(r,{key:d,value:o},f)}return f}))}({children:l.children,deck:r.deck,ContextProvider:g}),n=t.exports.createElement("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:a,style:_});r.control=t.exports.createElement("div",{id:"".concat(y||"deckgl","-wrapper"),ref:s,style:w},[n,e])}return u=!1,r.control}));Af.propTypes=cc.getPropTypes(Jd),Af.defaultProps=cc.defaultProps;var lf=Af;const uf=new Uint16Array([0,2,1,0,3,2]),cf=new Float32Array([0,1,0,0,1,0,1,1]);function df(e,t){if(!t)return function(e){const t=new Float64Array(12);for(let n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:uf,texCoords:cf}}(e);const n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),r=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(n/t)+1,o=Math.ceil(r/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),A=new Float32Array(i*o*2),l=new Float64Array(i*o*3);let u=0,c=0;for(let t=0;t<i;t++){const n=t/(i-1);for(let r=0;r<o;r++){const i=r/(o-1),s=ff(e,n,i);l[3*u+0]=s[0],l[3*u+1]=s[1],l[3*u+2]=s[2]||0,A[2*u+0]=n,A[2*u+1]=1-i,t>0&&r>0&&(a[c++]=u-o,a[c++]=u-o-1,a[c++]=u-1,a[c++]=u-o,a[c++]=u-1,a[c++]=u),u++}}return{vertexCount:s,positions:l,indices:a,texCoords:A}}function ff(e,t,n){return Vo(Vo(e[0],e[1],n),Vo(e[3],e[2],n),t)}var hf="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n");const pf={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:Oa.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class gf extends Md{getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:hf,modules:[Xa,RA]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const t=!0;e.add({indices:{size:1,isIndexed:!0,update:e=>e.value=this.state.mesh.indices,noAlloc:t},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:e=>e.value=this.state.mesh.positions,noAlloc:t},texCoords:{size:2,update:e=>e.value=this.state.mesh.texCoords,noAlloc:t}})}updateState({props:e,oldProps:t,changeFlags:n}){if(n.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}const i=this.getAttributeManager();if(e.bounds!==t.bounds){const e=this.state.mesh,t=this._createMesh();this.state.model.setVertexCount(t.vertexCount);for(const n in t)e&&e[n]!==t[n]&&i.invalidate(n);this.setState({mesh:t,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==t._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo({info:e}){const{image:t}=this.props;if(!e.color||!t)return e.bitmap=null,e;const{width:n,height:r}=t;e.index=0;const i=function(e){const[t,n,r]=e;return[(t+(15&r)/16)/256,(n+(240&r)/256)/256]}(e.color),o=[Math.floor(i[0]*n),Math.floor(i[1]*r)];return e.bitmap={size:{width:n,height:r},uv:i,pixel:o},e}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let t=e;return Number.isFinite(e[0])&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),df(t,this.context.viewport.resolution)}_getModel(e){return e?new _a(e,{...this.getShaders(),id:this.props.id,geometry:new Ta({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:t,moduleParameters:n}=e,{model:r,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:A,transparentColor:l,tintColor:u}=this.props;n.pickingActive&&s||a&&r&&r.setUniforms(t).setUniforms({bitmapTexture:a,desaturate:A,transparentColor:l.map((e=>e/255)),tintColor:u.slice(0,3).map((e=>e/255)),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:t,DEFAULT:n}=Oa;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!Number.isFinite(n[0]))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?e:t;if(r=r===e?e:t,r===e&&i===t)return{coordinateConversion:-1,bounds:n};if(r===t&&i===e){const e=uA([n[0],n[1]]),t=uA([n[2],n[3]]);return{coordinateConversion:1,bounds:[e[0],e[1],t[0],t[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}gf.layerName="BitmapLayer",gf.defaultProps=pf;const mf=()=>{},vf={10241:9987,10240:9729,10242:33071,10243:33071};function yf(e,t,n,r){return n===t.width&&r===t.height?t:(e.canvas.height=r,e.canvas.width=n,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,n,r),e.canvas)}function bf(e){return e&&(e.id||e.url)}function wf(e,t,n,r){const i=t.width,o=t.height,s=Qr(t,{width:n,height:r});return function(e,t,n={}){const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:A,targetZ:l,width:u,height:c}=n;const{framebuffer:d,deleteFramebuffer:f}=zr(e);er(d);const{gl:h,handle:p}=d,g=void 0!==a||void 0!==A||void 0!==l;a=a||0,A=A||0,l=l||0;const m=h.bindFramebuffer(36160,p);er(t);let v=null;if(t instanceof Pr&&(v=t,u=Number.isFinite(u)?u:v.width,c=Number.isFinite(c)?c:v.height,v.bind(0),t=v.target),g)switch(t){case 3553:case 34067:h.copyTexSubImage2D(t,o,a,A,r,i,u,c);break;case 35866:case 32879:An(h).copyTexSubImage3D(t,o,a,A,l,r,i,u,c)}else h.copyTexImage2D(t,o,s,r,i,u,c,0);v&&v.unbind(),h.bindFramebuffer(36160,m||null),f&&d.delete()}(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function _f(e,t,n){for(let r=0;r<t.length;r++){const{icon:i,xOffset:o}=t[r];e[bf(i)]={...i,x:o,y:n}}}class xf{constructor(e,{onUpdate:t=mf,onError:n=mf}){this.gl=e,this.onUpdate=t,this.onError=n,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?bf(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:n,iconMapping:r,data:i,getIcon:o}){e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),r&&(this._mapping=r),n&&this._updateIconAtlas(n),this._autoPacking&&(i||o)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(i))}get isLoaded(){return 0===this._pendingCount}_updateIconAtlas(e){var t;null===(t=this._texture)||void 0===t||t.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const t=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=mc(e);for(const e of i){o.index++;const i=t(e,o),s=bf(i);if(!i)throw new Error("Icon is missing.");if(!i.url)throw new Error("Icon url is missing.");r[s]||n[s]&&i.url===n[s].url||(r[s]={...i,source:e,sourceIndex:o.index})}return r}(e,this._getIcon,this._mapping)||{});if(t.length>0){const{mapping:e,xOffset:n,yOffset:r,rowHeight:i,canvasHeight:o}=function({icons:e,buffer:t,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let A=0;A<e.length;A++){const l=e[A];if(!n[bf(l)]){const{height:e,width:A}=l;r+A+t>s&&(_f(n,a,i),r=0,i=o+i+t,o=0,a=[]),a.push({icon:l,xOffset:r}),r=r+A+t,o=Math.max(o,e)}}return a.length>0&&_f(n,a,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:s,canvasHeight:(A=o+i+t,Math.pow(2,Math.ceil(Math.log2(A))))};var A}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=e,this._xOffset=n,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=new kr(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:vf})),this._texture.height!==this._canvasHeight&&(this._texture=wf(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const n of e)this._pendingCount++,Ze(n.url,bt,this._loadOptions).then((e=>{const r=bf(n),{x:i,y:o,width:s,height:a}=this._mapping[r],A=yf(t,e,s,a);this._texture.setSubImageData({data:A,x:i,y:o,width:s,height:a}),this._texture.generateMipmap(),this.onUpdate()})).catch((e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})})).finally((()=>{this._pendingCount--}))}}const Ef=[0,0,0,255],Sf={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:Ef},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Pf extends Md{getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Xa,RA]})}initializeState(){this.state={iconManager:new xf(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Ef},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState({oldProps:e,props:t,changeFlags:n}){super.updateState({props:t,oldProps:e,changeFlags:n});const r=this.getAttributeManager(),{iconAtlas:i,iconMapping:o,data:s,getIcon:a}=t,{iconManager:A}=this.state;A.setProps({loadOptions:t.loadOptions});let l=!1;if(i||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==t.iconAtlas&&A.setProps({iconAtlas:i,autoPacking:!1}),e.iconMapping!==t.iconMapping&&(A.setProps({iconMapping:o}),l=!0)):A.setProps({autoPacking:!0}),(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getIcon))&&A.setProps({data:s,getIcon:a}),l&&(r.invalidate("instanceOffsets"),r.invalidate("instanceIconFrames"),r.invalidate("instanceColorModes")),n.extensionsChanged){var u;const{gl:e}=this.context;null===(u=this.state.model)||void 0===u||u.delete(),this.state.model=this._getModel(e),r.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:n,sizeMaxPixels:r,sizeUnits:i,billboard:o,alphaCutoff:s}=this.props,{iconManager:a}=this.state,{viewport:A}=this.context,l=a.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeScale:t*("pixels"===i?A.metersPerPixel:1),sizeMinPixels:n,sizeMaxPixels:r,billboard:o,alphaCutoff:s}).draw()}_getModel(e){return new _a(e,{...this.getShaders(),id:this.props.id,geometry:new Ta({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){const{onIconError:t}=this.getCurrentLayer().props;t?t(e):qt.error(e.error)()}getInstanceOffset(e){const t=this.state.iconManager.getIconMapping(e);return[t.width/2-t.anchorX||0,t.height/2-t.anchorY||0]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const t=this.state.iconManager.getIconMapping(e);return[t.x||0,t.y||0,t.width||0,t.height||0]}}Pf.layerName="IconLayer",Pf.defaultProps=Sf;const kf=[0,0,0,255],Cf={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:kf},getLineColor:{type:"accessor",value:kf},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Tf extends Md{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool billboard;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Xa,RA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:e,oldProps:t,changeFlags:n}){if(super.updateState({props:e,oldProps:t,changeFlags:n}),n.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{viewport:t}=this.context,{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:A,antialiasing:l,lineWidthUnits:u,lineWidthScale:c,lineWidthMinPixels:d,lineWidthMaxPixels:f}=this.props,h="pixels"===n?t.metersPerPixel:1,p="pixels"===u?t.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:A,antialiasing:l,radiusScale:r*h,radiusMinPixels:i,radiusMaxPixels:o,lineWidthScale:c*p,lineWidthMinPixels:d,lineWidthMaxPixels:f}).draw()}_getModel(e){return new _a(e,{...this.getShaders(),id:this.props.id,geometry:new Ta({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}Tf.layerName="ScatterplotLayer",Tf.defaultProps=Cf;const Mf=1,If=-1;function Lf(e,t,n={}){const r=function(e,t={}){return Math.sign(function(e,t={}){const{start:n=0,end:r=e.length}=t,i=t.size||2;let o=0;for(let t=n,s=r-i;t<r;t+=i)o+=(e[t]-e[s])*(e[t+1]+e[s+1]),s=t;return o/2}(e,t))}(e,n);return r!==t&&(function(e,t){const{start:n=0,end:r=e.length,size:i=2}=t,o=(r-n)/i,s=Math.floor(o/2);for(let t=0;t<s;++t){const r=n+t*i,s=n+(o-1-t)*i;for(let t=0;t<i;++t){const n=e[r+t];e[r+t]=e[s+t],e[s+t]=n}}}(e,n),!0)}function Rf(e,t){const n=t.length,r=e.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(e[r-n+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)e[r+i]=t[i];return!0}function Of(e,t){const n=t.length;for(let r=0;r<n;r++)e[r]=t[r]}function Df(e,t,n,r,i=[]){const o=r+t*n;for(let t=0;t<n;t++)i[t]=e[o+t];return i}function Bf(e,t,n,r,i=[]){let o,s;if(8&n)o=(r[3]-e[1])/(t[1]-e[1]),s=3;else if(4&n)o=(r[1]-e[1])/(t[1]-e[1]),s=1;else if(2&n)o=(r[2]-e[0])/(t[0]-e[0]),s=2;else{if(!(1&n))return null;o=(r[0]-e[0])/(t[0]-e[0]),s=0}for(let n=0;n<e.length;n++)i[n]=(1&s)===n?r[s]:o*(t[n]-e[n])+e[n];return i}function Ff(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function zf(e,t={}){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t,A=(a-s)/n;let l=[];const u=[l],c=Df(e,0,n,s);let d,f;const h=Vf(c,i,o,[]),p=[];Rf(l,c);for(let t=1;t<A;t++){for(d=Df(e,t,n,s,d),f=Ff(d,h);f;){Bf(c,d,f,h,p);const e=Ff(p,h);e&&(Bf(c,p,e,h,p),f=e),Rf(l,p),Of(c,p),Wf(h,i,f),r&&l.length>n&&(l=[],u.push(l),Rf(l,c)),f=Ff(d,h)}Rf(l,d),Of(c,d)}return r?u:u[0]}function Nf(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function jf(e,t,n={}){if(!e.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n,a=[],A=[{pos:e,types:s&&new Array(e.length/r).fill(1),holes:t||[]}],l=[[],[]];let u=[];for(;A.length;){const{pos:e,types:t,holes:n}=A.shift();Gf(e,r,n[0]||e.length,l),u=Vf(l[0],i,o,u);const c=Ff(l[1],u);if(c){let i=Uf(e,t,r,0,n[0]||e.length,u,c);const o={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};A.push(o,a);for(let A=0;A<n.length;A++)i=Uf(e,t,r,n[A],n[A+1]||e.length,u,c),i[0]&&(o.holes.push(o.pos.length),o.pos=Nf(o.pos,i[0].pos),s&&(o.types=Nf(o.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=Nf(a.pos,i[1].pos),s&&(a.types=Nf(a.types,i[1].types)))}else{const r={positions:e};s&&(r.edgeTypes=t),n.length&&(r.holeIndices=n),a.push(r)}}return a}function Uf(e,t,n,r,i,o,s){const a=(i-r)/n,A=[],l=[],u=[],c=[],d=[];let f,h,p;const g=Df(e,a-1,n,r);let m=Math.sign(8&s?g[1]-o[3]:g[0]-o[2]),v=t&&t[a-1],y=0,b=0;for(let i=0;i<a;i++)f=Df(e,i,n,r,f),h=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),p=t&&t[r/n+i],h&&m&&m!==h&&(Bf(g,f,s,o,d),Rf(A,d)&&u.push(v),Rf(l,d)&&c.push(v)),h<=0?(Rf(A,f)&&u.push(p),y-=h):u.length&&(u[u.length-1]=0),h>=0?(Rf(l,f)&&c.push(p),b+=h):c.length&&(c[c.length-1]=0),Of(g,f),m=h,v=p;return[y?{pos:A,types:t&&u}:null,b?{pos:l,types:t&&c}:null]}function Vf(e,t,n,r){const i=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=o,r[2]=i+t,r[3]=o+t,r}function Wf(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function Gf(e,t,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let r=0;r<n;r+=t){const t=e[r],n=e[r+1];i=t<i?t:i,o=t>o?t:o,s=n<s?n:s,a=n>a?n:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}function Hf(e,t,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=t){const t=Math.abs(e[s]);t>i&&(i=t,o=s-1)}return o}function Qf(e,t,n,r,i=85.051129){const o=e[n],s=e[r-t];if(Math.abs(o-s)>180){const r=Df(e,0,t,n);r[0]+=360*Math.round((s-o)/360),Rf(e,r),r[1]=Math.sign(r[1])*i,Rf(e,r),r[0]=o,Rf(e,r)}}function $f(e,t,n,r){let i,o=e[0];for(let s=n;s<r;s+=t){i=e[s];const t=i-o;(t>180||t<-180)&&(i-=360*Math.round(t/360)),e[s]=o=i}}function qf(e,t){let n;const r=e.length/t;for(let i=0;i<r&&(n=e[i*t],(n+180)%360==0);i++);const i=360*-Math.round(n/360);if(0!==i)for(let n=0;n<r;n++)e[n*t]+=i}class Yf extends Ta{constructor(e={}){const{id:t=ir("column-geometry")}=e,{indices:n,attributes:r}=function(e){const{radius:t,height:n=1,nradial:r=10}=e;let{vertices:i}=e;i&&(qt.assert(i.length>=r),i=i.flatMap((e=>[e[0],e[1]])),Lf(i,If));const o=n>0,s=r+1,a=o?3*s+1:r,A=2*Math.PI/r,l=new Uint16Array(o?3*r*2:0),u=new Float32Array(3*a),c=new Float32Array(3*a);let d=0;if(o){for(let e=0;e<s;e++){const o=e*A,s=e%r,a=Math.sin(o),l=Math.cos(o);for(let e=0;e<2;e++)u[d+0]=i?i[2*s]:l*t,u[d+1]=i?i[2*s+1]:a*t,u[d+2]=(.5-e)*n,c[d+0]=i?i[2*s]:l,c[d+1]=i?i[2*s+1]:a,d+=3}u[d+0]=u[d-3],u[d+1]=u[d-2],u[d+2]=u[d-1],d+=3}for(let e=o?0:1;e<s;e++){const o=Math.floor(e/2)*Math.sign(.5-e%2),s=o*A,a=(o+r)%r,l=Math.sin(s),f=Math.cos(s);u[d+0]=i?i[2*a]:f*t,u[d+1]=i?i[2*a+1]:l*t,u[d+2]=n/2,c[d+2]=1,d+=3}if(o){let e=0;for(let t=0;t<r;t++)l[e++]=2*t+0,l[e++]=2*t+2,l[e++]=2*t+0,l[e++]=2*t+1,l[e++]=2*t+1,l[e++]=2*t+3}return{indices:l,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:c}}}}(e);super({...e,id:t,indices:n,attributes:r})}}const Zf=[0,0,0,255],Xf={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:e=>e.position},getFillColor:{type:"accessor",value:Zf},getLineColor:{type:"accessor",value:Zf},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Kf extends Md{getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio -= sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Xa,ha,RA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:Zf},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:Zf},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState({props:e,oldProps:t,changeFlags:n}){super.updateState({props:e,oldProps:t,changeFlags:n});const r=n.extensionsChanged;if(r){var i;const{gl:e}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}(r||e.diskResolution!==t.diskResolution||e.vertices!==t.vertices||(e.extruded||e.stroked)!==(t.extruded||t.stroked))&&this._updateGeometry(e)}getGeometry(e,t,n){const r=new Yf({radius:1,height:n?2:0,vertices:t,nradial:e});let i=0;if(t)for(let n=0;n<e;n++){const r=t[n];i+=Math.sqrt(r[0]*r[0]+r[1]*r[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),r}_getModel(e){return new _a(e,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:e,vertices:t,extruded:n,stroked:r}){const i=this.getGeometry(e,t,n||r);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}draw({uniforms:e}){const{viewport:t}=this.context,{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,elevationScale:s,extruded:a,filled:A,stroked:l,wireframe:u,offset:c,coverage:d,radius:f,angle:h}=this.props,{model:p,fillVertexCount:g,wireframeVertexCount:m,edgeDistance:v}=this.state,y="pixels"===n?t.metersPerPixel:1;p.setUniforms(e).setUniforms({radius:f,angle:h/180*Math.PI,offset:c,extruded:a,coverage:d,elevationScale:s,edgeDistance:v,widthScale:r*y,widthMinPixels:i,widthMaxPixels:o}),a&&u&&(p.setProps({isIndexed:!0}),p.setVertexCount(m).setDrawMode(1).setUniforms({isStroke:!0}).draw()),A&&(p.setProps({isIndexed:!1}),p.setVertexCount(g).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!a&&l&&(p.setProps({isIndexed:!1}),p.setVertexCount(2*g/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}function Jf(e,t,n,r){let i=e;if(Array.isArray(e[0])){const n=e.length*t;i=new Array(n);for(let n=0;n<e.length;n++)for(let r=0;r<t;r++)i[n*t+r]=e[n][r]||0}return n?zf(i,{size:t,gridResolution:n}):r?function(e,t={}){const{size:n=2,startIndex:r=0,endIndex:i=e.length,normalize:o=!0}=t,s=e.slice(r,i);$f(s,n,0,i-r);const a=zf(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const e of a)qf(e,n);return a}(i,{size:t}):i}Kf.layerName="ColumnLayer",Kf.defaultProps=Xf;class eh extends Dd{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):()=>null}normalizeGeometry(e){return this.normalize?Jf(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}get(e){return this.attributes[e]}getGeometrySize(e){if(Array.isArray(e[0])){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&Array.isArray(e[0]))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const{segmentTypes:n}=this.attributes,r=this.isClosed(e),{vertexStart:i,geometrySize:o}=t;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n)return;const{vertexStart:r,geometrySize:i}=t,o=new Array(3);for(let t=r,s=0;s<i;t++,s++)this.getPointOnPath(e,s,o),n[3*t]=o[0],n[3*t+1]=o[1],n[3*t+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t,n=[]){const{positionSize:r}=this;t*r>=e.length&&(t+=1-e.length/r);const i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}isClosed(e){if(!this.normalize)return this.opts.loop;const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}const th=[0,0,0,255],nh={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:th},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},rh={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class ih extends Md{getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Xa,RA]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:rh,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:rh,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:rh,defaultValue:th},instancePickingColors:{size:3,type:5121,accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n)}}),this.setState({pathTesselator:new eh({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&qt.removed("getDashArray","PathStyleExtension")()}updateState({oldProps:e,props:t,changeFlags:n}){super.updateState({props:t,oldProps:e,changeFlags:n});const r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:i.getPath,buffers:i,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:e}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(e),r.invalidateAll()}}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:r}=this.props;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){const{viewport:t}=this.context,{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:A,widthMaxPixels:l}=this.props,u="pixels"===s?t.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthScale:a*u,miterLimit:o,widthMinPixels:A,widthMaxPixels:l}).draw()}_getModel(e){return new _a(e,{...this.getShaders(),id:this.props.id,geometry:new Ta({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}ih.layerName="PathLayer",ih.defaultProps=nh;var oh={exports:{}};function sh(e,t,n){n=n||2;var r,i,o,s,a,A,l,u=t&&t.length,c=u?t[0]*n:e.length,d=ah(e,0,c,n,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(e,t,n,r){var i,o,s,a=[];for(i=0,o=t.length;i<o;i++)(s=ah(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),a.push(vh(s));for(a.sort(hh),i=0;i<a.length;i++)n=Ah(n=ph(a[i],n),n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=s=e[1];for(var h=n;h<c;h+=n)(a=e[h])<r&&(r=a),(A=e[h+1])<i&&(i=A),a>o&&(o=a),A>s&&(s=A);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return lh(d,f,n,r,i,l),f}function ah(e,t,n,r,i){var o,s;if(i===Ih(e,t,n,r)>0)for(o=t;o<n;o+=r)s=Ch(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=Ch(o,e[o],e[o+1],s);return s&&_h(s,s.next)&&(Th(s),s=s.next),s}function Ah(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!_h(r,r.next)&&0!==wh(r.prev,r,r.next))r=r.next;else{if(Th(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function lh(e,t,n,r,i,o,s){if(e){!s&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=mh(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,A,l=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<l&&(a++,r=r.nextZ);t++);for(A=l;a>0||A>0&&r;)0!==a&&(0===A||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,A--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(e,r,i,o);for(var a,A,l=e;e.prev!==e.next;)if(a=e.prev,A=e.next,o?ch(e,r,i,o):uh(e))t.push(a.i/n),t.push(e.i/n),t.push(A.i/n),Th(e),e=A.next,l=A.next;else if((e=A)===l){s?1===s?lh(e=dh(Ah(e),t,n),t,n,r,i,o,2):2===s&&fh(e,t,n,r,i,o):lh(Ah(e),t,n,r,i,o,1);break}}}function uh(e){var t=e.prev,n=e,r=e.next;if(wh(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(yh(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&wh(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ch(e,t,n,r){var i=e.prev,o=e,s=e.next;if(wh(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,A=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=mh(a,A,t,n,r),d=mh(l,u,t,n,r),f=e.prevZ,h=e.nextZ;f&&f.z>=c&&h&&h.z<=d;){if(f!==e.prev&&f!==e.next&&yh(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&wh(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,h!==e.prev&&h!==e.next&&yh(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&wh(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;f&&f.z>=c;){if(f!==e.prev&&f!==e.next&&yh(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&wh(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&yh(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&wh(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function dh(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!_h(i,o)&&xh(i,r,r.next,o)&&Ph(i,o)&&Ph(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Th(r),Th(r.next),r=e=o),r=r.next}while(r!==e);return Ah(r)}function fh(e,t,n,r,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&bh(s,a)){var A=kh(s,a);return s=Ah(s,s.next),A=Ah(A,A.next),lh(s,t,n,r,i,o),void lh(A,t,n,r,i,o)}a=a.next}s=s.next}while(s!==e)}function hh(e,t){return e.x-t.x}function ph(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var A,l=n,u=n.x,c=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&yh(o<c?i:s,o,u,c,o<c?s:i,o,r.x,r.y)&&(A=Math.abs(o-r.y)/(i-r.x),Ph(r,e)&&(A<d||A===d&&(r.x>n.x||r.x===n.x&&gh(n,r)))&&(n=r,d=A)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=kh(n,e),i=Ah(n,n.next);return Ah(r,r.next),t===n?i:t}function gh(e,t){return wh(e.prev,e,t.prev)<0&&wh(t.next,e,e.next)<0}function mh(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vh(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function yh(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function bh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&xh(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ph(e,t)&&Ph(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(wh(e.prev,e,t.prev)||wh(e,t.prev,t))||_h(e,t)&&wh(e.prev,e,e.next)>0&&wh(t.prev,t,t.next)>0)}function wh(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _h(e,t){return e.x===t.x&&e.y===t.y}function xh(e,t,n,r){var i=Sh(wh(e,t,n)),o=Sh(wh(e,t,r)),s=Sh(wh(n,r,e)),a=Sh(wh(n,r,t));return i!==o&&s!==a||(!(0!==i||!Eh(e,n,t))||(!(0!==o||!Eh(e,r,t))||(!(0!==s||!Eh(n,e,r))||!(0!==a||!Eh(n,t,r)))))}function Eh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Sh(e){return e>0?1:e<0?-1:0}function Ph(e,t){return wh(e.prev,e,e.next)<0?wh(e,t,e.next)>=0&&wh(e,e.prev,t)>=0:wh(e,t,e.prev)<0||wh(e,e.next,t)<0}function kh(e,t){var n=new Mh(e.i,e.x,e.y),r=new Mh(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ch(e,t,n,r){var i=new Mh(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Th(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Mh(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ih(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}oh.exports=sh,oh.exports.default=sh,sh.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(Ih(e,0,o,n));if(i)for(var a=0,A=t.length;a<A;a++){var l=t[a]*n,u=a<A-1?t[a+1]*n:e.length;s-=Math.abs(Ih(e,l,u,n))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,f=r[a+1]*n,h=r[a+2]*n;c+=Math.abs((e[d]-e[h])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[h+1]-e[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},sh.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n};var Lh=oh.exports;const Rh=Mf,Oh=If,Dh={isClosed:!0};function Bh(e,t,n,r,i){let o=t;const s=n.length;for(let t=0;t<s;t++)for(let i=0;i<r;i++)e[o++]=n[t][i]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let t=0;t<r;t++)e[o++]=n[0][t]||0;return Dh.start=t,Dh.end=o,Dh.size=r,Lf(e,i,Dh),o}function Fh(e,t,n,r,i=0,o,s){const a=(o=o||n.length)-i;if(a<=0)return t;let A=t;for(let t=0;t<a;t++)e[A++]=n[i+t];if(!function(e,t,n,r){for(let i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}(n,r,i,o))for(let t=0;t<r;t++)e[A++]=n[i+t];return Dh.start=t,Dh.end=A,Dh.size=r,Lf(e,s,Dh),A}function zh(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],r=[];if(e.positions){const{positions:i,holeIndices:o}=e;if(o){let e=0;for(let s=0;s<=o.length;s++)e=Fh(n,e,i,t,o[s-1],o[s],0===s?Rh:Oh),r.push(e);return r.pop(),{positions:n,holeIndices:r}}e=i}if(Number.isFinite(e[0]))return Fh(n,0,e,t,0,n.length,Rh),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let i=0;for(const[o,s]of e.entries())i=Bh(n,i,s,t,0===o?Rh:Oh),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return Bh(n,0,e,t,Rh),n}class Nh extends Dd{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;t&&(this.vertexCount=(t.value||t).length)}normalizeGeometry(e){if(this.normalize){if(e=zh(e,this.positionSize),this.opts.resolution)return jf(e.positions||e,e.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return function(e,t,n={}){const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n;t=t||[];const s=[],a=[];let A=0,l=0;for(let i=0;i<=t.length;i++){const o=t[i]||e.length,u=l,c=Hf(e,r,A,o);for(let t=c;t<o;t++)s[l++]=e[t];for(let t=A;t<c;t++)s[l++]=e[t];$f(s,r,u,l),Qf(s,r,u,l,n.maxLatitude),A=o,a[i]=l}a.pop();const u=jf(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const e of u)qf(e.positions,r);return u}(e.positions||e,e.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return e}getGeometrySize(e){if(Array.isArray(e)&&!Number.isFinite(e[0])){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return(e.positions||e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):()=>null}updateGeometryAttributes(e,t){if(Array.isArray(e)&&!Number.isFinite(e[0]))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}_updateIndices(e,{geometryIndex:t,vertexStart:n,indexStart:r}){const{attributes:i,indexStarts:o,typedArrayManager:s}=this;let a=i.indices;if(!a)return;let A=r;const l=function(e,t,n){let r=null;e.holeIndices&&(r=e.holeIndices.map((e=>e/t)));let i=e.positions||e;if(n){const e=i.length;i=i.slice();const r=[];for(let o=0;o<e;o+=t){r[0]=i[o],r[1]=i[o+1];const e=n(r);i[o]=e[0],i[o+1]=e[1]}}return Lh(i,r,t)}(e,this.positionSize,this.opts.preproject);a=s.allocate(a,r+l.length,{copy:!0});for(let e=0;e<l.length;e++)a[A++]=l[e]+n;o[t+1]=r+l.length,i.indices=a}_updatePositions(e,{vertexStart:t,geometrySize:n}){const{attributes:{positions:r},positionSize:i}=this;if(!r)return;const o=e.positions||e;for(let e=t,s=0;s<n;e++,s++){const t=o[s*i],n=o[s*i+1],a=i>2?o[s*i+2]:0;r[3*e]=t,r[3*e+1]=n,r[3*e+2]=a}}_updateVertexValid(e,{vertexStart:t,geometrySize:n}){const{attributes:{vertexValid:r},positionSize:i}=this,o=e&&e.holeIndices;if(e&&e.edgeTypes?r.set(e.edgeTypes,t):r.fill(1,t,t+n),o)for(let e=0;e<o.length;e++)r[t+o[e]/i-1]=0;r[t+n-1]=0}}var jh="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",Uh="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(jh,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),Vh="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(jh,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n");const Wh=[0,0,0,255],Gh={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Wh},getLineColor:{type:"accessor",value:Wh},material:!0},Hh={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Qh extends Md{getShaders(e){return super.getShaders({vs:"top"===e?Uh:Vh,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[Xa,ha,RA]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:t}=this.context;let{coordinateSystem:n}=this.props;t.isGeospatial&&n===Oa.DEFAULT&&(n=Oa.LNGLAT),this.setState({numInstances:0,polygonTesselator:new Nh({preproject:n===Oa.LNGLAT&&t.projectFlat,fp64:this.use64bitPositions(),IndexType:!e||Vr(e,jr)?Uint32Array:Uint16Array})});const r=this.getAttributeManager(),i=!0;r.remove(["instancePickingColors"]),r.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:i},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Hh,accessor:"getPolygon",update:this.calculatePositions,noAlloc:i,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:i},elevations:{size:1,transition:Hh,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hh,accessor:"getFillColor",defaultValue:Wh,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hh,accessor:"getLineColor",defaultValue:Wh,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:r}=this.props;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){const{extruded:t,filled:n,wireframe:r,elevationScale:i}=this.props,{topModel:o,sideModel:s,polygonTesselator:a}=this.state,A={...e,extruded:Boolean(t),elevationScale:i};s&&(s.setInstanceCount(a.instanceCount-1),s.setUniforms(A),r&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(a.vertexCount),o.setUniforms(A).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager();var o;(r.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((e=>e.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry({props:e,oldProps:t,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:r.getPolygon,buffers:r,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:t,filled:n,extruded:r}=this.props;let i,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new _a(e,{...n,id:"".concat(t,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(o=new _a(e,{...this.getShaders("side"),id:"".concat(t,"-side"),geometry:new Ta({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,i].filter(Boolean),topModel:i,sideModel:o}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}function $h({data:e,getIndex:t,dataRange:n,replace:r}){const{startRow:i=0,endRow:o=1/0}=n,s=e.length;let a=s,A=s;for(let n=0;n<s;n++){const r=t(e[n]);if(a>n&&r>=i&&(a=n),r>=o){A=n;break}}let l=a;const u=A-a!==r.length,c=u&&e.slice(A);for(let t=0;t<r.length;t++)e[l++]=r[t];if(u){for(let t=0;t<c.length;t++)e[l++]=c[t];e.length=l}return{startRow:a,endRow:a+r.length}}Qh.layerName="SolidPolygonLayer",Qh.defaultProps=Gh;const qh=[0,0,0,255],Yh={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:e=>e.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:qh},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Zh extends Id{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&qt.removed("getLineDashArray","PathStyleExtension")()}updateState({oldProps:e,props:t,changeFlags:n}){const r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(r&&Array.isArray(n.dataChanged)){const e=this.state.paths.slice(),t=n.dataChanged.map((t=>$h({data:e,getIndex:e=>e.__source.index,dataRange:t,replace:this._getPaths(t)})));this.setState({paths:e,pathsDiff:t})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:t,getPolygon:n,positionFormat:r,_normalize:i}=this.props,o=[],s="XY"===r?2:3,{startRow:a,endRow:A}=e,{iterable:l,objectInfo:u}=mc(t,a,A);for(const e of l){u.index++;let t=n(e,u);i&&(t=zh(t,s));const{holeIndices:r}=t,a=t.positions||t;if(r)for(let t=0;t<=r.length;t++){const n=a.slice(r[t-1]||0,r[t]||a.length);o.push(this.getSubLayerRow({path:n},e,u.index))}else o.push(this.getSubLayerRow({path:a},e,u.index))}return o}renderLayers(){const{data:e,_dataDiff:t,stroked:n,filled:r,extruded:i,wireframe:o,_normalize:s,_windingOrder:a,elevationScale:A,transitions:l,positionFormat:u}=this.props,{lineWidthUnits:c,lineWidthScale:d,lineWidthMinPixels:f,lineWidthMaxPixels:h,lineJointRounded:p,lineMiterLimit:g,lineDashJustified:m}=this.props,{getFillColor:v,getLineColor:y,getLineWidth:b,getLineDashArray:w,getElevation:_,getPolygon:x,updateTriggers:E,material:S}=this.props,{paths:P,pathsDiff:k}=this.state,C=this.getSubLayerClass("fill",Qh),T=this.getSubLayerClass("stroke",ih),M=this.shouldRenderSubLayer("fill",P)&&new C({_dataDiff:t,extruded:i,elevationScale:A,filled:r,wireframe:o,_normalize:s,_windingOrder:a,getElevation:_,getFillColor:v,getLineColor:i&&o?y:qh,material:S,transitions:l},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:E.getPolygon,getElevation:E.getElevation,getFillColor:E.getFillColor,lineColors:i&&o,getLineColor:E.getLineColor}}),{data:e,positionFormat:u,getPolygon:x});return[!i&&M,!i&&n&&this.shouldRenderSubLayer("stroke",P)&&new T({_dataDiff:k&&(()=>k),widthUnits:c,widthScale:d,widthMinPixels:f,widthMaxPixels:h,jointRounded:p,miterLimit:g,dashJustified:m,_pathType:"loop",transitions:l&&{getWidth:l.getLineWidth,getColor:l.getLineColor,getPath:l.getPolygon},getColor:this.getSubLayerAccessor(y),getWidth:this.getSubLayerAccessor(b),getDashArray:this.getSubLayerAccessor(w)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:E.getLineWidth,getColor:E.getLineColor,getDashArray:E.getLineDashArray}}),{data:P,positionFormat:u,getPath:e=>e.path}),i&&M]}}Zh.layerName="PolygonLayer",Zh.defaultProps=Yh;const Xh=[];class Kh extends Pf{getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(e,{index:t,target:n})=>this.encodePickingColor(t,n)}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:r}=t;r!==n.outlineColor&&(r=r.map((e=>e/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&qt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(n,.75*(1-r)):-1,gamma:n,sdf:Boolean(t),outlineColor:i},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).map((e=>super.getInstanceOffset(e))):Xh}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).map((e=>super.getInstanceIconFrame(e))):Xh}}Kh.layerName="MultiIconLayer",Kh.defaultProps={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};var Jh={exports:{}};Jh.exports=tp,Jh.exports.default=tp;var ep=1e20;function tp(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+2*this.buffer,a=s+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function np(e,t,n,r,i,o){for(var s=0;s<t;s++)rp(e,s,t,n,r,i,o);for(var a=0;a<n;a++)rp(e,a*t,1,t,r,i,o)}function rp(e,t,n,r,i,o,s){var a,A,l,u;for(o[0]=0,s[0]=-ep,s[1]=ep,a=0;a<r;a++)i[a]=e[t+a*n];for(a=1,A=0,l=0;a<r;a++){do{u=o[A],l=(i[a]-i[u]+a*a-u*u)/(a-u)/2}while(l<=s[A]&&--A>-1);o[++A]=a,s[A]=l,s[A+1]=ep}for(a=0,A=0;a<r;a++){for(;s[A+1]<a;)A++;u=o[A],e[t+a*n]=i[u]+(a-u)*(a-u)}}tp.prototype._draw=function(e,t){var n,r,i,o,s,a,A,l,u,c=this.ctx.measureText(e),d=c.width,f=2*this.buffer;t&&this.useMetrics?(s=Math.floor(c.actualBoundingBoxAscent),l=this.buffer+Math.ceil(c.actualBoundingBoxAscent),a=this.buffer,A=this.buffer,n=(r=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)))+f,i=(o=Math.min(this.size-a,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)))+f,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=o=this.size,s=19*this.fontSize/24,a=A=0,l=this.middle,this.ctx.textBaseline="middle"),r&&o&&(this.ctx.clearRect(A,a,r,o),this.ctx.fillText(e,this.buffer,l),u=this.ctx.getImageData(A,a,r,o));var h=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,o,s){o.fill(ep,0,t*n),s.fill(0,0,t*n);for(var a=(t-r)/2,A=0;A<i;A++)for(var l=0;l<r;l++){var u=(A+a)*t+l+a,c=e.data[4*(A*r+l)+3]/255;if(1===c)o[u]=0,s[u]=ep;else if(0===c)o[u]=ep,s[u]=0;else{var d=Math.max(0,.5-c),f=Math.max(0,c-.5);o[u]=d*d,s[u]=f*f}}}(u,n,i,r,o,this.gridOuter,this.gridInner),np(this.gridOuter,n,i,this.f,this.v,this.z),np(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,o,s){for(var a=0;a<t*n;a++){var A=Math.sqrt(r[a])-Math.sqrt(i[a]);e[a]=Math.round(255-255*(A/o+s))}}(h,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:h,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:i,top:s,left:0,advance:d}}},tp.prototype.draw=function(e){return this._draw(e,!1).data},tp.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};var ip=Jh.exports;const op=[];function sp(e,t,n,r){let i=0;for(let o=t;o<n;o++){const t=e[o];let n=null;const s=r&&r[t];s&&(n=s.width),i+=n}return i}function ap(e,t,n,r,i,o){let s=t,a=0;for(let A=t;A<n;A++){const t=sp(e,A,A+1,i);a+t>r&&(s<A&&o.push(A),s=A,a=0),a+=t}return a}function Ap(e,t,n,r,i=0,o){void 0===o&&(o=e.length);const s=[];return"break-all"===t?ap(e,i,o,n,r,s):function(e,t,n,r,i,o){let s=t,a=t,A=t,l=0;for(let u=t;u<n;u++)if(" "===e[u]?A=u+1:" "!==e[u+1]&&u+1!==n||(A=u+1),A>a){let t=sp(e,a,A,i);l+t>r&&(s<a&&(o.push(a),s=a,l=0),t>r&&(t=ap(e,a,A,r,i,o),s=o[o.length-1])),a=A,l+=t}}(e,i,o,n,r,s),s}function lp(e,t,n,r,i,o){let s=0,a=0;for(let o=t;o<n;o++){const t=e[o],n=r[t];n?(a||(a=n.height),i[o]=s+n.width/2,s+=n.width):(qt.warn("Missing character: ".concat(t," (").concat(t.codePointAt(0),")"))(),i[o]=s,s+=32)}o[0]=s,o[1]=a}function up(e,t,n,r,i){const o=(e=Array.from(e)).length,s=new Array(o),a=new Array(o),A=new Array(o),l=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,u=[0,0],c=[];let d=0,f=0,h=0;for(let p=0;p<=o;p++){const g=e[p];if("\n"!==g&&p!==o||(h=p),h>f){const o=l?Ap(e,n,r,i,f,h):op;for(let n=0;n<=o.length;n++){const r=0===n?f:o[n-1],l=n<o.length?o[n]:h;lp(e,r,l,i,s,c);for(let e=r;e<l;e++)a[e]=d+c[1]/2,A[e]=c[0];d+=c[1]*t,u[0]=Math.max(u[0],c[0])}f=h}"\n"===g&&(s[f]=0,a[f]=0,A[f]=0,f++)}return u[1]=d,{x:s,y:a,rowWidth:A,size:u}}const cp=function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),dp="Monaco, monospace",fp="normal",hp=new class{constructor(e=5){this.limit=e,this.clear()}clear(){this._cache={},this._order=[]}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}_deleteCache(e){delete this._cache[e]}_deleteOrder(e){const t=this._order.findIndex((t=>t===e));t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}(3),pp=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function gp(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function mp(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="baseline",e.textAlign="left"}class vp{constructor(){this.props={fontFamily:dp,fontWeight:fp,characterSet:cp,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){pp.forEach((t=>{t in e&&(this.props[t]=e[t])}));const t=this._key;this._key=this._getKey();const n=function(e,t){const n=hp.get(e);if(!n)return t;const r=[],i=n.mapping;let o=Object.keys(i);o=new Set(o);let s=t;return s instanceof Array&&(s=new Set(s)),s.forEach((e=>{o.has(e)||r.push(e)})),r}(this._key,this.props.characterSet),r=hp.get(this._key);if(r&&0===n.length)return void(this._key!==t&&(this._atlas=r));const i=this._generateFontAtlas(this._key,n,r);this._atlas=i,hp.set(this._key,i)}_generateFontAtlas(e,t,n){const{fontFamily:r,fontWeight:i,fontSize:o,buffer:s,sdf:a,radius:A,cutoff:l}=this.props;let u=n&&n.data;u||(u=document.createElement("canvas"),u.width=1024);const c=u.getContext("2d");mp(c,r,o,i);const{mapping:d,canvasHeight:f,xOffset:h,yOffset:p}=function({characterSet:e,getFontWidth:t,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let A=0,l=s,u=0;for(const s of e)if(!o[s]){const e=t(s,u++);l+e+2*r>i&&(l=0,A++),o[s]={x:l+r,y:a+A*(n+2*r)+r,width:e,height:n},l+=e+2*r}const c=n+2*r;return{mapping:o,xOffset:l,yOffset:a+A*c,canvasHeight:(d=a+(A+1)*c,Math.pow(2,Math.ceil(Math.log2(d))))};var d}({getFontWidth:e=>c.measureText(e).width,fontHeight:1.2*o,buffer:s,characterSet:t,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(u.height!==f){const e=c.getImageData(0,0,u.width,u.height);u.height=f,c.putImageData(e,0,0)}if(mp(c,r,o,i),a){const e=new ip(o,s,A,l,r,i),n=c.getImageData(0,0,e.size,e.size);for(const r of t)gp(e.draw(r),n),c.putImageData(n,d[r].x-s,d[r].y+s)}else for(const e of t)c.fillText(e,d[e].x,d[e].y+.9*o);return{xOffset:h,yOffset:p,mapping:d,data:u,width:u.width,height:u.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?"".concat(e," ").concat(t," ").concat(n," ").concat(r," ").concat(o," ").concat(s):"".concat(e," ").concat(t," ").concat(n," ").concat(r)}}const yp={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class bp extends Md{getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Xa,RA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:e,oldProps:t,changeFlags:n}){if(super.updateState({props:e,oldProps:t,changeFlags:n}),n.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{viewport:t}=this.context,{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:A}=this.props;const l="pixels"===i?t.metersPerPixel:1;A.length<4&&(A=[A[0],A[1],A[0],A[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:A,sizeScale:r*l,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new _a(e,{...this.getShaders(),id:this.props.id,geometry:new Ta({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}bp.layerName="TextBackgroundLayer",bp.defaultProps=yp;const wp={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},_p={start:1,middle:0,end:-1},xp={top:1,center:0,bottom:-1},Ep=[0,0,0,255],Sp=["fontSize","buffer","sdf","radius","cutoff"],Pp={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Ep},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:cp},fontFamily:dp,fontWeight:fp,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Ep},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Ep},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class kp extends Id{initializeState(){this.state={styleVersion:0,fontAtlasManager:new vp}}updateState({props:e,oldProps:t,changeFlags:n}){const r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getText),i=this.state.characterSet;r&&this._updateText();const o=i!==this.state.characterSet||this._fontChanged(t,e);o&&this._updateFontAtlas(t,e);(o||e.lineHeight!==t.lineHeight||e.wordBreak!==t.wordBreak||e.maxWidth!==t.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(e,t){const{fontSettings:n,fontFamily:r,fontWeight:i}=t,{fontAtlasManager:o,characterSet:s}=this.state;o.setProps({...wp,...n,characterSet:s,fontFamily:r,fontWeight:i})}_fontChanged(e,t){if(e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;const n=e.fontSettings||{},r=t.fontSettings||{};return Sp.some((e=>n[e]!==r[e]))}_updateText(){const{data:e,characterSet:t}=this.props,n=e.attributes&&e.attributes.getText;let r,{getText:i}=this.props,{startIndices:o}=e;const s="auto"===t&&new Set;if(n&&o){const{texts:t,characterCount:a}=function({value:e,length:t,stride:n,offset:r,startIndices:i,characterSet:o}){const s=e.BYTES_PER_ELEMENT,a=n?n/s:1,A=r?r/s:0,l=i[t]||Math.ceil((e.length-A)/a),u=o&&new Set,c=new Array(t);let d=e;if(a>1||A>0){d=new e.constructor(l);for(let t=0;t<l;t++)d[t]=e[t*a+A]}for(let e=0;e<t;e++){const t=i[e],n=i[e+1]||l,r=d.subarray(t,n);c[e]=String.fromCodePoint.apply(null,r),u&&r.forEach(u.add,u)}if(u)for(const e of u)o.add(String.fromCodePoint(e));return{texts:c,characterCount:l}}({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:o,characterSet:s});r=a,i=(e,{index:n})=>t[n]}else{const{iterable:t,objectInfo:n}=mc(e);o=[0],r=0;for(const e of t){n.index++;const t=Array.from(i(e,n)||"");s&&t.forEach(s.add,s),r+=t.length,o.push(r)}}this.setState({getText:i,startIndices:o,numInstances:r,characterSet:s||t})}getBoundingRect(e,t){const n=this.state.fontAtlasManager.mapping,{getText:r}=this.state,{wordBreak:i,maxWidth:o,lineHeight:s,getTextAnchor:a,getAlignmentBaseline:A}=this.props,l=r(e,t)||"",{size:[u,c]}=up(l,s,i,o,n);return[(_p["function"==typeof a?a(e,t):a]-1)*u/2,(xp["function"==typeof A?A(e,t):A]-1)*c/2,u,c]}getIconOffsets(e,t){const n=this.state.fontAtlasManager.mapping,{getText:r}=this.state,{wordBreak:i,maxWidth:o,lineHeight:s,getTextAnchor:a,getAlignmentBaseline:A}=this.props,l=r(e,t)||"",{x:u,y:c,rowWidth:d,size:[f,h]}=up(l,s,i,o,n),p=_p["function"==typeof a?a(e,t):a],g=xp["function"==typeof A?A(e,t):A],m=u.length,v=new Array(2*m);let y=0;for(let e=0;e<m;e++){const t=(1-p)*(f-d[e])/2;v[y++]=(p-1)*f/2+t+u[e],v[y++]=(g-1)*h/2+c[e]}return v}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:A,getPosition:l,getColor:u,getSize:c,getAngle:d,getPixelOffset:f,getBackgroundColor:h,getBorderColor:p,getBorderWidth:g,backgroundPadding:m,background:v,billboard:y,fontSettings:b,outlineWidth:w,outlineColor:_,sizeScale:x,sizeUnits:E,sizeMinPixels:S,sizeMaxPixels:P,transitions:k,updateTriggers:C}=this.props,T=this.getSubLayerClass("characters",Kh),M=this.getSubLayerClass("background",bp);return[v&&new M({getFillColor:h,getLineColor:p,getLineWidth:g,padding:m,getPosition:l,getSize:c,getAngle:d,getPixelOffset:f,billboard:y,sizeScale:x/this.state.fontAtlasManager.props.fontSize,sizeUnits:E,sizeMinPixels:S,sizeMaxPixels:P,transitions:k&&{getPosition:k.getPosition,getAngle:k.getAngle,getSize:k.getSize,getFillColor:k.getBackgroundColor,getLineColor:k.getBorderColor,getLineWidth:k.getBorderWidth,getPixelOffset:k.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset,getBoundingRect:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes?{length:a.length,attributes:a.attributes.background||{}}:a,_dataDiff:A,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new T({sdf:b.sdf,smoothing:Number.isFinite(b.smoothing)?b.smoothing:wp.smoothing,outlineWidth:w,outlineColor:_,iconAtlas:i,iconMapping:o,getPosition:l,getColor:u,getSize:c,getAngle:d,getPixelOffset:f,billboard:y,sizeScale:x*r,sizeUnits:E,sizeMinPixels:S*r,sizeMaxPixels:P*r,transitions:k&&{getPosition:k.getPosition,getAngle:k.getAngle,getColor:k.getColor,getSize:k.getSize,getPixelOffset:k.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:C.getText,getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset,getIconOffsets:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:A,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets.bind(this),getIcon:n})]}}kp.layerName="TextLayer",kp.defaultProps=Pp;const Cp={circle:{type:Tf,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Pf,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:kp,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Tp={type:ih,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",getLineColor:"getColor",getLineWidth:"getWidth"}},Mp={type:Qh,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ip({type:e,props:t}){const n={};for(const r in t)n[r]=e.defaultProps[t[r]];return n}function Lp(e,t){const{transitions:n,updateTriggers:r}=e.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function Rp(e,t,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=n;for(let n=i;n<o;n++){const i=e[n];qt.assert(i&&i.geometry,"GeoJSON does not have geometry");const{geometry:o}=i;if("GeometryCollection"===o.type){qt.assert(Array.isArray(o.geometries),"GeoJSON does not have geometries array");const{geometries:e}=o;for(let o=0;o<e.length;o++){Op(e[o],r,t,i,n)}}else Op(o,r,t,i,n)}return r}function Op(e,t,n,r,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:A,polygonFeatures:l,polygonOutlineFeatures:u}=t;if(function(e,t){let n=Dp[e];qt.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,s))switch(o){case"Point":a.push(n({geometry:e},r,i));break;case"MultiPoint":s.forEach((e=>{a.push(n({geometry:{type:"Point",coordinates:e}},r,i))}));break;case"LineString":A.push(n({geometry:e},r,i));break;case"MultiLineString":s.forEach((e=>{A.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"Polygon":l.push(n({geometry:e},r,i)),s.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"MultiPolygon":s.forEach((e=>{l.push(n({geometry:{type:"Polygon",coordinates:e}},r,i)),e.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}))}))}else qt.warn("".concat(o," coordinates are malformed"))()}const Dp={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Bp(e){return e.geometry.coordinates}function Fp(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=e,s=function(e,t){const n={points:null,lines:null,polygons:null};for(const r in n){const i=e[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const o=[];for(let e=0;e<i.length;e++)t(i[e],o),n[r][3*e+0]=o[0],n[r][3*e+1]=o[1],n[r][3*e+2]=o[2]}return n}(e,t);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const zp={...Ip(Cp.circle),...Ip(Cp.icon),...Ip(Cp.text),...Ip(Tp),...Ip(Mp),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Np extends Id{initializeState(){this.state={layerProps:{},features:{}},this.props.getLineDashArray&&qt.removed("getLineDashArray","PathStyleExtension")()}updateState({props:e,changeFlags:t}){if(!t.dataChanged)return;const{data:n}=this.props,r=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:r}),r?this._updateStateBinary({props:e,changeFlags:t}):this._updateStateJSON({props:e,changeFlags:t})}_updateStateBinary({props:e,changeFlags:t}){const n=Fp(e.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:e,changeFlags:t}){const n=function(e){if(Array.isArray(e))return e;switch(qt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return qt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(e.data),r=this.getSubLayerRow.bind(this);let i={};const o={};if(Array.isArray(t.dataChanged)){const e=this.state.features;for(const t in e)i[t]=e[t].slice(),o[t]=[];for(const s of t.dataChanged){const t=Rp(n,r,s);for(const n in e)o[n].push($h({data:i[n],getIndex:e=>e.__source.index,dataRange:s,replace:t[n]}))}}else i=Rp(n,r);const s=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return n.points.data=r,n.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),n.points.getPosition=Bp,n.lines.data=i,n.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),n.lines.getPath=Bp,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),n.polygons.getPolygon=Bp,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),n.polygonsOutline.getPath=Bp,n}(i,o);this.setState({features:i,featuresDiff:o,layerProps:s})}_updateAutoHighlight(e){const t="".concat(this.id,"-points-"),n=e.sourceLayer.id.startsWith(t);for(const r of this.getSubLayers())r.id.startsWith(t)===n&&r.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:t}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,Mp.type);if(i){const o=Lp(this,Mp.props),s=e&&t;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:t}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!e&&t&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,Tp.type),s=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,Tp.type);if(o||s){const e=Lp(this,Tp.props);return[o&&new o(e,this.getSubLayerProps({id:r,updateTriggers:e.updateTriggers}),n.polygonsOutline),s&&new s(e,this.getSubLayerProps({id:i,updateTriggers:e.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:t,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=t.points.data.findIndex((e=>e.__source.index===r)));const i=new Set(e.split("+")),o=[];for(const e of i){const n="points-".concat(e),i=Cp[e],s=i&&this.shouldRenderSubLayer(n,t.points.data)&&this.getSubLayerClass(n,i.type);if(s){const e=Lp(this,i.props);o.push(new s(e,this.getSubLayerProps({id:n,updateTriggers:e.updateTriggers,highlightedObjectIndex:r}),t.points))}}return o}renderLayers(){const{extruded:e}=this.props,t=this._renderPolygonLayer();return[!e&&t,this._renderLineLayers(),this._renderPointLayers(),e&&t]}getSubLayerAccessor(e){const{binary:t}=this.state;return t&&"function"==typeof e?(t,n)=>{const{data:r,index:i}=n,o=function(e,t){if(!e)return null;const n="startIndices"in e?e.startIndices[t]:t,r=e.featureIds.value[n];return-1!==n?function(e,t,n){const r={properties:{...e.properties[t]}};for(const t in e.numericProps)r.properties[t]=e.numericProps[t].value[n];return r}(e,r,n):null}(r,i);return e(o,n)}:super.getSubLayerAccessor(e)}}Np.layerName="GeoJsonLayer",Np.defaultProps=zp;class jp{constructor({x:e,y:t,z:n,onTileLoad:r,onTileError:i}){this.x=e,this.y=t,this.z=n,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=r,this.onTileError=i}get data(){return this._isLoaded?this.content:this._loader}get isLoaded(){return this._isLoaded}get isLoading(){return Boolean(this._loader)}get isCancelled(){return this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||qt.error("byteLength not defined in tile data")(),e}async _loadData(e,t){const{x:n,y:r,z:i,bbox:o}=this;this._abortController=new AbortController;const{signal:s}=this._abortController,a=await t.scheduleRequest(this,(e=>e.isSelected?1:-1));if(!a)return void(this._isCancelled=!0);if(this._isCancelled)return void a.done();let A,l;try{A=await e({x:n,y:r,z:i,bbox:o,signal:s})}catch(e){l=e||!0}finally{a.done(),this._isCancelled&&!A?this._isLoaded=!1:(this._isLoaded=!0,this._isCancelled=!1)}this._isLoaded&&(l?this.onTileError(l,this):(this.content=A,this.onTileLoad(this)))}loadData(e,t){e&&(this._isCancelled=!1,this._loader=this._loadData(e,t),this._loader.finally((()=>{this._loader=void 0})))}abort(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}}const Up=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Vp=new ps,Wp=new ps;class Gp{constructor(e=[0,0,0],t=[0,0,0],n=null){n=n||Vp.copy(e).add(t).scale(.5),this.center=new ps(n),this.halfDiagonal=new ps(t).subtract(this.center),this.minimum=new ps(e),this.maximum=new ps(t)}clone(){return new Gp(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:t}=this,n=Wp.from(e.normal),r=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),i=this.center.dot(n)+e.distance;return i-r>0?Up.INSIDE:i+r<0?Up.OUTSIDE:Up.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=Vp.from(e).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(t.x)-n.x,r>0&&(i+=r*r),r=Math.abs(t.y)-n.y,r>0&&(i+=r*r),r=Math.abs(t.z)-n.z,r>0&&(i+=r*r),i}}const Hp=new ps,Qp=new ps;class $p{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new ps,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=Hp.from(t),this.center=(new ps).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new $p(this.center,this.radius)}union(e){const t=this.center,n=this.radius,r=e.center,i=e.radius,o=Hp.copy(r).subtract(t),s=o.magnitude();if(n>=s+i)return this.clone();if(i>=s+n)return e.clone();const a=.5*(n+s+i);return Qp.copy(o).scale((-n+a)/s).add(t),this.center.copy(Qp),this.radius=a,this}expand(e){const t=(e=Hp.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],A=t[8],l=t[9],u=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(A,l,u),e}(Hp,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=Hp.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const t=this.center,n=this.radius,r=e.normal.dot(t)+e.distance;return r<-n?Up.OUTSIDE:r<n?Up.INTERSECTING:Up.INSIDE}}const qp=new ps,Yp=new ps,Zp=new ps,Xp=new ps,Kp=new ps,Jp=new ps,eg=new ps,tg=0,ng=1,rg=2,ig=3,og=4,sg=5,ag=6,Ag=7,lg=8;class ug{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new ps).from(e),this.halfAxes=new xs(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new ps(e).len(),new ps(t).len(),new ps(n).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new ps(e).normalize(),i=new ps(t).normalize(),o=new ps(n).normalize();return(new na).fromMatrix3(new xs([...r,...i,...o]))}fromCenterHalfSizeQuaternion(e,t,n){const r=new na(n),i=(new xs).fromQuaternion(r);return i[0]=i[0]*t[0],i[1]=i[1]*t[0],i[2]=i[2]*t[0],i[3]=i[3]*t[1],i[4]=i[4]*t[1],i[5]=i[5]*t[1],i[6]=i[6]*t[2],i[7]=i[7]*t[2],i[8]=i[8]*t[2],this.center=(new ps).from(e),this.halfAxes=i,this}clone(){return new ug(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new $p){const t=this.halfAxes,n=t.getColumn(0,Zp),r=t.getColumn(1,Xp),i=t.getColumn(2,Kp),o=qp.copy(n).add(r).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,n=e.normal,r=this.halfAxes,i=n.x,o=n.y,s=n.z,a=Math.abs(i*r[tg]+o*r[ng]+s*r[rg])+Math.abs(i*r[ig]+o*r[og]+s*r[sg])+Math.abs(i*r[ag]+o*r[Ag]+s*r[lg]),A=n.dot(t)+e.distance;return A<=-a?Up.OUTSIDE:A>=a?Up.INSIDE:Up.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=Yp.from(e).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,Zp),i=n.getColumn(1,Xp),o=n.getColumn(2,Kp),s=r.magnitude(),a=i.magnitude(),A=o.magnitude();r.normalize(),i.normalize(),o.normalize();let l,u=0;return l=Math.abs(t.dot(r))-s,l>0&&(u+=l*l),l=Math.abs(t.dot(i))-a,l>0&&(u+=l*l),l=Math.abs(t.dot(o))-A,l>0&&(u+=l*l),u}computePlaneDistances(e,t,n=[-0,-0]){let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,Zp),A=s.getColumn(1,Xp),l=s.getColumn(2,Kp),u=Jp.copy(a).add(A).add(l).add(o),c=eg.copy(u).subtract(e);let d=t.dot(c);return r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(a).add(A).subtract(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(a).subtract(A).add(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(a).subtract(A).subtract(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(a).add(A).add(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(a).add(A).subtract(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(a).subtract(A).add(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(a).subtract(A).subtract(l),c.copy(u).subtract(e),d=t.dot(c),r=Math.min(d,r),i=Math.max(d,i),n[0]=r,n[1]=i,n}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,Zp);t.transformAsPoint(e);const n=this.halfAxes.getColumn(1,Xp);n.transformAsPoint(e);const r=this.halfAxes.getColumn(2,Kp);return r.transformAsPoint(e),this.halfAxes=new xs([...t,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const cg=new ps,dg=new ps;class fg{constructor(e=[0,0,1],t=0){this.normal=new ps,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Bo(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=cg.from(e),this.normal.from(t).normalize();const n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,t,n,r){return this.normal.set(e,t,n),Bo(Wo(this.normal.len(),1)),this.distance=r,this}clone(e){return new fg(this.normal,this.distance)}equals(e){return Wo(this.distance,e.distance)&&Wo(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=dg.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}projectPointOntoPlane(e,t=[0,0,0]){e=cg.from(e);const n=this.getPointDistance(e),r=dg.copy(this.normal).scale(n);return e.subtract(r).to(t)}}const hg=[new ps([1,0,0]),new ps([0,1,0]),new ps([0,0,1])],pg=new ps,gg=new ps;new fg(new ps(1,0,0),0);class mg{static get MASK_OUTSIDE(){return 4294967295}static get MASK_INSIDE(){return 0}static get MASK_INDETERMINATE(){return 2147483647}constructor(e=[]){this.planes=e,Bo(this.planes.every((e=>e instanceof fg)))}fromBoundingSphere(e){this.planes.length=2*hg.length;const t=e.center,n=e.radius;let r=0;for(const e of hg){let i=this.planes[r],o=this.planes[r+1];i||(i=this.planes[r]=new fg),o||(o=this.planes[r+1]=new fg);const s=pg.copy(e).scale(-n).add(t);e.dot(s),i.fromPointNormal(s,e);const a=pg.copy(e).scale(n).add(t),A=gg.copy(e).negate();A.dot(a),o.fromPointNormal(a,A),r+=2}return this}computeVisibility(e){Bo(e);let t=Up.INSIDE;for(const n of this.planes){switch(e.intersectPlane(n)){case Up.OUTSIDE:return Up.OUTSIDE;case Up.INTERSECTING:t=Up.INTERSECTING}}return t}computeVisibilityWithPlaneMask(e,t){if(Bo(e,"boundingVolume is required."),Bo(Number.isFinite(t),"parentPlaneMask is required."),t===mg.MASK_OUTSIDE||t===mg.MASK_INSIDE)return t;let n=mg.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0==(t&o))continue;const s=r[i],a=e.intersectPlane(s);if(a===Up.OUTSIDE)return mg.MASK_OUTSIDE;a===Up.INTERSECTING&&(n|=o)}return n}}new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps;const vg=new xs,yg=new xs,bg=new xs,wg=new xs,_g=new xs;function xg(e,t={}){const n=ia;let r=0,i=0;const o=yg,s=bg;o.identity(),s.copy(e);const a=n*function(e){let t=0;for(let n=0;n<9;++n){const r=e[n];t+=r*r}return Math.sqrt(t)}(s);for(;i<10&&Pg(s)>a;)kg(s,wg),_g.copy(wg).transpose(),s.multiplyRight(wg),s.multiplyLeft(_g),o.multiplyRight(wg),++r>2&&(++i,r=0);return t.unitary=o.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}const Eg=[1,0,0],Sg=[2,2,1];function Pg(e){let t=0;for(let n=0;n<3;++n){const r=e[vg.getElementIndex(Sg[n],Eg[n])];t+=2*r*r}return Math.sqrt(t)}function kg(e,t){const n=ra;let r=0,i=1;for(let t=0;t<3;++t){const n=Math.abs(e[vg.getElementIndex(Sg[t],Eg[t])]);n>r&&(i=t,r=n)}const o=Eg[i],s=Sg[i];let a=1,A=0;if(Math.abs(e[vg.getElementIndex(s,o)])>n){const t=(e[vg.getElementIndex(s,s)]-e[vg.getElementIndex(o,o)])/2/e[vg.getElementIndex(s,o)];let n;n=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),a=1/Math.sqrt(1+n*n),A=n*a}return xs.IDENTITY.to(t),t[vg.getElementIndex(o,o)]=t[vg.getElementIndex(s,s)]=a,t[vg.getElementIndex(s,o)]=A,t[vg.getElementIndex(o,s)]=-A,t}const Cg=new ps,Tg=new ps,Mg=new ps,Ig=new ps,Lg=new ps,Rg=new xs,Og={diagonal:new xs,unitary:new xs};const Dg=512,Bg=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Fg=Bg.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),zg=Fg.concat([[.25,.5],[.75,.5]]);class Ng{constructor(e,t,n){this.x=e,this.y=t,this.z=n}get children(){if(!this._children){const e=2*this.x,t=2*this.y,n=this.z+1;this._children=[new Ng(e,t,n),new Ng(e,t+1,n),new Ng(e+1,t,n),new Ng(e+1,t+1,n)]}return this._children}update(e){const{viewport:t,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:s,offset:a,project:A}=e,l=this.getBoundingVolume(r,a,A);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(l)<0)return!1;if(!this.childVisible){let{z:e}=this;if(e<o&&e>=i){const n=l.distanceTo(t.cameraPosition)*t.scale/t.height;e+=Math.floor(Math.log2(n))}if(e>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const t of this.children)t.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const t of this._children)t.getSelected(e);return e}insideBounds([e,t,n,r]){const i=Math.pow(2,this.z),o=Dg/i;return this.x*o<n&&this.y*o<r&&(this.x+1)*o>e&&(this.y+1)*o>t}getBoundingVolume(e,t,n){if(n){const t=this.z<1?zg:this.z<2?Fg:Bg,r=[];for(const i of t){const t=Hg(this.x+i[0],this.y+i[1],this.z);t[2]=e[0],r.push(n(t)),e[0]!==e[1]&&(t[2]=e[1],r.push(n(t)))}return function(e,t=new ug){if(!e||0===e.length)return t.halfAxes=new xs([0,0,0,0,0,0,0,0,0]),t.center=new ps,t;const n=e.length,r=new ps(0,0,0);for(const t of e)r.add(t);const i=1/n;r.multiplyByScalar(i);let o=0,s=0,a=0,A=0,l=0,u=0;for(const t of e){const e=Cg.copy(t).subtract(r);o+=e.x*e.x,s+=e.x*e.y,a+=e.x*e.z,A+=e.y*e.y,l+=e.y*e.z,u+=e.z*e.z}o*=i,s*=i,a*=i,A*=i,l*=i,u*=i;const c=Rg;c[0]=o,c[1]=s,c[2]=a,c[3]=s,c[4]=A,c[5]=l,c[6]=a,c[7]=l,c[8]=u;const{unitary:d}=xg(c,Og),f=t.halfAxes.copy(d);let h=f.getColumn(0,Mg),p=f.getColumn(1,Ig),g=f.getColumn(2,Lg),m=-Number.MAX_VALUE,v=-Number.MAX_VALUE,y=-Number.MAX_VALUE,b=Number.MAX_VALUE,w=Number.MAX_VALUE,_=Number.MAX_VALUE;for(const t of e)Cg.copy(t),m=Math.max(Cg.dot(h),m),v=Math.max(Cg.dot(p),v),y=Math.max(Cg.dot(g),y),b=Math.min(Cg.dot(h),b),w=Math.min(Cg.dot(p),w),_=Math.min(Cg.dot(g),_);h=h.multiplyByScalar(.5*(b+m)),p=p.multiplyByScalar(.5*(w+v)),g=g.multiplyByScalar(.5*(_+y)),t.center.copy(h).add(p).add(g);const x=Tg.set(m-b,v-w,y-_).multiplyByScalar(.5),E=new xs([x[0],0,0,0,x[1],0,0,0,x[2]]);return t.halfAxes.multiplyRight(E),t}(r)}const r=Math.pow(2,this.z),i=Dg/r,o=this.x*i+t*Dg,s=Dg-(this.y+1)*i;return new Gp([o,s,e[0]],[o+i,s+i,e[1]])}}const jg=512,Ug=[-1/0,-1/0,1/0,1/0],Vg={type:"url",value:null,validate:(e,t)=>t.optional&&null===e||"string"==typeof e||Array.isArray(e)&&e.every((e=>"string"==typeof e)),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}};function Wg(e,t){const n=[t.transformPoint([e[0],e[1]]),t.transformPoint([e[2],e[1]]),t.transformPoint([e[0],e[3]]),t.transformPoint([e[2],e[3]])];return[Math.min(...n.map((e=>e[0]))),Math.min(...n.map((e=>e[1]))),Math.max(...n.map((e=>e[0]))),Math.max(...n.map((e=>e[1])))]}function Gg(e,t){return Math.pow(2,e)*jg/t}function Hg(e,t,n){const r=Gg(n,jg),i=e/r*360-180,o=Math.PI-2*Math.PI*t/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Qg(e,t,n,r){const i=Gg(n,r);return[e/i*jg,t/i*jg]}function $g(e,t,n,r,i=512){if(e.isGeospatial){const[e,i]=Hg(t,n,r),[o,s]=Hg(t+1,n+1,r);return{west:e,north:i,east:o,south:s}}const[o,s]=Qg(t,n,r,i),[a,A]=Qg(t+1,n+1,r,i);return{left:o,top:s,right:a,bottom:A}}function qg(e,t,n,r,i){const o=function(e,t,n){let r;if(t&&2===t.length){const[n,i]=t,o=e.getBounds({z:n}),s=e.getBounds({z:i});r=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else r=e.getBounds();return e.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(e,null,r),s=Gg(t,n),[a,A,l,u]=function(e,t,n){if(n)return Wg(e,n).map((e=>e*t/jg));return e.map((e=>e*t/jg))}(o,s,i),c=[];for(let e=Math.floor(a);e<l;e++)for(let n=Math.floor(A);n<u;n++)c.push({x:e,y:n,z:t});return c}function Yg({viewport:e,maxZoom:t,minZoom:n,zRange:r,extent:i,tileSize:o=512,modelMatrix:s,modelMatrixInverse:a,zoomOffset:A=0}){let l=e.isGeospatial?Math.round(e.zoom+Math.log2(jg/o))+A:Math.ceil(e.zoom)+A;if(Number.isFinite(n)&&l<n){if(!i)return[];l=n}Number.isFinite(t)&&l>t&&(l=t);let u=i;return s&&a&&i&&!e.isGeospatial&&(u=Wg(i,s)),e.isGeospatial?function(e,t,n,r){const i=e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map((({normal:e,distance:t})=>new fg(e.clone().negate(),t))),s=new mg(o),a=e.distanceScales.unitsPerMeter[2],A=n&&n[0]*a||0,l=n&&n[1]*a||0,u=e.pitch<=60?t:0;if(r){const[e,t,n,i]=r,o=uA([e,i]),s=uA([n,t]);r=[o[0],Dg-o[1],s[0],Dg-s[1]]}const c=new Ng(0,0,0),d={viewport:e,project:i,cullingVolume:s,elevationBounds:[A,l],minZ:u,maxZ:t,bounds:r,offset:0};if(c.update(d),e.subViewports&&e.subViewports.length>1){for(d.offset=-1;c.update(d)&&!(--d.offset<-3););for(d.offset=1;c.update(d)&&!(++d.offset>3););}return c.getSelected()}(e,l,r,i):qg(e,l,o,u||Ug,a)}const Zg="best-available";class Xg{constructor(e){this.opts=e,this._getTileData=e.getTileData,this.onTileError=e.onTileError,this.onTileLoad=t=>{e.onTileLoad(t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this.onTileUnload=e.onTileUnload,this._requestScheduler=new F({maxRequests:e.maxRequests,throttleRequests:e.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles.every((e=>e.isLoaded))}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort()}update(e,{zRange:t,modelMatrix:n}={}){const r=new zs(n),i=!r.equals(this._modelMatrix);if(!e.equals(this._viewport)||i){i&&(this._modelMatrixInverse=n&&r.clone().invert(),this._modelMatrix=n&&r),this._viewport=e;const o=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:t,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=o.map((e=>this._getTile(e,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}getTileIndices({viewport:e,maxZoom:t,minZoom:n,zRange:r,modelMatrix:i,modelMatrixInverse:o}){const{tileSize:s,extent:a,zoomOffset:A}=this.opts;return Yg({viewport:e,maxZoom:t,minZoom:n,zRange:r,tileSize:s,extent:a,modelMatrix:i,modelMatrixInverse:o,zoomOffset:A})}getTileMetadata({x:e,y:t,z:n}){const{tileSize:r}=this.opts;return{bbox:$g(this._viewport,e,t,n,r)}}getParentIndex(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}updateTileStates(){this._updateTileStates(this.selectedTiles);const{maxRequests:e}=this.opts,t=[];let n=0,r=!1;for(const e of this._cache.values()){const i=Boolean(1&e.state);e.isVisible!==i&&(r=!0,e.isVisible=i),e.isSelected=5===e.state,e.isLoading&&(n++,e.isSelected||t.push(e))}if(e>0)for(;n>e&&t.length>0;){t.shift().abort(),n--}return r}_rebuildTree(){const{_cache:e}=this;for(const t of e.values())t.parent=null,t.children.length=0;for(const t of e.values()){const e=this._getNearestAncestor(t.x,t.y,t.z);t.parent=e,e&&e.children.push(t)}}_updateTileStates(e){const{_cache:t}=this,n=this.opts.refinementStrategy||Zg;for(const e of t.values())e.state=0;for(const t of e)t.state=5;if("never"!==n){for(const t of e)Jg(t,n);for(const t of e)Kg(t)&&em(t)}}_resizeCache(){const{_cache:e,opts:t}=this,n=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=t.maxCacheByteSize||1/0;if(e.size>n||this._cacheByteSize>r){for(const[i,o]of e)if(o.isVisible||(this._cacheByteSize-=t.maxCacheByteSize?o.byteLength:0,e.delete(i),this.onTileUnload(o)),e.size<=n&&this._cacheByteSize<=r)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((e,t)=>e.z-t.z)),this._dirty=!1)}_getTile({x:e,y:t,z:n},r){const i="".concat(e,",").concat(t,",").concat(n);let o=this._cache.get(i);return!o&&r?(o=new jp({x:e,y:t,z:n,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(o,this.getTileMetadata(o)),o.loadData(this._getTileData,this._requestScheduler),this._cache.set(i,o),this._dirty=!0):o&&o.isCancelled&&!o.isLoading&&o.loadData(this._getTileData,this._requestScheduler),o}_getNearestAncestor(e,t,n){const{_minZoom:r=0}=this;let i={x:e,y:t,z:n};for(;i.z>r;){i=this.getParentIndex(i);const e=this._getTile(i);if(e)return e}return null}}function Kg(e){let t=e;for(;t;){if(!1&t.state)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function Jg(e,t){let n,r=3;for(;n=e.parent;){if(e.isLoaded&&(r=4,t===Zg))return;n.state=Math.max(n.state,r),e=n}}function em(e){for(const t of e.children)t.state=Math.max(t.state,3),t.isLoaded||em(t)}const tm={data:[],dataComparator:Vg.equals,renderSubLayers:{type:"function",value:e=>new Np(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Zg,zRange:null,maxRequests:6,zoomOffset:0};class nm extends Id{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e;null===(e=this.state.tileset)||void 0===e||e.finalize()}get isLoaded(){const{tileset:e}=this.state;return e.selectedTiles.every((e=>e.layers&&e.layers.every((e=>e.isLoaded))))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({props:e,changeFlags:t}){let{tileset:n}=this.state;!n||t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData)?(n&&n.finalize(),n=new Xg({...this._getTilesetOptions(e),getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}),this.setState({tileset:n})):(t.propsChanged||t.updateTriggersChanged)&&(n.setOptions(this._getTilesetOptions(e)),this.state.tileset.tiles.forEach((e=>{e.layers=null}))),this._updateTileset()}_getTilesetOptions(e){const{tileSize:t,maxCacheSize:n,maxCacheByteSize:r,refinementStrategy:i,extent:o,maxZoom:s,minZoom:a,maxRequests:A,zoomOffset:l}=e;return{maxCacheSize:n,maxCacheByteSize:r,maxZoom:s,minZoom:a,tileSize:t,refinementStrategy:i,extent:o,maxRequests:A,zoomOffset:l}}_updateTileset(){const{tileset:e}=this.state,{zRange:t,modelMatrix:n}=this.props,r=e.update(this.context.viewport,{zRange:t,modelMatrix:n}),{isLoaded:i}=e,o=this.state.isLoaded!==i,s=this.state.frameNumber!==r;i&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:t}=this.props;t&&t(e.selectedTiles)}_onTileLoad(e){this.getCurrentLayer().props.onTileLoad(e),e.isVisible&&this.setNeedsUpdate()}_onTileError(e,t){const n=this.getCurrentLayer();n.props.onTileError(e),n._updateTileset(),t.isVisible&&this.setNeedsUpdate()}_onTileUnload(e){this.getCurrentLayer().props.onTileUnload(e)}getTileData(e){const t=this.getCurrentLayer(),{data:n,getTileData:r,fetch:i}=t.props,{signal:o}=e;return e.url=function(e,t){if(!e||!e.length)return null;Array.isArray(e)&&(e=e[Math.abs(t.x+t.y)%e.length]);const{x:n,y:r,z:i}=t;return e.replace("{x}",n).replace("{y}",r).replace("{z}",i).replace("{-y}",Math.pow(2,i)-r-1)}(n,e),r?r(e):e.url?i(e.url,{propName:"data",layer:t,signal:o}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getHighlightedObjectIndex(){return-1}getPickingInfo({info:e,sourceLayer:t}){return e.tile=t.props.tile,e}_updateAutoHighlight(e){e.sourceLayer&&e.sourceLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map((e=>{const t=this.getHighlightedObjectIndex(e);if(e.isLoaded)if(e.layers)e.layers[0]&&e.layers[0].props.highlightedObjectIndex!==t&&(e.layers=e.layers.map((e=>e.clone({highlightedObjectIndex:t}))));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(e.x,"-").concat(e.y,"-").concat(e.z),data:e.data,_offset:0,tile:e});e.layers=wl(n,Boolean).map((n=>n.clone({tile:e,highlightedObjectIndex:t})))}else;return e.layers}))}filterSubLayer({layer:e}){return this.props.visible&&e.props.tile.isVisible}}nm.layerName="TileLayer",nm.defaultProps=tm;var rm=function(e){var t,n=void 0!==(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,o="";document.currentScript&&(o=document.currentScript.src),o=0!==o.indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"",i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=$(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var s=n.print||console.log.bind(console),a=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments;var A=0,l=function(){return A};var u=!1;function c(e){var t,r=n["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||se("Assertion failed: "+t),r}function d(e,t,n,r,i){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s);if(a<=127){if(n>=o)break;t[n++]=a}else if(a<=2047){if(n+1>=o)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=o)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}t[n]=0})(e,p,t,n)})(e,t=K(n),n)}return t},array:function(e){var t=K(e.length);return function(e,t){h.set(e,t)}(e,t),t}};var s=c(e),a=[],A=0;if(r)for(var l=0;l<r.length;l++){var u=o[n[l]];u?(0===A&&(A=ee()),a[l]=u(r[l])):a[l]=r[l]}var d=s.apply(null,a);return d=function(e){return"string"===t?w(e):"boolean"===t?Boolean(e):e}(d),0!==A&&J(A),d}var f,h,p,g,m,v,y,b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&b)return b.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var A=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|A:(7&s)<<18|a<<12|A<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var l=s-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}(p,e,t):""}function _(e,t){return e%t>0&&(e+=t-e%t),e}function x(e){f=e,n.HEAP8=h=new Int8Array(e),n.HEAP16=g=new Int16Array(e),n.HEAP32=m=new Int32Array(e),n.HEAPU8=p=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=v=new Float32Array(e),n.HEAPF64=y=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var E=n.TOTAL_MEMORY||33554432;function S(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}E=(f=n.buffer?n.buffer:new ArrayBuffer(E)).byteLength,x(f),m[6004]=5266928;var P=[],k=[],C=[],T=[];var M=Math.abs,I=Math.ceil,L=Math.floor,R=Math.min,O=0,D=null;n.preloadedImages={},n.preloadedAudios={};var B,F,z=null,N="data:application/octet-stream;base64,";function j(e){return String.prototype.startsWith?e.startsWith(N):0===e.indexOf(N)}z="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";function U(e){return e}function V(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function W(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function G(){return h.length}function H(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(h),Y(t),x(t),1}catch(e){}}var Q="function"==typeof atob?atob:function(e){var t,n,r,i,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=a.indexOf(e.charAt(l++))<<2|(i=a.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(o=a.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(s=a.indexOf(e.charAt(l++))),A+=String.fromCharCode(t),64!==o&&(A+=String.fromCharCode(n)),64!==s&&(A+=String.fromCharCode(r))}while(l<e.length);return A};function $(e){if(j(e))return function(e){try{for(var t=Q(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(N.length))}var q=function(e,t,n){var r=new e.Int8Array(n),i=new e.Int32Array(n);new e.Uint8Array(n),new e.Float32Array(n);var o=new e.Float64Array(n),s=0|t.p,a=e.Math.floor,A=e.Math.abs,l=e.Math.sqrt,u=e.Math.pow,c=e.Math.cos,d=e.Math.sin,f=e.Math.tan,h=e.Math.acos,p=e.Math.asin,g=e.Math.atan,m=e.Math.atan2,v=e.Math.ceil,y=e.Math.imul,b=e.Math.min,w=e.Math.clz32,_=t.b,x=t.c,E=t.d,S=t.e,P=t.f,k=t.g,C=t.h,T=t.i,M=24048;function I(e,t,n,r){var i,o;0|L(e|=0,t|=0,n|=0,r|=0,0)&&(Tt(0|r,0,(o=1+(0|y(3*n|0,n+1|0))|0)<<3|0),(i=0|yt(o,4))&&(R(e,t,n,r,i,o,0),vt(i)))}function L(e,t,n,r,o){e|=0,t|=0,n|=0,o|=0;var s,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0;if(s=M,M=M+16|0,h=s,i[(a=r|=0)>>2]=e,i[a+4>>2]=t,(a=0!=(0|o))&&(i[o>>2]=0),0|Oe(e,t))return M=s,0|(h=1);i[h>>2]=0;e:do{if((0|n)>=1)if(a)for(c=0,d=1,f=1,A=0,a=e;;){if(!(A|c)){if(0==(0|(a=0|O(a,t,4,h)))&0==(0|(t=0|x()))){a=2;break e}if(0|Oe(a,t)){a=1;break e}}if(0==(0|(a=0|O(a,t,0|i[16+(c<<2)>>2],h)))&0==(0|(t=0|x()))){a=2;break e}if(i[(e=r+(f<<3)|0)>>2]=a,i[e+4>>2]=t,i[o+(f<<2)>>2]=d,e=(0|(A=A+1|0))==(0|d),u=6==(0|(l=c+1|0)),0|Oe(a,t)){a=1;break e}if((0|(d=d+(u&e&1)|0))>(0|n)){a=0;break}c=e?u?0:l:c,f=f+1|0,A=e?0:A}else for(c=0,d=1,f=1,A=0,a=e;;){if(!(A|c)){if(0==(0|(a=0|O(a,t,4,h)))&0==(0|(t=0|x()))){a=2;break e}if(0|Oe(a,t)){a=1;break e}}if(0==(0|(a=0|O(a,t,0|i[16+(c<<2)>>2],h)))&0==(0|(t=0|x()))){a=2;break e}if(i[(e=r+(f<<3)|0)>>2]=a,i[e+4>>2]=t,e=(0|(A=A+1|0))==(0|d),u=6==(0|(l=c+1|0)),0|Oe(a,t)){a=1;break e}if((0|(d=d+(u&e&1)|0))>(0|n)){a=0;break}c=e?u?0:l:c,f=f+1|0,A=e?0:A}else a=0}while(0);return M=s,0|(h=a)}function R(e,t,n,r,o,s,a){n|=0,r|=0,o|=0,s|=0,a|=0;var A,l,u=0,c=0,d=0,f=0,h=0;if(l=M,M=M+16|0,A=l,0==(0|(e|=0))&0==(0|(t|=0)))M=l;else{if(u=0|xt(0|e,0|t,0|s,((0|s)<0)<<31>>31|0),x(),!(0==(0|(h=0|i[(f=c=r+(u<<3)|0)>>2]))&0==(0|(f=0|i[f+4>>2]))|(d=(0|h)==(0|e)&(0|f)==(0|t))))do{d=(0|(f=0|i[(h=c=r+((u=(u+1|0)%(0|s)|0)<<3)|0)>>2]))==(0|e)&(0|(h=0|i[h+4>>2]))==(0|t)}while(!(0==(0|f)&0==(0|h)|d));u=o+(u<<2)|0,d&&(0|i[u>>2])<=(0|a)||(i[(h=c)>>2]=e,i[h+4>>2]=t,i[u>>2]=a,(0|a)>=(0|n)||(h=a+1|0,i[A>>2]=0,R(f=0|O(e,t,2,A),0|x(),n,r,o,s,h),i[A>>2]=0,R(f=0|O(e,t,3,A),0|x(),n,r,o,s,h),i[A>>2]=0,R(f=0|O(e,t,1,A),0|x(),n,r,o,s,h),i[A>>2]=0,R(f=0|O(e,t,5,A),0|x(),n,r,o,s,h),i[A>>2]=0,R(f=0|O(e,t,4,A),0|x(),n,r,o,s,h),i[A>>2]=0,R(f=0|O(e,t,6,A),0|x(),n,r,o,s,h))),M=l}}function O(e,t,n,r){e|=0,t|=0,n|=0;var o,s,a=0,A=0,l=0,u=0,c=0,d=0,f=0;if((0|i[(r|=0)>>2])>0){a=0;do{n=0|Ae(n),a=a+1|0}while((0|a)<(0|i[r>>2]))}o=0|Et(0|e,0|t,45),x(),s=127&o,A=0|De(e,t),a=0|Et(0|e,0|t,52),x(),a&=15;e:do{if(a)for(;;){if(d=0|Et(0|e,0|t,0|(c=3*(15-a|0)|0)),x(),d&=7,f=0==(0|je(a)),a=a+-1|0,u=0|St(7,0,0|c),t&=~(0|x()),e=(c=0|St(0|i[(f?464:48)+(28*d|0)+(n<<2)>>2],0,0|c))|e&~u,t|=0|x(),!(n=0|i[(f?672:256)+(28*d|0)+(n<<2)>>2])){n=0;break e}if(!a){l=6;break}}else l=6}while(0);6==(0|l)&&(e|=d=0|St(0|(f=0|i[880+(28*s|0)+(n<<2)>>2]),0,45),t=0|x()|-1040385&t,n=0|i[4304+(28*s|0)+(n<<2)>>2],127==(127&f|0)&&(f=0|St(0|i[880+(28*s|0)+20>>2],0,45),t=0|x()|-1040385&t,n=0|i[4304+(28*s|0)+20>>2],e=0|Fe(f|e,t),t=0|x(),i[r>>2]=1+(0|i[r>>2]))),l=0|Et(0|e,0|t,45),x(),l&=127;e:do{if(0|B(l)){t:do{if(1==(0|De(e,t))){if((0|s)!=(0|l)){if(0|j(l,0|i[7728+(28*s|0)>>2])){e=0|Ne(e,t),A=1,t=0|x();break}e=0|Fe(e,t),A=1,t=0|x();break}switch(0|A){case 5:e=0|Ne(e,t),t=0|x(),i[r>>2]=5+(0|i[r>>2]),A=0;break t;case 3:e=0|Fe(e,t),t=0|x(),i[r>>2]=1+(0|i[r>>2]),A=0;break t;default:return f=0,_(0|(d=0)),0|f}}else A=0}while(0);if((0|n)>0){a=0;do{e=0|Be(e,t),t=0|x(),a=a+1|0}while((0|a)!=(0|n))}if((0|s)!=(0|l)){if(!(0|F(l))){if(0!=(0|A)|5!=(0|De(e,t)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&o){case 8:case 118:break e}3!=(0|De(e,t))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){a=0;do{e=0|Fe(e,t),t=0|x(),a=a+1|0}while((0|a)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,f=e,_(0|(d=t)),0|f}function D(e,t,n,r,s,a){t|=0,n|=0,r|=0,s|=0,a|=0;var A,l,u,c,d,f,h,p,g,m=0,v=0,y=0,b=0,w=0,_=0,E=0,S=0,P=0,k=0,C=0,T=0,I=0,L=0;if(g=M,M=M+48|0,f=g+32|0,h=g+16|0,p=g,(0|(m=0|i[(e|=0)>>2]))<=0)return M=g,0|(T=0);A=e+4|0,l=f+8|0,u=h+8|0,c=p+8|0,d=((0|t)<0)<<31>>31,C=0;e:for(;;){P=(v=0|i[A>>2])+(C<<4)|0,i[f>>2]=i[P>>2],i[f+4>>2]=i[P+4>>2],i[f+8>>2]=i[P+8>>2],i[f+12>>2]=i[P+12>>2],(0|C)==(m+-1|0)?(i[h>>2]=i[v>>2],i[h+4>>2]=i[v+4>>2],i[h+8>>2]=i[v+8>>2],i[h+12>>2]=i[v+12>>2]):(P=v+(C+1<<4)|0,i[h>>2]=i[P>>2],i[h+4>>2]=i[P+4>>2],i[h+8>>2]=i[P+8>>2],i[h+12>>2]=i[P+12>>2]),P=0|Q(f,h,n);t:do{if((0|P)>0){k=+(0|P),S=0;n:for(;;){L=+(P-S|0),I=+(0|S),o[p>>3]=+o[f>>3]*L/k+ +o[h>>3]*I/k,o[c>>3]=+o[l>>3]*L/k+ +o[u>>3]*I/k,v=0|xt(0|(_=0|Ue(p,n)),0|(E=0|x()),0|t,0|d),x(),b=0|i[(y=m=a+(v<<3)|0)>>2],y=0|i[y+4>>2];r:do{if(0==(0|b)&0==(0|y))T=14;else for(w=0;;){if((0|w)>(0|t)){m=1;break r}if((0|b)==(0|_)&(0|y)==(0|E)){m=7;break r}if(0==(0|(b=0|i[(y=m=a+((v=(v+1|0)%(0|t)|0)<<3)|0)>>2]))&0==(0|(y=0|i[y+4>>2]))){T=14;break}w=w+1|0}}while(0);switch(14==(0|T)&&(T=0,0==(0|_)&0==(0|E)?m=7:(i[m>>2]=_,i[m+4>>2]=E,m=0|i[r>>2],i[(w=s+(m<<3)|0)>>2]=_,i[w+4>>2]=E,i[r>>2]=m+1,m=0)),7&m){case 7:case 0:break;default:break n}if((0|P)<=(0|(S=S+1|0))){T=8;break t}}if(0|m){m=-1,T=20;break e}}else T=8}while(0);if(8==(0|T)&&(T=0),(0|(C=C+1|0))>=(0|(m=0|i[e>>2]))){m=0,T=20;break}}return 20==(0|T)?(M=g,0|m):0}function B(e){return 0|i[7728+(28*(e|=0)|0)+16>>2]}function F(e){return 4==(0|(e|=0))|117==(0|e)|0}function z(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)>>2]}function N(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)+4>>2]}function j(e,t){return t|=0,(0|i[7728+(28*(e|=0)|0)+20>>2])==(0|t)?0|(t=1):0|(t=(0|i[7728+(28*e|0)+24>>2])==(0|t))}function U(e,t){return 0|i[880+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function V(e,t){return t|=0,(0|i[880+(28*(e|=0)|0)>>2])==(0|t)?0|(t=0):(0|i[880+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|i[880+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|i[880+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|i[880+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|i[880+(28*e|0)+20>>2])==(0|t)?0|(t=5):0|((0|i[880+(28*e|0)+24>>2])==(0|t)?6:7)}function W(e){return+o[(e|=0)+16>>3]<+o[e+24>>3]|0}function G(e,t){e|=0;var n,r,i=0;return(i=+o[(t|=0)>>3])>=+o[e+8>>3]&&i<=+o[e>>3]?(n=+o[e+16>>3],i=+o[e+24>>3],t=(r=+o[t+8>>3])>=i,e=r<=n&1,n<i?t&&(e=1):t||(e=0),0|(t=0!=(0|e))):0|(t=0)}function H(e,t){e|=0,t|=0;var n,r,s,a,l,u,c=0,d=0;a=M,M=M+288|0,n=a+264|0,r=a+96|0,d=(c=s=a)+96|0;do{i[c>>2]=0,c=c+4|0}while((0|c)<(0|d));return Qe(t,s),Ge(d=0|i[(c=s)>>2],c=0|i[c+4>>2],n),He(d,c,r),l=+Ce(n,r+8|0),o[n>>3]=+o[e>>3],o[(c=n+8|0)>>3]=+o[e+16>>3],o[r>>3]=+o[e+8>>3],o[(d=r+8|0)>>3]=+o[e+24>>3],u=+Ce(n,r),d=~~+v(+u*u/+Pt(+ +A(+(+o[c>>3]-+o[d>>3])/(+o[n>>3]-+o[r>>3])),3)/(l*(2.59807621135*l)*.8)),M=a,0|(0==(0|d)?1:d)}function Q(e,t,n){e|=0,t|=0,n|=0;var r,o,s,a,A,l=0,u=0;a=M,M=M+288|0,r=a+264|0,o=a+96|0,u=(l=s=a)+96|0;do{i[l>>2]=0,l=l+4|0}while((0|l)<(0|u));return Qe(n,s),Ge(l=0|i[(u=s)>>2],u=0|i[u+4>>2],r),He(l,u,o),A=+Ce(r,o+8|0),u=~~+v(+ +Ce(e,t)/(2*A)),M=a,0|(0==(0|u)?1:u)}function $(e,t,n,r){t|=0,n|=0,r|=0,i[(e|=0)>>2]=t,i[e+4>>2]=n,i[e+8>>2]=r}function q(e,t){e|=0;var n,r,s,a,l=0,u=0,c=0,d=0,f=0,h=0,p=0;i[(a=(t|=0)+8|0)>>2]=0,r=+o[e>>3],d=+A(+r),s=+o[e+8>>3],d+=.5*(f=+A(+s)/.8660254037844386),d-=+(0|(l=~~d)),f-=+(0|(e=~~f));do{if(d<.5){if(d<.3333333333333333){if(i[t>>2]=l,f<.5*(d+1)){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(e=(1&!(f<(p=1-d)))+e|0,i[t+4>>2]=e,p<=f&f<2*d){l=l+1|0,i[t>>2]=l;break}i[t>>2]=l;break}if(!(d<.6666666666666666)){if(l=l+1|0,i[t>>2]=l,f<.5*d){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(f<1-d){if(i[t+4>>2]=e,2*d-1<f){i[t>>2]=l;break}}else e=e+1|0,i[t+4>>2]=e;l=l+1|0,i[t>>2]=l}while(0);do{if(r<0){if(1&e){l=~~(+(0|l)-(2*(+((h=0|bt(0|l,((0|l)<0)<<31>>31|0,0|(h=(e+1|0)/2|0),((0|h)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))+1)),i[t>>2]=l;break}l=~~(+(0|l)-2*(+((h=0|bt(0|l,((0|l)<0)<<31>>31|0,0|(h=(0|e)/2|0),((0|h)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))),i[t>>2]=l;break}}while(0);h=t+4|0,s<0&&(l=l-((1|e<<1)/2|0)|0,i[t>>2]=l,e=0-e|0,i[h>>2]=e),u=e-l|0,(0|l)<0?(c=0-l|0,i[h>>2]=u,i[a>>2]=c,i[t>>2]=0,e=u,l=0):c=0,(0|e)<0&&(l=l-e|0,i[t>>2]=l,c=c-e|0,i[a>>2]=c,i[h>>2]=0,e=0),n=l-c|0,u=e-c|0,(0|c)<0&&(i[t>>2]=n,i[h>>2]=u,i[a>>2]=0,e=u,l=n,c=0),(0|(u=(0|c)<(0|(u=(0|e)<(0|l)?e:l))?c:u))<=0||(i[t>>2]=l-u,i[h>>2]=e-u,i[a>>2]=c-u)}function Y(e){var t,n=0,r=0,o=0,s=0,a=0;n=0|i[(e|=0)>>2],r=0|i[(t=e+4|0)>>2],(0|n)<0&&(r=r-n|0,i[t>>2]=r,i[(a=e+8|0)>>2]=(0|i[a>>2])-n,i[e>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[e>>2]=n,s=(0|i[(a=e+8|0)>>2])-r|0,i[a>>2]=s,i[t>>2]=0,r=0):(a=s=e+8|0,s=0|i[s>>2]),(0|s)<0&&(n=n-s|0,i[e>>2]=n,r=r-s|0,i[t>>2]=r,i[a>>2]=0,s=0),(0|(o=(0|s)<(0|(o=(0|r)<(0|n)?r:n))?s:o))<=0||(i[e>>2]=n-o,i[t>>2]=r-o,i[a>>2]=s-o)}function Z(e,t){t|=0;var n,r;r=0|i[(e|=0)+8>>2],n=+((0|i[e+4>>2])-r|0),o[t>>3]=+((0|i[e>>2])-r|0)-.5*n,o[t+8>>3]=.8660254037844386*n}function X(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[t>>2])+(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])+(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])+(0|i[e+8>>2])}function K(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[e>>2])-(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])-(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])-(0|i[t+8>>2])}function J(e,t){t|=0;var n,r=0;r=0|y(0|i[(e|=0)>>2],t),i[e>>2]=r,n=0|y(0|i[(r=e+4|0)>>2],t),i[r>>2]=n,t=0|y(0|i[(e=e+8|0)>>2],t),i[e>>2]=t}function ee(e){var t,n,r=0,o=0,s=0,a=0,A=0;A=(0|(n=0|i[(e|=0)>>2]))<0,e=(e=(o=(0|(a=((t=(0|(s=(0|i[e+4>>2])-(A?n:0)|0))<0)?0-s|0:0)+((0|i[e+8>>2])-(A?n:0))|0))<0)?0:a)-((s=(0|(o=(0|e)<(0|(o=(0|(r=(t?0:s)-(o?a:0)|0))<(0|(a=(A?0:n)-(t?s:0)-(o?a:0)|0))?r:a))?e:o))>0)?o:0)|0,r=r-(s?o:0)|0;e:do{switch(a-(s?o:0)|0){case 0:switch(0|r){case 0:return 0|(A=0==(0|e)?0:1==(0|e)?1:7);case 1:return 0|(A=0==(0|e)?2:1==(0|e)?3:7);default:break e}case 1:switch(0|r){case 0:return 0|(A=0==(0|e)?4:1==(0|e)?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}}while(0);return 0|(A=7)}function te(e){var t,n,r=0,o=0,s=0,a=0,A=0;o=0|i[(t=(e|=0)+8|0)>>2],s=0|gt(+((3*(r=(0|i[e>>2])-o|0)|0)-(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=s,r=0|gt(+((o<<1)+r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-s|0,(0|s)<0?(A=0-s|0,i[n>>2]=o,i[t>>2]=A,i[e>>2]=0,r=o,s=0,o=A):o=0,(0|r)<0&&(s=s-r|0,i[e>>2]=s,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),A=s-o|0,a=r-o|0,(0|o)<0?(i[e>>2]=A,i[n>>2]=a,i[t>>2]=0,r=a,a=A,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|r)<(0|a)?r:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=r-s,i[t>>2]=o-s)}function ne(e){var t,n,r=0,o=0,s=0,a=0,A=0;o=0|i[(t=(e|=0)+8|0)>>2],s=0|gt(+(((r=(0|i[e>>2])-o|0)<<1)+(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=s,r=0|gt(+((3*o|0)-r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-s|0,(0|s)<0?(A=0-s|0,i[n>>2]=o,i[t>>2]=A,i[e>>2]=0,r=o,s=0,o=A):o=0,(0|r)<0&&(s=s-r|0,i[e>>2]=s,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),A=s-o|0,a=r-o|0,(0|o)<0?(i[e>>2]=A,i[n>>2]=a,i[t>>2]=0,r=a,a=A,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|r)<(0|a)?r:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=r-s,i[t>>2]=o-s)}function re(e){var t,n,r,o=0,s=0,a=0,A=0;o=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],a=0|i[(r=e+8|0)>>2],A=s+(3*o|0)|0,i[e>>2]=A,s=a+(3*s|0)|0,i[n>>2]=s,o=(3*a|0)+o|0,i[r>>2]=o,a=s-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=a,a=0):a=A,(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,A=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=A,i[r>>2]=0,a=t,o=0):A=s,(0|(s=(0|o)<(0|(s=(0|A)<(0|a)?A:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=A-s,i[r>>2]=o-s)}function ie(e){var t,n,r,o=0,s=0,a=0,A=0;A=0|i[(e|=0)>>2],a=(3*(o=0|i[(n=e+4|0)>>2])|0)+A|0,A=(s=0|i[(r=e+8|0)>>2])+(3*A|0)|0,i[e>>2]=A,i[n>>2]=a,o=(3*s|0)+o|0,i[r>>2]=o,s=a-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,A=0):s=a,(0|s)<0&&(A=A-s|0,i[e>>2]=A,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=A-o|0,a=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,A=t,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|A)?a:A))?o:s))<=0||(i[e>>2]=A-s,i[n>>2]=a-s,i[r>>2]=o-s)}function oe(e,t){e|=0;var n,r,o,s=0,a=0,A=0;((t|=0)+-1|0)>>>0>=6||(A=(0|i[15472+(12*t|0)>>2])+(0|i[e>>2])|0,i[e>>2]=A,o=e+4|0,a=(0|i[15472+(12*t|0)+4>>2])+(0|i[o>>2])|0,i[o>>2]=a,r=e+8|0,t=(0|i[15472+(12*t|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=t,s=a-A|0,(0|A)<0?(t=t-A|0,i[o>>2]=s,i[r>>2]=t,i[e>>2]=0,a=0):(s=a,a=A),(0|s)<0&&(a=a-s|0,i[e>>2]=a,t=t-s|0,i[r>>2]=t,i[o>>2]=0,s=0),n=a-t|0,A=s-t|0,(0|t)<0?(i[e>>2]=n,i[o>>2]=A,i[r>>2]=0,a=n,t=0):A=s,(0|(s=(0|t)<(0|(s=(0|A)<(0|a)?A:a))?t:s))<=0||(i[e>>2]=a-s,i[o>>2]=A-s,i[r>>2]=t-s))}function se(e){var t,n,r,o=0,s=0,a=0,A=0;A=0|i[(e|=0)>>2],a=(o=0|i[(n=e+4|0)>>2])+A|0,A=(s=0|i[(r=e+8|0)>>2])+A|0,i[e>>2]=A,i[n>>2]=a,o=s+o|0,i[r>>2]=o,s=a-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=0):(s=a,a=A),(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,A=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=A,i[r>>2]=0,a=t,o=0):A=s,(0|(s=(0|o)<(0|(s=(0|A)<(0|a)?A:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=A-s,i[r>>2]=o-s)}function ae(e){var t,n,r,o=0,s=0,a=0,A=0;o=0|i[(e|=0)>>2],a=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],A=a+o|0,i[e>>2]=A,a=s+a|0,i[n>>2]=a,o=s+o|0,i[r>>2]=o,s=a-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=0):(s=a,a=A),(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,A=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=A,i[r>>2]=0,a=t,o=0):A=s,(0|(s=(0|o)<(0|(s=(0|A)<(0|a)?A:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=A-s,i[r>>2]=o-s)}function Ae(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function le(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function ue(e){var t,n,r,o=0,s=0,a=0,A=0;o=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],a=0|i[(r=e+8|0)>>2],A=s+(o<<1)|0,i[e>>2]=A,s=a+(s<<1)|0,i[n>>2]=s,o=(a<<1)+o|0,i[r>>2]=o,a=s-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=a,a=0):a=A,(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,A=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=A,i[r>>2]=0,a=t,o=0):A=s,(0|(s=(0|o)<(0|(s=(0|A)<(0|a)?A:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=A-s,i[r>>2]=o-s)}function ce(e){var t,n,r,o=0,s=0,a=0,A=0;A=0|i[(e|=0)>>2],a=((o=0|i[(n=e+4|0)>>2])<<1)+A|0,A=(s=0|i[(r=e+8|0)>>2])+(A<<1)|0,i[e>>2]=A,i[n>>2]=a,o=(s<<1)+o|0,i[r>>2]=o,s=a-A|0,(0|A)<0?(o=o-A|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,A=0):s=a,(0|s)<0&&(A=A-s|0,i[e>>2]=A,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=A-o|0,a=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,A=t,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|A)?a:A))?o:s))<=0||(i[e>>2]=A-s,i[n>>2]=a-s,i[r>>2]=o-s)}function de(e,t){t|=0;var n,r,o,s=0,a=0,A=0;return o=(0|(r=(0|i[(e|=0)>>2])-(0|i[t>>2])|0))<0,n=(0|(a=(0|i[e+4>>2])-(0|i[t+4>>2])-(o?r:0)|0))<0,t=(t=(e=(0|(A=(o?0-r|0:0)+(0|i[e+8>>2])-(0|i[t+8>>2])+(n?0-a|0:0)|0))<0)?0:A)-((a=(0|(e=(0|t)<(0|(e=(0|(s=(n?0:a)-(e?A:0)|0))<(0|(A=(o?0:r)-(n?a:0)-(e?A:0)|0))?s:A))?t:e))>0)?e:0)|0,s=s-(a?e:0)|0,0|((0|(e=(0|(e=A-(a?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(s=(0|s)>-1?s:0-s|0))>(0|(t=(0|t)>-1?t:0-t|0))?s:t))?e:t)}function fe(e,t){t|=0;var n;n=0|i[(e|=0)+8>>2],i[t>>2]=(0|i[e>>2])-n,i[t+4>>2]=(0|i[e+4>>2])-n}function he(e,t){t|=0;var n,r,o,s=0,a=0,A=0;a=0|i[(e|=0)>>2],i[t>>2]=a,e=0|i[e+4>>2],i[(r=t+4|0)>>2]=e,i[(o=t+8|0)>>2]=0,s=e-a|0,(0|a)<0?(e=0-a|0,i[r>>2]=s,i[o>>2]=e,i[t>>2]=0,a=0):(s=e,e=0),(0|s)<0&&(a=a-s|0,i[t>>2]=a,e=e-s|0,i[o>>2]=e,i[r>>2]=0,s=0),n=a-e|0,A=s-e|0,(0|e)<0?(i[t>>2]=n,i[r>>2]=A,i[o>>2]=0,s=A,A=n,e=0):A=a,(0|(a=(0|e)<(0|(a=(0|s)<(0|A)?s:A))?e:a))<=0||(i[t>>2]=A-a,i[r>>2]=s-a,i[o>>2]=e-a)}function pe(e){var t,n,r,o;n=(o=0|i[(t=(e|=0)+8|0)>>2])-(0|i[e>>2])|0,i[e>>2]=n,e=(0|i[(r=e+4|0)>>2])-o|0,i[r>>2]=e,i[t>>2]=0-(e+n)}function ge(e){var t,n,r=0,o=0,s=0,a=0,A=0;r=0-(o=0|i[(e|=0)>>2])|0,i[e>>2]=r,i[(t=e+8|0)>>2]=0,a=(s=0|i[(n=e+4|0)>>2])+o|0,(0|o)>0?(i[n>>2]=a,i[t>>2]=o,i[e>>2]=0,r=0,s=a):o=0,(0|s)<0?(A=r-s|0,i[e>>2]=A,o=o-s|0,i[t>>2]=o,i[n>>2]=0,a=A-o|0,r=0-o|0,(0|o)<0?(i[e>>2]=a,i[n>>2]=r,i[t>>2]=0,s=r,o=0):(s=0,a=A)):a=r,(0|(r=(0|o)<(0|(r=(0|s)<(0|a)?s:a))?o:r))<=0||(i[e>>2]=a-r,i[n>>2]=s-r,i[t>>2]=o-r)}function me(e,t,n,r){t|=0,n|=0,r|=0;var s,a=0,A=0,l=0,u=0;if(s=M,M=M+32|0,function(e,t){t|=0;var n=0,r=0,i=0;n=+o[(e=e|0)>>3],r=+c(+n),n=+d(+n),o[t+16>>3]=n,n=+o[e+8>>3],i=r*+c(+n),o[t>>3]=i,n=r*+d(+n),o[t+8>>3]=n}(e|=0,A=s),i[n>>2]=0,a=+At(15888,A),(l=+At(15912,A))<a&&(i[n>>2]=1,a=l),(l=+At(15936,A))<a&&(i[n>>2]=2,a=l),(l=+At(15960,A))<a&&(i[n>>2]=3,a=l),(l=+At(15984,A))<a&&(i[n>>2]=4,a=l),(l=+At(16008,A))<a&&(i[n>>2]=5,a=l),(l=+At(16032,A))<a&&(i[n>>2]=6,a=l),(l=+At(16056,A))<a&&(i[n>>2]=7,a=l),(l=+At(16080,A))<a&&(i[n>>2]=8,a=l),(l=+At(16104,A))<a&&(i[n>>2]=9,a=l),(l=+At(16128,A))<a&&(i[n>>2]=10,a=l),(l=+At(16152,A))<a&&(i[n>>2]=11,a=l),(l=+At(16176,A))<a&&(i[n>>2]=12,a=l),(l=+At(16200,A))<a&&(i[n>>2]=13,a=l),(l=+At(16224,A))<a&&(i[n>>2]=14,a=l),(l=+At(16248,A))<a&&(i[n>>2]=15,a=l),(l=+At(16272,A))<a&&(i[n>>2]=16,a=l),(l=+At(16296,A))<a&&(i[n>>2]=17,a=l),(l=+At(16320,A))<a&&(i[n>>2]=18,a=l),(l=+At(16344,A))<a&&(i[n>>2]=19,a=l),(l=+h(+(1-.5*a)))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(M=s);if(n=0|i[n>>2],a=+Pe((a=+o[16368+(24*n|0)>>3])-+Pe(+function(e,t){e|=0;var n=0,r=0,i=0,s=0,a=0;return s=+o[(t=t|0)>>3],r=+c(+s),i=+o[t+8>>3]-+o[e+8>>3],a=r*+d(+i),n=+o[e>>3],+ +m(+a,+(+d(+s)*+c(+n)-+c(+i)*(r*+d(+n))))}(15568+(n<<4)|0,e))),u=0|je(t)?+Pe(a+-.3334731722518321):a,a=+f(+l)/.381966011250105,(0|t)>0){A=0;do{a*=2.6457513110645907,A=A+1|0}while((0|A)!=(0|t))}l=+c(+u)*a,o[r>>3]=l,u=+d(+u)*a,o[r+8>>3]=u,M=s}function ve(e,t,n,r,s){t|=0,n|=0,r|=0,s|=0;var a=0,u=0;if(a=+function(e){var t=0,n=0;return n=+o[(e=e|0)>>3],t=+o[e+8>>3],+ +l(+(n*n+t*t))}(e|=0),a<1e-16)return t=15568+(t<<4)|0,i[s>>2]=i[t>>2],i[s+4>>2]=i[t+4>>2],i[s+8>>2]=i[t+8>>2],void(i[s+12>>2]=i[t+12>>2]);if(u=+m(+ +o[e+8>>3],+ +o[e>>3]),(0|n)>0){e=0;do{a/=2.6457513110645907,e=e+1|0}while((0|e)!=(0|n))}r?(a/=3,n=0==(0|je(n)),a=+g(.381966011250105*(n?a:a/2.6457513110645907))):(a=+g(.381966011250105*a),0|je(n)&&(u=+Pe(u+.3334731722518321))),function(e,t,n,r){e|=0,t=+t,r|=0;var s=0,a=0,l=0,u=0;if((n=+n)<1e-16)return i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],void(i[r+12>>2]=i[e+12>>2]);a=t<0?t+6.283185307179586:t,a=t>=6.283185307179586?a+-6.283185307179586:a;do{if(!(a<1e-16)){if(s=+A(+(a+-3.141592653589793))<1e-16,t=+o[e>>3],s){t-=n,o[r>>3]=t,s=r;break}if(l=+c(+n),n=+d(+n),t=l*+d(+t)+ +c(+a)*(n*+c(+t)),t=+p(+((t=t>1?1:t)<-1?-1:t)),o[r>>3]=t,+A(+(t+-1.5707963267948966))<1e-16)return o[r>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+A(+(t+1.5707963267948966))<1e-16)return o[r>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(u=+c(+t),a=n*+d(+a)/u,n=+o[e>>3],t=(l-+d(+t)*+d(+n))/+c(+n)/u,l=a>1?1:a,t=t>1?1:t,(t=+o[e+8>>3]+ +m(+(l<-1?-1:l),+(t<-1?-1:t)))>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);return void(o[r+8>>3]=t)}t=+o[e>>3]+n,o[r>>3]=t,s=r}while(0);if(+A(+(t+-1.5707963267948966))<1e-16)return o[s>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+A(+(t+1.5707963267948966))<1e-16)return o[s>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if((t=+o[e+8>>3])>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);o[r+8>>3]=t}(15568+(t<<4)|0,+Pe(+o[16368+(24*t|0)>>3]-u),a,s)}function ye(e,t,n){t|=0,n|=0;var r,o;r=M,M=M+16|0,Z((e|=0)+4|0,o=r),ve(o,0|i[e>>2],t,0,n),M=r}function be(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var a,A,l,u,c,d,f,h,p,g,m,v,y,b,w,_,x,S,P,k,C,T,I=0,L=0,R=0,O=0,D=0,B=0;if(T=M,M=M+272|0,O=T+240|0,P=T,k=T+224|0,C=T+208|0,m=T+176|0,v=T+160|0,y=T+192|0,b=T+144|0,w=T+128|0,_=T+112|0,x=T+96|0,S=T+80|0,i[(I=T+256|0)>>2]=t,i[O>>2]=i[e>>2],i[O+4>>2]=i[e+4>>2],i[O+8>>2]=i[e+8>>2],i[O+12>>2]=i[e+12>>2],we(O,I,P),i[s>>2]=0,(0|(O=r+n+(5==(0|r)&1)|0))<=(0|n))M=T;else{A=k+4|0,l=m+4|0,u=n+5|0,c=16848+((a=0|i[I>>2])<<2)|0,d=16928+(a<<2)|0,f=w+8|0,h=_+8|0,p=x+8|0,g=C+4|0,R=n;e:for(;;){L=P+(((0|R)%5|0)<<4)|0,i[C>>2]=i[L>>2],i[C+4>>2]=i[L+4>>2],i[C+8>>2]=i[L+8>>2],i[C+12>>2]=i[L+12>>2];do{}while(2==(0|_e(C,a,0,1)));if((0|R)>(0|n)&0!=(0|je(t))){if(i[m>>2]=i[C>>2],i[m+4>>2]=i[C+4>>2],i[m+8>>2]=i[C+8>>2],i[m+12>>2]=i[C+12>>2],Z(A,v),r=0|i[m>>2],I=0|i[17008+(80*r|0)+(i[k>>2]<<2)>>2],i[m>>2]=i[18608+(80*r|0)+(20*I|0)>>2],(0|(L=0|i[18608+(80*r|0)+(20*I|0)+16>>2]))>0){e=0;do{se(l),e=e+1|0}while((0|e)<(0|L))}switch(L=18608+(80*r|0)+(20*I|0)+4|0,i[y>>2]=i[L>>2],i[y+4>>2]=i[L+4>>2],i[y+8>>2]=i[L+8>>2],J(y,3*(0|i[c>>2])|0),X(l,y,l),Y(l),Z(l,b),D=+(0|i[d>>2]),o[w>>3]=3*D,o[f>>3]=0,B=-1.5*D,o[_>>3]=B,o[h>>3]=2.598076211353316*D,o[x>>3]=B,o[p>>3]=-2.598076211353316*D,0|i[17008+(80*(0|i[m>>2])|0)+(i[C>>2]<<2)>>2]){case 1:e=_,r=w;break;case 3:e=x,r=_;break;case 2:e=w,r=x;break;default:e=12;break e}st(v,b,r,e,S),ve(S,0|i[m>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])}if((0|R)<(0|u)&&(Z(g,m),ve(m,0|i[C>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])),i[k>>2]=i[C>>2],i[k+4>>2]=i[C+4>>2],i[k+8>>2]=i[C+8>>2],i[k+12>>2]=i[C+12>>2],(0|(R=R+1|0))>=(0|O)){e=3;break}}3!=(0|e)?12==(0|e)&&E(22474,22521,581,22531):M=T}}function we(e,t,n){e|=0,t|=0,n|=0;var r,o=0,s=0,a=0,A=0,l=0;r=M,M=M+128|0,s=r,A=20208,l=(a=o=r+64|0)+60|0;do{i[a>>2]=i[A>>2],a=a+4|0,A=A+4|0}while((0|a)<(0|l));A=20272,l=(a=s)+60|0;do{i[a>>2]=i[A>>2],a=a+4|0,A=A+4|0}while((0|a)<(0|l));o=(l=0==(0|je(0|i[t>>2])))?o:s,ue(s=e+4|0),ce(s),0|je(0|i[t>>2])&&(ie(s),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],X(s,o,t=n+4|0),Y(t),i[n+16>>2]=i[e>>2],X(s,o+12|0,t=n+20|0),Y(t),i[n+32>>2]=i[e>>2],X(s,o+24|0,t=n+36|0),Y(t),i[n+48>>2]=i[e>>2],X(s,o+36|0,t=n+52|0),Y(t),i[n+64>>2]=i[e>>2],X(s,o+48|0,n=n+68|0),Y(n),M=r}function _e(e,t,n,r){n|=0,r|=0;var o,s,a,A,l,u,c=0,d=0,f=0,h=0,p=0;if(u=M,M=M+32|0,l=u+12|0,s=u,p=(e|=0)+4|0,h=0|i[16928+((t|=0)<<2)>>2],h=(A=0!=(0|r))?3*h|0:h,c=0|i[p>>2],o=0|i[(a=e+8|0)>>2],A){if((0|(c=o+c+(r=0|i[(d=e+12|0)>>2])|0))==(0|h))return M=u,0|(p=1);f=d}else c=o+c+(r=0|i[(f=e+12|0)>>2])|0;if((0|c)<=(0|h))return M=u,0|(p=0);do{if((0|r)>0){if(r=0|i[e>>2],(0|o)>0){d=18608+(80*r|0)+60|0,r=e;break}r=18608+(80*r|0)+40|0,n?($(l,h,0,0),K(p,l,s),ae(s),X(s,l,p),d=r,r=e):(d=r,r=e)}else d=18608+(80*(0|i[e>>2])|0)+20|0,r=e}while(0);if(i[r>>2]=i[d>>2],(0|i[(c=d+16|0)>>2])>0){r=0;do{se(p),r=r+1|0}while((0|r)<(0|i[c>>2]))}return e=d+4|0,i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],t=0|i[16848+(t<<2)>>2],J(l,A?3*t|0:t),X(p,l,p),Y(p),r=A&&((0|i[a>>2])+(0|i[p>>2])+(0|i[f>>2])|0)==(0|h)?1:2,M=u,0|(p=r)}function xe(e,t){e|=0,t|=0;var n=0;do{n=0|_e(e,t,0,1)}while(2==(0|n));return 0|n}function Ee(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var a,A,l,u,c,d,f,h,p,g,m,v,y,b,w,_,x,S,P=0,k=0,C=0,T=0,I=0;if(S=M,M=M+240|0,b=S+208|0,w=S,_=S+192|0,x=S+176|0,p=S+160|0,g=S+144|0,m=S+128|0,v=S+112|0,y=S+96|0,i[(P=S+224|0)>>2]=t,i[b>>2]=i[e>>2],i[b+4>>2]=i[e+4>>2],i[b+8>>2]=i[e+8>>2],i[b+12>>2]=i[e+12>>2],Se(b,P,w),i[s>>2]=0,(0|(h=r+n+(6==(0|r)&1)|0))<=(0|n))M=S;else{A=n+6|0,l=16928+((a=0|i[P>>2])<<2)|0,u=g+8|0,c=m+8|0,d=v+8|0,f=_+4|0,k=0,C=n,r=-1;e:for(;;){if(e=w+((P=(0|C)%6|0)<<4)|0,i[_>>2]=i[e>>2],i[_+4>>2]=i[e+4>>2],i[_+8>>2]=i[e+8>>2],i[_+12>>2]=i[e+12>>2],e=k,k=0|_e(_,a,0,1),(0|C)>(0|n)&0!=(0|je(t))&&(1!=(0|e)&&(0|i[_>>2])!=(0|r))){switch(Z(w+(((P+5|0)%6|0)<<4)+4|0,x),Z(w+(P<<4)+4|0,p),T=+(0|i[l>>2]),o[g>>3]=3*T,o[u>>3]=0,I=-1.5*T,o[m>>3]=I,o[c>>3]=2.598076211353316*T,o[v>>3]=I,o[d>>3]=-2.598076211353316*T,P=0|i[b>>2],0|i[17008+(80*P|0)+(((0|r)==(0|P)?0|i[_>>2]:r)<<2)>>2]){case 1:e=m,r=g;break;case 3:e=v,r=m;break;case 2:e=g,r=v;break;default:e=8;break e}st(x,p,r,e,y),0|at(x,y)||0|at(p,y)||(ve(y,0|i[b>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2]))}if((0|C)<(0|A)&&(Z(f,x),ve(x,0|i[_>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])),(0|(C=C+1|0))>=(0|h)){e=3;break}r=0|i[_>>2]}3!=(0|e)?8==(0|e)&&E(22557,22521,746,22602):M=S}}function Se(e,t,n){e|=0,t|=0,n|=0;var r,o=0,s=0,a=0,A=0,l=0;r=M,M=M+160|0,s=r,A=20336,l=(a=o=r+80|0)+72|0;do{i[a>>2]=i[A>>2],a=a+4|0,A=A+4|0}while((0|a)<(0|l));A=20416,l=(a=s)+72|0;do{i[a>>2]=i[A>>2],a=a+4|0,A=A+4|0}while((0|a)<(0|l));o=(l=0==(0|je(0|i[t>>2])))?o:s,ue(s=e+4|0),ce(s),0|je(0|i[t>>2])&&(ie(s),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],X(s,o,t=n+4|0),Y(t),i[n+16>>2]=i[e>>2],X(s,o+12|0,t=n+20|0),Y(t),i[n+32>>2]=i[e>>2],X(s,o+24|0,t=n+36|0),Y(t),i[n+48>>2]=i[e>>2],X(s,o+36|0,t=n+52|0),Y(t),i[n+64>>2]=i[e>>2],X(s,o+48|0,t=n+68|0),Y(t),i[n+80>>2]=i[e>>2],X(s,o+60|0,n=n+84|0),Y(n),M=r}function Pe(e){var t;return t=(e=+e)<0?e+6.283185307179586:e,+(e>=6.283185307179586?t+-6.283185307179586:t)}function ke(e,t){return t|=0,+A(+(+o[(e|=0)>>3]-+o[t>>3]))<17453292519943298e-27?0|(t=+A(+(+o[e+8>>3]-+o[t+8>>3]))<17453292519943298e-27):0|(t=0)}function Ce(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+d(.5*(r-n)))*i+(s=+d(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+c(+r)*+c(+n)*s),2*+m(+ +l(+s),+ +l(+(1-s)))*6371.007180918475}function Te(e,t,n){e|=0,n|=0;var r,i,s,a,A=0,u=0,h=0,p=0,v=0,y=0;return y=+o[(t|=0)>>3],s=+o[e>>3],v=+d(.5*(y-s)),h=+o[t+8>>3],i=+o[e+8>>3],p=+d(.5*(h-i)),r=+c(+s),a=+c(+y),p=2*+m(+ +l(+(p=v*v+p*(a*r*p))),+ +l(+(1-p))),v=+o[n>>3],y=+d(.5*(v-y)),A=+o[n+8>>3],h=+d(.5*(A-h)),u=+c(+v),h=2*+m(+ +l(+(h=y*y+h*(a*u*h))),+ +l(+(1-h))),v=+d(.5*(s-v)),A=+d(.5*(i-A)),A=2*+m(+ +l(+(A=v*v+A*(r*u*A))),+ +l(+(1-A))),4*+g(+ +l(+ +f(.5*(u=.5*(p+h+A)))*+f(.5*(u-p))*+f(.5*(u-h))*+f(.5*(u-A))))}function Me(e,t){return t=0|Et(0|(e|=0),0|(t|=0),45),x(),127&t|0}function Ie(e,t){var n=0,r=0,i=0,o=0,s=0,a=0;if(!(!0&134217728==(-16777216&(t|=0)|0)))return 0|(t=0);if(s=0|Et(0|(e|=0),0|t,45),x(),(s&=127)>>>0>121)return 0|(t=0);n=0|Et(0|e,0|t,52),x(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|Et(0|e,0|t,3*(15-i|0)|0),x(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|B(s))){a=0,r=13;break}r=1}if(7==(0|o)){a=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(a=1)}if(13==(0|r))return 0|a}}while(0);for(;;){if(a=0|Et(0|e,0|t,3*(14-n|0)|0),x(),!(7==(7&a|0)&!0)){a=0,r=13;break}if(!(n>>>0<14)){a=1,r=13;break}n=n+1|0}return 13==(0|r)?0|a:0}function Le(e,t,n){n|=0;var r=0,i=0;if(r=0|Et(0|(e|=0),0|(t|=0),52),x(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(e|=i=0|St(0|n,0,52),t=0|x()|-15728641&t,(0|r)>(0|n))do{i=0|St(7,0,3*(14-n|0)|0),n=n+1|0,e|=i,t=0|x()|t}while((0|n)<(0|r))}else t=0,e=0}else t=0,e=0;return _(0|t),0|e}function Re(e,t,n,r){n|=0,r|=0;var o,s=0,a=0,A=0,l=0,u=0,c=0;if(A=0|Et(0|(e|=0),0|(t|=0),52),x(),(0|n)<16&(0|(A&=15))<=(0|n)){if((0|A)==(0|n))return i[(n=r)>>2]=e,void(i[n+4>>2]=t);if(o=(0|(u=0|tt(7,n-A|0)))/7|0,l=0|Et(0|e,0|t,45),x(),0|B(127&l)){e:do{if(A)for(a=1;;){if(s=0|Et(0|e,0|t,3*(15-a|0)|0),x(),0|(s&=7))break e;if(!(a>>>0<A>>>0)){s=0;break}a=a+1|0}else s=0}while(0);a=0==(0|s)}else a=0;if(c=0|St(A+1|0,0,52),s=0|x()|-15728641&t,Re(t=(c|e)&~(t=0|St(7,0,0|(l=3*(14-A|0)|0))),A=s&~(0|x()),n,r),s=r+(o<<3)|0,!a)return Re((c=0|St(1,0,0|l))|t,0|x()|A,n,s),c=s+(o<<3)|0,Re((u=0|St(2,0,0|l))|t,0|x()|A,n,c),c=c+(o<<3)|0,Re((u=0|St(3,0,0|l))|t,0|x()|A,n,c),c=c+(o<<3)|0,Re((u=0|St(4,0,0|l))|t,0|x()|A,n,c),c=c+(o<<3)|0,Re((u=0|St(5,0,0|l))|t,0|x()|A,n,c),void Re((u=0|St(6,0,0|l))|t,0|x()|A,n,c+(o<<3)|0);a=s+(o<<3)|0,(0|u)>6&&(Tt(0|s,0,(c=(a>>>0>(u=s+8|0)>>>0?a:u)+-1+(0-s)|0)+8&-8|0),s=u+(c>>>3<<3)|0),Re((c=0|St(2,0,0|l))|t,0|x()|A,n,s),c=s+(o<<3)|0,Re((u=0|St(3,0,0|l))|t,0|x()|A,n,c),c=c+(o<<3)|0,Re((u=0|St(4,0,0|l))|t,0|x()|A,n,c),c=c+(o<<3)|0,Re((u=0|St(5,0,0|l))|t,0|x()|A,n,c),Re((u=0|St(6,0,0|l))|t,0|x()|A,n,c+(o<<3)|0)}}function Oe(e,t){var n=0,r=0,i=0;if(i=0|Et(0|(e|=0),0|(t|=0),45),x(),!(0|B(127&i)))return 0|(i=0);i=0|Et(0|e,0|t,52),x(),i&=15;e:do{if(i)for(r=1;;){if(n=0|Et(0|e,0|t,3*(15-r|0)|0),x(),0|(n&=7))break e;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function De(e,t){var n=0,r=0,i=0;if(i=0|Et(0|(e|=0),0|(t|=0),52),x(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|Et(0|e,0|t,3*(15-r|0)|0),x(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function Be(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,A=0;if(A=0|Et(0|(e|=0),0|(t|=0),52),x(),!(A&=15))return A=e,_(0|(a=t)),0|A;for(a=1,n=0;;){r=0|St(7,0,0|(o=3*(15-a|0)|0)),i=0|x(),s=0|Et(0|e,0|t,0|o),x(),e=(o=0|St(0|Ae(7&s),0,0|o))|e&~r,t=(s=0|x())|t&~i;e:do{if(!n)if(0==(o&r|0)&0==(s&i|0))n=0;else if(r=0|Et(0|e,0|t,52),x(),r&=15){n=1;t:for(;;){switch(s=0|Et(0|e,0|t,3*(15-n|0)|0),x(),7&s){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(i=0|Et(0|e,0|t,0|(s=3*(15-n|0)|0)),x(),o=0|St(7,0,0|s),t&=~(0|x()),e=e&~o|(s=0|St(0|Ae(7&i),0,0|s)),t=0|t|x(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(a>>>0<A>>>0))break;a=a+1|0}return _(0|t),0|e}function Fe(e,t){var n=0,r=0,i=0,o=0,s=0;if(r=0|Et(0|(e|=0),0|(t|=0),52),x(),!(r&=15))return r=e,_(0|(n=t)),0|r;for(n=1;s=0|Et(0|e,0|t,0|(o=3*(15-n|0)|0)),x(),i=0|St(7,0,0|o),t&=~(0|x()),e=(o=0|St(0|Ae(7&s),0,0|o))|e&~i,t=0|x()|t,n>>>0<r>>>0;)n=n+1|0;return _(0|t),0|e}function ze(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,A=0;if(A=0|Et(0|(e|=0),0|(t|=0),52),x(),!(A&=15))return A=e,_(0|(a=t)),0|A;for(a=1,n=0;;){r=0|St(7,0,0|(o=3*(15-a|0)|0)),i=0|x(),s=0|Et(0|e,0|t,0|o),x(),e=(o=0|St(0|le(7&s),0,0|o))|e&~r,t=(s=0|x())|t&~i;e:do{if(!n)if(0==(o&r|0)&0==(s&i|0))n=0;else if(r=0|Et(0|e,0|t,52),x(),r&=15){n=1;t:for(;;){switch(s=0|Et(0|e,0|t,3*(15-n|0)|0),x(),7&s){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(o=0|St(7,0,0|(i=3*(15-n|0)|0)),s=t&~(0|x()),t=0|Et(0|e,0|t,0|i),x(),e=e&~o|(t=0|St(0|le(7&t),0,0|i)),t=0|s|x(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(a>>>0<A>>>0))break;a=a+1|0}return _(0|t),0|e}function Ne(e,t){var n=0,r=0,i=0,o=0,s=0;if(r=0|Et(0|(e|=0),0|(t|=0),52),x(),!(r&=15))return r=e,_(0|(n=t)),0|r;for(n=1;o=0|St(7,0,0|(s=3*(15-n|0)|0)),i=t&~(0|x()),t=0|Et(0|e,0|t,0|s),x(),e=(t=0|St(0|le(7&t),0,0|s))|e&~o,t=0|x()|i,n>>>0<r>>>0;)n=n+1|0;return _(0|t),0|e}function je(e){return 0|(0|(e|=0))%2}function Ue(e,t){e|=0;var n,r;return r=M,M=M+16|0,n=r,(t|=0)>>>0<=15&&2146435072!=(2146435072&i[e+4>>2]|0)&&2146435072!=(2146435072&i[e+8+4>>2]|0)?(!function(e,t,n){var r,i;r=M,M=M+16|0,me(e|=0,t|=0,n|=0,i=r),q(i,n+4|0),M=r}(e,t,n),t=0|function(e,t){e|=0;var n,r=0,o=0,s=0,a=0,A=0,l=0,u=0,c=0;if(n=M,M=M+64|0,l=n+40|0,o=n+24|0,s=n+12|0,a=n,St(0|(t|=0),0,52),r=134225919|x(),!t)return(0|i[e+4>>2])>2||(0|i[e+8>>2])>2||(0|i[e+12>>2])>2?(l=0,_(0|(A=0)),M=n,0|l):(St(0|z(e),0,45),A=0|x()|r,l=-1,_(0|A),M=n,0|l);if(i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],i[l+12>>2]=i[e+12>>2],A=l+4|0,(0|t)>0)for(e=-1;i[o>>2]=i[A>>2],i[o+4>>2]=i[A+4>>2],i[o+8>>2]=i[A+8>>2],1&t?(te(A),i[s>>2]=i[A>>2],i[s+4>>2]=i[A+4>>2],i[s+8>>2]=i[A+8>>2],re(s)):(ne(A),i[s>>2]=i[A>>2],i[s+4>>2]=i[A+4>>2],i[s+8>>2]=i[A+8>>2],ie(s)),K(o,s,a),Y(a),u=0|St(7,0,0|(c=3*(15-t|0)|0)),r&=~(0|x()),e=(c=0|St(0|ee(a),0,0|c))|e&~u,r=0|x()|r,(0|t)>1;)t=t+-1|0;else e=-1;e:do{if((0|i[A>>2])<=2&&(0|i[l+8>>2])<=2&&(0|i[l+12>>2])<=2){if(t=0|St(0|(o=0|z(l)),0,45),t|=e,e=0|x()|-1040385&r,a=0|N(l),!(0|B(o))){if((0|a)<=0)break;for(s=0;;){if(o=0|Et(0|t,0|e,52),x(),o&=15)for(r=1;l=0|Et(0|t,0|e,0|(c=3*(15-r|0)|0)),x(),u=0|St(7,0,0|c),e&=~(0|x()),t=t&~u|(c=0|St(0|Ae(7&l),0,0|c)),e=0|e|x(),r>>>0<o>>>0;)r=r+1|0;if((0|(s=s+1|0))==(0|a))break e}}s=0|Et(0|t,0|e,52),x(),s&=15;t:do{if(s){r=1;n:for(;;){switch(c=0|Et(0|t,0|e,3*(15-r|0)|0),x(),7&c){case 1:break n;case 0:break;default:break t}if(!(r>>>0<s>>>0))break t;r=r+1|0}if(0|j(o,0|i[l>>2]))for(r=1;u=0|St(7,0,0|(l=3*(15-r|0)|0)),c=e&~(0|x()),e=0|Et(0|t,0|e,0|l),x(),t=t&~u|(e=0|St(0|le(7&e),0,0|l)),e=0|c|x(),r>>>0<s>>>0;)r=r+1|0;else for(r=1;l=0|Et(0|t,0|e,0|(c=3*(15-r|0)|0)),x(),u=0|St(7,0,0|c),e&=~(0|x()),t=t&~u|(c=0|St(0|Ae(7&l),0,0|c)),e=0|e|x(),r>>>0<s>>>0;)r=r+1|0}}while(0);if((0|a)>0){r=0;do{t=0|Be(t,e),e=0|x(),r=r+1|0}while((0|r)!=(0|a))}}else t=0,e=0}while(0);return c=t,_(0|(u=e)),M=n,0|c}(n,t),e=0|x()):(e=0,t=0),_(0|e),M=r,0|t}function Ve(e,t,n){var r,o=0,s=0,a=0;if(r=(n|=0)+4|0,s=0|Et(0|(e|=0),0|(t|=0),52),x(),s&=15,a=0|Et(0|e,0|t,45),x(),o=0==(0|s),0|B(127&a)){if(o)return 0|(a=1);o=1}else{if(o)return 0|(a=0);o=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?re(r):ie(r),a=0|Et(0|e,0|t,3*(15-n|0)|0),x(),oe(r,7&a),n>>>0<s>>>0;)n=n+1|0;return 0|o}function We(e,t,n){n|=0;var r,o,s=0,a=0,A=0,l=0,u=0,c=0;o=M,M=M+16|0,r=o,c=0|Et(0|(e|=0),0|(t|=0),45),x(),c&=127;e:do{if(0!=(0|B(c))&&(A=0|Et(0|e,0|t,52),x(),0!=(0|(A&=15)))){s=1;t:for(;;){switch(u=0|Et(0|e,0|t,3*(15-s|0)|0),x(),7&u){case 5:break t;case 0:break;default:s=t;break e}if(!(s>>>0<A>>>0)){s=t;break e}s=s+1|0}for(a=1,s=t;l=0|St(7,0,0|(t=3*(15-a|0)|0)),u=s&~(0|x()),s=0|Et(0|e,0|s,0|t),x(),e=e&~l|(s=0|St(0|le(7&s),0,0|t)),s=0|u|x(),a>>>0<A>>>0;)a=a+1|0}else s=t}while(0);if(u=7728+(28*c|0)|0,i[n>>2]=i[u>>2],i[n+4>>2]=i[u+4>>2],i[n+8>>2]=i[u+8>>2],i[n+12>>2]=i[u+12>>2],0|Ve(e,s,n)){if(l=n+4|0,i[r>>2]=i[l>>2],i[r+4>>2]=i[l+4>>2],i[r+8>>2]=i[l+8>>2],A=0|Et(0|e,0|s,52),x(),u=15&A,1&A?(ie(l),A=u+1|0):A=u,0|B(c)){e:do{if(u)for(t=1;;){if(a=0|Et(0|e,0|s,3*(15-t|0)|0),x(),0|(a&=7)){s=a;break e}if(!(t>>>0<u>>>0)){s=0;break}t=t+1|0}else s=0}while(0);s=4==(0|s)&1}else s=0;if(0|_e(n,A,s,0)){if(0|B(c))do{}while(0!=(0|_e(n,A,0,0)));(0|A)!=(0|u)&&ne(l)}else(0|A)!=(0|u)&&(i[l>>2]=i[r>>2],i[l+4>>2]=i[r+4>>2],i[l+8>>2]=i[r+8>>2]);M=o}else M=o}function Ge(e,t,n){n|=0;var r,i;r=M,M=M+16|0,We(e|=0,t|=0,i=r),t=0|Et(0|e,0|t,52),x(),ye(i,15&t,n),M=r}function He(e,t,n){n|=0;var r,i,o=0,s=0;i=M,M=M+16|0,We(e|=0,t|=0,r=i),o=0|Et(0|e,0|t,45),x(),o=0==(0|B(127&o)),s=0|Et(0|e,0|t,52),x(),s&=15;e:do{if(!o){if(0|s)for(o=1;;){if(!(0==((0|St(7,0,3*(15-o|0)|0))&e|0)&0==((0|x())&t|0)))break e;if(!(o>>>0<s>>>0))break;o=o+1|0}return be(r,s,0,5,n),void(M=i)}}while(0);Ee(r,s,0,6,n),M=i}function Qe(e,t){t|=0;var n,r=0,o=0,s=0,a=0,A=0,l=0;if(St(0|(e|=0),0,52),n=134225919|x(),(0|e)<1){o=0,r=0;do{0|B(o)&&(St(0|o,0,45),A=0|n|x(),i[(e=t+(r<<3)|0)>>2]=-1,i[e+4>>2]=A,r=r+1|0),o=o+1|0}while(122!=(0|o))}else{A=0,r=0;do{if(0|B(A)){for(St(0|A,0,45),o=1,s=-1,a=0|n|x();s&=~(l=0|St(7,0,3*(15-o|0)|0)),a&=~(0|x()),(0|o)!=(0|e);)o=o+1|0;i[(l=t+(r<<3)|0)>>2]=s,i[l+4>>2]=a,r=r+1|0}A=A+1|0}while(122!=(0|A))}}function $e(e,t,n,r){var o,s=0,a=0,A=0,l=0,u=0;if(o=M,M=M+64|0,A=o,(0|(e|=0))==(0|(n|=0))&(0|(t|=0))==(0|(r|=0))|!1|134217728!=(2013265920&t|0)|!1|134217728!=(2013265920&r|0))return M=o,0|(A=0);if(s=0|Et(0|e,0|t,52),x(),s&=15,a=0|Et(0|n,0|r,52),x(),(0|s)!=(15&a|0))return M=o,0|(A=0);if(a=s+-1|0,s>>>0>1&&(u=0|Le(e,t,a),l=0|x(),(0|u)==(0|(a=0|Le(n,r,a)))&(0|l)==(0|x()))){if(s=0|Et(0|e,0|t,0|(a=3*(15^s)|0)),x(),s&=7,a=0|Et(0|n,0|r,0|a),x(),0==(0|s)|0==(0|(a&=7)))return M=o,0|(u=1);if((0|i[21136+(s<<2)>>2])==(0|a))return M=o,0|(u=1);if((0|i[21168+(s<<2)>>2])==(0|a))return M=o,0|(u=1)}a=(s=A)+56|0;do{i[s>>2]=0,s=s+4|0}while((0|s)<(0|a));return I(e,t,1,A),s=(0|i[(u=A)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=A+8|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=A+16|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=A+24|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=A+32|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=A+40|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)?1:1&((0|i[(s=A+48|0)>>2])==(0|n)?(0|i[s+4>>2])==(0|r):0),M=o,0|(u=s)}function qe(e,t,n){n|=0;var r,o,s,a,A=0;if(s=M,M=M+16|0,o=s,A=0|Et(0|(e|=0),0|(t|=0),56),x(),t=0|function(e,t,n){n|=0;var r=0,o=0;if(r=0|Oe(e=e|0,t=t|0),(n+-1|0)>>>0>5)return 0|(n=-1);if(1==(0|n)&(o=0!=(0|r)))return 0|(n=-1);return r=0|function(e,t){var n=0,r=0,o=0,s=0,a=0,A=0,l=0,u=0;if(u=M,M=M+32|0,s=u,We(e=e|0,t=t|0,o=u+16|0),a=0|Me(e,t),l=0|De(e,t),function(e,t){e=7728+(28*(e|=0)|0)|0,i[(t|=0)>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2]}(a,s),t=0|function(e,t){e|=0;var n=0,r=0;if((t|=0)>>>0>20)return-1;do{if((0|i[11152+(216*t|0)>>2])!=(0|e))if((0|i[11152+(216*t|0)+8>>2])!=(0|e))if((0|i[11152+(216*t|0)+16>>2])!=(0|e))if((0|i[11152+(216*t|0)+24>>2])!=(0|e))if((0|i[11152+(216*t|0)+32>>2])!=(0|e))if((0|i[11152+(216*t|0)+40>>2])!=(0|e))if((0|i[11152+(216*t|0)+48>>2])!=(0|e))if((0|i[11152+(216*t|0)+56>>2])!=(0|e))if((0|i[11152+(216*t|0)+64>>2])!=(0|e))if((0|i[11152+(216*t|0)+72>>2])!=(0|e))if((0|i[11152+(216*t|0)+80>>2])!=(0|e))if((0|i[11152+(216*t|0)+88>>2])!=(0|e))if((0|i[11152+(216*t|0)+96>>2])!=(0|e))if((0|i[11152+(216*t|0)+104>>2])!=(0|e))if((0|i[11152+(216*t|0)+112>>2])!=(0|e))if((0|i[11152+(216*t|0)+120>>2])!=(0|e))if((0|i[11152+(216*t|0)+128>>2])!=(0|e)){if((0|i[11152+(216*t|0)+136>>2])!=(0|e)){if((0|i[11152+(216*t|0)+144>>2])==(0|e)){e=0,n=2,r=0;break}if((0|i[11152+(216*t|0)+152>>2])==(0|e)){e=0,n=2,r=1;break}if((0|i[11152+(216*t|0)+160>>2])==(0|e)){e=0,n=2,r=2;break}if((0|i[11152+(216*t|0)+168>>2])==(0|e)){e=1,n=2,r=0;break}if((0|i[11152+(216*t|0)+176>>2])==(0|e)){e=1,n=2,r=1;break}if((0|i[11152+(216*t|0)+184>>2])==(0|e)){e=1,n=2,r=2;break}if((0|i[11152+(216*t|0)+192>>2])==(0|e)){e=2,n=2,r=0;break}if((0|i[11152+(216*t|0)+200>>2])==(0|e)){e=2,n=2,r=1;break}if((0|i[11152+(216*t|0)+208>>2])==(0|e)){e=2,n=2,r=2;break}return-1}e=2,n=1,r=2}else e=2,n=1,r=1;else e=2,n=1,r=0;else e=1,n=1,r=2;else e=1,n=1,r=1;else e=1,n=1,r=0;else e=0,n=1,r=2;else e=0,n=1,r=1;else e=0,n=1,r=0;else e=2,n=0,r=2;else e=2,n=0,r=1;else e=2,n=0,r=0;else e=1,n=0,r=2;else e=1,n=0,r=1;else e=1,n=0,r=0;else e=0,n=0,r=2;else e=0,n=0,r=1;else e=0,n=0,r=0}while(0);return 0|i[11152+(216*t|0)+(72*n|0)+(24*e|0)+(r<<3)+4>>2]}(a,0|i[o>>2]),!(0|B(a)))return M=u,0|(l=t);switch(0|a){case 4:e=0,n=14;break;case 14:e=1,n=14;break;case 24:e=2,n=14;break;case 38:e=3,n=14;break;case 49:e=4,n=14;break;case 58:e=5,n=14;break;case 63:e=6,n=14;break;case 72:e=7,n=14;break;case 83:e=8,n=14;break;case 97:e=9,n=14;break;case 107:e=10,n=14;break;case 117:e=11,n=14;break;default:A=0,r=0}14==(0|n)&&(A=0|i[22096+(24*e|0)+8>>2],r=0|i[22096+(24*e|0)+16>>2]);(0|(e=0|i[o>>2]))!=(0|i[s>>2])&&(a=0|F(a))|(0|(e=0|i[o>>2]))==(0|r)&&(t=(t+1|0)%6|0);if(3==(0|l)&(0|e)==(0|r))return M=u,0|(l=(t+5|0)%6|0);if(!(5==(0|l)&(0|e)==(0|A)))return M=u,0|(l=t);return M=u,0|(l=(t+1|0)%6|0)}(e,t),o?0|(n=(5-r+(0|i[22384+(n<<2)>>2])|0)%5|0):0|(n=(6-r+(0|i[22416+(n<<2)>>2])|0)%6|0)}(r=(a=!0&268435456==(2013265920&t|0))?e:0,e=a?-2130706433&t|134217728:0,7&A),-1==(0|t))return i[n>>2]=0,void(M=s);We(r,e,o),A=0|Et(0|r,0|e,52),x(),A&=15,0|Oe(r,e)?be(o,A,t,2,n):Ee(o,A,t,2,n),M=s}function Ye(e){e|=0;var t,n,r=0;return(t=0|yt(1,12))||E(22691,22646,49,22704),0|(r=0|i[(n=e+4|0)>>2])?(i[(r=r+8|0)>>2]=t,i[n>>2]=t,0|t):(0|i[e>>2]&&E(22721,22646,61,22744),i[(r=e)>>2]=t,i[n>>2]=t,0|t)}function Ze(e,t){e|=0,t|=0;var n,r;return(r=0|mt(24))||E(22758,22646,78,22772),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[r+16>>2]=0,0|(n=0|i[(t=e+4|0)>>2])?(i[n+16>>2]=r,i[t>>2]=r,0|r):(0|i[e>>2]&&E(22787,22646,82,22772),i[e>>2]=r,i[t>>2]=r,0|r)}function Xe(e){var t,n,r=0,s=0,a=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,x=0,S=0,P=0,k=0,C=0,T=0,M=0,I=0,L=0,R=0,O=0,D=0,B=0;if(0|i[(l=(e|=0)+8|0)>>2])return 0|(B=1);if(!(a=0|i[e>>2]))return 0|(B=0);r=a,s=0;do{s=s+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(s>>>0<2)return 0|(B=0);(n=0|mt(s<<2))||E(22807,22646,317,22826),(t=0|mt(s<<5))||E(22848,22646,321,22826),i[e>>2]=0,i[(C=e+4|0)>>2]=0,i[l>>2]=0,s=0,O=0,k=0,g=0;e:for(;;){if(p=0|i[a>>2]){u=0,c=p;do{if(f=+o[c+8>>3],r=c,c=0|i[c+16>>2],d=+o[(l=(h=0==(0|c))?p:c)+8>>3],+A(+(f-d))>3.141592653589793){B=14;break}u+=(d-f)*(+o[r>>3]+ +o[l>>3])}while(!h);if(14==(0|B)){B=0,u=0,r=p;do{P=+o[r+8>>3],L=0|i[(R=r+16|0)>>2],S=+o[(L=0==(0|L)?p:L)+8>>3],u+=(+o[r>>3]+ +o[L>>3])*((S<0?S+6.283185307179586:S)-(P<0?P+6.283185307179586:P)),r=0|i[(0==(0|r)?a:R)>>2]}while(0!=(0|r))}u>0?(i[n+(O<<2)>>2]=a,O=O+1|0,l=k,r=g):B=19}else B=19;if(19==(0|B)){B=0;do{if(!s){if(g){l=C,c=g+8|0,r=a,s=e;break}if(0|i[e>>2]){B=27;break e}l=C,c=e,r=a,s=e;break}if(0|i[(r=s+8|0)>>2]){B=21;break e}if(!(s=0|yt(1,12))){B=23;break e}i[r>>2]=s,l=s+4|0,c=s,r=g}while(0);if(i[c>>2]=a,i[l>>2]=a,c=t+(k<<5)|0,h=0|i[a>>2]){for(o[(p=t+(k<<5)+8|0)>>3]=17976931348623157e292,o[(g=t+(k<<5)+24|0)>>3]=17976931348623157e292,o[c>>3]=-17976931348623157e292,o[(m=t+(k<<5)+16|0)>>3]=-17976931348623157e292,_=17976931348623157e292,x=-17976931348623157e292,l=0,v=h,f=17976931348623157e292,b=17976931348623157e292,w=-17976931348623157e292,d=-17976931348623157e292;u=+o[v>>3],P=+o[v+8>>3],v=0|i[v+16>>2],S=+o[((y=0==(0|v))?h:v)+8>>3],u<f&&(o[p>>3]=u,f=u),P<b&&(o[g>>3]=P,b=P),u>w?o[c>>3]=u:u=w,P>d&&(o[m>>3]=P,d=P),_=P>0&P<_?P:_,x=P<0&P>x?P:x,l|=+A(+(P-S))>3.141592653589793,!y;)w=u;l&&(o[m>>3]=x,o[g>>3]=_)}else i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,i[c+12>>2]=0,i[c+16>>2]=0,i[c+20>>2]=0,i[c+24>>2]=0,i[c+28>>2]=0;l=k+1|0}if(a=0|i[(R=a+8|0)>>2],i[R>>2]=0,!a){B=45;break}k=l,g=r}if(21==(0|B))E(22624,22646,35,22658);else if(23==(0|B))E(22678,22646,37,22658);else if(27==(0|B))E(22721,22646,61,22744);else if(45==(0|B)){e:do{if((0|O)>0){for(R=0==(0|l),I=l<<2,L=0==(0|e),M=0,r=0;;){if(T=0|i[n+(M<<2)>>2],R)B=73;else{if(!(k=0|mt(I))){B=50;break}if(!(C=0|mt(I))){B=52;break}t:do{if(L)s=0;else{for(l=0,s=0,c=e;a=t+(l<<5)|0,0|Ke(0|i[c>>2],a,0|i[T>>2])?(i[k+(s<<2)>>2]=c,i[C+(s<<2)>>2]=a,y=s+1|0):y=s,c=0|i[c+8>>2];)l=l+1|0,s=y;if((0|y)>0)if(a=0|i[k>>2],1==(0|y))s=a;else for(m=0,v=-1,s=a,g=a;;){for(h=0|i[g>>2],a=0,c=0;p=(0|(l=0|i[i[k+(c<<2)>>2]>>2]))==(0|h)?a:a+(1&(0|Ke(l,0|i[C+(c<<2)>>2],0|i[h>>2])))|0,(0|(c=c+1|0))!=(0|y);)a=p;if(s=(l=(0|p)>(0|v))?g:s,(0|(a=m+1|0))==(0|y))break t;m=a,v=l?p:v,g=0|i[k+(a<<2)>>2]}else s=0}}while(0);if(vt(k),vt(C),s){if(a=0|i[(l=s+4|0)>>2])s=a+8|0;else if(0|i[s>>2]){B=70;break}i[s>>2]=T,i[l>>2]=T}else B=73}if(73==(0|B)){if(B=0,0|(r=0|i[T>>2]))do{C=r,r=0|i[r+16>>2],vt(C)}while(0!=(0|r));vt(T),r=2}if((0|(M=M+1|0))>=(0|O)){D=r;break e}}50==(0|B)?E(22863,22646,249,22882):52==(0|B)?E(22901,22646,252,22882):70==(0|B)&&E(22721,22646,61,22744)}else D=0}while(0);return vt(n),vt(t),0|(B=D)}return 0}function Ke(e,t,n){e|=0;var r,s=0,a=0,A=0,l=0,u=0,c=0,d=0;if(!(0|G(t|=0,n|=0)))return 0|(e=0);if(t=0|W(t),r=+o[n>>3],s=t&(s=+o[n+8>>3])<0?s+6.283185307179586:s,!(e=0|i[e>>2]))return 0|(e=0);if(t){t=0,n=e;e:for(;;){for(;l=+o[n>>3],c=+o[n+8>>3],d=0|i[(n=n+16|0)>>2],A=+o[(d=0==(0|d)?e:d)>>3],a=+o[d+8>>3],l>A?(u=l,l=c):(u=A,A=l,l=a,a=c),r<A|r>u;)if(!(n=0|i[n>>2])){n=22;break e}if(s=(l=l<0?l+6.283185307179586:l)==s|(c=a<0?a+6.283185307179586:a)==s?s+-2220446049250313e-31:s,((c+=(r-A)/(u-A)*(l-c))<0?c+6.283185307179586:c)>s&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,n=e;e:for(;;){for(;l=+o[n>>3],c=+o[n+8>>3],d=0|i[(n=n+16|0)>>2],A=+o[(d=0==(0|d)?e:d)>>3],a=+o[d+8>>3],l>A?(u=l,l=c):(u=A,A=l,l=a,a=c),r<A|r>u;)if(!(n=0|i[n>>2])){n=22;break e}if(a+(r-A)/(u-A)*(l-a)>(s=l==s|a==s?s+-2220446049250313e-31:s)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function Je(e,t,n,o,s){n|=0,o|=0,s|=0;var a,A,l,u,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0;if(u=M,M=M+32|0,b=u+16|0,l=u,c=0|Et(0|(e|=0),0|(t|=0),52),x(),c&=15,m=0|Et(0|n,0|o,52),x(),(0|c)!=(15&m|0))return M=u,0|(b=1);if(p=0|Et(0|e,0|t,45),x(),p&=127,g=0|Et(0|n,0|o,45),x(),m=(0|p)!=(0|(g&=127))){if(7==(0|(f=0|V(p,g))))return M=u,0|(b=2);7==(0|(h=0|V(g,p)))?E(22925,22949,151,22959):(v=f,d=h)}else v=0,d=0;a=0|B(p),A=0|B(g),i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0;do{if(v){if(f=(0|(g=0|i[4304+(28*p|0)+(v<<2)>>2]))>0,A)if(f){p=0,h=n,f=o;do{h=0|ze(h,f),f=0|x(),1==(0|(d=0|le(d)))&&(d=0|le(1)),p=p+1|0}while((0|p)!=(0|g));g=d,p=h,h=f}else g=d,p=n,h=o;else if(f){p=0,h=n,f=o;do{h=0|Ne(h,f),f=0|x(),d=0|le(d),p=p+1|0}while((0|p)!=(0|g));g=d,p=h,h=f}else g=d,p=n,h=o;if(Ve(p,h,b),m||E(22972,22949,181,22959),(f=0!=(0|a))&(d=0!=(0|A))&&E(22999,22949,182,22959),f){if(d=0|De(e,t),0|r[22032+(7*d|0)+v>>0]){c=3;break}p=h=0|i[21200+(28*d|0)+(v<<2)>>2],y=26}else if(d){if(d=0|De(p,h),0|r[22032+(7*d|0)+g>>0]){c=4;break}p=0,h=0|i[21200+(28*g|0)+(d<<2)>>2],y=26}else d=0;if(26==(0|y))if((0|h)<=-1&&E(23030,22949,212,22959),(0|p)<=-1&&E(23053,22949,213,22959),(0|h)>0){f=b+4|0,d=0;do{ae(f),d=d+1|0}while((0|d)!=(0|h));d=p}else d=p;if(i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,oe(l,v),0|c)for(;0|je(c)?re(l):ie(l),(0|c)>1;)c=c+-1|0;if((0|d)>0){c=0;do{ae(l),c=c+1|0}while((0|c)!=(0|d))}X(y=b+4|0,l,y),Y(y),y=50}else if(Ve(n,o,b),0!=(0|a)&0!=(0|A))if((0|g)!=(0|p)&&E(23077,22949,243,22959),d=0|De(e,t),c=0|De(n,o),0|r[22032+(7*d|0)+c>>0])c=5;else if((0|(d=0|i[21200+(28*d|0)+(c<<2)>>2]))>0){f=b+4|0,c=0;do{ae(f),c=c+1|0}while((0|c)!=(0|d));y=50}else y=50;else y=50}while(0);return 50==(0|y)&&(c=b+4|0,i[s>>2]=i[c>>2],i[s+4>>2]=i[c+4>>2],i[s+8>>2]=i[c+8>>2],c=0),M=u,0|(b=c)}function et(e,t,n,r){n|=0,r|=0;var o,s,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0;if(s=M,M=M+48|0,l=s+36|0,u=s+24|0,c=s+12|0,d=s,A=0|Et(0|(e|=0),0|(t|=0),52),x(),A&=15,h=0|Et(0|e,0|t,45),x(),o=0|B(h&=127),St(0|A,0,52),m=134225919|x(),i[(g=r)>>2]=-1,i[g+4>>2]=m,!A)return(0|i[n>>2])>1||(0|i[n+4>>2])>1||(0|i[n+8>>2])>1||127==(0|(a=0|U(h,0|ee(n))))?(M=s,0|(m=1)):(p=0|St(0|a,0,45),g=0|x(),g=-1040385&i[(h=r)+4>>2]|g,i[(m=r)>>2]=i[h>>2]|p,i[m+4>>2]=g,M=s,0|(m=0));for(i[l>>2]=i[n>>2],i[l+4>>2]=i[n+4>>2],i[l+8>>2]=i[n+8>>2];i[u>>2]=i[l>>2],i[u+4>>2]=i[l+4>>2],i[u+8>>2]=i[l+8>>2],0|je(A)?(te(l),i[c>>2]=i[l>>2],i[c+4>>2]=i[l+4>>2],i[c+8>>2]=i[l+8>>2],re(c)):(ne(l),i[c>>2]=i[l>>2],i[c+4>>2]=i[l+4>>2],i[c+8>>2]=i[l+8>>2],ie(c)),K(u,c,d),Y(d),v=0|i[(g=r)>>2],g=0|i[g+4>>2],n=0|St(7,0,0|(y=3*(15-A|0)|0)),g&=~(0|x()),y=0|St(0|ee(d),0,0|y),g=0|x()|g,i[(m=r)>>2]=y|v&~n,i[m+4>>2]=g,(0|A)>1;)A=A+-1|0;e:do{if((0|i[l>>2])<=1&&(0|i[l+4>>2])<=1&&(0|i[l+8>>2])<=1){d=127==(0|(u=0|U(h,A=0|ee(l))))?0:0|B(u);t:do{if(A){if(o){if(l=21408+(28*(0|De(e,t))|0)+(A<<2)|0,(0|(l=0|i[l>>2]))>0){n=0;do{A=0|Ae(A),n=n+1|0}while((0|n)!=(0|l))}if(1==(0|A)){a=3;break e}127==(0|(n=0|U(h,A)))&&E(23104,22949,376,23134),0|B(n)?E(23147,22949,377,23134):(p=l,f=A,a=n)}else p=0,f=A,a=u;if((0|(c=0|i[4304+(28*h|0)+(f<<2)>>2]))<=-1&&E(23178,22949,384,23134),!d){if((0|p)<=-1&&E(23030,22949,417,23134),0|p){A=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];do{n=0|Fe(n,l),l=0|x(),i[(y=r)>>2]=n,i[y+4>>2]=l,A=A+1|0}while((0|A)<(0|p))}if((0|c)<=0){A=54;break}for(A=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];;)if(n=0|Fe(n,l),l=0|x(),i[(y=r)>>2]=n,i[y+4>>2]=l,(0|(A=A+1|0))==(0|c)){A=54;break t}}if(7==(0|(u=0|V(a,h)))&&E(22925,22949,393,23134),n=0|i[(A=r)>>2],A=0|i[A+4>>2],(0|c)>0){l=0;do{n=0|Fe(n,A),A=0|x(),i[(y=r)>>2]=n,i[y+4>>2]=A,l=l+1|0}while((0|l)!=(0|c))}if(n=0|De(n,A),y=0|F(a),(0|(n=0|i[(y?21824:21616)+(28*u|0)+(n<<2)>>2]))<=-1&&E(23030,22949,412,23134),n){A=0,l=0|i[(u=r)>>2],u=0|i[u+4>>2];do{l=0|Be(l,u),u=0|x(),i[(y=r)>>2]=l,i[y+4>>2]=u,A=A+1|0}while((0|A)<(0|n));A=54}else A=54}else if(0!=(0|o)&0!=(0|d))if(A=21408+(28*(y=0|De(e,t))|0)+((0|De(0|i[(A=r)>>2],0|i[A+4>>2]))<<2)|0,(0|(A=0|i[A>>2]))<=-1&&E(23201,22949,433,23134),A){a=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];do{n=0|Fe(n,l),l=0|x(),i[(y=r)>>2]=n,i[y+4>>2]=l,a=a+1|0}while((0|a)<(0|A));a=u,A=54}else a=u,A=55;else a=u,A=54}while(0);if(54==(0|A)&&d&&(A=55),55==(0|A)&&1==(0|De(0|i[(y=r)>>2],0|i[y+4>>2]))){a=4;break}m=0|i[(y=r)>>2],y=-1040385&i[y+4>>2],v=0|St(0|a,0,45),y=0|y|x(),i[(a=r)>>2]=m|v,i[a+4>>2]=y,a=0}else a=2}while(0);return M=s,0|(y=a)}function tt(e,t){var n=0;if(!(t|=0))return 0|(n=1);n=e|=0,e=1;do{e=0|y(0==(1&t|0)?1:n,e),t>>=1,n=0|y(n,n)}while(0!=(0|t));return 0|e}function nt(e,t,n){e|=0;var r,s,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0;if(!(0|G(t|=0,n|=0)))return 0|(h=0);if(t=0|W(t),s=+o[n>>3],a=t&(a=+o[n+8>>3])<0?a+6.283185307179586:a,(0|(h=0|i[e>>2]))<=0)return 0|(h=0);if(r=0|i[e+4>>2],t){t=0,n=-1,e=0;e:for(;;){for(f=e;u=+o[r+(f<<4)>>3],d=+o[r+(f<<4)+8>>3],l=+o[r+((e=(n+2|0)%(0|h)|0)<<4)>>3],A=+o[r+(e<<4)+8>>3],u>l?(c=u,u=d):(c=l,l=u,u=A,A=d),s<l|s>c;){if(!((0|(n=f+1|0))<(0|h))){n=22;break e}e=f,f=n,n=e}if(a=(u=u<0?u+6.283185307179586:u)==a|(d=A<0?A+6.283185307179586:A)==a?a+-2220446049250313e-31:a,((d+=(s-l)/(c-l)*(u-d))<0?d+6.283185307179586:d)>a&&(t^=1),(0|(e=f+1|0))>=(0|h)){n=22;break}n=f}if(22==(0|n))return 0|t}else{t=0,n=-1,e=0;e:for(;;){for(f=e;u=+o[r+(f<<4)>>3],d=+o[r+(f<<4)+8>>3],l=+o[r+((e=(n+2|0)%(0|h)|0)<<4)>>3],A=+o[r+(e<<4)+8>>3],u>l?(c=u,u=d):(c=l,l=u,u=A,A=d),s<l|s>c;){if(!((0|(n=f+1|0))<(0|h))){n=22;break e}e=f,f=n,n=e}if(A+(s-l)/(c-l)*(u-A)>(a=u==a|A==a?a+-2220446049250313e-31:a)&&(t^=1),(0|(e=f+1|0))>=(0|h)){n=22;break}n=f}if(22==(0|n))return 0|t}return 0}function rt(e,t){t|=0;var n,r,s,a,l,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0;if(!(r=0|i[(e|=0)>>2]))return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,void(i[t+28>>2]=0);if(o[(s=t+8|0)>>3]=17976931348623157e292,o[(a=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(l=t+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[e+4>>2],m=17976931348623157e292,v=-17976931348623157e292,y=0,e=-1,f=17976931348623157e292,h=17976931348623157e292,g=-17976931348623157e292,c=-17976931348623157e292,b=0;u=+o[n+(b<<4)>>3],p=+o[n+(b<<4)+8>>3],d=+o[n+(((0|(e=e+2|0))==(0|r)?0:e)<<4)+8>>3],u<f&&(o[s>>3]=u,f=u),p<h&&(o[a>>3]=p,h=p),u>g?o[t>>3]=u:u=g,p>c&&(o[l>>3]=p,c=p),m=p>0&p<m?p:m,v=p<0&p>v?p:v,y|=+A(+(p-d))>3.141592653589793,(0|(e=b+1|0))!=(0|r);)w=b,g=u,b=e,e=w;y&&(o[l>>3]=v,o[a>>3]=m)}}function it(e,t){t|=0;var n,r=0,s=0,a=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,x=0,E=0,S=0,P=0;if(v=0|i[(e|=0)>>2]){if(o[(y=t+8|0)>>3]=17976931348623157e292,o[(b=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(w=t+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(a=0|i[e+4>>2],g=17976931348623157e292,m=-17976931348623157e292,s=0,r=-1,d=17976931348623157e292,f=17976931348623157e292,p=-17976931348623157e292,u=-17976931348623157e292,_=0;l=+o[a+(_<<4)>>3],h=+o[a+(_<<4)+8>>3],c=+o[a+(((0|(S=r+2|0))==(0|v)?0:S)<<4)+8>>3],l<d&&(o[y>>3]=l,d=l),h<f&&(o[b>>3]=h,f=h),l>p?o[t>>3]=l:l=p,h>u&&(o[w>>3]=h,u=h),g=h>0&h<g?h:g,m=h<0&h>m?h:m,s|=+A(+(h-c))>3.141592653589793,(0|(r=_+1|0))!=(0|v);)S=_,p=l,_=r,r=S;s&&(o[w>>3]=m,o[b>>3]=g)}}else i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,i[t+28>>2]=0;if(!((0|(r=0|i[(S=e+8|0)>>2]))<=0)){n=e+12|0,E=0;do{if(a=0|i[n>>2],s=E,b=t+((E=E+1|0)<<5)|0,w=0|i[a+(s<<3)>>2]){if(o[(_=t+(E<<5)+8|0)>>3]=17976931348623157e292,o[(e=t+(E<<5)+24|0)>>3]=17976931348623157e292,o[b>>3]=-17976931348623157e292,o[(x=t+(E<<5)+16|0)>>3]=-17976931348623157e292,(0|w)>0){for(v=0|i[a+(s<<3)+4>>2],g=17976931348623157e292,m=-17976931348623157e292,a=0,s=-1,y=0,d=17976931348623157e292,f=17976931348623157e292,h=-17976931348623157e292,u=-17976931348623157e292;l=+o[v+(y<<4)>>3],p=+o[v+(y<<4)+8>>3],c=+o[v+(((0|(s=s+2|0))==(0|w)?0:s)<<4)+8>>3],l<d&&(o[_>>3]=l,d=l),p<f&&(o[e>>3]=p,f=p),l>h?o[b>>3]=l:l=h,p>u&&(o[x>>3]=p,u=p),g=p>0&p<g?p:g,m=p<0&p>m?p:m,a|=+A(+(p-c))>3.141592653589793,(0|(s=y+1|0))!=(0|w);)P=y,y=s,h=l,s=P;a&&(o[x>>3]=m,o[e>>3]=g)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0,r=0|i[S>>2]}while((0|E)<(0|r))}}function ot(e,t,n){var r=0,o=0,s=0;if(!(0|nt(e|=0,t|=0,n|=0)))return 0|(o=0);if((0|i[(o=e+8|0)>>2])<=0)return 0|(o=1);for(r=e+12|0,e=0;;){if(s=e,e=e+1|0,0|nt((0|i[r>>2])+(s<<3)|0,t+(e<<5)|0,n)){e=0,r=6;break}if((0|e)>=(0|i[o>>2])){e=1,r=6;break}}return 6==(0|r)?0|e:0}function st(e,t,n,r,i){t|=0,n|=0,r|=0,i|=0;var s,a,A,l,u,c,d,f=0;l=+o[(e|=0)>>3],A=+o[t>>3]-l,a=+o[e+8>>3],s=+o[t+8>>3]-a,c=+o[n>>3],f=((f=+o[r>>3]-c)*(a-(d=+o[n+8>>3]))-(l-c)*(u=+o[r+8>>3]-d))/(A*u-s*f),o[i>>3]=l+A*f,o[i+8>>3]=a+s*f}function at(e,t){return t|=0,+o[(e|=0)>>3]!=+o[t>>3]?0|(t=0):0|(t=+o[e+8>>3]==+o[t+8>>3])}function At(e,t){t|=0;var n,r,i;return+((i=+o[(e|=0)>>3]-+o[t>>3])*i+(r=+o[e+8>>3]-+o[t+8>>3])*r+(n=+o[e+16>>3]-+o[t+16>>3])*n)}function lt(e,t,n){e|=0,n|=0;var r=0;(0|(t|=0))>0?(r=0|yt(t,4),i[e>>2]=r,r||E(23230,23253,40,23267)):i[e>>2]=0,i[e+4>>2]=t,i[e+8>>2]=0,i[e+12>>2]=n}function ut(e){var t,n,r,s=0,a=0,l=0,c=0;t=(e|=0)+4|0,n=e+12|0,r=e+8|0;e:for(;;){for(a=0|i[t>>2],s=0;;){if((0|s)>=(0|a))break e;if(l=0|i[e>>2],c=0|i[l+(s<<2)>>2])break;s=s+1|0}s=l+(~~(+A(+ +u(10,+ +(15-(0|i[n>>2])|0))*(+o[c>>3]+ +o[c+8>>3]))%+(0|a))>>>0<<2)|0,a=0|i[s>>2];t:do{if(0|a){if(l=c+32|0,(0|a)==(0|c))i[s>>2]=i[l>>2];else{if(!(s=0|i[(a=a+32|0)>>2]))break;for(;(0|s)!=(0|c);)if(!(s=0|i[(a=s+32|0)>>2]))break t;i[a>>2]=i[l>>2]}vt(c),i[r>>2]=(0|i[r>>2])-1}}while(0)}vt(0|i[e>>2])}function ct(e){var t,n=0,r=0;for(t=0|i[(e|=0)+4>>2],r=0;;){if((0|r)>=(0|t)){n=0,r=4;break}if(n=0|i[(0|i[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function dt(e,t){t|=0;var n=0,r=0,s=0,a=0;if(n=~~(+A(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,n=(0|i[e>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(a=1);a=t+32|0;do{if((0|r)!=(0|t)){if(!(n=0|i[r+32>>2]))return 0|(a=1);for(s=n;;){if((0|s)==(0|t)){s=8;break}if(!(n=0|i[s+32>>2])){n=1,s=10;break}r=s,s=n}if(8==(0|s)){i[r+32>>2]=i[a>>2];break}if(10==(0|s))return 0|n}else i[n>>2]=i[a>>2]}while(0);return vt(t),i[(a=e+8|0)>>2]=(0|i[a>>2])-1,0|(a=0)}function ft(e,t,n){e|=0,t|=0,n|=0;var r,s=0,a=0,l=0;(r=0|mt(40))||E(23283,23253,98,23296),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[(a=r+16|0)>>2]=i[n>>2],i[a+4>>2]=i[n+4>>2],i[a+8>>2]=i[n+8>>2],i[a+12>>2]=i[n+12>>2],i[r+32>>2]=0,a=~~(+A(+ +u(10,+ +(15-(0|i[e+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,a=(0|i[e>>2])+(a<<2)|0,s=0|i[a>>2];do{if(s){for(;!(0|ke(s,t)&&0|ke(s+16|0,n));)if(a=0|i[s+32>>2],!(0|i[(s=0==(0|a)?s:a)+32>>2])){l=10;break}if(10==(0|l)){i[s+32>>2]=r;break}return vt(r),0|(l=s)}i[a>>2]=r}while(0);return i[(l=e+8|0)>>2]=1+(0|i[l>>2]),0|(l=r)}function ht(e,t,n){t|=0,n|=0;var r=0,s=0;if(s=~~(+A(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(s=0|i[(0|i[e>>2])+(s<<2)>>2]))return 0|(n=0);if(!n){for(e=s;;){if(0|ke(e,t)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}if(10==(0|r))return 0|e}for(e=s;;){if(0|ke(e,t)&&0|ke(e+16|0,n)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}return 10==(0|r)?0|e:0}function pt(e,t){t|=0;var n=0;if(n=~~(+A(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(e=0|i[(0|i[e>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|ke(e,t)){t=5;break}if(!(e=0|i[e+32>>2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function gt(e){return 0|~~+function(e){return+ +Mt(+(e=+e))}(e=+e)}function mt(e){e|=0;var t,n=0,r=0,o=0,s=0,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0;t=M,M=M+16|0,h=t;do{if(e>>>0<245){if(e=(c=e>>>0<11?16:e+11&-8)>>>3,3&(r=(f=0|i[5829])>>>e)|0)return o=0|i[(r=(e=23356+((n=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|i[(s=o+8|0)>>2]))==(0|e)?i[5829]=f&~(1<<n):(i[a+12>>2]=e,i[r>>2]=a),_=n<<3,i[o+4>>2]=3|_,i[(_=o+_+4|0)>>2]=1|i[_>>2],M=t,0|(_=s);if(c>>>0>(d=0|i[5831])>>>0){if(0|r)return n=((n=r<<e&((n=2<<e)|0-n))&0-n)-1|0,a=0|i[(e=(n=23356+((o=((r=(n>>>=l=n>>>12&16)>>>5&8)|l|(a=(n>>>=r)>>>2&4)|(e=(n>>>=a)>>>1&2)|(o=(n>>>=e)>>>1&1))+(n>>>o)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(l=a+8|0)>>2]))==(0|n)?(e=f&~(1<<o),i[5829]=e):(i[r+12>>2]=n,i[e>>2]=r,e=f),A=(_=o<<3)-c|0,i[a+4>>2]=3|c,i[(s=a+c|0)+4>>2]=1|A,i[a+_>>2]=A,0|d&&(o=0|i[5834],r=23356+((n=d>>>3)<<1<<2)|0,e&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=A,i[5834]=s,M=t,0|(_=l);if(a=0|i[5830]){for(r=(a&0-a)-1|0,r=u=0|i[23620+(((o=(r>>>=s=r>>>12&16)>>>5&8)|s|(A=(r>>>=o)>>>2&4)|(l=(r>>>=A)>>>1&2)|(u=(r>>>=l)>>>1&1))+(r>>>u)<<2)>>2],l=u,u=(-8&i[u+4>>2])-c|0;(e=0|i[r+16>>2])||(e=0|i[r+20>>2]);)r=e,l=(s=(A=(-8&i[e+4>>2])-c|0)>>>0<u>>>0)?e:l,u=s?A:u;if((A=l+c|0)>>>0>l>>>0){s=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,e=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,e=o}i[e>>2]=0,r=n}else r=0|i[l+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|s){if(n=0|i[l+28>>2],(0|l)==(0|i[(e=23620+(n<<2)|0)>>2])){if(i[e>>2]=r,!r){i[5830]=a&~(1<<n);break}}else if(i[((0|i[(_=s+16|0)>>2])==(0|l)?_:s+20|0)>>2]=r,!r)break;i[r+24>>2]=s,0|(n=0|i[l+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[l+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return u>>>0<16?(_=u+c|0,i[l+4>>2]=3|_,i[(_=l+_+4|0)>>2]=1|i[_>>2]):(i[l+4>>2]=3|c,i[A+4>>2]=1|u,i[A+u>>2]=u,0|d&&(o=0|i[5834],r=23356+((n=d>>>3)<<1<<2)|0,(n=1<<n)&f?n=0|i[(e=r+8|0)>>2]:(i[5829]=n|f,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=u,i[5834]=A),M=t,0|(_=l+8|0)}f=c}else f=c}else f=c}else if(e>>>0<=4294967231)if(c=-8&(e=e+11|0),o=0|i[5830]){s=0-c|0,u=(e>>>=8)?c>>>0>16777215?31:c>>>((u=14-((l=((m=e<<(f=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|f|(u=((m<<=l)+245760|0)>>>16&2))+(m<<u>>>15)|0)+7|0)&1|u<<1:0,r=0|i[23620+(u<<2)>>2];e:do{if(r)for(e=0,l=c<<(31==(0|u)?0:25-(u>>>1)|0),a=0;;){if((A=(-8&i[r+4>>2])-c|0)>>>0<s>>>0){if(!A){e=r,s=0,m=65;break e}e=r,s=A}if(a=0==(0|(m=0|i[r+20>>2]))|(0|m)==(0|(r=0|i[r+16+(l>>>31<<2)>>2]))?a:m,!r){r=a,m=61;break}l<<=1}else r=0,e=0,m=61}while(0);if(61==(0|m)){if(0==(0|r)&0==(0|e)){if(!(e=((e=2<<u)|0-e)&o)){f=c;break}f=(e&0-e)-1|0,e=0,r=0|i[23620+(((a=(f>>>=A=f>>>12&16)>>>5&8)|A|(l=(f>>>=a)>>>2&4)|(u=(f>>>=l)>>>1&2)|(r=(f>>>=u)>>>1&1))+(f>>>r)<<2)>>2]}r?m=65:(l=e,A=s)}if(65==(0|m))for(a=r;;){if(s=(r=(f=(-8&i[a+4>>2])-c|0)>>>0<s>>>0)?f:s,e=r?a:e,(r=0|i[a+16>>2])||(r=0|i[a+20>>2]),!r){l=e,A=s;break}a=r}if(0!=(0|l)&&A>>>0<((0|i[5831])-c|0)>>>0&&(d=l+c|0)>>>0>l>>>0){a=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(s=n+20|0)>>2])n=r,e=s;else{if(!(r=0|i[(s=n+16|0)>>2]))break;n=r,e=s}i[e>>2]=0}else _=0|i[l+8>>2],i[_+12>>2]=n,i[n+8>>2]=_}while(0);do{if(a){if(e=0|i[l+28>>2],(0|l)==(0|i[(r=23620+(e<<2)|0)>>2])){if(i[r>>2]=n,!n){o&=~(1<<e),i[5830]=o;break}}else if(i[((0|i[(_=a+16|0)>>2])==(0|l)?_:a+20|0)>>2]=n,!n)break;i[n+24>>2]=a,0|(e=0|i[l+16>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),(e=0|i[l+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);e:do{if(A>>>0<16)_=A+c|0,i[l+4>>2]=3|_,i[(_=l+_+4|0)>>2]=1|i[_>>2];else{if(i[l+4>>2]=3|c,i[d+4>>2]=1|A,i[d+A>>2]=A,n=A>>>3,A>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=d,i[n+12>>2]=d,i[d+8>>2]=n,i[d+12>>2]=r;break}if(n=23620+((r=(n=A>>>8)?A>>>0>16777215?31:A>>>((r=14-((b=((_=n<<(w=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|w|(r=((_<<=b)+245760|0)>>>16&2))+(_<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[d+28>>2]=r,i[(e=d+16|0)+4>>2]=0,i[e>>2]=0,!(o&(e=1<<r))){i[5830]=o|e,i[n>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break}n=0|i[n>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|A)){for(o=A<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|A)){n=e;break t}o<<=1,n=e}i[r>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break e}}while(0);_=0|i[(w=n+8|0)>>2],i[_+12>>2]=d,i[w>>2]=d,i[d+8>>2]=_,i[d+12>>2]=n,i[d+24>>2]=0}}while(0);return M=t,0|(_=l+8|0)}f=c}else f=c;else f=-1}while(0);if((r=0|i[5831])>>>0>=f>>>0)return n=r-f|0,e=0|i[5834],n>>>0>15?(_=e+f|0,i[5834]=_,i[5831]=n,i[_+4>>2]=1|n,i[e+r>>2]=n,i[e+4>>2]=3|f):(i[5831]=0,i[5834]=0,i[e+4>>2]=3|r,i[(_=e+r+4|0)>>2]=1|i[_>>2]),M=t,0|(_=e+8|0);if((A=0|i[5832])>>>0>f>>>0)return b=A-f|0,i[5832]=b,w=(_=0|i[5835])+f|0,i[5835]=w,i[w+4>>2]=1|b,i[_+4>>2]=3|f,M=t,0|(_=_+8|0);if(0|i[5947]?e=0|i[5949]:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=-16&h^1431655768,e=4096),l=f+48|0,(c=(a=e+(u=f+47|0)|0)&(s=0-e|0))>>>0<=f>>>0)return M=t,0|(_=0);if(0|(e=0|i[5939])&&(h=(d=0|i[5937])+c|0)>>>0<=d>>>0|h>>>0>e>>>0)return M=t,0|(_=0);e:do{if(4&i[5940])n=0,m=143;else{r=0|i[5835];t:do{if(r){for(o=23764;!((h=0|i[o>>2])>>>0<=r>>>0&&(h+(0|i[o+4>>2])|0)>>>0>r>>>0);){if(!(e=0|i[o+8>>2])){m=128;break t}o=e}if((n=a-A&s)>>>0<2147483647)if((0|(e=0|It(0|n)))==((0|i[o>>2])+(0|i[o+4>>2])|0)){if(-1!=(0|e)){A=n,a=e,m=145;break e}}else o=e,m=136;else n=0}else m=128}while(0);do{if(128==(0|m))if(-1!=(0|(r=0|It(0)))&&(n=r,g=(n=(0==((g=(p=0|i[5948])+-1|0)&n|0)?0:(g+n&0-p)-n|0)+c|0)+(p=0|i[5937])|0,n>>>0>f>>>0&n>>>0<2147483647)){if(0|(h=0|i[5939])&&g>>>0<=p>>>0|g>>>0>h>>>0){n=0;break}if((0|(e=0|It(0|n)))==(0|r)){A=n,a=r,m=145;break e}o=e,m=136}else n=0}while(0);do{if(136==(0|m)){if(r=0-n|0,!(l>>>0>n>>>0&n>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){n=0;break}A=n,a=o,m=145;break e}if((e=u-n+(e=0|i[5949])&0-e)>>>0>=2147483647){A=n,a=o,m=145;break e}if(-1==(0|It(0|e))){It(0|r),n=0;break}A=e+n|0,a=o,m=145;break e}}while(0);i[5940]=4|i[5940],m=143}}while(0);if(143==(0|m)&&c>>>0<2147483647&&!(-1==(0|(b=0|It(0|c)))|1^(y=(v=(g=0|It(0))-b|0)>>>0>(f+40|0)>>>0)|b>>>0<g>>>0&-1!=(0|b)&-1!=(0|g)^1)&&(A=y?v:n,a=b,m=145),145==(0|m)){n=(0|i[5937])+A|0,i[5937]=n,n>>>0>(0|i[5938])>>>0&&(i[5938]=n),u=0|i[5835];e:do{if(u){for(n=23764;;){if((0|a)==((e=0|i[n>>2])+(r=0|i[n+4>>2])|0)){m=154;break}if(!(o=0|i[n+8>>2]))break;n=o}if(154==(0|m)&&(w=n+4|0,0==(8&i[n+12>>2]|0))&&a>>>0>u>>>0&e>>>0<=u>>>0){i[w>>2]=r+A,w=u+(b=0==(7&(b=u+8|0)|0)?0:0-b&7)|0,b=(_=(0|i[5832])+A|0)-b|0,i[5835]=w,i[5832]=b,i[w+4>>2]=1|b,i[u+_+4>>2]=40,i[5836]=i[5951];break}for(a>>>0<(0|i[5833])>>>0&&(i[5833]=a),r=a+A|0,n=23764;;){if((0|i[n>>2])==(0|r)){m=162;break}if(!(e=0|i[n+8>>2]))break;n=e}if(162==(0|m)&&0==(8&i[n+12>>2]|0)){i[n>>2]=a,i[(d=n+4|0)>>2]=(0|i[d>>2])+A,c=(d=a+(0==(7&(d=a+8|0)|0)?0:0-d&7)|0)+f|0,l=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-d-f|0,i[d+4>>2]=3|f;t:do{if((0|u)==(0|n))_=(0|i[5832])+l|0,i[5832]=_,i[5835]=c,i[c+4>>2]=1|_;else{if((0|i[5834])==(0|n)){_=(0|i[5831])+l|0,i[5831]=_,i[5834]=c,i[c+4>>2]=1|_,i[c+_>>2]=_;break}if(1==(3&(e=0|i[n+4>>2])|0)){A=-8&e,o=e>>>3;n:do{if(e>>>0<256){if(e=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<o);break}i[e+12>>2]=r,i[r+8>>2]=e;break}a=0|i[n+24>>2],e=0|i[n+12>>2];do{if((0|e)==(0|n)){if(e=0|i[(o=(r=n+16|0)+4|0)>>2])r=o;else if(!(e=0|i[r>>2])){e=0;break}for(;;)if(o=0|i[(s=e+20|0)>>2])e=o,r=s;else{if(!(o=0|i[(s=e+16|0)>>2]))break;e=o,r=s}i[r>>2]=0}else _=0|i[n+8>>2],i[_+12>>2]=e,i[e+8>>2]=_}while(0);if(!a)break;o=23620+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[o>>2])==(0|n)){if(i[o>>2]=e,0|e)break;i[5830]=i[5830]&~(1<<r);break n}if(i[((0|i[(_=a+16|0)>>2])==(0|n)?_:a+20|0)>>2]=e,!e)break n}while(0);if(i[e+24>>2]=a,0|(o=0|i[(r=n+16|0)>>2])&&(i[e+16>>2]=o,i[o+24>>2]=e),!(r=0|i[r+4>>2]))break;i[e+20>>2]=r,i[r+24>>2]=e}while(0);n=n+A|0,s=A+l|0}else s=l;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[c+4>>2]=1|s,i[c+s>>2]=s,n=s>>>3,s>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=c,i[n+12>>2]=c,i[c+8>>2]=n,i[c+12>>2]=r;break}n=s>>>8;do{if(n){if(s>>>0>16777215){o=31;break}o=s>>>((o=14-((b=((_=n<<(w=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|w|(o=((_<<=b)+245760|0)>>>16&2))+(_<<o>>>15)|0)+7|0)&1|o<<1}else o=0}while(0);if(n=23620+(o<<2)|0,i[c+28>>2]=o,i[(e=c+16|0)+4>>2]=0,i[e>>2]=0,!((e=0|i[5830])&(r=1<<o))){i[5830]=e|r,i[n>>2]=c,i[c+24>>2]=n,i[c+12>>2]=c,i[c+8>>2]=c;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|s)){n=e;break n}o<<=1,n=e}i[r>>2]=c,i[c+24>>2]=n,i[c+12>>2]=c,i[c+8>>2]=c;break t}}while(0);_=0|i[(w=n+8|0)>>2],i[_+12>>2]=c,i[w>>2]=c,i[c+8>>2]=_,i[c+12>>2]=n,i[c+24>>2]=0}}while(0);return M=t,0|(_=d+8|0)}for(n=23764;!((e=0|i[n>>2])>>>0<=u>>>0&&(_=e+(0|i[n+4>>2])|0)>>>0>u>>>0);)n=0|i[n+8>>2];n=(e=(e=(s=_+-47|0)+(0==(7&(e=s+8|0)|0)?0:0-e&7)|0)>>>0<(s=u+16|0)>>>0?u:e)+8|0,w=a+(b=0==(7&(b=a+8|0)|0)?0:0-b&7)|0,b=(r=A+-40|0)-b|0,i[5835]=w,i[5832]=b,i[w+4>>2]=1|b,i[a+r+4>>2]=40,i[5836]=i[5951],i[(r=e+4|0)>>2]=27,i[n>>2]=i[5941],i[n+4>>2]=i[5942],i[n+8>>2]=i[5943],i[n+12>>2]=i[5944],i[5941]=a,i[5942]=A,i[5944]=0,i[5943]=n,n=e+24|0;do{w=n,i[(n=n+4|0)>>2]=7}while((w+8|0)>>>0<_>>>0);if((0|e)!=(0|u)){if(a=e-u|0,i[r>>2]=-2&i[r>>2],i[u+4>>2]=1|a,i[e>>2]=a,n=a>>>3,a>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=u,i[n+12>>2]=u,i[u+8>>2]=n,i[u+12>>2]=r;break}if(r=23620+((o=(n=a>>>8)?a>>>0>16777215?31:a>>>((o=14-((b=((_=n<<(w=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|w|(o=((_<<=b)+245760|0)>>>16&2))+(_<<o>>>15)|0)+7|0)&1|o<<1:0)<<2)|0,i[u+28>>2]=o,i[u+20>>2]=0,i[s>>2]=0,!((n=0|i[5830])&(e=1<<o))){i[5830]=n|e,i[r>>2]=u,i[u+24>>2]=r,i[u+12>>2]=u,i[u+8>>2]=u;break}n=0|i[r>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|a)){for(o=a<<(31==(0|o)?0:25-(o>>>1)|0);e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|a)){n=e;break t}o<<=1,n=e}i[r>>2]=u,i[u+24>>2]=n,i[u+12>>2]=u,i[u+8>>2]=u;break e}}while(0);_=0|i[(w=n+8|0)>>2],i[_+12>>2]=u,i[w>>2]=u,i[u+8>>2]=_,i[u+12>>2]=n,i[u+24>>2]=0}}else 0==(0|(_=0|i[5833]))|a>>>0<_>>>0&&(i[5833]=a),i[5941]=a,i[5942]=A,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,w=a+(b=0==(7&(b=a+8|0)|0)?0:0-b&7)|0,b=(_=A+-40|0)-b|0,i[5835]=w,i[5832]=b,i[w+4>>2]=1|b,i[a+_+4>>2]=40,i[5836]=i[5951]}while(0);if((n=0|i[5832])>>>0>f>>>0)return b=n-f|0,i[5832]=b,w=(_=0|i[5835])+f|0,i[5835]=w,i[w+4>>2]=1|b,i[_+4>>2]=3|f,M=t,0|(_=_+8|0)}return i[(_=23312)>>2]=12,M=t,0|(_=0)}function vt(e){var t=0,n=0,r=0,o=0,s=0,a=0,A=0,l=0;if(e|=0){n=e+-8|0,o=0|i[5833],l=n+(t=-8&(e=0|i[e+-4>>2]))|0;do{if(1&e)A=n,a=n;else{if(r=0|i[n>>2],!(3&e))return;if(s=r+t|0,(a=n+(0-r)|0)>>>0<o>>>0)return;if((0|i[5834])==(0|a)){if(3!=(3&(t=0|i[(e=l+4|0)>>2])|0)){A=a,t=s;break}return i[5831]=s,i[e>>2]=-2&t,i[a+4>>2]=1|s,void(i[a+s>>2]=s)}if(n=r>>>3,r>>>0<256){if(e=0|i[a+8>>2],(0|(t=0|i[a+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<n),A=a,t=s;break}i[e+12>>2]=t,i[t+8>>2]=e,A=a,t=s;break}o=0|i[a+24>>2],e=0|i[a+12>>2];do{if((0|e)==(0|a)){if(e=0|i[(n=(t=a+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){e=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0}else A=0|i[a+8>>2],i[A+12>>2]=e,i[e+8>>2]=A}while(0);if(o){if(t=0|i[a+28>>2],(0|i[(n=23620+(t<<2)|0)>>2])==(0|a)){if(i[n>>2]=e,!e){i[5830]=i[5830]&~(1<<t),A=a,t=s;break}}else if(i[((0|i[(A=o+16|0)>>2])==(0|a)?A:o+20|0)>>2]=e,!e){A=a,t=s;break}i[e+24>>2]=o,0|(n=0|i[(t=a+16|0)>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(t=0|i[t+4>>2])?(i[e+20>>2]=t,i[t+24>>2]=e,A=a,t=s):(A=a,t=s)}else A=a,t=s}}while(0);if(!(a>>>0>=l>>>0)&&1&(r=0|i[(e=l+4|0)>>2])){if(2&r)i[e>>2]=-2&r,i[A+4>>2]=1|t,i[a+t>>2]=t,o=t;else{if((0|i[5835])==(0|l)){if(l=(0|i[5832])+t|0,i[5832]=l,i[5835]=A,i[A+4>>2]=1|l,(0|A)!=(0|i[5834]))return;return i[5834]=0,void(i[5831]=0)}if((0|i[5834])==(0|l))return l=(0|i[5831])+t|0,i[5831]=l,i[5834]=a,i[A+4>>2]=1|l,void(i[a+l>>2]=l);o=(-8&r)+t|0,n=r>>>3;do{if(r>>>0<256){if(t=0|i[l+8>>2],(0|(e=0|i[l+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<n);break}i[t+12>>2]=e,i[e+8>>2]=t;break}s=0|i[l+24>>2],e=0|i[l+12>>2];do{if((0|e)==(0|l)){if(e=0|i[(n=(t=l+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){n=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0,n=e}else n=0|i[l+8>>2],i[n+12>>2]=e,i[e+8>>2]=n,n=e}while(0);if(0|s){if(e=0|i[l+28>>2],(0|i[(t=23620+(e<<2)|0)>>2])==(0|l)){if(i[t>>2]=n,!n){i[5830]=i[5830]&~(1<<e);break}}else if(i[((0|i[(r=s+16|0)>>2])==(0|l)?r:s+20|0)>>2]=n,!n)break;i[n+24>>2]=s,0|(t=0|i[(e=l+16|0)>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),0|(e=0|i[e+4>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);if(i[A+4>>2]=1|o,i[a+o>>2]=o,(0|A)==(0|i[5834]))return void(i[5831]=o)}if(e=o>>>3,o>>>0<256)return n=23356+(e<<1<<2)|0,(t=0|i[5829])&(e=1<<e)?e=0|i[(t=n+8|0)>>2]:(i[5829]=t|e,e=n,t=n+8|0),i[t>>2]=A,i[e+12>>2]=A,i[A+8>>2]=e,void(i[A+12>>2]=n);e=23620+((r=(e=o>>>8)?o>>>0>16777215?31:o>>>((r=14-((s=((l=e<<(a=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|a|(r=((l<<=s)+245760|0)>>>16&2))+(l<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[A+28>>2]=r,i[A+20>>2]=0,i[A+16>>2]=0,t=0|i[5830],n=1<<r;e:do{if(t&n){e=0|i[e>>2];t:do{if((-8&i[e+4>>2]|0)!=(0|o)){for(r=o<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(n=e+16+(r>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|o)){e=t;break t}r<<=1,e=t}i[n>>2]=A,i[A+24>>2]=e,i[A+12>>2]=A,i[A+8>>2]=A;break e}}while(0);l=0|i[(a=e+8|0)>>2],i[l+12>>2]=A,i[a>>2]=A,i[A+8>>2]=l,i[A+12>>2]=e,i[A+24>>2]=0}else i[5830]=t|n,i[e>>2]=A,i[A+24>>2]=e,i[A+12>>2]=A,i[A+8>>2]=A}while(0);if(l=(0|i[5837])-1|0,i[5837]=l,!(0|l)){for(e=23772;e=0|i[e>>2];)e=e+8|0;i[5837]=-1}}}}function yt(e,t){t|=0;var n=0;return(e|=0)?(n=0|y(t,e),(t|e)>>>0>65535&&(n=(0|(n>>>0)/(e>>>0))==(0|t)?n:-1)):n=0,(e=0|mt(n))&&3&i[e+-4>>2]?(Tt(0|e,0,0|n),0|e):0|e}function bt(e,t,n,r){return 0|(_(0|(r=(t|=0)-(r|=0)-((n|=0)>>>0>(e|=0)>>>0|0)>>>0)),e-n>>>0|0)}function wt(e){return 0|((e|=0)?31-(0|w(e^e-1))|0:32)}function _t(e,t,n,r,o){o|=0;var s=0,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0;if(c=e|=0,a=n|=0,A=f=r|=0,!(u=l=t|=0))return s=0!=(0|o),A?s?(i[o>>2]=0|e,i[o+4>>2]=0&t,o=0,0|(_(0|(f=0)),o)):(o=0,0|(_(0|(f=0)),o)):(s&&(i[o>>2]=(c>>>0)%(a>>>0),i[o+4>>2]=0),o=(c>>>0)/(a>>>0)>>>0,0|(_(0|(f=0)),o));s=0==(0|A);do{if(a){if(!s){if((s=(0|w(0|A))-(0|w(0|u))|0)>>>0<=31){a=d=s+1|0,e=c>>>(d>>>0)&(t=s-31>>31)|u<<(A=31-s|0),t&=u>>>(d>>>0),s=0,A=c<<A;break}return o?(i[o>>2]=0|e,i[o+4>>2]=l|0&t,o=0,0|(_(0|(f=0)),o)):(o=0,0|(_(0|(f=0)),o))}if((s=a-1|0)&a|0){a=A=33+(0|w(0|a))-(0|w(0|u))|0,e=(d=32-A|0)-1>>31&u>>>((h=A-32|0)>>>0)|(u<<d|c>>>(A>>>0))&(t=h>>31),t&=u>>>(A>>>0),s=c<<(p=64-A|0)&(l=d>>31),A=(u<<p|c>>>(h>>>0))&l|c<<d&A-33>>31;break}return 0|o&&(i[o>>2]=s&c,i[o+4>>2]=0),1==(0|a)?(p=0|e,0|(_(0|(h=l|0&t)),p)):(h=u>>>((p=0|wt(0|a))>>>0)|0,p=u<<32-p|c>>>(p>>>0)|0,0|(_(0|h),p))}if(s)return 0|o&&(i[o>>2]=(u>>>0)%(a>>>0),i[o+4>>2]=0),p=(u>>>0)/(a>>>0)>>>0,0|(_(0|(h=0)),p);if(!c)return 0|o&&(i[o>>2]=0,i[o+4>>2]=(u>>>0)%(A>>>0)),p=(u>>>0)/(A>>>0)>>>0,0|(_(0|(h=0)),p);if(!((s=A-1|0)&A))return 0|o&&(i[o>>2]=0|e,i[o+4>>2]=s&u|0&t),h=0,p=u>>>((0|wt(0|A))>>>0),0|(_(0|h),p);if((s=(0|w(0|A))-(0|w(0|u))|0)>>>0<=30){a=t=s+1|0,e=u<<(A=31-s|0)|c>>>(t>>>0),t=u>>>(t>>>0),s=0,A=c<<A;break}return o?(i[o>>2]=0|e,i[o+4>>2]=l|0&t,p=0,0|(_(0|(h=0)),p)):(p=0,0|(_(0|(h=0)),p))}while(0);if(a){u=0|function(e,t,n,r){return 0|(_((t|=0)+(r|=0)+((n=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|n)}(0|(d=0|n),0|(c=f|0&r),-1,-1),n=0|x(),l=A,A=0;do{r=l,l=s>>>31|l<<1,s=A|s<<1,bt(0|u,0|n,0|(r=e<<1|r>>>31|0),0|(f=e>>>31|t<<1|0)),A=1&(h=(p=0|x())>>31|((0|p)<0?-1:0)<<1),e=0|bt(0|r,0|f,h&d|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&c|0),t=0|x(),a=a-1|0}while(0!=(0|a));u=l,l=0}else u=A,l=0,A=0;return a=0,0|o&&(i[o>>2]=e,i[o+4>>2]=t),p=-2&(s<<1|0)|A,0|(_(0|(h=(0|s)>>>31|(u|a)<<1|0&(a<<1|s>>>31)|l)),p)}function xt(e,t,n,r){var o,s;return s=M,M=M+16|0,_t(e|=0,t|=0,n|=0,r|=0,o=0|s),M=s,0|(_(0|i[o+4>>2]),0|i[o>>2])}function Et(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(_(t>>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(_(0),t>>>n-32|0)}function St(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(_(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(_(e<<n-32|0),0)}function Pt(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+b(+e,+t)}function kt(e){return(e=+e)>=0?+a(e+.5):+v(e-.5)}function Ct(e,t,n){e|=0,t|=0;var o,s,a=0;if((0|(n|=0))>=8192)return k(0|e,0|t,0|n),0|e;if(s=0|e,o=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|s;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(a=(n=-4&o|0)-64|0;(0|e)<=(0|a);)i[e>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2],i[e+16>>2]=i[t+16>>2],i[e+20>>2]=i[t+20>>2],i[e+24>>2]=i[t+24>>2],i[e+28>>2]=i[t+28>>2],i[e+32>>2]=i[t+32>>2],i[e+36>>2]=i[t+36>>2],i[e+40>>2]=i[t+40>>2],i[e+44>>2]=i[t+44>>2],i[e+48>>2]=i[t+48>>2],i[e+52>>2]=i[t+52>>2],i[e+56>>2]=i[t+56>>2],i[e+60>>2]=i[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|n);)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0}else for(n=o-4|0;(0|e)<(0|n);)r[e>>0]=0|r[t>>0],r[e+1>>0]=0|r[t+1>>0],r[e+2>>0]=0|r[t+2>>0],r[e+3>>0]=0|r[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|o);)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0;return 0|s}function Tt(e,t,n){t|=0;var o,s=0,a=0,A=0;if(o=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)r[e>>0]=t,e=e+1|0;for(A=t|t<<8|t<<16|t<<24,a=(s=-4&o|0)-64|0;(0|e)<=(0|a);)i[e>>2]=A,i[e+4>>2]=A,i[e+8>>2]=A,i[e+12>>2]=A,i[e+16>>2]=A,i[e+20>>2]=A,i[e+24>>2]=A,i[e+28>>2]=A,i[e+32>>2]=A,i[e+36>>2]=A,i[e+40>>2]=A,i[e+44>>2]=A,i[e+48>>2]=A,i[e+52>>2]=A,i[e+56>>2]=A,i[e+60>>2]=A,e=e+64|0;for(;(0|e)<(0|s);)i[e>>2]=A,e=e+4|0}for(;(0|e)<(0|o);)r[e>>0]=t,e=e+1|0;return o-n|0}function Mt(e){return(e=+e)>=0?+a(e+.5):+v(e-.5)}function It(e){e|=0;var t,n,r;return r=0|P(),(0|e)>0&(0|(t=(n=0|i[s>>2])+e|0))<(0|n)|(0|t)<0?(T(0|t),S(12),-1):(0|t)>(0|r)&&!(0|C(0|t))?(S(12),-1):(i[s>>2]=t,0|n)}return{___uremdi3:xt,_bitshift64Lshr:Et,_bitshift64Shl:St,_calloc:yt,_cellAreaKm2:function(e,t){var n,r,o,s=0;if(o=M,M=M+192|0,r=o,Ge(e|=0,t|=0,n=o+168|0),He(e,t,r),(0|(t=0|i[r>>2]))>0){if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1!=(0|t)){e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+(((0|(e=e+1|0))%(0|t)|0)<<4)|0,n)}while((0|e)<(0|t))}}else s=0;return M=o,6371.007180918475*s*6371.007180918475},_cellAreaM2:function(e,t){var n,r,o,s=0;if(o=M,M=M+192|0,r=o,Ge(e|=0,t|=0,n=o+168|0),He(e,t,r),(0|(t=0|i[r>>2]))>0){if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1!=(0|t)){e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+(((0|(e=e+1|0))%(0|t)|0)<<4)|0,n)}while((0|e)<(0|t))}}else s=0;return M=o,6371.007180918475*s*6371.007180918475*1e3*1e3},_cellAreaRads2:function(e,t){var n,r,o,s=0;if(o=M,M=M+192|0,r=o,Ge(e|=0,t|=0,n=o+168|0),He(e,t,r),(0|(t=0|i[r>>2]))<=0)return M=o,+(s=0);if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1==(0|t))return M=o,+s;e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+(((0|(e=e+1|0))%(0|t)|0)<<4)|0,n)}while((0|e)<(0|t));return M=o,+s},_compact:function(e,t,n){t|=0;var r,o=0,s=0,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,E=0,S=0,P=0;if(!(n|=0))return 0|(S=0);if(o=0|i[(s=e|=0)>>2],!0&0==(15728640&(s=0|i[s+4>>2])|0)){if((0|n)<=0)return 0|(S=0);if(i[(S=t)>>2]=o,i[S+4>>2]=s,1==(0|n))return 0|(S=0);o=1;do{E=0|i[(_=e+(o<<3)|0)+4>>2],i[(S=t+(o<<3)|0)>>2]=i[_>>2],i[S+4>>2]=E,o=o+1|0}while((0|o)!=(0|n));return 0|(o=0)}if(!(E=0|mt(_=n<<3)))return 0|(S=-3);if(Ct(0|E,0|e,0|_),!(r=0|yt(n,8)))return vt(E),0|(S=-3);o=n;e:for(;;){b=0|Et(0|(d=0|i[(A=E)>>2]),0|(A=0|i[A+4>>2]),52),x(),w=(b&=15)+-1|0,y=(0|o)>0;t:do{if(y){if(v=((0|o)<0)<<31>>31,g=0|St(0|w,0,52),m=0|x(),w>>>0>15)for(s=0,e=d,n=A;;){if(!(0==(0|e)&0==(0|n))){if(a=0|Et(0|e,0|n,52),x(),l=(0|(a&=15))<(0|w),a=(0|a)==(0|w),n=0|xt(0|(c=l?0:a?e:0),0|(e=l?0:a?n:0),0|o,0|v),x(),0==(0|(u=0|i[(l=a=r+(n<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2])))n=c;else for(g=0,p=n,h=l,n=c;;){if((0|g)>(0|o)){S=41;break e}if((0|u)==(0|n)&(-117440513&h|0)==(0|e)){c=0|Et(0|u,0|h,56),x(),f=(c&=7)+1|0,m=0|Et(0|u,0|h,45),x();n:do{if(0|B(127&m)){if(u=0|Et(0|u,0|h,52),x(),!(u&=15)){l=6;break}for(l=1;;){if(!(0==((m=0|St(7,0,3*(15-l|0)|0))&n|0)&0==((0|x())&e|0))){l=7;break n}if(!(l>>>0<u>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((c+2|0)>>>0>l>>>0){S=51;break e}m=0|St(0|f,0,56),e=0|x()|-117440513&e,i[(l=a)>>2]=0,i[l+4>>2]=0,l=p,n|=m}else l=(p+1|0)%(0|o)|0;if(0==(0|(u=0|i[(h=a=r+(l<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2])))break;g=g+1|0,p=l}i[(m=a)>>2]=n,i[m+4>>2]=e}if((0|(s=s+1|0))>=(0|o))break t;e=0|i[(n=E+(s<<3)|0)>>2],n=0|i[n+4>>2]}for(s=0,e=d,n=A;;){if(!(0==(0|e)&0==(0|n))){if(l=0|Et(0|e,0|n,52),x(),(0|(l&=15))>=(0|w)){if((0|l)!=(0|w)&&(e|=g,n=-15728641&n|m,l>>>0>=b>>>0)){a=w;do{p=0|St(7,0,3*(14-a|0)|0),a=a+1|0,e|=p,n=0|x()|n}while(a>>>0<l>>>0)}}else e=0,n=0;if(l=0|xt(0|e,0|n,0|o,0|v),x(),!(0==(0|(c=0|i[(u=a=r+(l<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2]))))for(p=0;;){if((0|p)>(0|o)){S=41;break e}if((0|c)==(0|e)&(-117440513&u|0)==(0|n)){f=0|Et(0|c,0|u,56),x(),h=(f&=7)+1|0,P=0|Et(0|c,0|u,45),x();n:do{if(0|B(127&P)){if(c=0|Et(0|c,0|u,52),x(),!(c&=15)){u=6;break}for(u=1;;){if(!(0==((P=0|St(7,0,3*(15-u|0)|0))&e|0)&0==((0|x())&n|0))){u=7;break n}if(!(u>>>0<c>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((f+2|0)>>>0>u>>>0){S=51;break e}P=0|St(0|h,0,56),n=0|x()|-117440513&n,i[(h=a)>>2]=0,i[h+4>>2]=0,e|=P}else l=(l+1|0)%(0|o)|0;if(0==(0|(c=0|i[(u=a=r+(l<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2])))break;p=p+1|0}i[(P=a)>>2]=e,i[P+4>>2]=n}if((0|(s=s+1|0))>=(0|o))break t;e=0|i[(n=E+(s<<3)|0)>>2],n=0|i[n+4>>2]}}}while(0);if((o+5|0)>>>0<11){S=99;break}if(!(m=0|yt((0|o)/6|0,8))){S=58;break}t:do{if(y){p=0,h=0;do{if(!(0==(0|(s=0|i[(e=l=r+(p<<3)|0)>>2]))&0==(0|(e=0|i[e+4>>2])))){u=0|Et(0|s,0|e,56),x(),n=(u&=7)+1|0,c=-117440513&e,P=0|Et(0|s,0|e,45),x();n:do{if(0|B(127&P)){if(f=0|Et(0|s,0|e,52),x(),0|(f&=15))for(a=1;;){if(!(0==(s&(P=0|St(7,0,3*(15-a|0)|0))|0)&0==(c&(0|x())|0)))break n;if(!(a>>>0<f>>>0))break;a=a+1|0}s|=e=0|St(0|n,0,56),e=0|x()|c,i[(n=l)>>2]=s,i[n+4>>2]=e,n=u+2|0}}while(0);7==(0|n)&&(i[(P=m+(h<<3)|0)>>2]=s,i[P+4>>2]=-117440513&e,h=h+1|0)}p=p+1|0}while((0|p)!=(0|o));if(y){if(g=((0|o)<0)<<31>>31,f=0|St(0|w,0,52),p=0|x(),w>>>0>15)for(e=0,s=0;;){do{if(!(0==(0|d)&0==(0|A))){for(u=0|Et(0|d,0|A,52),x(),a=(0|(u&=15))<(0|w),u=(0|u)==(0|w),a=0|xt(0|(l=a?0:u?d:0),0|(u=a?0:u?A:0),0|o,0|g),x(),n=0;;){if((0|n)>(0|o)){S=98;break e}if((-117440513&(c=0|i[(P=r+(a<<3)|0)+4>>2])|0)==(0|u)&&(0|i[P>>2])==(0|l)){S=70;break}if((0|i[(P=r+((a=(a+1|0)%(0|o)|0)<<3)|0)>>2])==(0|l)&&(0|i[P+4>>2])==(0|u))break;n=n+1|0}if(70==(0|S)&&(S=0,!0&100663296==(117440512&c|0)))break;i[(P=t+(s<<3)|0)>>2]=d,i[P+4>>2]=A,s=s+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=h;break t}d=0|i[(A=E+(e<<3)|0)>>2],A=0|i[A+4>>2]}for(e=0,s=0;;){do{if(!(0==(0|d)&0==(0|A))){if(u=0|Et(0|d,0|A,52),x(),(0|(u&=15))>=(0|w))if((0|u)!=(0|w))if(n=d|f,a=-15728641&A|p,u>>>0<b>>>0)u=a;else{l=w;do{P=0|St(7,0,3*(14-l|0)|0),l=l+1|0,n|=P,a=0|x()|a}while(l>>>0<u>>>0);u=a}else n=d,u=A;else n=0,u=0;for(l=0|xt(0|n,0|u,0|o,0|g),x(),a=0;;){if((0|a)>(0|o)){S=98;break e}if((-117440513&(c=0|i[(P=r+(l<<3)|0)+4>>2])|0)==(0|u)&&(0|i[P>>2])==(0|n)){S=93;break}if((0|i[(P=r+((l=(l+1|0)%(0|o)|0)<<3)|0)>>2])==(0|n)&&(0|i[P+4>>2])==(0|u))break;a=a+1|0}if(93==(0|S)&&(S=0,!0&100663296==(117440512&c|0)))break;i[(P=t+(s<<3)|0)>>2]=d,i[P+4>>2]=A,s=s+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=h;break t}d=0|i[(A=E+(e<<3)|0)>>2],A=0|i[A+4>>2]}}else s=0,o=h}else s=0,o=0}while(0);if(Tt(0|r,0,0|_),Ct(0|E,0|m,o<<3|0),vt(m),!o)break;t=t+(s<<3)|0}return 41==(0|S)?(vt(E),vt(r),0|(P=-1)):51==(0|S)?(vt(E),vt(r),0|(P=-2)):58==(0|S)?(vt(E),vt(r),0|(P=-3)):98==(0|S)?(vt(m),vt(E),vt(r),0|(P=-1)):(99==(0|S)&&Ct(0|t,0|E,o<<3|0),vt(E),vt(r),0|(P=0))},_destroyLinkedPolygon:function(e){var t=0,n=0,r=0,o=0;if(e|=0)for(r=1;;){if(0|(t=0|i[e>>2]))do{if(0|(n=0|i[t>>2]))do{o=n,n=0|i[n+16>>2],vt(o)}while(0!=(0|n));o=t,t=0|i[t+8>>2],vt(o)}while(0!=(0|t));if(t=e,e=0|i[e+8>>2],r||vt(t),!e)break;r=0}},_edgeLengthKm:function(e){return+ +o[20752+((e|=0)<<3)>>3]},_edgeLengthM:function(e){return+ +o[20880+((e|=0)<<3)>>3]},_emscripten_replace_memory:function(e){return r=new Int8Array(e),i=new Int32Array(e),o=new Float64Array(e),n=e,!0},_exactEdgeLengthKm:function(e,t){var n,r,s=0,a=0,A=0,u=0,f=0,h=0;if(r=M,M=M+176|0,qe(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return M=r,+(A=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],A=+o[n+16>>3];do{f=a,a=+o[n+8+((e=e+1|0)<<4)>>3],h=+d(.5*(a-f)),u=A,A=+o[n+8+(e<<4)+8>>3],u=h*h+(u=+d(.5*(A-u)))*(+c(+f)*+c(+a)*u),s+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)!=(0|t));return M=r,+(h=6371.007180918475*s)},_exactEdgeLengthM:function(e,t){var n,r,s=0,a=0,A=0,u=0,f=0,h=0;if(r=M,M=M+176|0,qe(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return M=r,+(A=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],A=+o[n+16>>3];do{f=a,a=+o[n+8+((e=e+1|0)<<4)>>3],h=+d(.5*(a-f)),u=A,A=+o[n+8+(e<<4)+8>>3],u=h*h+(u=+d(.5*(A-u)))*(+c(+f)*+c(+a)*u),s+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)!=(0|t));return M=r,+(h=6371.007180918475*s*1e3)},_exactEdgeLengthRads:function(e,t){var n,r,s=0,a=0,A=0,u=0,f=0,h=0;if(r=M,M=M+176|0,qe(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return M=r,+(A=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],A=+o[n+16>>3];do{f=a,a=+o[n+8+((e=e+1|0)<<4)>>3],h=+d(.5*(a-f)),u=A,A=+o[n+8+(e<<4)+8>>3],u=h*h+(u=+d(.5*(A-u)))*(+c(+a)*+c(+f)*u),s+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)<(0|t));return M=r,+s},_experimentalH3ToLocalIj:function(e,t,n,r,i){var o,s;return i|=0,s=M,M=M+16|0,(e=0|Je(e|=0,t|=0,n|=0,r|=0,o=s))||(fe(o,i),e=0),M=s,0|e},_experimentalLocalIjToH3:function(e,t,n,r){var i,o;return e|=0,t|=0,r|=0,i=M,M=M+16|0,he(n|=0,o=i),r=0|et(e,t,o,r),M=i,0|r},_free:vt,_geoToH3:Ue,_getDestinationH3IndexFromUnidirectionalEdge:function(e,t){e|=0;var n,r,o=0;return n=M,M=M+16|0,o=n,!0&268435456==(2013265920&(t|=0)|0)?(r=0|Et(0|e,0|t,56),x(),i[o>>2]=0,o=0|O(e,-2130706433&t|134217728,7&r,o),t=0|x(),_(0|t),M=n,0|o):(o=0,_(0|(t=0)),M=n,0|o)},_getH3IndexesFromUnidirectionalEdge:function(e,t,n){e|=0;var r,o,s,a,A=0;s=M,M=M+16|0,r=s,a=!0&268435456==(2013265920&(t|=0)|0),o=-2130706433&t|134217728,i[(A=n|=0)>>2]=a?e:0,i[A+4>>2]=a?o:0,a?(t=0|Et(0|e,0|t,56),x(),i[r>>2]=0,e=0|O(e,o,7&t,r),t=0|x()):(e=0,t=0),i[(A=n+8|0)>>2]=e,i[A+4>>2]=t,M=s},_getH3UnidirectionalEdge:function(e,t,n,r){var o,s,a=0,A=0,l=0,u=0,c=0;if(s=M,M=M+16|0,o=s,!(0|$e(e|=0,t|=0,n|=0,r|=0)))return u=0,_(0|(l=0)),M=s,0|u;for(l=-2130706433&t,a=(a=0==(0|Oe(e,t)))?1:2;i[o>>2]=0,A=a+1|0,!((0|(c=0|O(e,t,a,o)))==(0|n)&(0|x())==(0|r));){if(!(A>>>0<7)){a=0,e=0,u=6;break}a=A}return 6==(0|u)?(_(0|a),M=s,0|e):(c=0|St(0|a,0,56),u=0|l|x()|268435456,c|=e,_(0|u),M=s,0|c)},_getH3UnidirectionalEdgeBoundary:qe,_getH3UnidirectionalEdgesFromHexagon:function(e,t,n){n|=0;var r,o=0;r=0==(0|Oe(e|=0,t|=0)),t&=-2130706433,i[(o=n)>>2]=r?e:0,i[o+4>>2]=r?285212672|t:0,i[(o=n+8|0)>>2]=e,i[o+4>>2]=301989888|t,i[(o=n+16|0)>>2]=e,i[o+4>>2]=318767104|t,i[(o=n+24|0)>>2]=e,i[o+4>>2]=335544320|t,i[(o=n+32|0)>>2]=e,i[o+4>>2]=352321536|t,i[(n=n+40|0)>>2]=e,i[n+4>>2]=369098752|t},_getOriginH3IndexFromUnidirectionalEdge:function(e,t){var n;return e|=0,_(0|((n=!0&268435456==(2013265920&(t|=0)|0))?-2130706433&t|134217728:0)),0|(n?e:0)},_getPentagonIndexes:Qe,_getRes0Indexes:function(e){e|=0;var t=0,n=0,r=0;t=0;do{St(0|t,0,45),r=134225919|x(),i[(n=e+(t<<3)|0)>>2]=-1,i[n+4>>2]=r,t=t+1|0}while(122!=(0|t))},_h3Distance:function(e,t,n,r){var i,o,s;return n|=0,r|=0,s=M,M=M+32|0,o=s,e=0==(0|Je(e|=0,t|=0,e,t,i=s+12|0))&&0==(0|Je(e,t,n,r,o))?0|de(i,o):-1,M=s,0|e},_h3GetBaseCell:Me,_h3GetFaces:function e(t,n,r){r|=0;var o,s=0,a=0,A=0,l=0,u=0,c=0,d=0,f=0;o=M,M=M+128|0,d=o+112|0,A=o+96|0,f=o,a=0|Et(0|(t|=0),0|(n|=0),52),x(),u=15&a,i[d>>2]=u,l=0|Et(0|t,0|n,45),x(),l&=127;e:do{if(0|B(l)){if(0|u)for(s=1;;){if(!(0==((c=0|St(7,0,3*(15-s|0)|0))&t|0)&0==((0|x())&n|0))){a=0;break e}if(!(s>>>0<u>>>0))break;s=s+1|0}if(!(1&a))return c=0|St(u+1|0,0,52),f=0|x()|-15728641&n,e((c|t)&~(d=0|St(7,0,3*(14-u|0)|0)),f&~(0|x()),r),void(M=o);a=1}else a=0}while(0);We(t,n,A),a?(we(A,d,f),c=5):(Se(A,d,f),c=6);e:do{if(0|B(l))if(u)for(s=1;;){if(!(0==((l=0|St(7,0,3*(15-s|0)|0))&t|0)&0==((0|x())&n|0))){s=8;break e}if(!(s>>>0<u>>>0)){s=20;break}s=s+1|0}else s=20;else s=8}while(0);if(Tt(0|r,-1,0|s),a){a=0;do{for(xe(A=f+(a<<4)|0,0|i[d>>2]),A=0|i[A>>2],s=0;!(-1==(0|(u=0|i[(l=r+(s<<2)|0)>>2]))|(0|u)==(0|A));)s=s+1|0;i[l>>2]=A,a=a+1|0}while((0|a)!=(0|c))}else{a=0;do{for(_e(A=f+(a<<4)|0,0|i[d>>2],0,1),A=0|i[A>>2],s=0;!(-1==(0|(u=0|i[(l=r+(s<<2)|0)>>2]))|(0|u)==(0|A));)s=s+1|0;i[l>>2]=A,a=a+1|0}while((0|a)!=(0|c))}M=o},_h3GetResolution:function(e,t){return t=0|Et(0|(e|=0),0|(t|=0),52),x(),15&t|0},_h3IndexesAreNeighbors:$e,_h3IsPentagon:Oe,_h3IsResClassIII:function(e,t){return t=0|Et(0|(e|=0),0|(t|=0),52),x(),1&t|0},_h3IsValid:Ie,_h3Line:function(e,t,n,r,o){n|=0,r|=0,o|=0;var s,a=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,x=0,E=0;if(s=M,M=M+48|0,l=s+12|0,x=s,0==(0|Je(e|=0,t|=0,e,t,a=s+24|0))&&0==(0|Je(e,t,n,r,l))){if((0|(_=0|de(a,l)))<0)return M=s,0|(x=_);for(i[a>>2]=0,i[a+4>>2]=0,i[a+8>>2]=0,i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,Je(e,t,e,t,a),Je(e,t,n,r,l),pe(a),pe(l),_?(g=+(0|_),w=a,n=f=0|i[a>>2],r=h=0|i[(y=a+4|0)>>2],a=p=0|i[(b=a+8|0)>>2],m=+((0|i[l>>2])-f|0)/g,v=+((0|i[l+4>>2])-h|0)/g,g=+((0|i[l+8>>2])-p|0)/g):(y=r=a+4|0,b=p=a+8|0,w=a,n=0|i[a>>2],r=0|i[r>>2],a=0|i[p>>2],m=0,v=0,g=0),i[x>>2]=n,i[(p=x+4|0)>>2]=r,i[(h=x+8|0)>>2]=a,f=0;;){E=m*(c=+(0|f))+ +(0|n),u=v*c+ +(0|i[y>>2]),c=g*c+ +(0|i[b>>2]),r=~~+kt(+E),l=~~+kt(+u),n=~~+kt(+c),E=+A(+(+(0|r)-E)),u=+A(+(+(0|l)-u)),c=+A(+(+(0|n)-c));do{if(!(E>u&E>c)){if(d=0-r|0,u>c){a=d-n|0;break}a=l,n=d-l|0;break}r=0-(l+n)|0,a=l}while(0);if(i[x>>2]=r,i[p>>2]=a,i[h>>2]=n,ge(x),et(e,t,x,o+(f<<3)|0),(0|f)==(0|_))break;f=f+1|0,n=0|i[w>>2]}return M=s,0|(x=0)}return M=s,0|(x=-1)},_h3LineSize:function(e,t,n,r){var i,o,s;return n|=0,r|=0,s=M,M=M+32|0,o=s,e=0==(0|Je(e|=0,t|=0,e,t,i=s+12|0))&&0==(0|Je(e,t,n,r,o))?0|de(i,o):-1,M=s,(e>>>31^1)+e|0},_h3SetToLinkedGeo:function(e,t,n){n|=0;var r,o,s,a=0;if(s=M,M=M+32|0,r=s,function(e,t,n){e|=0,n|=0;var r,o,s=0,a=0,A=0,l=0,u=0;if(o=M,M=M+176|0,r=o,(0|(t|=0))<1)return lt(n,0,0),void(M=o);l=0|Et(0|i[(l=e)>>2],0|i[l+4>>2],52),x(),lt(n,(0|t)>6?t:6,15&l),l=0;do{if(He(0|i[(s=e+(l<<3)|0)>>2],0|i[s+4>>2],r),(0|(s=0|i[r>>2]))>0){u=0;do{A=r+8+(u<<4)|0,(a=0|ht(n,s=r+8+(((0|(u=u+1|0))%(0|s)|0)<<4)|0,A))?dt(n,a):ft(n,A,s),s=0|i[r>>2]}while((0|u)<(0|s))}l=l+1|0}while((0|l)!=(0|t));M=o}(e|=0,t|=0,o=s+16|0),i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,!(e=0|ct(o)))return Xe(n),ut(o),void(M=s);do{t=0|Ye(n);do{Ze(t,e),a=e+16|0,i[r>>2]=i[a>>2],i[r+4>>2]=i[a+4>>2],i[r+8>>2]=i[a+8>>2],i[r+12>>2]=i[a+12>>2],dt(o,e),e=0|pt(o,r)}while(0!=(0|e));e=0|ct(o)}while(0!=(0|e));Xe(n),ut(o),M=s},_h3ToCenterChild:function(e,t,n){n|=0;var r=0,i=0;if(r=0|Et(0|(e|=0),0|(t|=0),52),x(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(e|=i=0|St(0|n,0,52),t=0|x()|-15728641&t,(0|r)<(0|n)))do{i=0|St(7,0,3*(14-r|0)|0),r=r+1|0,e&=~i,t&=~(0|x())}while((0|r)<(0|n))}else t=0,e=0;return _(0|t),0|e},_h3ToChildren:Re,_h3ToGeo:Ge,_h3ToGeoBoundary:He,_h3ToParent:Le,_h3UnidirectionalEdgeIsValid:function(e,t){var n=0;if(!(!0&268435456==(2013265920&(t|=0)|0)))return 0|(n=0);switch(n=0|Et(0|(e|=0),0|t,56),x(),7&n){case 0:case 7:return 0|(n=0)}return!0&16777216==(117440512&t|0)&0!=(0|Oe(e,n=-2130706433&t|134217728))?0|(n=0):0|(n=0|Ie(e,n))},_hexAreaKm2:function(e){return+ +o[20496+((e|=0)<<3)>>3]},_hexAreaM2:function(e){return+ +o[20624+((e|=0)<<3)>>3]},_hexRing:function(e,t,n,r){e|=0,t|=0,r|=0;var o,s=0,a=0,A=0,l=0,u=0,c=0,d=0;if(o=M,M=M+16|0,d=o,!(n|=0))return i[(d=r)>>2]=e,i[d+4>>2]=t,M=o,0|(d=0);i[d>>2]=0;e:do{if(0|Oe(e,t))e=1;else{if(a=(0|n)>0){s=0,c=e;do{if(0==(0|(c=0|O(c,t,4,d)))&0==(0|(t=0|x()))){e=2;break e}if(s=s+1|0,0|Oe(c,t)){e=1;break e}}while((0|s)<(0|n));if(i[(u=r)>>2]=c,i[u+4>>2]=t,u=n+-1|0,a){a=0,A=1,s=c,e=t;do{if(0==(0|(s=0|O(s,e,2,d)))&0==(0|(e=0|x()))){e=2;break e}if(i[(l=r+(A<<3)|0)>>2]=s,i[l+4>>2]=e,A=A+1|0,0|Oe(s,e)){e=1;break e}a=a+1|0}while((0|a)<(0|n));l=0,a=A;do{if(0==(0|(s=0|O(s,e,3,d)))&0==(0|(e=0|x()))){e=2;break e}if(i[(A=r+(a<<3)|0)>>2]=s,i[A+4>>2]=e,a=a+1|0,0|Oe(s,e)){e=1;break e}l=l+1|0}while((0|l)<(0|n));A=0;do{if(0==(0|(s=0|O(s,e,1,d)))&0==(0|(e=0|x()))){e=2;break e}if(i[(l=r+(a<<3)|0)>>2]=s,i[l+4>>2]=e,a=a+1|0,0|Oe(s,e)){e=1;break e}A=A+1|0}while((0|A)<(0|n));A=0;do{if(0==(0|(s=0|O(s,e,5,d)))&0==(0|(e=0|x()))){e=2;break e}if(i[(l=r+(a<<3)|0)>>2]=s,i[l+4>>2]=e,a=a+1|0,0|Oe(s,e)){e=1;break e}A=A+1|0}while((0|A)<(0|n));A=0;do{if(0==(0|(s=0|O(s,e,4,d)))&0==(0|(e=0|x()))){e=2;break e}if(i[(l=r+(a<<3)|0)>>2]=s,i[l+4>>2]=e,a=a+1|0,0|Oe(s,e)){e=1;break e}A=A+1|0}while((0|A)<(0|n));for(A=0;;){if(0==(0|(s=0|O(s,e,6,d)))&0==(0|(e=0|x()))){e=2;break e}if((0|A)!=(0|u)){if(i[(l=r+(a<<3)|0)>>2]=s,i[l+4>>2]=e,0|Oe(s,e)){e=1;break e}a=a+1|0}if((0|(A=A+1|0))>=(0|n)){A=c,a=t;break}}}else A=c,s=c,a=t,e=t}else i[(A=r)>>2]=e,i[A+4>>2]=t,A=e,s=e,a=t,e=t;e=1&((0|A)!=(0|s)|(0|a)!=(0|e))}}while(0);return M=o,0|(d=e)},_i64Subtract:bt,_kRing:I,_kRingDistances:function(e,t,n,r,i){var o;if(0|L(e|=0,t|=0,n|=0,r|=0,i|=0)){if(Tt(0|r,0,(o=1+(0|y(3*n|0,n+1|0))|0)<<3|0),0|i)return Tt(0|i,0,o<<2|0),void R(e,t,n,r,i,o,0);(i=0|yt(o,4))&&(R(e,t,n,r,i,o,0),vt(i))}},_llvm_minnum_f64:Pt,_llvm_round_f64:kt,_malloc:mt,_maxFaceCount:function(e,t){var n=0,r=0;if(r=0|Et(0|(e|=0),0|(t|=0),45),x(),!(0|B(127&r)))return 0|(r=2);if(r=0|Et(0|e,0|t,52),x(),!(r&=15))return 0|(r=5);for(n=1;;){if(!(0==((0|St(7,0,3*(15-n|0)|0))&e|0)&0==((0|x())&t|0))){n=2,e=6;break}if(!(n>>>0<r>>>0)){n=5,e=6;break}n=n+1|0}return 6==(0|e)?0|n:0},_maxH3ToChildrenSize:function(e,t,n){return n|=0,e=0|Et(0|(e|=0),0|(t|=0),52),x(),(0|n)<16&(0|(e&=15))<=(0|n)?0|(n=0|tt(7,n-e|0)):0|(n=0)},_maxKringSize:function(e){return 1+(0|y(3*(e|=0)|0,e+1|0))|0},_maxPolyfillSize:function(e,t){t|=0;var n,r=0,o=0,s=0,a=0,A=0;if(n=M,M=M+48|0,s=n+8|0,o=n,a=0|i[(A=e|=0)+4>>2],i[(r=o)>>2]=i[A>>2],i[r+4>>2]=a,rt(o,s),s=0|H(s,t),t=0|i[o>>2],(0|(o=0|i[e+8>>2]))<=0)return M=n,0|(A=(A=(a=(0|s)<(0|(A=t)))?A:s)+12|0);r=0|i[e+12>>2],e=0;do{t=(0|i[r+(e<<3)>>2])+t|0,e=e+1|0}while((0|e)<(0|o));return M=n,0|(A=(A=(A=(0|s)<(0|t))?t:s)+12|0)},_maxUncompactSize:function(e,t,n){e|=0,n|=0;var r=0,o=0,s=0,a=0;if((0|(t|=0))<=0)return 0|(n=0);if((0|n)>=16){for(r=0;;){if(!(0==(0|i[(a=e+(r<<3)|0)>>2])&0==(0|i[a+4>>2]))){r=-1,o=13;break}if((0|(r=r+1|0))>=(0|t)){r=0,o=13;break}}if(13==(0|o))return 0|r}r=0,a=0;e:for(;;){s=0|i[(o=e+(a<<3)|0)>>2],o=0|i[o+4>>2];do{if(!(0==(0|s)&0==(0|o))){if(o=0|Et(0|s,0|o,52),x(),(0|(o&=15))>(0|n)){r=-1,o=13;break e}if((0|o)==(0|n)){r=r+1|0;break}r=(0|tt(7,n-o|0))+r|0;break}}while(0);if((0|(a=a+1|0))>=(0|t)){o=13;break}}return 13==(0|o)?0|r:0},_memcpy:Ct,_memset:Tt,_numHexagons:function(e){var t;return e=0|i[(t=21008+((e|=0)<<3)|0)>>2],_(0|i[t+4>>2]),0|e},_pentagonIndexCount:function(){return 12},_pointDistKm:Ce,_pointDistM:function(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+d(.5*(r-n)))*i+(s=+d(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+c(+r)*+c(+n)*s),2*+m(+ +l(+s),+ +l(+(1-s)))*6371.007180918475*1e3},_pointDistRads:function(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+d(.5*(r-n)))*i+(s=+d(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+c(+r)*+c(+n)*s),2*+m(+ +l(+s),+ +l(+(1-s)))},_polyfill:function(e,t,n){var r,o=0,s=0,a=0,A=0,l=0;if(r=M,M=M+48|0,o=r+8|0,s=r,0|function(e,t,n){t|=0,n|=0;var r=0,o=0,s=0,a=0,A=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,S=0,P=0,k=0,C=0,T=0,I=0,O=0,B=0,F=0,z=0,N=0;N=M,M=M+112|0,O=N+80|0,l=N+72|0,B=N,F=N+56|0,(z=0|mt(32+(i[(u=(e=e|0)+8|0)>>2]<<5)|0))||E(22848,22448,800,22456);if(it(e,z),r=0|i[(s=e)+4>>2],i[(A=l)>>2]=i[s>>2],i[A+4>>2]=r,rt(l,O),A=0|H(O,t),r=0|i[l>>2],(0|(s=0|i[u>>2]))>0){a=0|i[e+12>>2],o=0;do{r=(0|i[a+(o<<3)>>2])+r|0,o=o+1|0}while((0|o)!=(0|s))}if(o=0|yt(I=(A=(0|A)<(0|r)?r:A)+12|0,8),c=0|yt(I,8),i[O>>2]=0,T=0|i[(C=e)+4>>2],i[(r=l)>>2]=i[C>>2],i[r+4>>2]=T,0|(r=0|D(l,I,t,O,o,c)))return vt(o),vt(c),vt(z),M=N,0|(z=r);e:do{if((0|i[u>>2])>0){for(s=e+12|0,r=0;a=0|D((0|i[s>>2])+(r<<3)|0,I,t,O,o,c),r=r+1|0,!(0|a);)if((0|r)>=(0|i[u>>2]))break e;return vt(o),vt(c),vt(z),M=N,0|(z=a)}}while(0);(0|A)>-12&&Tt(0|c,0,((0|I)>1?I:1)<<3|0);e:do{if((0|i[O>>2])>0){T=((0|I)<0)<<31>>31,w=o,_=c,S=o,P=o,k=c,C=o,r=o,m=o,v=c,y=c,b=c,o=c;t:for(;;){for(g=0|i[O>>2],h=0,p=0,s=0;;){A=(a=B)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|A));if(0|L(l=0|i[(t=w+(h<<3)|0)>>2],t=0|i[t+4>>2],1,B,0)){A=(a=B)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|A));0|(a=0|yt(7,4))&&(R(l,t,1,B,a,7,0),vt(a))}f=0;do{c=0|i[(d=B+(f<<3)|0)>>2],d=0|i[d+4>>2];n:do{if(!(0==(0|c)&0==(0|d))){if(l=0|xt(0|c,0|d,0|I,0|T),x(),!(0==(0|(t=0|i[(A=a=n+(l<<3)|0)>>2]))&0==(0|(A=0|i[A+4>>2]))))for(u=0;;){if((0|u)>(0|I))break t;if((0|t)==(0|c)&(0|A)==(0|d))break n;if(0==(0|(t=0|i[(A=a=n+((l=(l+1|0)%(0|I)|0)<<3)|0)>>2]))&0==(0|(A=0|i[A+4>>2])))break;u=u+1|0}0==(0|c)&0==(0|d)||(Ge(c,d,F),0|ot(e,z,F)&&(i[(u=a)>>2]=c,i[u+4>>2]=d,i[(u=_+(s<<3)|0)>>2]=c,i[u+4>>2]=d,s=s+1|0))}}while(0);f=f+1|0}while(f>>>0<7);if((0|(p=p+1|0))>=(0|g))break;h=h+1|0}if((0|g)>0&&Tt(0|S,0,g<<3|0),i[O>>2]=s,!((0|s)>0))break e;c=o,d=b,f=C,h=y,p=v,g=_,o=m,b=r,y=P,v=S,m=c,r=d,C=k,k=f,P=h,S=p,_=w,w=g}return vt(P),vt(k),vt(z),M=N,0|(z=-1)}r=c}while(0);return vt(z),vt(o),vt(r),M=N,0|(z=0)}(e|=0,t|=0,n|=0)){if(a=0|i[(l=e)+4>>2],i[(A=s)>>2]=i[l>>2],i[A+4>>2]=a,rt(s,o),A=0|H(o,t),t=0|i[s>>2],(0|(a=0|i[e+8>>2]))>0){s=0|i[e+12>>2],o=0;do{t=(0|i[s+(o<<3)>>2])+t|0,o=o+1|0}while((0|o)!=(0|a))}(0|(t=(0|A)<(0|t)?t:A))<=-12||Tt(0|n,0,8+(((0|(l=t+11|0))>0?l:0)<<3)|0),M=r}else M=r},_res0IndexCount:function(){return 122},_round:Mt,_sbrk:It,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(e,t,n,r,o){e|=0,n|=0,r|=0,o|=0;var s=0,a=0,A=0,l=0,u=0,c=0;if((0|(t|=0))<=0)return 0|(o=0);if((0|o)>=16){for(s=0;;){if(!(0==(0|i[(c=e+(s<<3)|0)>>2])&0==(0|i[c+4>>2]))){s=14;break}if((0|(s=s+1|0))>=(0|t)){a=0,s=16;break}}if(14==(0|s))return 0|((0|r)>0?-2:-1);if(16==(0|s))return 0|a}s=0,c=0;e:for(;;){a=0|i[(A=u=e+(c<<3)|0)>>2],A=0|i[A+4>>2];do{if(!(0==(0|a)&0==(0|A))){if((0|s)>=(0|r)){a=-1,s=16;break e}if(l=0|Et(0|a,0|A,52),x(),(0|(l&=15))>(0|o)){a=-2,s=16;break e}if((0|l)==(0|o)){i[(u=n+(s<<3)|0)>>2]=a,i[u+4>>2]=A,s=s+1|0;break}if((0|(a=(0|tt(7,o-l|0))+s|0))>(0|r)){a=-1,s=16;break e}Re(0|i[u>>2],0|i[u+4>>2],o,n+(s<<3)|0),s=a}}while(0);if((0|(c=c+1|0))>=(0|t)){a=0,s=16;break}}return 16==(0|s)?0|a:0},establishStackSpace:function(e,t){M=e|=0},stackAlloc:function(e){var t;return t=M,M=(M=M+(e|=0)|0)+15&-16,0|t},stackRestore:function(e){M=e|=0},stackSave:function(){return 0|M}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:se,b:function(e){A=e},c:l,d:function(e,t,n,r){se("Assertion failed: "+w(e)+", at: "+[t?w(t):"unknown filename",n,r?w(r):"unknown function"])},e:function(e){return n.___errno_location&&(m[n.___errno_location()>>2]=e),e},f:G,g:function(e,t,n){p.set(p.subarray(t,t+n),e)},h:function(e){var t=G(),n=16777216,r=2130706432;if(e>r)return!1;for(var i=Math.max(t,16777216);i<e;)i=i<=536870912?_(2*i,n):Math.min(_((3*i+2147483648)/4,n),r);return!!H(i)},i:function(e){se("OOM")},j:U,k:V,l:H,m:W,n:function(){var e=W();return n.extraStackTrace&&(e+="\n"+n.extraStackTrace()),V(e)},o:24032,p:24016},f);n.___uremdi3=q.___uremdi3,n._bitshift64Lshr=q._bitshift64Lshr,n._bitshift64Shl=q._bitshift64Shl,n._calloc=q._calloc,n._cellAreaKm2=q._cellAreaKm2,n._cellAreaM2=q._cellAreaM2,n._cellAreaRads2=q._cellAreaRads2,n._compact=q._compact,n._destroyLinkedPolygon=q._destroyLinkedPolygon,n._edgeLengthKm=q._edgeLengthKm,n._edgeLengthM=q._edgeLengthM;var Y=n._emscripten_replace_memory=q._emscripten_replace_memory;n._exactEdgeLengthKm=q._exactEdgeLengthKm,n._exactEdgeLengthM=q._exactEdgeLengthM,n._exactEdgeLengthRads=q._exactEdgeLengthRads,n._experimentalH3ToLocalIj=q._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=q._experimentalLocalIjToH3,n._free=q._free,n._geoToH3=q._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=q._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=q._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=q._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=q._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=q._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=q._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=q._getPentagonIndexes,n._getRes0Indexes=q._getRes0Indexes,n._h3Distance=q._h3Distance,n._h3GetBaseCell=q._h3GetBaseCell,n._h3GetFaces=q._h3GetFaces,n._h3GetResolution=q._h3GetResolution,n._h3IndexesAreNeighbors=q._h3IndexesAreNeighbors,n._h3IsPentagon=q._h3IsPentagon,n._h3IsResClassIII=q._h3IsResClassIII,n._h3IsValid=q._h3IsValid,n._h3Line=q._h3Line,n._h3LineSize=q._h3LineSize,n._h3SetToLinkedGeo=q._h3SetToLinkedGeo,n._h3ToCenterChild=q._h3ToCenterChild,n._h3ToChildren=q._h3ToChildren,n._h3ToGeo=q._h3ToGeo,n._h3ToGeoBoundary=q._h3ToGeoBoundary,n._h3ToParent=q._h3ToParent,n._h3UnidirectionalEdgeIsValid=q._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=q._hexAreaKm2,n._hexAreaM2=q._hexAreaM2,n._hexRing=q._hexRing,n._i64Subtract=q._i64Subtract,n._kRing=q._kRing,n._kRingDistances=q._kRingDistances,n._llvm_minnum_f64=q._llvm_minnum_f64,n._llvm_round_f64=q._llvm_round_f64,n._malloc=q._malloc,n._maxFaceCount=q._maxFaceCount,n._maxH3ToChildrenSize=q._maxH3ToChildrenSize,n._maxKringSize=q._maxKringSize,n._maxPolyfillSize=q._maxPolyfillSize,n._maxUncompactSize=q._maxUncompactSize,n._memcpy=q._memcpy,n._memset=q._memset,n._numHexagons=q._numHexagons,n._pentagonIndexCount=q._pentagonIndexCount,n._pointDistKm=q._pointDistKm,n._pointDistM=q._pointDistM,n._pointDistRads=q._pointDistRads,n._polyfill=q._polyfill,n._res0IndexCount=q._res0IndexCount,n._round=q._round,n._sbrk=q._sbrk,n._sizeOfCoordIJ=q._sizeOfCoordIJ,n._sizeOfGeoBoundary=q._sizeOfGeoBoundary,n._sizeOfGeoCoord=q._sizeOfGeoCoord,n._sizeOfGeoPolygon=q._sizeOfGeoPolygon,n._sizeOfGeofence=q._sizeOfGeofence,n._sizeOfH3Index=q._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=q._sizeOfLinkedGeoPolygon,n._uncompact=q._uncompact,n.establishStackSpace=q.establishStackSpace;var Z,X,K=n.stackAlloc=q.stackAlloc,J=n.stackRestore=q.stackRestore,ee=n.stackSave=q.stackSave;if(n.asm=q,n.cwrap=function(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?c(e):function(){return d(e,t,n,arguments)}},n.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":h[e>>0]=t;break;case"i16":g[e>>1]=t;break;case"i32":m[e>>2]=t;break;case"i64":F=[t>>>0,(B=t,+M(B)>=1?B>0?(0|R(+L(B/4294967296),4294967295))>>>0:~~+I((B-+(~~B>>>0))/4294967296)>>>0:0)],m[e>>2]=F[0],m[e+4>>2]=F[1];break;case"float":v[e>>2]=t;break;case"double":y[e>>3]=t;break;default:se("invalid type for setValue: "+n)}},n.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return h[e>>0];case"i16":return g[e>>1];case"i32":case"i64":return m[e>>2];case"float":return v[e>>2];case"double":return y[e>>3];default:se("invalid type for getValue: "+t)}return null},n.getTempRet0=l,z){j(z)||(Z=z,z=n.locateFile?n.locateFile(Z,o):o+Z),O++,n.monitorRunDependencies&&n.monitorRunDependencies(O);var te=function(e){e.byteLength&&(e=new Uint8Array(e)),p.set(e,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(e){if(O--,n.monitorRunDependencies&&n.monitorRunDependencies(O),0==O&&D){var t=D;D=null,t()}}()},ne=function(){i(z,te,(function(){throw"could not load memory initializer "+z}))},re=$(z);if(re)te(re.buffer);else if(n.memoryInitializerRequest){var ie=function(){var e=n.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=$(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+z),void ne();t=r.buffer}te(t)};n.memoryInitializerRequest.response?setTimeout(ie,0):n.memoryInitializerRequest.addEventListener("load",ie)}else ne()}function oe(e){function t(){X||(X=!0,u||(S(k),S(C),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),T.unshift(e);var e;S(T)}()))}O>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),P.unshift(e);var e;S(P)}(),O>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function se(e){throw n.onAbort&&n.onAbort(e),s(e+=""),a(e),u=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(D=function e(){X||oe(),X||(D=e)},n.run=oe,n.abort=se,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return oe(),e}("object"==typeof rm?rm:{}),im="number",om={};[["sizeOfH3Index",im],["sizeOfGeoCoord",im],["sizeOfGeoBoundary",im],["sizeOfGeoPolygon",im],["sizeOfGeofence",im],["sizeOfLinkedGeoPolygon",im],["sizeOfCoordIJ",im],["h3IsValid",im,[im,im]],["geoToH3",im,[im,im,im]],["h3ToGeo",null,[im,im,im]],["h3ToGeoBoundary",null,[im,im,im]],["maxKringSize",im,[im]],["kRing",null,[im,im,im,im]],["kRingDistances",null,[im,im,im,im,im]],["hexRing",null,[im,im,im,im]],["maxPolyfillSize",im,[im,im]],["polyfill",null,[im,im,im]],["h3SetToLinkedGeo",null,[im,im,im]],["destroyLinkedPolygon",null,[im]],["compact",im,[im,im,im]],["uncompact",im,[im,im,im,im,im]],["maxUncompactSize",im,[im,im,im]],["h3IsPentagon",im,[im,im]],["h3IsResClassIII",im,[im,im]],["h3GetBaseCell",im,[im,im]],["h3GetResolution",im,[im,im]],["maxFaceCount",im,[im,im]],["h3GetFaces",null,[im,im,im]],["h3ToParent",im,[im,im,im]],["h3ToChildren",null,[im,im,im,im]],["h3ToCenterChild",im,[im,im,im]],["maxH3ToChildrenSize",im,[im,im,im]],["h3IndexesAreNeighbors",im,[im,im,im,im]],["getH3UnidirectionalEdge",im,[im,im,im,im]],["getOriginH3IndexFromUnidirectionalEdge",im,[im,im]],["getDestinationH3IndexFromUnidirectionalEdge",im,[im,im]],["h3UnidirectionalEdgeIsValid",im,[im,im]],["getH3IndexesFromUnidirectionalEdge",null,[im,im,im]],["getH3UnidirectionalEdgesFromHexagon",null,[im,im,im]],["getH3UnidirectionalEdgeBoundary",null,[im,im,im]],["h3Distance",im,[im,im,im,im]],["h3Line",im,[im,im,im,im,im]],["h3LineSize",im,[im,im,im,im]],["experimentalH3ToLocalIj",im,[im,im,im,im,im]],["experimentalLocalIjToH3",im,[im,im,im,im]],["hexAreaM2",im,[im]],["hexAreaKm2",im,[im]],["edgeLengthM",im,[im]],["edgeLengthKm",im,[im]],["pointDistM",im,[im,im]],["pointDistKm",im,[im,im]],["pointDistRads",im,[im,im]],["cellAreaM2",im,[im,im]],["cellAreaKm2",im,[im,im]],["cellAreaRads2",im,[im,im]],["exactEdgeLengthM",im,[im,im]],["exactEdgeLengthKm",im,[im,im]],["exactEdgeLengthRads",im,[im,im]],["numHexagons",im,[im]],["getRes0Indexes",null,[im]],["res0IndexCount",im],["getPentagonIndexes",null,[im,im]],["pentagonIndexCount",im]].forEach((function(e){om[e[0]]=rm.cwrap.apply(rm,e)}));var sm=16;om.sizeOfH3Index();var am=om.sizeOfGeoCoord(),Am=om.sizeOfGeoBoundary();om.sizeOfGeoPolygon(),om.sizeOfGeofence(),om.sizeOfLinkedGeoPolygon(),om.sizeOfCoordIJ();var lm="m",um="km";var cm=/[^0-9a-fA-F]/;function dm(e){if(Array.isArray(e)&&2===e.length&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if("string"!=typeof e||cm.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),sm);return[parseInt(e.substring(e.length-8),sm),t]}function fm(e){if(e>=0)return e.toString(sm);var t=hm(8,(e&=2147483647).toString(sm));return t=(parseInt(t[0],sm)+8).toString(sm)+t.substring(1)}function hm(e,t){for(var n=e-t.length,r="",i=0;i<n;i++)r+="0";return r+=t}function pm(e){var t=function(e){return[e,rm.getTempRet0()]}(e),n=t[0],r=t[1];return r?function(e,t){return fm(t)+hm(8,fm(e))}(n,r):null}function gm(e){return 180*rm.getValue(e,"double")/Math.PI}function mm(e){return[gm(e),gm(e+8)]}function vm(e){return[gm(e+8),gm(e)]}function ym(e){var t=dm(e),n=t[0],r=t[1];return Boolean(om.h3IsPentagon(n,r))}function bm(e){var t=rm._malloc(am),n=dm(e),r=n[0],i=n[1];om.h3ToGeo(r,i,t);var o=mm(t);return rm._free(t),o}function wm(e,t){var n=rm._malloc(Am),r=dm(e),i=r[0],o=r[1];om.h3ToGeoBoundary(i,o,n);var s=function(e,t,n){for(var r=rm.getValue(e,"i32"),i=e+8,o=[],s=t?vm:mm,a=0;a<2*r;a+=2)o.push(s(i+8*a));return n&&o.push(o[0]),o}(n,t,t);return rm._free(n),s}function _m(e,t){switch(function(e){if("number"!=typeof e||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}(e),t){case lm:return om.edgeLengthM(e);case um:return om.edgeLengthKm(e);default:throw new Error("Unknown unit: "+t)}}function xm(e){return e*Math.PI/180}function Em(e,t){t=void 0===t?e[0][0]:t;for(const n of e){const e=n[0]-t;e>180?n[0]-=360:e<-180&&(n[0]+=360)}}function Sm(e,t,n){const r=e(t,n),[i,o]=bm(r);return[o,i]}function Pm(e,t=1,n){const r=wm(e,!0);if(1!==t?function(e,t,n){const[r,i]=bm(e),o=t.length;Em(t,i);const s=t[0]===t[o-1]?o-1:o;for(let e=0;e<s;e++)t[e][0]=Vo(i,t[e][0],n),t[e][1]=Vo(r,t[e][1],n)}(e,r,t):Em(r),n){const e=new Float64Array(2*r.length);let t=0;for(const n of r)e[t++]=n[0],e[t++]=n[1];return e}return r}const km={...Zh.defaultProps,highPrecision:!1,coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:e=>e.hexagon},extruded:!0};delete km.getLineDashArray;class Cm extends Id{shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,oldProps:t,changeFlags:n}){if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagon){let t=-1,n=!1,s=!1;const{iterable:a,objectInfo:A}=mc(e.data);for(const l of a){A.index++;const a=e.getHexagon(l,A),u=(r=void 0,i=void 0,o=void 0,r=dm(a),i=r[0],o=r[1],om.h3IsValid(i,o)?om.h3GetResolution(i,o):-1);if(t<0)t=u;else if(t!==u){s=!0;break}if(ym(a)){n=!0;break}}this.setState({resolution:t,edgeLengthKM:t>=0?_m(t,um):0,hasMultipleRes:s,hasPentagon:n})}var r,i,o;this._updateVertices(this.context.viewport)}_shouldUseHighPrecision(){const{resolution:e,hasPentagon:t,hasMultipleRes:n}=this.state,{viewport:r}=this.context;return this.props.highPrecision||r.resolution||n||t||e>=0&&e<=5}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:t,edgeLengthKM:n,centerHex:r}=this.state;if(t<0)return;const i=this.props.centerHexagon||function(e,t,n){var r=rm._malloc(am);rm.HEAPF64.set([e,t].map(xm),r/8);var i=pm(om.geoToH3(r,n));return rm._free(r),i}(e.latitude,e.longitude,t);if(r===i)return;if(r){const e=(o=i,s=dm(r),a=s[0],A=s[1],l=dm(o),u=l[0],c=l[1],om.h3Distance(a,A,u,c));if(e>=0&&e*n<10)return}var o,s,a,A,l,u,c;const{unitsPerMeter:d}=e.distanceScales;let f=Pm(i);const[h,p]=bm(i),[g,m]=e.projectFlat([p,h]);f=f.map((t=>{const n=e.projectFlat(t);return[(n[0]-g)/d[0],(n[1]-m)/d[1]]})),this.setState({centerHex:i,vertices:f})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:t,coverage:n,extruded:r,wireframe:i,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:A,lineWidthMinPixels:l,lineWidthMaxPixels:u,getFillColor:c,getElevation:d,getLineColor:f,getLineWidth:h,transitions:p,updateTriggers:g}=this.props;return{elevationScale:e,extruded:r,coverage:n,wireframe:i,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:A,lineWidthMinPixels:l,lineWidthMaxPixels:u,material:t,getElevation:d,getFillColor:c,getLineColor:f,getLineWidth:h,transitions:p,updateTriggers:{getFillColor:g.getFillColor,getElevation:g.getElevation,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:t,updateTriggers:n,coverage:r}=this.props,i=this.getSubLayerClass("hexagon-cell-hifi",Zh),o=this._getForwardProps();return o.updateTriggers.getPolygon=function(e,t){let n;return n=null==e?t:"object"==typeof e?{...e,coverage:t}:{getHexagon:e,coverage:t},n}(n.getHexagon,r),new i(o,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:o.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(e,n)=>Pm(t(e,n),r,!0)})}_renderColumnLayer(){const{data:e,getHexagon:t,updateTriggers:n}=this.props,r=this.getSubLayerClass("hexagon-cell",Kf),i=this._getForwardProps();return i.updateTriggers.getPosition=n.getHexagon,new r(i,this.getSubLayerProps({id:"hexagon-cell",updateTriggers:i.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:Sm.bind(null,t)})}}function Tm(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Mm(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return Tm({type:"Polygon",coordinates:e},t,n)}function Im(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function Lm(e,t,n){if(null!==e)for(var r,i,o,s,a,A,l,u,c=0,d=0,f=e.type,h="FeatureCollection"===f,p="Feature"===f,g=h?e.features.length:1,m=0;m<g;m++){a=(u=!!(l=h?e.features[m].geometry:p?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<a;v++){var y=0,b=0;if(null!==(s=u?l.geometries[v]:l)){A=s.coordinates;var w=s.type;switch(c=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(A,d,m,y,b))return!1;d++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<A.length;r++){if(!1===t(A[r],d,m,y,b))return!1;d++,"MultiPoint"===w&&y++}"LineString"===w&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<A.length;r++){for(i=0;i<A[r].length-c;i++){if(!1===t(A[r][i],d,m,y,b))return!1;d++}"MultiLineString"===w&&y++,"Polygon"===w&&b++}"Polygon"===w&&y++;break;case"MultiPolygon":for(r=0;r<A.length;r++){for(b=0,i=0;i<A[r].length;i++){for(o=0;o<A[r][i].length-c;o++){if(!1===t(A[r][i][o],d,m,y,b))return!1;d++}b++}y++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Lm(s.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Rm(e){var t=[1/0,1/0,-1/0,-1/0];return Lm(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}function Om(e){return"Feature"===e.type?e.geometry:e}function Dm(e,t){void 0===t&&(t={});var n=0,r=0,i=0;return Lm(e,(function(e){n+=e[0],r+=e[1],i++}),!0),function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Im(e[0])||!Im(e[1]))throw new Error("coordinates must contain numbers");return Tm({type:"Point",coordinates:e},t,n)}([n/i,r/i],t.properties)}Cm.defaultProps=km,Cm.layerName="H3HexagonLayer",Rm.default=Rm;var Bm={exports:{}};!function(e,t){e.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}
/**
	   * splaytree v3.1.0
	   * Fast Splay tree for Node and browser
	   *
	   * @author Alexander Milevski <info@w8r.name>
	   * @license MIT
	   * @preserve
	   */var r=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n){for(var i=new r(null,null),o=i,s=i;;){var a=n(e,t.key);if(a<0){if(null===t.left)break;if(n(e,t.left.key)<0){var A=t.left;if(t.left=A.right,A.right=t,null===(t=A).left)break}s.left=t,s=t,t=t.left}else{if(!(a>0))break;if(null===t.right)break;if(n(e,t.right.key)>0&&(A=t.right,t.right=A.left,A.left=t,null===(t=A).right))break;o.right=t,o=t,t=t.right}}return o.right=t.left,s.left=t.right,t.left=i.right,t.right=i.left,t}function s(e,t,n,i){var s=new r(e,t);if(null===n)return s.left=s.right=null,s;var a=i(e,(n=o(e,n,i)).key);return a<0?(s.left=n.left,s.right=n,n.left=null):a>=0&&(s.right=n.right,s.left=n,n.right=null),s}function a(e,t,n){var r=null,i=null;if(t){var s=n((t=o(e,t,n)).key,e);0===s?(r=t.left,i=t.right):s<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function A(e,t,n){return null===t?e:(null===e||((t=o(e.key,t,n)).left=e),t)}function l(e,t,n,r,i){if(e){r(t+(n?"└── ":"├── ")+i(e)+"\n");var o=t+(n?"    ":"│   ");e.left&&l(e.left,o,!1,r,i),e.right&&l(e.right,o,!0,r,i)}}var u=function(){function e(e){void 0===e&&(e=i),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=s(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new r(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,s=o(e,this._root,i),a=i(e,s.key);return 0===a?this._root=s:(a<0?(n.left=s.left,n.right=s,s.left=null):a>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var r;return null===t?null:0===n(e,(t=o(e,t,n)).key)?(null===t.left?r=t.right:(r=o(e,t.left,n)).right=t.right,this._size--,r):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=o(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=o(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),e.call(t,n),n=n.right):i=!0;return this},e.prototype.range=function(e,t,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,t)>0)break;if(o(s.key,e)>=0&&n.call(r,s))return this;s=s.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,r=0,i=[];!n;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),r===e)return t;r++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return f(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,i=this._comparator;if(n&&g(e,t,0,r-1,i),null===this._root)this._root=c(e,t,0,r),this._size=r;else{var o=p(this.toList(),d(e,t),i);r=this._size+r,this._root=h({head:o},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return l(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var r=this._comparator,i=a(e,this._root,r),o=i.left,l=i.right;r(e,t)<0?l=s(t,n,l,r):o=s(t,n,o,r),this._root=A(o,l,r)},e.prototype.split=function(e){return a(e,this._root,this._comparator)},e}();function c(e,t,n,i){var o=i-n;if(o>0){var s=n+Math.floor(o/2),a=e[s],A=t[s],l=new r(a,A);return l.left=c(e,t,n,s),l.right=c(e,t,s+1,i),l}return null}function d(e,t){for(var n=new r(null,null),i=n,o=0;o<e.length;o++)i=i.next=new r(e[o],t[o]);return i.next=null,n.next}function f(e){for(var t=e,n=[],i=!1,o=new r(null,null),s=o;!i;)t?(n.push(t),t=t.left):n.length>0?t=(t=s=s.next=n.pop()).right:i=!0;return s.next=null,o.next}function h(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=h(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=h(e,i+1,n),s}return null}function p(e,t,n){for(var i=new r(null,null),o=i,s=e,a=t;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),i.next}function g(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(e[s],o)<0);do{a--}while(i(e[a],o)>0);if(s>=a)break;var A=e[s];e[s]=e[a],e[a]=A,A=t[s],t[s]=t[a],t[a]=A}g(e,t,n,a,i),g(e,t,a+1,r,i)}}var m=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},v=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:r,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},y=Number.EPSILON;void 0===y&&(y=Math.pow(2,-52));var b=y*y,w=function(e,t){if(-y<e&&e<y&&-y<t&&t<y)return 0;var n=e-t;return n*n<b*e*t?0:e<t?-1:1},_=function(){function t(){e(this,t),this.reset()}return n(t,[{key:"reset",value:function(){this.xRounder=new x,this.yRounder=new x}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),x=function(){function t(){e(this,t),this.tree=new u,this.round(0)}return n(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===w(t.key,n.key))return this.tree.remove(e),n.key;var r=this.tree.next(t);return null!==r&&0===w(t.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),E=new _,S=function(e,t){return e.x*t.y-e.y*t.x},P=function(e,t){return e.x*t.x+e.y*t.y},k=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=S(r,i);return w(o,0)},C=function(e){return Math.sqrt(P(e,e))},T=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return S(i,r)/C(i)/C(r)},M=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return P(i,r)/C(i)/C(r)},I=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},L=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},R=function(e,t,n,r){if(0===t.x)return L(n,r,e.x);if(0===r.x)return L(e,t,n.x);if(0===t.y)return I(n,r,e.y);if(0===r.y)return I(e,t,n.y);var i=S(t,r);if(0==i)return null;var o={x:n.x-e.x,y:n.y-e.y},s=S(o,t)/i,a=S(o,r)/i;return{x:(e.x+a*t.x+(n.x+s*r.x))/2,y:(e.y+a*t.y+(n.y+s*r.y))/2}},O=function(){function t(n,r){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:B.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),n(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var i=t[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:T(t.point,e.point,i.point),cosine:M(t.point,e.point,i.point)})};return function(e,t){n.has(e)||r(e),n.has(t)||r(t);var i=n.get(e),o=i.sine,s=i.cosine,a=n.get(t),A=a.sine,l=a.cosine;return o>=0&&A>=0?s<l?1:s>l?-1:0:o<0&&A<0?s<l?-1:s>l?1:0:A<o?-1:A>o?1:0}}}]),t}(),D=0,B=function(){function t(n,r,i,o){e(this,t),this.id=++D,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=e.leftSE.point.y,a=t.leftSE.point.y,A=e.rightSE.point.y,l=t.rightSE.point.y;if(n<r){if(a<s&&a<A)return 1;if(a>s&&a>A)return-1;var u=e.comparePoint(t.leftSE.point);if(u<0)return 1;if(u>0)return-1;var c=t.comparePoint(e.rightSE.point);return 0!==c?c:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var d=t.comparePoint(e.leftSE.point);if(0!==d)return d;var f=e.comparePoint(t.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var h=t.comparePoint(e.rightSE.point);if(0!==h)return h}if(i>o){var p=e.comparePoint(t.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(i!==o){var g=A-s,m=i-n,v=l-a,y=o-r;if(g>m&&v<y)return 1;if(g<m&&v>y)return-1}return i>o?1:i<o||A<l?-1:A>l?1:e.id<t.id?-1:e.id>t.id?1:0}}]),n(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var i=(e.y-t.y)/r.y,o=t.x+i*r.x;if(e.x===o)return 0;var s=(e.x-t.x)/r.x,a=t.y+s*r.y;return e.y===a?0:e.y<a?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=v(t,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=e.leftSE.point,a=e.rightSE.point,A=m(t,s)&&0===this.comparePoint(s),l=m(n,i)&&0===e.comparePoint(i),u=m(t,a)&&0===this.comparePoint(a),c=m(n,o)&&0===e.comparePoint(o);if(l&&A)return c&&!u?o:!c&&u?a:null;if(l)return u&&i.x===a.x&&i.y===a.y?null:i;if(A)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&u)return null;if(c)return o;if(u)return a;var d=R(i,this.vector(),s,e.vector());return null===d?null:m(r,d)?E.round(d.x,d.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new O(e,!0),o=new O(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return O.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),O.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,A=r.rings.length;a<A;a++){var l=r.rings[a],u=r.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(u)):n.windings[c]+=u}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],A=t.indexOf(s);-1===A?(t.push(s),n.push(a)):n[A]+=a}for(var l=[],u=[],c=0,d=t.length;c<d;c++)if(0!==n[c]){var f=t[c],h=f.poly;if(-1===u.indexOf(h))if(f.isExterior)l.push(h);else{-1===u.indexOf(h)&&u.push(h);var p=l.indexOf(f.poly);-1!==p&&l.splice(p,1)}}for(var g=0,m=l.length;g<m;g++){var v=l[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Q.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===Q.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(e.length-t.length);this._isInResult=s%2==1;break;case"difference":var a=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=a(e)!==a(t);break;default:throw new Error("Unrecognized operation type found ".concat(Q.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=O.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new O(i,!0),new O(o,!1),[r],[s])}}]),t}(),F=function(){function t(n,r,i){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=E.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,A=n.length;a<A;a++){if("number"!=typeof n[a][0]||"number"!=typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=E.round(n[a][0],n[a][1]);l.x===s.x&&l.y===s.y||(this.segments.push(B.fromRing(s,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),s=l)}o.x===s.x&&o.y===s.y||this.segments.push(B.fromRing(s,o,this))}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),z=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new F(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),N=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(e){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new z(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),j=function(){function t(n){e(this,t),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,A=o.rightSE,l=[a],u=a.point,c=[];s=a,a=A,l.push(a),a.point!==u;)for(;;){var d=a.getAvailableLinkedEvents();if(0===d.length){var f=l[0].point,h=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(h.x,", ").concat(h.y,"]."))}if(1===d.length){A=d[0].otherSE;break}for(var p=null,g=0,m=c.length;g<m;g++)if(c[g].point===a.point){p=g;break}if(null===p){c.push({index:l.length,point:a.point});var v=a.getLeftmostComparator(s);A=d.sort(v)[0].otherSE;break}var y=c.splice(p)[0],b=l.splice(y.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(l))}}return n}}]),n(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==k(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var s=t[0],a=t[1];0===k(s,e,a)&&t.shift(),t.push(t[0]);for(var A=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,c=[],d=l;d!=u;d+=A)c.push([t[d].x,t[d].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];O.compare(e,r)>0&&(e=r)}for(var i=e.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),U=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var r=this.interiorRings[t].getGeom();null!==r&&e.push(r)}return e}}]),t}(),V=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return n(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new U(i));else{var o=i.enclosingRing();o.poly||t.push(new U(o)),o.poly.addInterior(i)}}return t}}]),t}(),W=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.compare;e(this,t),this.queue=n,this.tree=new u(r),this.segments=[]}return n(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var r=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!r)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(e.isLeft){var A=null;if(s){var l=s.getIntersection(t);if(null!==l&&(t.isAnEndpoint(l)||(A=l),!s.isAnEndpoint(l)))for(var u=this._splitSafely(s,l),c=0,d=u.length;c<d;c++)n.push(u[c])}var f=null;if(a){var h=a.getIntersection(t);if(null!==h&&(t.isAnEndpoint(h)||(f=h),!a.isAnEndpoint(h)))for(var p=this._splitSafely(a,h),g=0,m=p.length;g<m;g++)n.push(p[g])}if(null!==A||null!==f){var v=null;v=null===A?f:null===f||O.comparePoints(A,f)<=0?A:f,this.queue.remove(t.rightSE),n.push(t.rightSE);for(var y=t.split(v),b=0,w=y.length;b<w;b++)n.push(y[b])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=s)}else{if(s&&a){var _=s.getIntersection(a);if(null!==_){if(!s.isAnEndpoint(_))for(var x=this._splitSafely(s,_),E=0,S=x.length;E<S;E++)n.push(x[E]);if(!a.isAnEndpoint(_))for(var P=this._splitSafely(a,_),k=0,C=P.length;k<C;k++)n.push(P[k])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),G="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,H="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Q=new(function(){function t(){e(this,t)}return n(t,[{key:"run",value:function(e,t,n){Q.type=e,E.reset();for(var r=[new N(t,!0)],i=0,o=n.length;i<o;i++)r.push(new N(n[i],!1));if(Q.numMultiPolys=r.length,"difference"===Q.type)for(var s=r[0],a=1;a<r.length;)null!==v(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Q.type)for(var A=0,l=r.length;A<l;A++)for(var c=r[A],d=A+1,f=r.length;d<f;d++)if(null===v(c.bbox,r[d].bbox))return[];for(var h=new u(O.compare),p=0,g=r.length;p<g;p++)for(var m=r[p].getSweepEvents(),y=0,b=m.length;y<b;y++)if(h.insert(m[y]),h.size>G)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new W(h),_=h.size,x=h.pop();x;){var S=x.key;if(h.size===_){var P=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(P.id," ")+"[".concat(P.leftSE.point.x,", ").concat(P.leftSE.point.y,"] -> ")+"[".concat(P.rightSE.point.x,", ").concat(P.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(h.size>G)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>H)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var k=w.process(S),C=0,T=k.length;C<T;C++){var M=k[C];void 0===M.consumedBy&&h.insert(M)}_=h.size,x=h.pop()}E.reset();var I=j.factory(w.segments);return new V(I).getGeom()}}]),t}()),$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q.run("union",e,n)},q=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q.run("intersection",e,n)},Y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q.run("xor",e,n)},Z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q.run("difference",e,n)};return{union:$,intersection:q,xor:Y,difference:Z}}()}(Bm);var Fm=Bm.exports;function zm(e,t){var n=Om(e),r=Om(t),i=e.properties||{},o=Fm.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?Mm(o[0],i):function(e,t,n){return void 0===n&&(n={}),Tm({type:"MultiPolygon",coordinates:e},t,n)}(o,i)}const Nm={latitude:52.459028,longitude:13.015833,zoom:7,minZoom:7,maxZoom:14,pitch:0,bearing:0};function jm({object:e}){return e?`    Schälprozent ${Math.round(e.val).toString()} %`:null}function Um({data:e,maskData:n,childMaskData:r,parent:i,show3D:o,resolution:s,radius:a=1e3,upperPercentile:l=100,coverage:u=1}){const[c,d]=t.exports.useState(Nm.zoom),[f,h]=t.exports.useState(Nm),p=e=>{const t=function(e,t){void 0===t&&(t={});var n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return Mm([[s,[i,r],[i,o],[n,o],s]],t.properties,{bbox:e,id:t.id})}([-180,-85,180,85]);return zm(t,e)},g=[new nm({data:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],maxRequests:20,pickable:!1,tileSize:256,zoomOffset:1===devicePixelRatio?-1:0,renderSubLayers:e=>{const{bbox:{west:t,south:n,east:r,north:i}}=e.tile;return[new gf(e,{data:null,image:e.data,bounds:[t,n,r,i]})]}}),new Np({id:"mask-layer-0_8",data:p(n),getFillColor:[251,251,251,255],stroked:!1,extruded:!1,wireframe:!0,lineJointRounded:!0})];r&&g.push(new Np({id:"child-mask-layer-0_8",data:p(r),getFillColor:[255,255,255,150],stroked:!1,extruded:!1,wireframe:!0,lineJointRounded:!0})),g.push(new Cm({id:"",data:e,pickable:!0,wireframe:!1,filled:!0,extruded:!0,elevationScale:25,coverage:.9,visible:!0,getHexagon:e=>e.hex||e.hex10,getFillColor:e=>{return[...(t=100-e.val,t<50?(n=255,r=Math.round(5.1*t)):(r=255,n=Math.round(510-5.1*t)),[n,r,0]),150];var t,n,r},getElevation:e=>o?e.val:0,updateTriggers:{getElevation:[o]},transitions:{elevationScale:3e3}}));return t.exports.useEffect((()=>{if(r){var e=Dm(r);h({longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1],zoom:8==s?7:9==s?9:10,minZoom:7,maxZoom:14,pitch:0,bearing:0,transitionDuration:1e3,transitionInterpolator:new Od})}}),[r]),A.createElement(lf,{layers:g,initialViewState:f,controller:!0,onViewStateChange:e=>{var t=Rm(n);return e.viewState.latitude>t[3]?e.viewState.latitude=t[3]:e.viewState.latitude<t[1]&&(e.viewState.latitude=t[1]),e.viewState.longitude>t[2]?e.viewState.longitude=t[2]:e.viewState.longitude<t[0]&&(e.viewState.longitude=t[0]),e.viewState.bearing=0,i(e),e.viewState},onDragEnd:(e,t)=>{e.viewport&&d(e.viewport.zoom)},getTooltip:jm})}var Vm={exports:{}},Wm={},Gm={exports:{}},Hm={};
/** @license React v0.20.2
	 * scheduler.development.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
!function(e){!function(){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var A=null,l=null,u=function(){if(null!==A)try{var t=e.unstable_now();A(!0,t),A=null}catch(e){throw setTimeout(u,0),e}};t=function(e){null!==A?setTimeout(t,0,e):(A=e,setTimeout(u,0))},n=function(e,t){l=setTimeout(e,t)},r=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var c=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var f=window.requestAnimationFrame,h=window.cancelAnimationFrame;"function"!=typeof f&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,g=null,m=-1,v=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){e<0||e>125?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=e>0?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();y=t+v;try{g(!0,t)?w.postMessage(null):(p=!1,g=null)}catch(e){throw w.postMessage(null),e}}else p=!1},t=function(e){g=e,p||(p=!0,w.postMessage(null))},n=function(t,n){m=c((function(){t(e.unstable_now())}),n)},r=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t),function(e,t,n){var r=n;for(;;){var i=r-1>>>1,o=e[i];if(!(void 0!==o&&S(o,t)>0))return;e[i]=t,e[r]=o,r=i}}(e,t,n)}function x(e){var t=e[0];return void 0===t?null:t}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();return n!==t&&(e[0]=n,function(e,t,n){var r=n,i=e.length;for(;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,A=e[a];if(void 0!==s&&S(s,t)<0)void 0!==A&&S(A,s)<0?(e[r]=A,e[a]=t,r=a):(e[r]=s,e[o]=t,r=o);else{if(!(void 0!==A&&S(A,t)<0))return;e[r]=A,e[a]=t,r=a}}}(e,n,0)),t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],k=[],C=1,T=null,M=3,I=!1,L=!1,R=!1;function O(e){for(var t=x(k);null!==t;){if(null===t.callback)E(k);else{if(!(t.startTime<=e))return;E(k),t.sortIndex=t.expirationTime,_(P,t)}t=x(k)}}function D(e){if(R=!1,O(e),!L)if(null!==x(P))L=!0,t(B);else{var r=x(k);null!==r&&n(D,r.startTime-e)}}function B(t,i){L=!1,R&&(R=!1,r()),I=!0;var o=M;try{return function(t,r){var i=r;O(i),T=x(P);for(;null!==T&&(!(T.expirationTime>i)||t&&!e.unstable_shouldYield());){var o=T.callback;if("function"==typeof o){T.callback=null,M=T.priorityLevel;var s=o(T.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?T.callback=s:T===x(P)&&E(P),O(i)}else E(P);T=x(P)}if(null!==T)return!0;var a=x(k);return null!==a&&n(D,a.startTime-i),!1}(t,i)}finally{T=null,M=o,I=!1}}var F=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){L||I||(L=!0,t(B))},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return x(P)},e.unstable_next=function(e){var t;switch(M){case 1:case 2:case 3:t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},e.unstable_scheduleCallback=function(i,o,s){var a,A,l=e.unstable_now();if("object"==typeof s&&null!==s){var u=s.delay;a="number"==typeof u&&u>0?l+u:l}else a=l;switch(i){case 1:A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}var c=a+A,d={id:C++,callback:o,priorityLevel:i,startTime:a,expirationTime:c,sortIndex:-1};return a>l?(d.sortIndex=a,_(k,d),null===x(P)&&d===x(k)&&(R?r():R=!0,n(D,a-l))):(d.sortIndex=c,_(P,d),L||I||(L=!0,t(B))),d},e.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}}()}(Hm),Gm.exports=Hm;var Qm={exports:{}},$m={};
/** @license React v0.20.2
	 * scheduler-tracing.development.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
!function(e){!function(){var t=0,n=0;e.__interactionsRef=null,e.__subscriberRef=null,e.__interactionsRef={current:new Set},e.__subscriberRef={current:null};var r=null;function i(e){var t=!1,n=null;if(r.forEach((function(r){try{r.onInteractionTraced(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function o(e){var t=!1,n=null;if(r.forEach((function(r){try{r.onInteractionScheduledWorkCompleted(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function s(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkScheduled(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function a(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkStarted(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function A(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkStopped(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function l(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkCanceled(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}r=new Set,e.unstable_clear=function(t){var n=e.__interactionsRef.current;e.__interactionsRef.current=new Set;try{return t()}finally{e.__interactionsRef.current=n}},e.unstable_getCurrent=function(){return e.__interactionsRef.current},e.unstable_getThreadID=function(){return++n},e.unstable_subscribe=function(t){r.add(t),1===r.size&&(e.__subscriberRef.current={onInteractionScheduledWorkCompleted:o,onInteractionTraced:i,onWorkCanceled:l,onWorkScheduled:s,onWorkStarted:a,onWorkStopped:A})},e.unstable_trace=function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s={__count:1,id:t++,name:n,timestamp:r},a=e.__interactionsRef.current,A=new Set(a);A.add(s),e.__interactionsRef.current=A;var l,u=e.__subscriberRef.current;try{null!==u&&u.onInteractionTraced(s)}finally{try{null!==u&&u.onWorkStarted(A,o)}finally{try{l=i()}finally{e.__interactionsRef.current=a;try{null!==u&&u.onWorkStopped(A,o)}finally{s.__count--,null!==u&&0===s.__count&&u.onInteractionScheduledWorkCompleted(s)}}}}return l},e.unstable_unsubscribe=function(t){r.delete(t),0===r.size&&(e.__subscriberRef.current=null)},e.unstable_wrap=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.__interactionsRef.current,i=e.__subscriberRef.current;null!==i&&i.onWorkScheduled(r,n),r.forEach((function(e){e.__count++}));var o=!1;function s(){var s=e.__interactionsRef.current;e.__interactionsRef.current=r,i=e.__subscriberRef.current;try{var a;try{null!==i&&i.onWorkStarted(r,n)}finally{try{a=t.apply(void 0,arguments)}finally{e.__interactionsRef.current=s,null!==i&&i.onWorkStopped(r,n)}}return a}finally{o||(o=!0,r.forEach((function(e){e.__count--,null!==i&&0===e.__count&&i.onInteractionScheduledWorkCompleted(e)})))}}return s.cancel=function(){i=e.__subscriberRef.current;try{null!==i&&i.onWorkCanceled(r,n)}finally{r.forEach((function(e){e.__count--,i&&0===e.__count&&i.onInteractionScheduledWorkCompleted(e)}))}},s}}()}($m),Qm.exports=$m,function(){var e=t.exports,n=a,r=Gm.exports,i=Qm.exports,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("warn",e,n)}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("error",e,n)}function l(e,t,n){var r=o.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}if(!e)throw Error("ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var u=10,c=11,d=12,f=13,h=14,p=15,g=17,m=19,v=20,y=22,b=23,w=24,_=!1,x=new Set,E={},S={};function P(e,t){k(e,t),k(e+"Capture",t)}function k(e,t){E[e]&&A("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),E[e]=t;var n=e.toLowerCase();S[n]=e,"onDoubleClick"===e&&(S.ondblclick=e);for(var r=0;r<t.length;r++)x.add(t[r])}var C=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),T=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",M=T+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",I="data-reactroot",L=new RegExp("^["+T+"]["+M+"]*$"),R=Object.prototype.hasOwnProperty,O={},D={};function B(e){return!!R.call(D,e)||!R.call(O,e)&&(L.test(e)?(D[e]=!0,!0):(O[e]=!0,A("Invalid attribute name: `%s`",e),!1))}function F(e,t,n){return null!==t?0===t.type:!n&&(e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))}function z(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var i=e.toLowerCase().slice(0,5);return"data-"!==i&&"aria-"!==i;default:return!1}}function N(e,t,n,r){if(null==t)return!0;if(z(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}function j(e){return V.hasOwnProperty(e)?V[e]:null}function U(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var V={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((function(e){V[e]=new U(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0],n=e[1];V[t]=new U(t,1,!1,n,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){V[e]=new U(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){V[e]=new U(e,2,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((function(e){V[e]=new U(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){V[e]=new U(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){V[e]=new U(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){V[e]=new U(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){V[e]=new U(e,5,!1,e.toLowerCase(),null,!1,!1)}));var W=/[\-\:]([a-z])/g,G=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((function(e){var t=e.replace(W,G);V[t]=new U(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((function(e){var t=e.replace(W,G);V[t]=new U(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(W,G);V[t]=new U(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){V[e]=new U(e,1,!1,e.toLowerCase(),null,!1,!1)}));V.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){V[e]=new U(e,1,!1,e.toLowerCase(),null,!0,!0)}));var H=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Q=!1;function $(e){!Q&&H.test(e)&&(Q=!0,A("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function q(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];r.sanitizeURL&&$(""+n);var i=r.attributeName,o=null;if(4===r.type){if(e.hasAttribute(i)){var s=e.getAttribute(i);return""===s||(N(t,n,r,!1)?s:s===""+n?n:s)}}else if(e.hasAttribute(i)){if(N(t,n,r,!1))return e.getAttribute(i);if(3===r.type)return n;o=e.getAttribute(i)}return N(t,n,r,!1)?null===o?n:o:o===""+n?n:o}function Y(e,t,n){if(B(t)){if(function(e){return null!==e&&"object"==typeof e&&e.$$typeof===ue}(n))return n;if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function Z(e,t,n,r){var i=j(t);if(!F(t,i,r))if(N(t,n,i,r)&&(n=null),r||null===i){if(B(t)){var o=t;null===n?e.removeAttribute(o):e.setAttribute(o,""+n)}}else if(i.mustUseProperty){var s=i.propertyName;if(null===n){var a=i.type;e[s]=3!==a&&""}else e[s]=n}else{var A=i.attributeName,l=i.attributeNamespace;if(null===n)e.removeAttribute(A);else{var u,c=i.type;3===c||4===c&&!0===n?u="":(u=""+n,i.sanitizeURL&&$(u.toString())),l?e.setAttributeNS(l,A,u):e.setAttribute(A,u)}}}var X=60103,K=60106,J=60107,ee=60108,te=60114,ne=60109,re=60110,ie=60112,oe=60113,se=60120,ae=60115,Ae=60116,le=60121,ue=60128,ce=60129,de=60130,fe=60131;if("function"==typeof Symbol&&Symbol.for){var he=Symbol.for;X=he("react.element"),K=he("react.portal"),J=he("react.fragment"),ee=he("react.strict_mode"),te=he("react.profiler"),ne=he("react.provider"),re=he("react.context"),ie=he("react.forward_ref"),oe=he("react.suspense"),se=he("react.suspense_list"),ae=he("react.memo"),Ae=he("react.lazy"),le=he("react.block"),he("react.server.block"),he("react.fundamental"),he("react.scope"),ue=he("react.opaque.id"),ce=he("react.debug_trace_mode"),de=he("react.offscreen"),fe=he("react.legacy_hidden")}var pe="function"==typeof Symbol&&Symbol.iterator;function ge(e){if(null===e||"object"!=typeof e)return null;var t=pe&&e[pe]||e["@@iterator"];return"function"==typeof t?t:null}var me,ve,ye,be,we,_e,xe,Ee=0;function Se(){}function Pe(){if(0===Ee){me=console.log,ve=console.info,ye=console.warn,be=console.error,we=console.group,_e=console.groupCollapsed,xe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Se,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Ee++}function ke(){if(0===--Ee){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:n({},e,{value:me}),info:n({},e,{value:ve}),warn:n({},e,{value:ye}),error:n({},e,{value:be}),group:n({},e,{value:we}),groupCollapsed:n({},e,{value:_e}),groupEnd:n({},e,{value:xe})})}Ee<0&&A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}Se.__reactDisabledLog=!0;var Ce,Te=o.ReactCurrentDispatcher;function Me(e,t,n){if(void 0===Ce)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);Ce=r&&r[1]||""}return"\n"+Ce+e}var Ie,Le=!1,Re="function"==typeof WeakMap?WeakMap:Map;function Oe(e,t){if(!e||Le)return"";var n,r=Ie.get(e);if(void 0!==r)return r;Le=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=Te.current,Te.current=null,Pe();try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(e){n=e}Reflect.construct(e,[],s)}else{try{s.call()}catch(e){n=e}e.call(s.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),A=n.stack.split("\n"),l=a.length-1,u=A.length-1;l>=1&&u>=0&&a[l]!==A[u];)u--;for(;l>=1&&u>=0;l--,u--)if(a[l]!==A[u]){if(1!==l||1!==u)do{if(l--,--u<0||a[l]!==A[u]){var c="\n"+a[l].replace(" at new "," at ");return"function"==typeof e&&Ie.set(e,c),c}}while(l>=1&&u>=0);break}}}finally{Le=!1,Te.current=i,ke(),Error.prepareStackTrace=o}var d=e?e.displayName||e.name:"",f=d?Me(d):"";return"function"==typeof e&&Ie.set(e,f),f}function De(e,t,n){return Oe(e,!1)}function Be(e,t,n){if(null==e)return"";if("function"==typeof e)return Oe(e,function(e){var t=e.prototype;return!(!t||!t.isReactComponent)}(e));if("string"==typeof e)return Me(e);switch(e){case oe:return Me("Suspense");case se:return Me("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case ie:return De(e.render);case ae:return Be(e.type,t,n);case le:return De(e._render);case Ae:var r=e,i=r._payload,o=r._init;try{return Be(o(i),t,n)}catch(e){}}return""}function Fe(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case 5:return Me(e.type);case 16:return Me("Lazy");case f:return Me("Suspense");case m:return Me("SuspenseList");case 0:case 2:case p:return De(e.type);case c:return De(e.type.render);case y:return De(e.type._render);case 1:return Oe(e.type,!0);default:return""}}function ze(e){try{var t="",n=e;do{t+=Fe(n),n=n.return}while(n);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function Ne(e){return e.displayName||"Context"}function je(e){if(null==e)return null;if("number"==typeof e.tag&&A("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case J:return"Fragment";case K:return"Portal";case te:return"Profiler";case ee:return"StrictMode";case oe:return"Suspense";case se:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case re:return Ne(e)+".Consumer";case ne:return Ne(e._context)+".Provider";case ie:return i=e,o=e.render,s="ForwardRef",a=o.displayName||o.name||"",i.displayName||(""!==a?s+"("+a+")":s);case ae:return je(e.type);case le:return je(e._render);case Ae:var t=e,n=t._payload,r=t._init;try{return je(r(n))}catch(e){return null}}var i,o,s,a;return null}Ie=new Re;var Ue=o.ReactDebugCurrentFrame,Ve=null,We=!1;function Ge(){if(null===Ve)return null;var e=Ve._debugOwner;return null!=e?je(e.type):null}function He(){return null===Ve?"":ze(Ve)}function Qe(){Ue.getCurrentStack=null,Ve=null,We=!1}function $e(e){Ue.getCurrentStack=He,Ve=e,We=!1}function qe(e){We=e}function Ye(e){return""+e}function Ze(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var Xe={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Ke(e,t){Xe[t.type]||t.onChange||t.onInput||t.readOnly||t.disabled||null==t.value||A("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),t.onChange||t.readOnly||t.disabled||null==t.checked||A("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Je(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function et(e){return e._valueTracker}function tt(e){et(e)||(e._valueTracker=function(e){var t=Je(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable});var s={getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}};return s}}(e))}function nt(e){if(!e)return!1;var t=et(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=Je(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}function rt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var it=!1,ot=!1,st=!1,at=!1;function At(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function lt(e,t){var r=e,i=t.checked;return n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:r._wrapperState.initialChecked})}function ut(e,t){Ke(0,t),void 0===t.checked||void 0===t.defaultChecked||ot||(A("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ge()||"A component",t.type),ot=!0),void 0===t.value||void 0===t.defaultValue||it||(A("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ge()||"A component",t.type),it=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Ze(null!=t.value?t.value:r),controlled:At(t)}}function ct(e,t){var n=e,r=t.checked;null!=r&&Z(n,"checked",r,!1)}function dt(e,t){var n=e,r=At(t);n._wrapperState.controlled||!r||at||(A("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),at=!0),!n._wrapperState.controlled||r||st||(A("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),st=!0),ct(e,t);var i=Ze(t.value),o=t.type;if(null!=i)"number"===o?(0===i&&""===n.value||n.value!=i)&&(n.value=Ye(i)):n.value!==Ye(i)&&(n.value=Ye(i));else if("submit"===o||"reset"===o)return void n.removeAttribute("value");t.hasOwnProperty("value")?pt(n,t.type,i):t.hasOwnProperty("defaultValue")&&pt(n,t.type,Ze(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function ft(e,t,n){var r=e;if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(("submit"===i||"reset"===i)&&(void 0===t.value||null===t.value))return;var o=Ye(r._wrapperState.initialValue);n||o!==r.value&&(r.value=o),r.defaultValue=o}var s=r.name;""!==s&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!!r._wrapperState.initialChecked,""!==s&&(r.name=s)}function ht(e,t){var n=e;dt(n,t),function(e,t){var n=t.name;if("radio"===t.type&&null!=n){for(var r=e;r.parentNode;)r=r.parentNode;for(var i=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<i.length;o++){var s=i[o];if(s!==e&&s.form===e.form){var a=mA(s);if(!a)throw Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");nt(s),dt(s,a)}}}}(n,t)}function pt(e,t,n){"number"===t&&rt(e.ownerDocument)===e||(null==n?e.defaultValue=Ye(e._wrapperState.initialValue):e.defaultValue!==Ye(n)&&(e.defaultValue=Ye(n)))}var gt,mt=!1,vt=!1;function yt(t,n){"object"==typeof n.children&&null!==n.children&&e.Children.forEach(n.children,(function(e){null!=e&&"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&(vt||(vt=!0,A("Only strings and numbers are supported as <option> children.")))})),null==n.selected||mt||(A("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),mt=!0)}function bt(t,r){var i=n({children:void 0},r),o=function(t){var n="";return e.Children.forEach(t,(function(e){null!=e&&(n+=e)})),n}(r.children);return o&&(i.children=o),i}function wt(){var e=Ge();return e?"\n\nCheck the render method of `"+e+"`.":""}gt=!1;var _t=["value","defaultValue"];function xt(e,t,n,r){var i=e.options;if(t){for(var o=n,s={},a=0;a<o.length;a++)s["$"+o[a]]=!0;for(var A=0;A<i.length;A++){var l=s.hasOwnProperty("$"+i[A].value);i[A].selected!==l&&(i[A].selected=l),l&&r&&(i[A].defaultSelected=!0)}}else{for(var u=Ye(Ze(n)),c=null,d=0;d<i.length;d++){if(i[d].value===u)return i[d].selected=!0,void(r&&(i[d].defaultSelected=!0));null!==c||i[d].disabled||(c=i[d])}null!==c&&(c.selected=!0)}}function Et(e,t){return n({},t,{value:void 0})}function St(e,t){var n=e;!function(e){Ke(0,e);for(var t=0;t<_t.length;t++){var n=_t[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?A("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,wt()):!e.multiple&&r&&A("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,wt())}}}(t),n._wrapperState={wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||gt||(A("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),gt=!0)}var Pt=!1;function kt(e,t){var r=e;if(null!=t.dangerouslySetInnerHTML)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");return n({},t,{value:void 0,defaultValue:void 0,children:Ye(r._wrapperState.initialValue)})}function Ct(e,t){var n=e;Ke(0,t),void 0===t.value||void 0===t.defaultValue||Pt||(A("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ge()||"A component"),Pt=!0);var r=t.value;if(null==r){var i=t.children,o=t.defaultValue;if(null!=i){if(A("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=o)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Array.isArray(i)){if(!(i.length<=1))throw Error("<textarea> can only have at most one child.");i=i[0]}o=i}null==o&&(o=""),r=o}n._wrapperState={initialValue:Ze(r)}}function Tt(e,t){var n=e,r=Ze(t.value),i=Ze(t.defaultValue);if(null!=r){var o=Ye(r);o!==n.value&&(n.value=o),null==t.defaultValue&&n.defaultValue!==o&&(n.defaultValue=o)}null!=i&&(n.defaultValue=Ye(i))}function Mt(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&""!==r&&null!==r&&(n.value=r)}var It="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/1998/Math/MathML",Rt="http://www.w3.org/2000/svg",Ot=It,Dt=Rt;function Bt(e){switch(e){case"svg":return Rt;case"math":return Lt;default:return It}}function Ft(e,t){return null==e||e===It?Bt(t):e===Rt&&"foreignObject"===t?It:e}var zt,Nt,jt=(Nt=function(e,t){if(e.namespaceURI!==Dt||"innerHTML"in e)e.innerHTML=t;else{(zt=zt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>";for(var n=zt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Nt(e,t,n,r)}))}:Nt),Ut=8,Vt=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t},Wt={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Gt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var Ht=["Webkit","ms","Moz","O"];function Qt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Gt.hasOwnProperty(e)&&Gt[e]?(""+t).trim():t+"px"}Object.keys(Gt).forEach((function(e){Ht.forEach((function(t){Gt[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=Gt[e]}))}));var $t=/([A-Z])/g,qt=/^ms-/;var Yt=/^(?:webkit|moz|o)[A-Z]/,Zt=/^-ms-/,Xt=/-(.)/g,Kt=/;\s*$/,Jt={},en={},tn=!1,nn=!1,rn=function(e){Jt.hasOwnProperty(e)&&Jt[e]||(Jt[e]=!0,A("Unsupported style property %s. Did you mean %s?",e,e.replace(Zt,"ms-").replace(Xt,(function(e,t){return t.toUpperCase()}))))},on=function(e,t){e.indexOf("-")>-1?rn(e):Yt.test(e)?function(e){Jt.hasOwnProperty(e)&&Jt[e]||(Jt[e]=!0,A("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))}(e):Kt.test(t)&&function(e,t){en.hasOwnProperty(t)&&en[t]||(en[t]=!0,A('Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(Kt,"")))}(e,t),"number"==typeof t&&(isNaN(t)?function(e,t){tn||(tn=!0,A("`NaN` is an invalid value for the `%s` css style property.",e))}(e):isFinite(t)||function(e,t){nn||(nn=!0,A("`Infinity` is an invalid value for the `%s` css style property.",e))}(e))};function sn(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i){var o=0===r.indexOf("--");t+=n+(o?r:r.replace($t,"-$1").toLowerCase().replace(qt,"-ms-"))+":",t+=Qt(r,i,o),n=";"}}return t||null}function an(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--");i||on(r,t[r]);var o=Qt(r,t[r],i);"float"===r&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}function An(e){var t={};for(var n in e)for(var r=Wt[n]||[n],i=0;i<r.length;i++)t[r[i]]=n;return t}var ln=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function un(e,t){if(t){if(ln[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!t.suppressContentEditableWarning&&t.contentEditable&&null!=t.children&&A("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),null!=t.style&&"object"!=typeof t.style)throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function cn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dn={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},fn={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},hn={},pn=new RegExp("^(aria)-["+M+"]*$"),gn=new RegExp("^(aria)[A-Z]["+M+"]*$"),mn=Object.prototype.hasOwnProperty;function vn(e,t){if(mn.call(hn,t)&&hn[t])return!0;if(gn.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=fn.hasOwnProperty(n)?n:null;if(null==r)return A("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),hn[t]=!0,!0;if(t!==r)return A("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,r),hn[t]=!0,!0}if(pn.test(t)){var i=t.toLowerCase(),o=fn.hasOwnProperty(i)?i:null;if(null==o)return hn[t]=!0,!1;if(t!==o)return A("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,o),hn[t]=!0,!0}return!0}function yn(e,t){cn(e,t)||function(e,t){var n=[];for(var r in t)vn(0,r)||n.push(r);var i=n.map((function(e){return"`"+e+"`"})).join(", ");1===n.length?A("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e):n.length>1&&A("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e)}(e,t)}var bn=!1;var wn,_n={},xn=Object.prototype.hasOwnProperty,En=/^on./,Sn=/^on[^A-Z]/,Pn=new RegExp("^(aria)-["+M+"]*$"),kn=new RegExp("^(aria)[A-Z]["+M+"]*$");wn=function(e,t,n,r){if(xn.call(_n,t)&&_n[t])return!0;var i=t.toLowerCase();if("onfocusin"===i||"onfocusout"===i)return A("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),_n[t]=!0,!0;if(null!=r){var o=r.registrationNameDependencies,s=r.possibleRegistrationNames;if(o.hasOwnProperty(t))return!0;var a=s.hasOwnProperty(i)?s[i]:null;if(null!=a)return A("Invalid event handler property `%s`. Did you mean `%s`?",t,a),_n[t]=!0,!0;if(En.test(t))return A("Unknown event handler property `%s`. It will be ignored.",t),_n[t]=!0,!0}else if(En.test(t))return Sn.test(t)&&A("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),_n[t]=!0,!0;if(Pn.test(t)||kn.test(t))return!0;if("innerhtml"===i)return A("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),_n[t]=!0,!0;if("aria"===i)return A("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),_n[t]=!0,!0;if("is"===i&&null!=n&&"string"!=typeof n)return A("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof n),_n[t]=!0,!0;if("number"==typeof n&&isNaN(n))return A("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),_n[t]=!0,!0;var l=j(t),u=null!==l&&0===l.type;if(dn.hasOwnProperty(i)){var c=dn[i];if(c!==t)return A("Invalid DOM property `%s`. Did you mean `%s`?",t,c),_n[t]=!0,!0}else if(!u&&t!==i)return A("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,i),_n[t]=!0,!0;return"boolean"==typeof n&&z(t,n,l,!1)?(n?A('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',n,t,t,n,t):A('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',n,t,t,n,t,t,t),_n[t]=!0,!0):!!u||(z(t,n,l,!1)?(_n[t]=!0,!1):("false"!==n&&"true"!==n||null===l||3!==l.type||(A("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",n,t,"false"===n?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,n),_n[t]=!0),!0))};function Cn(e,t,n){cn(e,t)||function(e,t,n){var r=[];for(var i in t)wn(0,i,t[i],n)||r.push(i);var o=r.map((function(e){return"`"+e+"`"})).join(", ");1===r.length?A("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e):r.length>1&&A("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e)}(e,t,n)}function Tn(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Mn=null,In=null,Ln=null;function Rn(e){var t=pA(e);if(t){if("function"!=typeof Mn)throw Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var n=t.stateNode;if(n){var r=mA(n);Mn(t.stateNode,t.type,r)}}}function On(e){In?Ln?Ln.push(e):Ln=[e]:In=e}function Dn(){if(In){var e=In,t=Ln;if(In=null,Ln=null,Rn(e),t)for(var n=0;n<t.length;n++)Rn(t[n])}}var Bn=function(e,t){return e(t)},Fn=function(e,t,n,r,i){return e(t,n,r,i)},zn=function(){},Nn=Bn,jn=!1,Un=!1;function Vn(){(null!==In||null!==Ln)&&(zn(),Dn())}function Wn(e,t){var n=e.stateNode;if(null===n)return null;var r=mA(n);if(null===r)return null;var i=r[t];if(function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(t,e.type,r))return null;if(i&&"function"!=typeof i)throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof i+"` type.");return i}var Gn=!1;if(C)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch(e){Gn=!1}function Qn(e,t,n,r,i,o,s,a,A){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var $n=Qn;if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var qn=document.createElement("react");$n=function(e,t,n,r,i,o,s,a,A){if("undefined"==typeof document)throw Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var l=document.createEvent("Event"),u=!1,c=!0,d=window.event,f=Object.getOwnPropertyDescriptor(window,"event");function h(){qn.removeEventListener(w,m,!1),void 0!==window.event&&window.hasOwnProperty("event")&&(window.event=d)}var p,g=Array.prototype.slice.call(arguments,3);function m(){u=!0,h(),t.apply(n,g),c=!1}var v=!1,y=!1;function b(e){if(p=e.error,v=!0,null===p&&0===e.colno&&0===e.lineno&&(y=!0),e.defaultPrevented&&null!=p&&"object"==typeof p)try{p._suppressLogging=!0}catch(e){}}var w="react-"+(e||"invokeguardedcallback");if(window.addEventListener("error",b),qn.addEventListener(w,m,!1),l.initEvent(w,!1,!1),qn.dispatchEvent(l),f&&Object.defineProperty(window,"event",f),u&&c&&(v?y&&(p=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):p=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this.onError(p)),window.removeEventListener("error",b),!u)return h(),Qn.apply(this,arguments)}}var Yn=$n,Zn=!1,Xn=null,Kn=!1,Jn=null,er={onError:function(e){Zn=!0,Xn=e}};function tr(e,t,n,r,i,o,s,a,A){Zn=!1,Xn=null,Yn.apply(er,arguments)}function nr(){return Zn}function rr(){if(Zn){var e=Xn;return Zn=!1,Xn=null,e}throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function ir(e){return e._reactInternals}var or,sr,ar,Ar,lr=64,ur=128,cr=256,dr=512,fr=8192,hr=1024,pr=2048,gr=4096,mr=16384,vr=o.ReactCurrentOwner;function yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{var r=t;do{0!=(1026&(t=r).flags)&&(n=t.return),r=t.return}while(r)}return 3===t.tag?n:null}function br(e){if(e.tag===f){var t=e.memoizedState;if(null===t){var n=e.alternate;null!==n&&(t=n.memoizedState)}if(null!==t)return t.dehydrated}return null}function wr(e){return 3===e.tag?e.stateNode.containerInfo:null}function _r(e){if(yr(e)!==e)throw Error("Unable to find node on an unmounted component.")}function xr(e){var t=e.alternate;if(!t){var n=yr(e);if(null===n)throw Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(null===o)break;var s=o.alternate;if(null===s){var a=o.return;if(null!==a){r=i=a;continue}break}if(o.child===s.child){for(var A=o.child;A;){if(A===r)return _r(o),e;if(A===i)return _r(o),t;A=A.sibling}throw Error("Unable to find node on an unmounted component.")}if(r.return!==i.return)r=o,i=s;else{for(var l=!1,u=o.child;u;){if(u===r){l=!0,r=o,i=s;break}if(u===i){l=!0,i=o,r=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===r){l=!0,r=s,i=o;break}if(u===i){l=!0,i=s,r=o;break}u=u.sibling}if(!l)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(r.alternate!==i)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==r.tag)throw Error("Unable to find node on an unmounted component.");return r.stateNode.current===r?e:t}function Er(e){var t=xr(e);if(!t)return null;for(var n=t;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function Sr(e,t){for(var n=t,r=e.alternate;null!==n;){if(n===e||n===r)return!0;n=n.return}return!1}var Pr=!1,kr=[],Cr=null,Tr=null,Mr=null,Ir=new Map,Lr=new Map,Rr=[];var Or=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function Dr(e){return Or.indexOf(e)>-1}function Br(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function Fr(e,t,n,r,i){var o=Br(e,t,n,r,i);kr.push(o)}function zr(e,t){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":var n=t.pointerId;Ir.delete(n);break;case"gotpointercapture":case"lostpointercapture":var r=t.pointerId;Lr.delete(r)}}function Nr(e,t,n,r,i,o){if(null===e||e.nativeEvent!==o){var s=Br(t,n,r,i,o);if(null!==t){var a=pA(t);null!==a&&sr(a)}return s}e.eventSystemFlags|=r;var A=e.targetContainers;return null!==i&&-1===A.indexOf(i)&&A.push(i),e}function jr(e){var t=hA(e.target);if(null!==t){var n=yr(t);if(null!==n){var i=n.tag;if(i===f){var o=br(n);if(null!==o)return e.blockedOn=o,void Ar(e.lanePriority,(function(){r.unstable_runWithPriority(e.priority,(function(){ar(n)}))}))}else if(3===i){if(n.stateNode.hydrate)return void(e.blockedOn=wr(n))}}}e.blockedOn=null}function Ur(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;t.length>0;){var n=t[0],r=Zi(e.domEventName,e.eventSystemFlags,n,e.nativeEvent);if(null!==r){var i=pA(r);return null!==i&&sr(i),e.blockedOn=r,!1}t.shift()}return!0}function Vr(e,t,n){Ur(e)&&n.delete(t)}function Wr(){for(Pr=!1;kr.length>0;){var e=kr[0];if(null!==e.blockedOn){var t=pA(e.blockedOn);null!==t&&or(t);break}for(var n=e.targetContainers;n.length>0;){var r=n[0],i=Zi(e.domEventName,e.eventSystemFlags,r,e.nativeEvent);if(null!==i){e.blockedOn=i;break}n.shift()}null===e.blockedOn&&kr.shift()}null!==Cr&&Ur(Cr)&&(Cr=null),null!==Tr&&Ur(Tr)&&(Tr=null),null!==Mr&&Ur(Mr)&&(Mr=null),Ir.forEach(Vr),Lr.forEach(Vr)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Pr||(Pr=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wr)))}function Hr(e){if(kr.length>0){Gr(kr[0],e);for(var t=1;t<kr.length;t++){var n=kr[t];n.blockedOn===e&&(n.blockedOn=null)}}null!==Cr&&Gr(Cr,e),null!==Tr&&Gr(Tr,e),null!==Mr&&Gr(Mr,e);var r=function(t){return Gr(t,e)};Ir.forEach(r),Lr.forEach(r);for(var i=0;i<Rr.length;i++){var o=Rr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;Rr.length>0;){var s=Rr[0];if(null!==s.blockedOn)break;jr(s),null===s.blockedOn&&Rr.shift()}}function Qr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $r={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionend:Qr("Transition","TransitionEnd")},qr={},Yr={};function Zr(e){if(qr[e])return qr[e];if(!$r[e])return e;var t=$r[e];for(var n in t)if(t.hasOwnProperty(n)&&n in Yr)return qr[e]=t[n];return e}C&&(Yr=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);var Xr=Zr("animationend"),Kr=Zr("animationiteration"),Jr=Zr("animationstart"),ei=Zr("transitionend"),ti=new Map,ni=new Map,ri=["cancel","cancel","click","click","close","close","contextmenu","contextMenu","copy","copy","cut","cut","auxclick","auxClick","dblclick","doubleClick","dragend","dragEnd","dragstart","dragStart","drop","drop","focusin","focus","focusout","blur","input","input","invalid","invalid","keydown","keyDown","keypress","keyPress","keyup","keyUp","mousedown","mouseDown","mouseup","mouseUp","paste","paste","pause","pause","play","play","pointercancel","pointerCancel","pointerdown","pointerDown","pointerup","pointerUp","ratechange","rateChange","reset","reset","seeked","seeked","submit","submit","touchcancel","touchCancel","touchend","touchEnd","touchstart","touchStart","volumechange","volumeChange"],ii=["change","selectionchange","textInput","compositionstart","compositionend","compositionupdate"],oi=["drag","drag","dragenter","dragEnter","dragexit","dragExit","dragleave","dragLeave","dragover","dragOver","mousemove","mouseMove","mouseout","mouseOut","mouseover","mouseOver","pointermove","pointerMove","pointerout","pointerOut","pointerover","pointerOver","scroll","scroll","toggle","toggle","touchmove","touchMove","wheel","wheel"],si=["abort","abort",Xr,"animationEnd",Kr,"animationIteration",Jr,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ei,"transitionEnd","waiting","waiting"];function ai(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));ni.set(r,t),ti.set(r,o),P(o,[r])}}var Ai=r.unstable_now;if(null==i.__interactionsRef||null==i.__interactionsRef.current)throw Error("It is not supported to run the profiling version of a renderer (for example, `react-dom/profiling`) without also replacing the `scheduler/tracing` module with `scheduler/tracing-profiling`. Your bundler might have a setting for aliasing both modules. Learn more at https://reactjs.org/link/profiling");Ai();var li=15,ui=10,ci=3584,di=4186112,fi=62914560,hi=33554432,pi=67108864,gi=134217727,mi=134217728,vi=805306368,yi=1073741824,bi=-1;var wi=8;function _i(e){if(0!=(1&e))return wi=li,1;if(0!=(2&e))return wi=14,2;if(0!=(4&e))return wi=13,4;var t=24&e;if(0!==t)return wi=12,t;if(0!=(32&e))return wi=11,32;var n=192&e;if(0!==n)return wi=ui,n;if(0!=(256&e))return wi=9,256;var r=ci&e;if(0!==r)return wi=8,r;if(0!=(4096&e))return wi=7,4096;var i=di&e;if(0!==i)return wi=6,i;var o=fi&e;if(0!==o)return wi=5,o;if(e&pi)return wi=4,pi;if(0!=(e&mi))return wi=3,mi;var s=vi&e;return 0!==s?(wi=2,s):0!=(yi&e)?(wi=1,yi):(A("Should have found matching lanes. This is a bug in React."),wi=8,e)}function xi(e,t){var n=e.pendingLanes;if(0===n)return wi=0,0;var r=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==o)r=o,i=wi=li;else{var A=n&gi;if(0!==A){var l=A&~s;if(0!==l)r=_i(l),i=wi;else{var u=A&a;0!==u&&(r=_i(u),i=wi)}}else{var c=n&~s;0!==c?(r=_i(c),i=wi):0!==a&&(r=_i(a),i=wi)}}if(0===r)return 0;if(r=n&function(e){return(function(e){var t=31-Ni(e);return t<0?0:1<<t}(e)<<1)-1}(r),0!==t&&t!==r&&0==(t&s)){if(_i(t),i<=wi)return t;wi=i}var d=e.entangledLanes;if(0!==d)for(var f=e.entanglements,h=r&d;h>0;){var p=Mi(h),g=1<<p;r|=f[p],h&=~g}return r}function Ei(e,t){_i(e);return wi>=ui?t+250:wi>=6?t+5e3:bi}function Si(e){var t=-1073741825&e.pendingLanes;return 0!==t?t:t&yi?yi:0}function Pi(e){return 0!=(e&gi)}function ki(e){return(e&fi)===e}function Ci(e,t){switch(e){case 0:case 6:case 5:break;case li:return 1;case 14:return 2;case 12:var n=Ti(24&~t);return 0===n?Ci(ui,t):n;case ui:var r=Ti(192&~t);return 0===r?Ci(8,t):r;case 8:var i=Ti(ci&~t);return 0===i&&0===(i=Ti(di&~t))&&(i=Ti(ci)),i;case 2:var o=Ti(vi&~t);return 0===o&&(o=Ti(vi)),o}throw Error("Invalid update priority: "+e+". This is a bug in React.")}function Ti(e){return function(e){return e&-e}(e)}function Mi(e){return 31-Ni(e)}function Ii(e,t){return 0!=(e&t)}function Li(e,t){return(e&t)===t}function Ri(e,t){return e|t}function Oi(e,t){return e&~t}function Di(e){for(var t=[],n=0;n<31;n++)t.push(e);return t}function Bi(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,e.eventTimes[Mi(t)]=n}function Fi(e,t,n){e.pingedLanes|=e.suspendedLanes&t}function zi(e,t){e.mutableReadLanes|=t&e.pendingLanes}var Ni=Math.clz32?Math.clz32:function(e){if(0===e)return 32;return 31-(ji(e)/Ui|0)|0},ji=Math.log,Ui=Math.LN2;var Vi=r.unstable_UserBlockingPriority,Wi=r.unstable_runWithPriority,Gi=!0;function Hi(e){Gi=!!e}function Qi(e,t,n){var r,i=function(e){var t=ni.get(e);return void 0===t?2:t}(t);switch(i){case 0:r=$i;break;case 1:r=qi;break;default:r=Yi}return r.bind(null,t,n,e)}function $i(e,t,n,r){r.timeStamp,jn||zn(),function(e,t,n,r,i){var o=jn;jn=!0;try{Fn(e,t,n,r,i)}finally{(jn=o)||Vn()}}(Yi,e,t,n,r)}function qi(e,t,n,r){Wi(Vi,Yi.bind(null,e,t,n,r))}function Yi(e,t,n,r){if(Gi){var i;if((i=0==(4&t))&&kr.length>0&&Dr(e))Fr(null,e,t,n,r);else{var o=Zi(e,t,n,r);if(null!==o){if(i){if(Dr(e))return void Fr(o,e,t,n,r);if(function(e,t,n,r,i){switch(t){case"focusin":return Cr=Nr(Cr,e,t,n,r,i),!0;case"dragenter":return Tr=Nr(Tr,e,t,n,r,i),!0;case"mouseover":return Mr=Nr(Mr,e,t,n,r,i),!0;case"pointerover":var o=i,s=o.pointerId;return Ir.set(s,Nr(Ir.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":var a=i,A=a.pointerId;return Lr.set(A,Nr(Lr.get(A)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;zr(e,r)}Gs(e,t,r,null,n)}else i&&zr(e,r)}}}function Zi(e,t,n,r){var i=hA(Tn(r));if(null!==i){var o=yr(i);if(null===o)i=null;else{var s=o.tag;if(s===f){var a=br(o);if(null!==a)return a;i=null}else if(3===s){if(o.stateNode.hydrate)return wr(o);i=null}else o!==i&&(i=null)}}return Gs(e,t,r,i,n),null}var Xi=null,Ki=null,Ji=null;function eo(){if(Ji)return Ji;var e,t,n=Ki,r=n.length,i=to(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);var a=t>1?1-t:void 0;return Ji=i.slice(e,a)}function to(){return"value"in Xi?Xi.value:Xi.textContent}function no(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}function ro(){return!0}function io(){return!1}function oo(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)if(e.hasOwnProperty(s)){var a=e[s];this[s]=a?a(i):i[s]}var A=null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue;return this.isDefaultPrevented=A?ro:io,this.isPropagationStopped=io,this}return n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),t}var so,ao,Ao,lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=oo(lo),co=n({},lo,{view:0,detail:0}),fo=oo(co);var ho=n({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(function(e){e!==Ao&&(Ao&&"mousemove"===e.type?(so=e.screenX-Ao.screenX,ao=e.screenY-Ao.screenY):(so=0,ao=0),Ao=e)}(e),so)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),po=oo(ho),go=oo(n({},ho,{dataTransfer:0})),mo=oo(n({},co,{relatedTarget:0})),vo=oo(n({},lo,{animationName:0,elapsedTime:0,pseudoElement:0})),yo=oo(n({},lo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),bo=oo(n({},lo,{data:0})),wo=bo,_o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};var Eo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function So(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=Eo[e];return!!n&&!!t[n]}function Po(e){return So}var ko=oo(n({},co,{key:function(e){if(e.key){var t=_o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=no(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?xo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(e){return"keypress"===e.type?no(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?no(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Co=oo(n({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),To=oo(n({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po})),Mo=oo(n({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0})),Io=oo(n({},ho,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Lo=[9,13,27,32],Ro=C&&"CompositionEvent"in window,Oo=null;C&&"documentMode"in document&&(Oo=document.documentMode);var Do=C&&"TextEvent"in window&&!Oo,Bo=C&&(!Ro||Oo&&Oo>8&&Oo<=11),Fo=String.fromCharCode(32);var zo=!1;function No(e,t){switch(e){case"keyup":return-1!==Lo.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jo(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function Uo(e){return"ko"===e.locale}var Vo=!1;function Wo(e,t,n,r,i){var o,s;if(Ro?o=function(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}(t):Vo?No(t,r)&&(o="onCompositionEnd"):function(e,t){return"keydown"===e&&229===t.keyCode}(t,r)&&(o="onCompositionStart"),!o)return null;Bo&&!Uo(r)&&(Vo||"onCompositionStart"!==o?"onCompositionEnd"===o&&Vo&&(s=eo()):Vo=function(e){return Xi=e,Ki=to(),!0}(i));var a=Qs(n,o);if(a.length>0){var A=new bo(o,t,null,r,i);if(e.push({event:A,listeners:a}),s)A.data=s;else{var l=jo(r);null!==l&&(A.data=l)}}}function Go(e,t){if(Vo){if("compositionend"===e||!Ro&&No(e,t)){var n=eo();return Xi=null,Ki=null,Ji=null,Vo=!1,n}return null}switch(e){default:return null;case"keypress":if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bo&&!Uo(t)?null:t.data}}function Ho(e,t,n,r,i){var o;if(!(o=Do?function(e,t){switch(e){case"compositionend":return jo(t);case"keypress":return 32!==t.which?null:(zo=!0,Fo);case"textInput":var n=t.data;return n===Fo&&zo?null:n;default:return null}}(t,r):Go(t,r)))return null;var s=Qs(n,"onBeforeInput");if(s.length>0){var a=new wo("onBeforeInput","beforeinput",null,r,i);e.push({event:a,listeners:s}),a.data=o}}var Qo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $o(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Qo[e.type]:"textarea"===t}
/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */function qo(e,t,n,r){On(r);var i=Qs(t,"onChange");if(i.length>0){var o=new uo("onChange","change",null,n,r);e.push({event:o,listeners:i})}}var Yo=null,Zo=null;function Xo(e){var t=[];qo(t,Zo,e,Tn(e)),function(e,t){if(jn)return e(t);jn=!0;try{Bn(e,t)}finally{jn=!1,Vn()}}(Ko,t)}function Ko(e){Fs(e,0)}function Jo(e){if(nt(gA(e)))return e}function es(e,t){if("change"===e)return t}var ts=!1;function ns(){Yo&&(Yo.detachEvent("onpropertychange",rs),Yo=null,Zo=null)}function rs(e){"value"===e.propertyName&&Jo(Zo)&&Xo(e)}function is(e,t,n){"focusin"===e?(ns(),function(e,t){Zo=t,(Yo=e).attachEvent("onpropertychange",rs)}(t,n)):"focusout"===e&&ns()}function os(e,t){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jo(Zo)}function ss(e,t){if("click"===e)return Jo(t)}function as(e,t){if("input"===e||"change"===e)return Jo(t)}function As(e,t,n,r,i,o,s){var a,A,l,u,c,d,f=n?gA(n):window;if("select"===(u=(l=f).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type?a=es:$o(f)?ts?a=as:(a=os,A=is):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(f)&&(a=ss),a){var h=a(t,n);if(h)return void qo(e,h,r,i)}A&&A(t,f,n),"focusout"===t&&(d=(c=f)._wrapperState)&&d.controlled&&"number"===c.type&&pt(c,"number",c.value)}function ls(e,t,n,r,i,o,s){var a="mouseover"===t||"pointerover"===t,A="mouseout"===t||"pointerout"===t;if(a&&0==(16&o)){var l=r.relatedTarget||r.fromElement;if(l&&(hA(l)||fA(l)))return}if(A||a){var u,c,d;if(i.window===i)u=i;else{var f=i.ownerDocument;u=f?f.defaultView||f.parentWindow:window}if(A){var h=r.relatedTarget||r.toElement;if(c=n,null!==(d=h?hA(h):null))(d!==yr(d)||5!==d.tag&&6!==d.tag)&&(d=null)}else c=null,d=n;if(c!==d){var p=po,g="onMouseLeave",m="onMouseEnter",v="mouse";"pointerout"!==t&&"pointerover"!==t||(p=Co,g="onPointerLeave",m="onPointerEnter",v="pointer");var y=null==c?u:gA(c),b=null==d?u:gA(d),w=new p(g,v+"leave",c,r,i);w.target=y,w.relatedTarget=b;var _=null;if(hA(i)===n){var x=new p(m,v+"enter",d,r,i);x.target=b,x.relatedTarget=y,_=x}!function(e,t,n,r,i){var o=r&&i?function(e,t){for(var n=e,r=t,i=0,o=n;o;o=$s(o))i++;for(var s=0,a=r;a;a=$s(a))s++;for(;i-s>0;)n=$s(n),i--;for(;s-i>0;)r=$s(r),s--;var A=i;for(;A--;){if(n===r||null!==r&&n===r.alternate)return n;n=$s(n),r=$s(r)}return null}(r,i):null;null!==r&&qs(e,t,r,o,!1);null!==i&&null!==n&&qs(e,n,i,o,!0)}(e,w,_,c,d)}}}C&&(ts=function(e){if(!C)return!1;var t="on"+e,n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r[t]}return n}("input")&&(!document.documentMode||document.documentMode>9));var us="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cs=Object.prototype.hasOwnProperty;function ds(e,t){if(us(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!cs.call(t,n[i])||!us(e[n[i]],t[n[i]]))return!1;return!0}function fs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hs(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function ps(e,t){for(var n=fs(e),r=0,i=0;n;){if(3===n.nodeType){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}n=fs(hs(n))}}function gs(e){var t=e.ownerDocument,n=t&&t.defaultView||window,r=n.getSelection&&n.getSelection();if(!r||0===r.rangeCount)return null;var i=r.anchorNode,o=r.anchorOffset,s=r.focusNode,a=r.focusOffset;try{i.nodeType,s.nodeType}catch(e){return null}return function(e,t,n,r,i){var o=0,s=-1,a=-1,A=0,l=0,u=e,c=null;e:for(;;){for(var d=null;u!==t||0!==n&&3!==u.nodeType||(s=o+n),u!==r||0!==i&&3!==u.nodeType||(a=o+i),3===u.nodeType&&(o+=u.nodeValue.length),null!==(d=u.firstChild);)c=u,u=d;for(;;){if(u===e)break e;if(c===t&&++A===n&&(s=o),c===r&&++l===i&&(a=o),null!==(d=u.nextSibling))break;c=(u=c).parentNode}u=d}if(-1===s||-1===a)return null;return{start:s,end:a}}(e,i,o,s,a)}function ms(e){return e&&3===e.nodeType}function vs(e,t){return!(!e||!t)&&(e===t||!ms(e)&&(ms(t)?vs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ys(e){return e&&e.ownerDocument&&vs(e.ownerDocument.documentElement,e)}function bs(e){try{return"string"==typeof e.contentWindow.location.href}catch(e){return!1}}function ws(){for(var e=window,t=rt();t instanceof e.HTMLIFrameElement;){if(!bs(t))return t;t=rt((e=t.contentWindow).document)}return t}function _s(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function xs(e){var t=ws(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&ys(n)){null!==r&&_s(n)&&function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n);"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):function(e,t){var n=e.ownerDocument||document,r=n&&n.defaultView||window;if(r.getSelection){var i=r.getSelection(),o=e.textContent.length,s=Math.min(t.start,o),a=void 0===t.end?s:Math.min(t.end,o);if(!i.extend&&s>a){var A=a;a=s,s=A}var l=ps(e,s),u=ps(e,a);if(l&&u){if(1===i.rangeCount&&i.anchorNode===l.node&&i.anchorOffset===l.offset&&i.focusNode===u.node&&i.focusOffset===u.offset)return;var c=n.createRange();c.setStart(l.node,l.offset),i.removeAllRanges(),s>a?(i.addRange(c),i.extend(u.node,u.offset)):(c.setEnd(u.node,u.offset),i.addRange(c))}}}(e,t)}(n,r);for(var i=[],o=n;o=o.parentNode;)1===o.nodeType&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});"function"==typeof n.focus&&n.focus();for(var s=0;s<i.length;s++){var a=i[s];a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}}function Es(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:gs(e))||{start:0,end:0}}var Ss=C&&"documentMode"in document&&document.documentMode<=11;var Ps=null,ks=null,Cs=null,Ts=!1;function Ms(e,t,n){var r,i=(r=n).window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!Ts&&null!=Ps&&Ps===rt(i)){var o=function(e){if("selectionStart"in e&&_s(e))return{start:e.selectionStart,end:e.selectionEnd};var t=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}(Ps);if(!Cs||!ds(Cs,o)){Cs=o;var s=Qs(ks,"onSelect");if(s.length>0){var a=new uo("onSelect","select",null,t,n);e.push({event:a,listeners:s}),a.target=Ps}}}}function Is(e,t,n,r,i,o,s){var a=ti.get(t);if(void 0!==a){var A=uo,l=t;switch(t){case"keypress":if(0===no(r))return;case"keydown":case"keyup":A=ko;break;case"focusin":l="focus",A=mo;break;case"focusout":l="blur",A=mo;break;case"beforeblur":case"afterblur":A=mo;break;case"click":if(2===r.button)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=To;break;case Xr:case Kr:case Jr:A=vo;break;case ei:A=Mo;break;case"scroll":A=fo;break;case"wheel":A=Io;break;case"copy":case"cut":case"paste":A=yo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Co}var u=0!=(4&o),c=!u&&"scroll"===t,d=function(e,t,n,r,i){var o=null!==t?t+"Capture":null,s=r?o:t,a=[],A=e,l=null;for(;null!==A;){var u=A,c=u.stateNode;if(5===u.tag&&null!==c&&(l=c,null!==s)){var d=Wn(A,s);null!=d&&a.push(Hs(A,d,l))}if(i)break;A=A.return}return a}(n,a,r.type,u,c);if(d.length>0){var f=new A(a,l,null,r,i);e.push({event:f,listeners:d})}}}function Ls(e,t,n,r,i,o,s){Is(e,t,n,r,i,o),0==(7&o)&&(ls(e,t,n,r,i,o),As(e,t,n,r,i),function(e,t,n,r,i,o,s){var a=n?gA(n):window;switch(t){case"focusin":($o(a)||"true"===a.contentEditable)&&(Ps=a,ks=n,Cs=null);break;case"focusout":Ps=null,ks=null,Cs=null;break;case"mousedown":Ts=!0;break;case"contextmenu":case"mouseup":case"dragend":Ts=!1,Ms(e,r,i);break;case"selectionchange":if(Ss)break;case"keydown":case"keyup":Ms(e,r,i)}}(e,t,n,r,i),function(e,t,n,r,i,o,s){Wo(e,t,n,r,i),Ho(e,t,n,r,i)}(e,t,n,r,i))}ai(ri,0),ai(oi,1),ai(si,2),function(e,t){for(var n=0;n<e.length;n++)ni.set(e[n],t)}(ii,0),k("onMouseEnter",["mouseout","mouseover"]),k("onMouseLeave",["mouseout","mouseover"]),k("onPointerEnter",["pointerout","pointerover"]),k("onPointerLeave",["pointerout","pointerover"]),P("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"]),P("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"]),P("onBeforeInput",["compositionend","keypress","textInput","paste"]),P("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),P("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),P("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"]);var Rs=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Os=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(Rs));function Ds(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,a,A){if(tr.apply(this,arguments),Zn){var l=rr();Kn||(Kn=!0,Jn=l)}}(r,t,void 0,e),e.currentTarget=null}function Bs(e,t,n){var r;if(n)for(var i=t.length-1;i>=0;i--){var o=t[i],s=o.instance,a=o.currentTarget,A=o.listener;if(s!==r&&e.isPropagationStopped())return;Ds(e,A,a),r=s}else for(var l=0;l<t.length;l++){var u=t[l],c=u.instance,d=u.currentTarget,f=u.listener;if(c!==r&&e.isPropagationStopped())return;Ds(e,f,d),r=c}}function Fs(e,t){for(var n=0!=(4&t),r=0;r<e.length;r++){var i=e[r];Bs(i.event,i.listeners,n)}!function(){if(Kn){var e=Jn;throw Kn=!1,Jn=null,e}}()}function zs(e,t){var n=yA(t),r=Ys(e,false);n.has(r)||(Vs(t,e,2,false),n.add(r))}var Ns="_reactListening"+Math.random().toString(36).slice(2);function js(e){e[Ns]||(e[Ns]=!0,x.forEach((function(t){Os.has(t)||Us(t,!1,e,null),Us(t,!0,e,null)})))}function Us(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Os.has(e)){if("scroll"!==e)return;i|=2,o=r}var s=yA(o),a=Ys(e,t);s.has(a)||(t&&(i|=4),Vs(o,e,i,t),s.add(a))}function Vs(e,t,n,r,i){var o=Qi(e,t,n),s=void 0;Gn&&("touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0)),e=e,r?void 0!==s?function(e,t,n,r){e.addEventListener(t,n,{capture:!0,passive:r})}(e,t,o,s):function(e,t,n){e.addEventListener(t,n,!0)}(e,t,o):void 0!==s?function(e,t,n,r){e.addEventListener(t,n,{passive:r})}(e,t,o,s):function(e,t,n){e.addEventListener(t,n,!1)}(e,t,o)}function Ws(e,t){return e===t||8===e.nodeType&&e.parentNode===t}function Gs(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)){var s=i;if(null!==r){var a=r;e:for(;;){if(null===a)return;var A=a.tag;if(3===A||4===A){var l=a.stateNode.containerInfo;if(Ws(l,s))break;if(4===A)for(var u=a.return;null!==u;){var c=u.tag;if(3===c||4===c)if(Ws(u.stateNode.containerInfo,s))return;u=u.return}for(;null!==l;){var d=hA(l);if(null===d)return;var f=d.tag;if(5===f||6===f){a=o=d;continue e}l=l.parentNode}}a=a.return}}}!function(e,t,n){if(Un)return e(t,n);Un=!0;try{Nn(e,t,n)}finally{Un=!1,Vn()}}((function(){return function(e,t,n,r,i){var o=[];Ls(o,e,r,n,Tn(n),t),Fs(o,t)}(e,t,n,o)}))}function Hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qs(e,t){for(var n=t+"Capture",r=[],i=e;null!==i;){var o=i,s=o.stateNode;if(5===o.tag&&null!==s){var a=s,A=Wn(i,n);null!=A&&r.unshift(Hs(i,A,a));var l=Wn(i,t);null!=l&&r.push(Hs(i,l,a))}i=i.return}return r}function $s(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qs(e,t,n,r,i){for(var o=t._reactName,s=[],a=n;null!==a&&a!==r;){var A=a,l=A.alternate,u=A.stateNode,c=A.tag;if(null!==l&&l===r)break;if(5===c&&null!==u){var d=u;if(i){var f=Wn(a,o);null!=f&&s.unshift(Hs(a,f,d))}else if(!i){var h=Wn(a,o);null!=h&&s.push(Hs(a,h,d))}}a=a.return}0!==s.length&&e.push({event:t,listeners:s})}function Ys(e,t){return e+"__"+(t?"capture":"bubble")}var Zs,Xs,Ks,Js,ea,ta,na,ra,ia,oa,sa=!1,aa="dangerouslySetInnerHTML",Aa="suppressContentEditableWarning",la="suppressHydrationWarning",ua="autoFocus",ca="children",da="style",fa=Ot;Zs={dialog:!0,webview:!0},Ks=function(e,t){yn(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||bn||(bn=!0,"select"===e&&t.multiple?A("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):A("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}(e,t),Cn(e,t,{registrationNameDependencies:E,possibleRegistrationNames:S})},ra=C&&!document.documentMode;var ha=/\r\n?/g,pa=/\u0000|\uFFFD/g;function ga(e){return 9===e.nodeType?e:e.ownerDocument}function ma(){}function va(e){e.onclick=ma}function ya(e,t,n,r){var i,o=cn(t,n);switch(Ks(t,n),t){case"dialog":zs("cancel",e),zs("close",e),i=n;break;case"iframe":case"object":case"embed":zs("load",e),i=n;break;case"video":case"audio":for(var s=0;s<Rs.length;s++)zs(Rs[s],e);i=n;break;case"source":zs("error",e),i=n;break;case"img":case"image":case"link":zs("error",e),zs("load",e),i=n;break;case"details":zs("toggle",e),i=n;break;case"input":ut(e,n),i=lt(e,n),zs("invalid",e);break;case"option":yt(0,n),i=bt(0,n);break;case"select":St(e,n),i=Et(0,n),zs("invalid",e);break;case"textarea":Ct(e,n),i=kt(e,n),zs("invalid",e);break;default:i=n}switch(un(t,i),function(e,t,n,r,i){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];if(o===da)s&&Object.freeze(s),an(t,s);else if(o===aa){var a=s?s.__html:void 0;null!=a&&jt(t,a)}else o===ca?"string"==typeof s?("textarea"!==e||""!==s)&&Vt(t,s):"number"==typeof s&&Vt(t,""+s):o===Aa||o===la||o===ua||(E.hasOwnProperty(o)?null!=s&&("function"!=typeof s&&na(o,s),"onScroll"===o&&zs("scroll",t)):null!=s&&Z(t,o,s,i))}}(t,e,0,i,o),t){case"input":tt(e),ft(e,n,!1);break;case"textarea":tt(e),Mt(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",Ye(Ze(t.value)))}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?xt(n,!!t.multiple,r,!1):null!=t.defaultValue&&xt(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof i.onClick&&va(e)}}function ba(e,t,n,r,i){Ks(t,r);var o,s,a,l,u=null;switch(t){case"input":o=lt(e,n),s=lt(e,r),u=[];break;case"option":o=bt(0,n),s=bt(0,r),u=[];break;case"select":o=Et(0,n),s=Et(0,r),u=[];break;case"textarea":o=kt(e,n),s=kt(e,r),u=[];break;default:s=r,"function"!=typeof(o=n).onClick&&"function"==typeof s.onClick&&va(e)}un(t,s);var c=null;for(a in o)if(!s.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if(a===da){var d=o[a];for(l in d)d.hasOwnProperty(l)&&(c||(c={}),c[l]="")}else a===aa||a===ca||a===Aa||a===la||a===ua||(E.hasOwnProperty(a)?u||(u=[]):(u=u||[]).push(a,null));for(a in s){var f=s[a],h=null!=o?o[a]:void 0;if(s.hasOwnProperty(a)&&f!==h&&(null!=f||null!=h))if(a===da)if(f&&Object.freeze(f),h){for(l in h)!h.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(c||(c={}),c[l]="");for(l in f)f.hasOwnProperty(l)&&h[l]!==f[l]&&(c||(c={}),c[l]=f[l])}else c||(u||(u=[]),u.push(a,c)),c=f;else if(a===aa){var p=f?f.__html:void 0,g=h?h.__html:void 0;null!=p&&g!==p&&(u=u||[]).push(a,p)}else a===ca?"string"!=typeof f&&"number"!=typeof f||(u=u||[]).push(a,""+f):a===Aa||a===la||(E.hasOwnProperty(a)?(null!=f&&("function"!=typeof f&&na(a,f),"onScroll"===a&&zs("scroll",e)),u||h===f||(u=[])):"object"==typeof f&&null!==f&&f.$$typeof===ue?f.toString():(u=u||[]).push(a,f))}return c&&(!function(e,t){if(t){var n,r=An(e),i=An(t),o={};for(var s in r){var a=r[s],l=i[s];if(l&&a!==l){var u=a+","+l;if(o[u])continue;o[u]=!0,A("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",null==(n=e[a])||"boolean"==typeof n||""===n?"Removing":"Updating",a,l)}}}}(c,s.style),(u=u||[]).push(da,c)),u}function wa(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&ct(e,i);cn(n,r);switch(function(e,t,n,r){for(var i=0;i<t.length;i+=2){var o=t[i],s=t[i+1];o===da?an(e,s):o===aa?jt(e,s):o===ca?Vt(e,s):Z(e,o,s,r)}}(e,t,0,cn(n,i)),n){case"input":dt(e,i);break;case"textarea":Tt(e,i);break;case"select":!function(e,t){var n=e,r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var i=t.value;null!=i?xt(n,!!t.multiple,i,!1):r!==!!t.multiple&&(null!=t.defaultValue?xt(n,!!t.multiple,t.defaultValue,!0):xt(n,!!t.multiple,t.multiple?[]:"",!1))}(e,i)}}function _a(e,t){Js(e.nodeValue,t)}function xa(e,t){sa||(sa=!0,A("Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function Ea(e,t){sa||(sa=!0,A('Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function Sa(e,t,n){sa||(sa=!0,A("Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function Pa(e,t){""!==t&&(sa||(sa=!0,A('Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}ia=function(e){return("string"==typeof e?e:""+e).replace(ha,"\n").replace(pa,"")},Js=function(e,t){if(!sa){var n=ia(t),r=ia(e);r!==n&&(sa=!0,A('Text content did not match. Server: "%s" Client: "%s"',r,n))}},ea=function(e,t,n){if(!sa){var r=ia(n),i=ia(t);i!==r&&(sa=!0,A("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(i),JSON.stringify(r)))}},ta=function(e){if(!sa){sa=!0;var t=[];e.forEach((function(e){t.push(e)})),A("Extra attributes from the server: %s",t)}},na=function(e,t){!1===t?A("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):A("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)},oa=function(e,t){var n=e.namespaceURI===fa?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var ka,Ca,Ta=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Ma=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Ia=Ma.concat(["button"]),La=["dd","dt","li","option","optgroup","p","rp","rt"],Ra={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Ca=function(e,t){var r=n({},e||Ra),i={tag:t};return-1!==Ma.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==Ia.indexOf(t)&&(r.pTagInButtonScope=null),-1!==Ta.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=i,"form"===t&&(r.formTag=i),"a"===t&&(r.aTagInScope=i),"button"===t&&(r.buttonTagInScope=i),"nobr"===t&&(r.nobrTagInScope=i),"p"===t&&(r.pTagInButtonScope=i),"li"===t&&(r.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(r.dlItemTagAutoclosing=i),r};var Oa={};ka=function(e,t,n){var r=(n=n||Ra).current,i=r&&r.tag;null!=t&&(null!=e&&A("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var o=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e||"frameset"===e;case"frameset":return"frame"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===La.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,i)?null:r,s=o?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),a=o||s;if(a){var l=a.tag,u=!!o+"|"+e+"|"+l;if(!Oa[u]){Oa[u]=!0;var c=e,d="";if("#text"===e?/\S/.test(t)?c="Text nodes":(c="Whitespace text nodes",d=" Make sure you don't have any extra whitespace between tags on each line of your source code."):c="<"+e+">",o){var f="";"table"===l&&"tr"===e&&(f+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),A("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",c,l,d,f)}else A("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",c,l)}}};var Da="$?",Ba="$!",Fa=null,za=null;function Na(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ja(e){var t;Fa=Gi,t=ws(),za={focusedElem:t,selectionRange:_s(t)?Es(t):null};return Hi(!1),null}function Ua(e,t,n,r,i){var o=r;if(ka(e,null,o.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var s=""+t.children,a=Ca(o.ancestorInfo,e);ka(null,s,a)}var l=function(e,t,n,r){var i,o,s=ga(n),a=r;if(a===fa&&(a=Bt(e)),a===fa){if((i=cn(e,t))||e===e.toLowerCase()||A("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var l=s.createElement("div");l.innerHTML="<script><\/script>";var u=l.firstChild;o=l.removeChild(u)}else if("string"==typeof t.is)o=s.createElement(e,{is:t.is});else if(o=s.createElement(e),"select"===e){var c=o;t.multiple?c.multiple=!0:t.size&&(c.size=t.size)}}else o=s.createElementNS(a,e);return a===fa&&(i||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(o)||Object.prototype.hasOwnProperty.call(Zs,e)||(Zs[e]=!0,A("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),o}(e,t,n,o.namespace);return cA(i,l),vA(l,t),l}function Va(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Wa(e,t,n,r){ka(null,e,n.ancestorInfo);var i=function(e,t){return ga(t).createTextNode(e)}(e,t);return cA(r,i),i}var Ga="function"==typeof setTimeout?setTimeout:void 0,Ha="function"==typeof clearTimeout?clearTimeout:void 0;function Qa(e){Vt(e,"")}function $a(e,t){e.removeChild(t)}function qa(e){var t=(e=e).style;"function"==typeof t.setProperty?t.setProperty("display","none","important"):t.display="none"}function Ya(e,t){e=e;var n=t.style,r=null!=n&&n.hasOwnProperty("display")?n.display:null;e.style.display=Qt("display",r)}function Za(e,t){e.nodeValue=t}function Xa(e){if(1===e.nodeType)e.textContent="";else if(9===e.nodeType){var t=e.body;null!=t&&(t.textContent="")}}function Ka(e){return e.data===Ba}function Ja(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function eA(e){return Ja(e.nextSibling)}function tA(e){return Ja(e.firstChild)}function nA(e,t,n,r,i,o){return cA(o,e),vA(e,n),function(e,t,n,r,i){var o,s;switch(Xs=!0===n.suppressHydrationWarning,o=cn(t,n),Ks(t,n),t){case"dialog":zs("cancel",e),zs("close",e);break;case"iframe":case"object":case"embed":zs("load",e);break;case"video":case"audio":for(var a=0;a<Rs.length;a++)zs(Rs[a],e);break;case"source":zs("error",e);break;case"img":case"image":case"link":zs("error",e),zs("load",e);break;case"details":zs("toggle",e);break;case"input":ut(e,n),zs("invalid",e);break;case"option":yt(0,n);break;case"select":St(e,n),zs("invalid",e);break;case"textarea":Ct(e,n),zs("invalid",e)}un(t,n),s=new Set;for(var A=e.attributes,l=0;l<A.length;l++)switch(A[l].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:s.add(A[l].name)}var u,c=null;for(var d in n)if(n.hasOwnProperty(d)){var f=n[d];if(d===ca)"string"==typeof f?e.textContent!==f&&(Xs||Js(e.textContent,f),c=[ca,f]):"number"==typeof f&&e.textContent!==""+f&&(Xs||Js(e.textContent,f),c=[ca,""+f]);else if(E.hasOwnProperty(d))null!=f&&("function"!=typeof f&&na(d,f),"onScroll"===d&&zs("scroll",e));else if("boolean"==typeof o){var h=void 0,p=j(d);if(Xs);else if(d===Aa||d===la||"value"===d||"checked"===d||"selected"===d);else if(d===aa){var g=e.innerHTML,m=f?f.__html:void 0;if(null!=m){var v=oa(e,m);v!==g&&ea(d,g,v)}}else if(d===da){if(s.delete(d),ra){var y=sn(f);y!==(h=e.getAttribute("style"))&&ea(d,h,y)}}else if(o)s.delete(d.toLowerCase()),f!==(h=Y(e,d,f))&&ea(d,h,f);else if(!F(d,p,o)&&!N(d,f,p,o)){var b=!1;if(null!==p)s.delete(p.attributeName),h=q(e,d,f,p);else{var w=r;if(w===fa&&(w=Bt(t)),w===fa)s.delete(d.toLowerCase());else{var _=(u=void 0,u=d.toLowerCase(),dn.hasOwnProperty(u)&&dn[u]||null);null!==_&&_!==d&&(b=!0,s.delete(_)),s.delete(d)}h=Y(e,d,f)}f===h||b||ea(d,h,f)}}}switch(s.size>0&&!Xs&&ta(s),t){case"input":tt(e),ft(e,n,!0);break;case"textarea":tt(e),Mt(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&va(e)}return c}(e,t,n,i.namespace)}function rA(e){for(var t=e.previousSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||r===Ba||r===Da){if(0===n)return t;n--}else"/$"===r&&n++}t=t.previousSibling}return null}var iA=0;function oA(e){var t="r:"+(iA++).toString(36);return{toString:function(){return e(),t},valueOf:function(){return e(),t}}}var sA=Math.random().toString(36).slice(2),aA="__reactFiber$"+sA,AA="__reactProps$"+sA,lA="__reactContainer$"+sA,uA="__reactEvents$"+sA;function cA(e,t){t[aA]=e}function dA(e){e[lA]=null}function fA(e){return!!e[lA]}function hA(e){var t=e[aA];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lA]||n[aA]){var r=t.alternate;if(null!==t.child||null!==r&&null!==r.child)for(var i=rA(e);null!==i;){var o=i[aA];if(o)return o;i=rA(i)}return t}n=(e=n).parentNode}return null}function pA(e){var t=e[aA]||e[lA];return t&&(5===t.tag||6===t.tag||t.tag===f||3===t.tag)?t:null}function gA(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error("getNodeFromInstance: Invalid argument.")}function mA(e){return e[AA]||null}function vA(e,t){e[AA]=t}function yA(e){var t=e[uA];return void 0===t&&(t=e[uA]=new Set),t}var bA={},wA=o.ReactDebugCurrentFrame;function _A(e){if(e){var t=e._owner,n=Be(e.type,e._source,t?t.type:null);wA.setExtraStackFrame(n)}else wA.setExtraStackFrame(null)}function xA(e,t,n,r,i){var o=Function.call.bind(Object.prototype.hasOwnProperty);for(var s in e)if(o(e,s)){var a=void 0;try{if("function"!=typeof e[s]){var l=Error((r||"React class")+": "+n+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}a=e[s](t,s,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){a=e}!a||a instanceof Error||(_A(i),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,s,typeof a),_A(null)),a instanceof Error&&!(a.message in bA)&&(bA[a.message]=!0,_A(i),A("Failed %s type: %s",n,a.message),_A(null))}}var EA,SA=[];EA=[];var PA,kA=-1;function CA(e){return{current:e}}function TA(e,t){kA<0?A("Unexpected pop."):(t!==EA[kA]&&A("Unexpected Fiber popped."),e.current=SA[kA],SA[kA]=null,EA[kA]=null,kA--)}function MA(e,t,n){kA++,SA[kA]=e.current,EA[kA]=n,e.current=t}PA={};var IA={};Object.freeze(IA);var LA=CA(IA),RA=CA(!1),OA=IA;function DA(e,t,n){return n&&NA(t)?OA:LA.current}function BA(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function FA(e,t){var n=e.type,r=n.contextTypes;if(!r)return IA;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={};for(var s in r)o[s]=t[s];return xA(r,o,"context",je(n)||"Unknown"),i&&BA(e,t,o),o}function zA(){return RA.current}function NA(e){var t=e.childContextTypes;return null!=t}function jA(e){TA(RA,e),TA(LA,e)}function UA(e){TA(RA,e),TA(LA,e)}function VA(e,t,n){if(LA.current!==IA)throw Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");MA(LA,t,e),MA(RA,n,e)}function WA(e,t,r){var i=e.stateNode,o=t.childContextTypes;if("function"!=typeof i.getChildContext){var s=je(t)||"Unknown";return PA[s]||(PA[s]=!0,A("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",s,s)),r}var a=i.getChildContext();for(var l in a)if(!(l in o))throw Error((je(t)||"Unknown")+'.getChildContext(): key "'+l+'" is not defined in childContextTypes.');return xA(o,a,"child context",je(t)||"Unknown"),n({},r,a)}function GA(e){var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||IA;return OA=LA.current,MA(LA,n,e),MA(RA,RA.current,e),!0}function HA(e,t,n){var r=e.stateNode;if(!r)throw Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(n){var i=WA(e,t,OA);r.__reactInternalMemoizedMergedChildContext=i,TA(RA,e),TA(LA,e),MA(LA,i,e),MA(RA,n,e)}else TA(RA,e),MA(RA,n,e)}function QA(e){if(!function(e){return yr(e)===e}(e)||1!==e.tag)throw Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var t=e;do{switch(t.tag){case 3:return t.stateNode.context;case 1:if(NA(t.type))return t.stateNode.__reactInternalMemoizedMergedChildContext}t=t.return}while(null!==t);throw Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}var $A=null,qA=null,YA=!1,ZA="undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__;function XA(e,t){if(qA&&"function"==typeof qA.onCommitFiberRoot)try{var n=(e.current.flags&lr)===lr;qA.onCommitFiberRoot($A,e,t,n)}catch(e){YA||(YA=!0,A("React instrumentation encountered an error: %s",e))}}var KA=r.unstable_runWithPriority,JA=r.unstable_scheduleCallback,el=r.unstable_cancelCallback,tl=r.unstable_shouldYield,nl=r.unstable_requestPaint,rl=r.unstable_now,il=r.unstable_getCurrentPriorityLevel,ol=r.unstable_ImmediatePriority,sl=r.unstable_UserBlockingPriority,al=r.unstable_NormalPriority,Al=r.unstable_LowPriority,ll=r.unstable_IdlePriority;if(null==i.__interactionsRef||null==i.__interactionsRef.current)throw Error("It is not supported to run the profiling version of a renderer (for example, `react-dom/profiling`) without also replacing the `scheduler/tracing` module with `scheduler/tracing-profiling`. Your bundler might have a setting for aliasing both modules. Learn more at https://reactjs.org/link/profiling");var ul={},cl=99,dl=98,fl=97,hl=tl,pl=void 0!==nl?nl:function(){},gl=null,ml=null,vl=!1,yl=rl(),bl=yl<1e4?rl:function(){return rl()-yl};function wl(){switch(il()){case ol:return cl;case sl:return dl;case al:return fl;case Al:return 96;case ll:return 95;default:throw Error("Unknown priority level.")}}function _l(e){switch(e){case cl:return ol;case dl:return sl;case fl:return al;case 96:return Al;case 95:return ll;default:throw Error("Unknown priority level.")}}function xl(e,t){var n=_l(e);return KA(n,t)}function El(e,t,n){var r=_l(e);return JA(r,t,n)}function Sl(e){e!==ul&&el(e)}function Pl(){if(null!==ml){var e=ml;ml=null,el(e)}kl()}function kl(){if(!vl&&null!==gl){vl=!0;var e=0;try{var t=gl;xl(cl,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(true)}while(null!==n)}})),gl=null}catch(t){throw null!==gl&&(gl=gl.slice(e+1)),JA(ol,Pl),t}finally{vl=!1}}}var Cl="17.0.2",Tl=o.ReactCurrentBatchConfig;var Ml={recordUnsafeLifecycleWarnings:function(e,t){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,t){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},Il=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t.sort().join(", ")},Ll=[],Rl=[],Ol=[],Dl=[],Bl=[],Fl=[],zl=new Set;Ml.recordUnsafeLifecycleWarnings=function(e,t){zl.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Ll.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillMount&&Rl.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Ol.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillReceiveProps&&Dl.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Bl.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillUpdate&&Fl.push(e))},Ml.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Ll.length>0&&(Ll.forEach((function(t){e.add(je(t.type)||"Component"),zl.add(t.type)})),Ll=[]);var t=new Set;Rl.length>0&&(Rl.forEach((function(e){t.add(je(e.type)||"Component"),zl.add(e.type)})),Rl=[]);var n=new Set;Ol.length>0&&(Ol.forEach((function(e){n.add(je(e.type)||"Component"),zl.add(e.type)})),Ol=[]);var r=new Set;Dl.length>0&&(Dl.forEach((function(e){r.add(je(e.type)||"Component"),zl.add(e.type)})),Dl=[]);var i=new Set;Bl.length>0&&(Bl.forEach((function(e){i.add(je(e.type)||"Component"),zl.add(e.type)})),Bl=[]);var o=new Set;(Fl.length>0&&(Fl.forEach((function(e){o.add(je(e.type)||"Component"),zl.add(e.type)})),Fl=[]),t.size>0)&&A("Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n\nPlease update the following components: %s",Il(t));r.size>0&&A("Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n\nPlease update the following components: %s",Il(r));o.size>0&&A("Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n\nPlease update the following components: %s",Il(o));e.size>0&&s("componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Il(e));n.size>0&&s("componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Il(n));i.size>0&&s("componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Il(i))};var Nl=new Map,jl=new Set;function Ul(e,t){if(e&&e.defaultProps){var r=n({},t),i=e.defaultProps;for(var o in i)void 0===r[o]&&(r[o]=i[o]);return r}return t}Ml.recordLegacyContextWarning=function(e,t){var n=function(e){for(var t=null,n=e;null!==n;)1&n.mode&&(t=n),n=n.return;return t}(e);if(null!==n){if(!jl.has(e.type)){var r=Nl.get(n);(null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],Nl.set(n,r)),r.push(e))}}else A("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},Ml.flushLegacyContextWarning=function(){Nl.forEach((function(e,t){if(0!==e.length){var n=e[0],r=new Set;e.forEach((function(e){r.add(je(e.type)||"Component"),jl.add(e.type)}));var i=Il(r);try{$e(n),A("Legacy context API has been detected within a strict-mode tree.\n\nThe old API will be supported in all 16.x releases, but applications using it should migrate to the new version.\n\nPlease update the following components: %s\n\nLearn more about this warning here: https://reactjs.org/link/legacy-context",i)}finally{Qe()}}}))},Ml.discardPendingWarnings=function(){Ll=[],Rl=[],Ol=[],Dl=[],Bl=[],Fl=[],Nl=new Map};var Vl,Wl=1073741823,Gl=CA(null);Vl={};var Hl=null,Ql=null,$l=null,ql=!1;function Yl(){Hl=null,Ql=null,$l=null,ql=!1}function Zl(){ql=!0}function Xl(){ql=!1}function Kl(e,t){var n=e.type._context;MA(Gl,n._currentValue,e),n._currentValue=t,void 0!==n._currentRenderer&&null!==n._currentRenderer&&n._currentRenderer!==Vl&&A("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),n._currentRenderer=Vl}function Jl(e){var t=Gl.current;TA(Gl,e),e.type._context._currentValue=t}function eu(e,t){for(var n=e;null!==n;){var r=n.alternate;if(Li(n.childLanes,t)){if(null===r||Li(r.childLanes,t))break;r.childLanes=Ri(r.childLanes,t)}else n.childLanes=Ri(n.childLanes,t),null!==r&&(r.childLanes=Ri(r.childLanes,t));n=n.return}}function tu(e,t){Hl=e,Ql=null,$l=null;var n=e.dependencies;null!==n&&(null!==n.firstContext&&(Ii(n.lanes,t)&&nh(),n.firstContext=null))}function nu(e,t){if(ql&&A("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),$l===e);else if(!1===t||0===t);else{var n;"number"!=typeof t||t===Wl?($l=e,n=Wl):n=t;var r={context:e,observedBits:n,next:null};if(null===Ql){if(null===Hl)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Ql=r,Hl.dependencies={lanes:0,firstContext:r,responders:null}}else Ql=Ql.next=r}return e._currentValue}var ru,iu,ou=2,su=!1;function au(e){var t={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null};e.updateQueue=t}function Au(e,t){var n=t.updateQueue,r=e.updateQueue;if(n===r){var i={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects};t.updateQueue=i}}function lu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uu(e,t){var n=e.updateQueue;if(null!==n){var r=n.shared,i=r.pending;null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,iu!==r||ru||(A("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),ru=!0)}}function cu(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r){var i=r.updateQueue;if(n===i){var o=null,s=null,a=n.firstBaseUpdate;if(null!==a){var A=a;do{var l={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};null===s?o=s=l:(s.next=l,s=l),A=A.next}while(null!==A);null===s?o=s=t:(s.next=t,s=t)}else o=s=t;return n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}}var u=n.lastBaseUpdate;null===u?n.firstBaseUpdate=t:u.next=t,n.lastBaseUpdate=t}function du(e,t,r,i,o,s){switch(r.tag){case 1:var a=r.payload;if("function"==typeof a){Zl();var A=a.call(s,i,o);if(1&e.mode){Pe();try{a.call(s,i,o)}finally{ke()}}return Xl(),A}return a;case 3:e.flags=-4097&e.flags|lr;case 0:var l,u=r.payload;if("function"==typeof u){if(Zl(),l=u.call(s,i,o),1&e.mode){Pe();try{u.call(s,i,o)}finally{ke()}}Xl()}else l=u;return null==l?i:n({},i,l);case ou:return su=!0,i}return i}function fu(e,t,n,r){var i=e.updateQueue;su=!1,iu=i.shared;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var A=a,l=A.next;A.next=null,null===s?o=l:s.next=l,s=A;var u=e.alternate;if(null!==u){var c=u.updateQueue,d=c.lastBaseUpdate;d!==s&&(null===d?c.firstBaseUpdate=l:d.next=l,c.lastBaseUpdate=A)}}if(null!==o){for(var f=i.baseState,h=0,p=null,g=null,m=null,v=o;;){var y=v.lane,b=v.eventTime;if(Li(r,y)){if(null!==m){var w={eventTime:b,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null};m=m.next=w}if(f=du(e,0,v,f,t,n),null!==v.callback){e.flags|=32;var _=i.effects;null===_?i.effects=[v]:_.push(v)}}else{var x={eventTime:b,lane:y,tag:v.tag,payload:v.payload,callback:v.callback,next:null};null===m?(g=m=x,p=f):m=m.next=x,h=Ri(h,y)}if(null===(v=v.next)){if(null===(a=i.shared.pending))break;var E=a,S=E.next;E.next=null,v=S,i.lastBaseUpdate=E,i.shared.pending=null}}null===m&&(p=f),i.baseState=p,i.firstBaseUpdate=g,i.lastBaseUpdate=m,Jp(h),e.lanes=h,e.memoizedState=f}iu=null}function hu(e,t){if("function"!=typeof e)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function pu(){su=!1}function gu(){return su}function mu(e,t,n){var r=t.effects;if(t.effects=null,null!==r)for(var i=0;i<r.length;i++){var o=r[i],s=o.callback;null!==s&&(o.callback=null,hu(s,n))}}ru=!1,iu=null;var vu,yu,bu,wu,_u,xu,Eu,Su,Pu,ku,Cu={},Tu=Array.isArray,Mu=(new e.Component).refs;vu=new Set,yu=new Set,bu=new Set,wu=new Set,Su=new Set,_u=new Set,Pu=new Set,ku=new Set;var Iu=new Set;function Lu(e,t,r,i){var o=e.memoizedState;if(1&e.mode){Pe();try{r(i,o)}finally{ke()}}var s=r(i,o);xu(t,s);var a=null==s?o:n({},o,s);(e.memoizedState=a,0===e.lanes)&&(e.updateQueue.baseState=a)}Eu=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;Iu.has(n)||(Iu.add(n),A("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},xu=function(e,t){if(void 0===t){var n=je(e)||"Component";_u.has(n)||(_u.add(n),A("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",n))}},Object.defineProperty(Cu,"_processChildContext",{enumerable:!1,value:function(){throw Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Cu);var Ru,Ou,Du,Bu,Fu,zu={isMounted:function(e){var t=vr.current;if(null!==t&&1===t.tag){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||A("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",je(n.type)||"A component"),r._warnedAboutRefsInRender=!0}var i=ir(e);return!!i&&yr(i)===i},enqueueSetState:function(e,t,n){var r=ir(e),i=Rp(),o=Op(r),s=lu(i,o);s.payload=t,null!=n&&(Eu(n,"setState"),s.callback=n),uu(r,s),Bp(r,o,i)},enqueueReplaceState:function(e,t,n){var r=ir(e),i=Rp(),o=Op(r),s=lu(i,o);s.tag=1,s.payload=t,null!=n&&(Eu(n,"replaceState"),s.callback=n),uu(r,s),Bp(r,o,i)},enqueueForceUpdate:function(e,t){var n=ir(e),r=Rp(),i=Op(n),o=lu(r,i);o.tag=ou,null!=t&&(Eu(t,"forceUpdate"),o.callback=t),uu(n,o),Bp(n,i,r)}};function Nu(e,t,n,r,i,o,s){var a=e.stateNode;if("function"==typeof a.shouldComponentUpdate){if(1&e.mode){Pe();try{a.shouldComponentUpdate(r,o,s)}finally{ke()}}var l=a.shouldComponentUpdate(r,o,s);return void 0===l&&A("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",je(t)||"Component"),l}return!t.prototype||!t.prototype.isPureReactComponent||(!ds(n,r)||!ds(i,o))}function ju(e,t){var n;t.updater=zu,e.stateNode=t,n=e,t._reactInternals=n,t._reactInternalInstance=Cu}function Uu(e,t,n){var r=!1,i=IA,o=IA,s=t.contextType;if("contextType"in t&&(!(null===s||void 0!==s&&s.$$typeof===re&&void 0===s._context)&&!ku.has(t))){ku.add(t);var a="";a=void 0===s?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":"object"!=typeof s?" However, it is set to a "+typeof s+".":s.$$typeof===ne?" Did you accidentally pass the Context.Provider instead?":void 0!==s._context?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(s).join(", ")+"}.",A("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",je(t)||"Component",a)}if("object"==typeof s&&null!==s)o=nu(s);else{i=DA(0,t,!0);var l=t.contextTypes;o=(r=null!=l)?FA(e,i):IA}if(1&e.mode){Pe();try{new t(n,o)}finally{ke()}}var u=new t(n,o),c=e.memoizedState=null!==u.state&&void 0!==u.state?u.state:null;if(ju(e,u),"function"==typeof t.getDerivedStateFromProps&&null===c){var d=je(t)||"Component";yu.has(d)||(yu.add(d),A("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",d,null===u.state?"null":"undefined",d))}if("function"==typeof t.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate){var f=null,h=null,p=null;if("function"==typeof u.componentWillMount&&!0!==u.componentWillMount.__suppressDeprecationWarning?f="componentWillMount":"function"==typeof u.UNSAFE_componentWillMount&&(f="UNSAFE_componentWillMount"),"function"==typeof u.componentWillReceiveProps&&!0!==u.componentWillReceiveProps.__suppressDeprecationWarning?h="componentWillReceiveProps":"function"==typeof u.UNSAFE_componentWillReceiveProps&&(h="UNSAFE_componentWillReceiveProps"),"function"==typeof u.componentWillUpdate&&!0!==u.componentWillUpdate.__suppressDeprecationWarning?p="componentWillUpdate":"function"==typeof u.UNSAFE_componentWillUpdate&&(p="UNSAFE_componentWillUpdate"),null!==f||null!==h||null!==p){var g=je(t)||"Component",m="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";wu.has(g)||(wu.add(g),A("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://reactjs.org/link/unsafe-component-lifecycles",g,m,null!==f?"\n  "+f:"",null!==h?"\n  "+h:"",null!==p?"\n  "+p:""))}}return r&&BA(e,i,o),u}function Vu(e,t,n,r){var i=t.state;if("function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==i){var o=je(e.type)||"Component";vu.has(o)||(vu.add(o),A("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",o)),zu.enqueueReplaceState(t,t.state,null)}}function Wu(e,t,n,r){!function(e,t,n){var r=e.stateNode,i=je(t)||"Component";r.render||(t.prototype&&"function"==typeof t.prototype.render?A("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",i):A("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",i)),!r.getInitialState||r.getInitialState.isReactClassApproved||r.state||A("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",i),r.getDefaultProps&&!r.getDefaultProps.isReactClassApproved&&A("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",i),r.propTypes&&A("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",i),r.contextType&&A("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",i),r.contextTypes&&A("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",i),t.contextType&&t.contextTypes&&!Pu.has(t)&&(Pu.add(t),A("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",i)),"function"==typeof r.componentShouldUpdate&&A("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",i),t.prototype&&t.prototype.isPureReactComponent&&void 0!==r.shouldComponentUpdate&&A("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",je(t)||"A pure component"),"function"==typeof r.componentDidUnmount&&A("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",i),"function"==typeof r.componentDidReceiveProps&&A("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",i),"function"==typeof r.componentWillRecieveProps&&A("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",i),"function"==typeof r.UNSAFE_componentWillRecieveProps&&A("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",i);var o=r.props!==n;void 0!==r.props&&o&&A("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",i,i),r.defaultProps&&A("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",i,i),"function"!=typeof r.getSnapshotBeforeUpdate||"function"==typeof r.componentDidUpdate||bu.has(t)||(bu.add(t),A("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",je(t))),"function"==typeof r.getDerivedStateFromProps&&A("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof r.getDerivedStateFromError&&A("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof t.getSnapshotBeforeUpdate&&A("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",i);var s=r.state;s&&("object"!=typeof s||Tu(s))&&A("%s.state: must be set to an object or null",i),"function"==typeof r.getChildContext&&"object"!=typeof t.childContextTypes&&A("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",i)}(e,t,n);var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Mu,au(e);var o=t.contextType;if("object"==typeof o&&null!==o)i.context=nu(o);else{var s=DA(0,t,!0);i.context=FA(e,s)}if(i.state===n){var a=je(t)||"Component";Su.has(a)||(Su.add(a),A("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",a))}1&e.mode&&Ml.recordLegacyContextWarning(e,i),Ml.recordUnsafeLifecycleWarnings(e,i),fu(e,n,i,r),i.state=e.memoizedState;var l=t.getDerivedStateFromProps;"function"==typeof l&&(Lu(e,t,l,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(!function(e,t){var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),n!==t.state&&(A("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",je(e.type)||"Component"),zu.enqueueReplaceState(t,t.state,null))}(e,i),fu(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Gu;Ru=!1,Ou=!1,Du={},Bu={},Fu={},Gu=function(e,t){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){if("object"!=typeof e._store)throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var n=je(t.type)||"Component";Bu[n]||(Bu[n]=!0,A('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};var Hu=Array.isArray;function Qu(e,t,n){var r=n.ref;if(null!==r&&"function"!=typeof r&&"object"!=typeof r){if(1&e.mode&&(!n._owner||!n._self||n._owner.stateNode===n._self)){var i=je(e.type)||"Component";Du[i]||(A('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',r),Du[i]=!0)}if(n._owner){var o,s=n._owner;if(s){var a=s;if(1!==a.tag)throw Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");o=a.stateNode}if(!o)throw Error("Missing owner for string ref "+r+". This error is likely caused by a bug in React. Please file an issue.");var l=""+r;if(null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===l)return t.ref;var u=function(e){var t=o.refs;t===Mu&&(t=o.refs={}),null===e?delete t[l]:t[l]=e};return u._stringRef=l,u}if("string"!=typeof r)throw Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!n._owner)throw Error("Element ref was specified as a string ("+r+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://reactjs.org/link/refs-must-have-owner for more information.")}return r}function $u(e,t){if("textarea"!==e.type)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}function qu(e){var t=je(e.type)||"Component";Fu[t]||(Fu[t]=!0,A("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."))}function Yu(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(var i=r;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function i(e,t){var n=Am(e,t);return n.index=0,n.sibling=null,n}function o(t,n,r){if(t.index=r,!e)return n;var i=t.alternate;if(null!==i){var o=i.index;return o<n?(t.flags=2,n):o}return t.flags=2,n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function a(e,t,n,r){if(null===t||6!==t.tag){var o=hm(n,e.mode,r);return o.return=e,o}var s=i(t,n);return s.return=e,s}function l(e,t,n,r){if(null!==t&&(t.elementType===n.type||$g(t,n))){var o=i(t,n.props);return o.ref=Qu(e,t,n),o.return=e,o._debugSource=n._source,o._debugOwner=n._owner,o}var s=cm(n,e.mode,r);return s.ref=Qu(e,t,n),s.return=e,s}function u(e,t,n,r){if(null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var o=pm(n,e.mode,r);return o.return=e,o}var s=i(t,n.children||[]);return s.return=e,s}function d(e,t,n,r,o){if(null===t||7!==t.tag){var s=dm(n,e.mode,r,o);return s.return=e,s}var a=i(t,n);return a.return=e,a}function f(e,t,n){if("string"==typeof t||"number"==typeof t){var r=hm(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case X:var i=cm(t,e.mode,n);return i.ref=Qu(e,null,t),i.return=e,i;case K:var o=pm(t,e.mode,n);return o.return=e,o}if(Hu(t)||ge(t)){var s=dm(t,e.mode,n,null);return s.return=e,s}$u(e,t)}return"function"==typeof t&&qu(e),null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case X:return n.key===i?n.type===J?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case K:return n.key===i?u(e,t,n,r):null}if(Hu(n)||ge(n))return null!==i?null:d(e,t,n,r,null);$u(e,n)}return"function"==typeof n&&qu(e),null}function g(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return a(t,e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case X:var o=e.get(null===r.key?n:r.key)||null;return r.type===J?d(t,o,r.props.children,i,r.key):l(t,o,r,i);case K:return u(t,e.get(null===r.key?n:r.key)||null,r,i)}if(Hu(r)||ge(r))return d(t,e.get(n)||null,r,i,null);$u(t,r)}return"function"==typeof r&&qu(t),null}function m(e,t,n){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case X:case K:Gu(e,n);var r=e.key;if("string"!=typeof r)break;if(null===t){(t=new Set).add(r);break}if(!t.has(r)){t.add(r);break}A("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",r)}return t}return function(a,l,u,d){var v="object"==typeof u&&null!==u&&u.type===J&&null===u.key;v&&(u=u.props.children);var b="object"==typeof u&&null!==u;if(b)switch(u.$$typeof){case X:return s(function(e,r,o,s){for(var a=o.key,A=r;null!==A;){if(A.key===a){if(7===A.tag){if(o.type===J){n(e,A.sibling);var l=i(A,o.props.children);return l.return=e,l._debugSource=o._source,l._debugOwner=o._owner,l}}else if(A.elementType===o.type||$g(A,o)){n(e,A.sibling);var u=i(A,o.props);return u.ref=Qu(e,A,o),u.return=e,u._debugSource=o._source,u._debugOwner=o._owner,u}n(e,A);break}t(e,A),A=A.sibling}if(o.type===J){var c=dm(o.props.children,e.mode,s,o.key);return c.return=e,c}var d=cm(o,e.mode,s);return d.ref=Qu(e,r,o),d.return=e,d}(a,l,u,d));case K:return s(function(e,r,o,s){for(var a=o.key,A=r;null!==A;){if(A.key===a){if(4===A.tag&&A.stateNode.containerInfo===o.containerInfo&&A.stateNode.implementation===o.implementation){n(e,A.sibling);var l=i(A,o.children||[]);return l.return=e,l}n(e,A);break}t(e,A),A=A.sibling}var u=pm(o,e.mode,s);return u.return=e,u}(a,l,u,d))}if("string"==typeof u||"number"==typeof u)return s(function(e,t,r,o){if(null!==t&&6===t.tag){n(e,t.sibling);var s=i(t,r);return s.return=e,s}n(e,t);var a=hm(r,e.mode,o);return a.return=e,a}(a,l,""+u,d));if(Hu(u))return function(i,s,a,A){for(var l=null,u=0;u<a.length;u++)l=m(a[u],l,i);for(var c=null,d=null,p=s,v=0,y=0,b=null;null!==p&&y<a.length;y++){p.index>y?(b=p,p=null):b=p.sibling;var w=h(i,p,a[y],A);if(null===w){null===p&&(p=b);break}e&&p&&null===w.alternate&&t(i,p),v=o(w,v,y),null===d?c=w:d.sibling=w,d=w,p=b}if(y===a.length)return n(i,p),c;if(null===p){for(;y<a.length;y++){var _=f(i,a[y],A);null!==_&&(v=o(_,v,y),null===d?c=_:d.sibling=_,d=_)}return c}for(var x=r(0,p);y<a.length;y++){var E=g(x,i,y,a[y],A);null!==E&&(e&&null!==E.alternate&&x.delete(null===E.key?y:E.key),v=o(E,v,y),null===d?c=E:d.sibling=E,d=E)}return e&&x.forEach((function(e){return t(i,e)})),c}(a,l,u,d);if(ge(u))return function(i,s,a,l){var u=ge(a);if("function"!=typeof u)throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");"function"==typeof Symbol&&"Generator"===a[Symbol.toStringTag]&&(Ou||A("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Ou=!0),a.entries===u&&(Ru||A("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Ru=!0);var c=u.call(a);if(c)for(var d=null,p=c.next();!p.done;p=c.next())d=m(p.value,d,i);var v=u.call(a);if(null==v)throw Error("An iterable object provided no iterator.");for(var y=null,b=null,w=s,_=0,x=0,E=null,S=v.next();null!==w&&!S.done;x++,S=v.next()){w.index>x?(E=w,w=null):E=w.sibling;var P=h(i,w,S.value,l);if(null===P){null===w&&(w=E);break}e&&w&&null===P.alternate&&t(i,w),_=o(P,_,x),null===b?y=P:b.sibling=P,b=P,w=E}if(S.done)return n(i,w),y;if(null===w){for(;!S.done;x++,S=v.next()){var k=f(i,S.value,l);null!==k&&(_=o(k,_,x),null===b?y=k:b.sibling=k,b=k)}return y}for(var C=r(0,w);!S.done;x++,S=v.next()){var T=g(C,i,x,S.value,l);null!==T&&(e&&null!==T.alternate&&C.delete(null===T.key?x:T.key),_=o(T,_,x),null===b?y=T:b.sibling=T,b=T)}return e&&C.forEach((function(e){return t(i,e)})),y}(a,l,u,d);if(b&&$u(a,u),"function"==typeof u&&qu(a),void 0===u&&!v)switch(a.tag){case 1:if(a.stateNode.render._isMockFunction)break;case y:case 0:case c:case p:throw Error((je(a.type)||"Component")+"(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.")}return n(a,l)}}var Zu=Yu(!0),Xu=Yu(!1);function Ku(e,t){for(var n=e.child;null!==n;)lm(n,t),n=n.sibling}var Ju={},ec=CA(Ju),tc=CA(Ju),nc=CA(Ju);function rc(e){if(e===Ju)throw Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function ic(){return rc(nc.current)}function oc(e,t){MA(nc,t,e),MA(tc,e,e),MA(ec,Ju,e);var n=function(e){var t,n,r=e.nodeType;switch(r){case 9:case 11:t=9===r?"#document":"#fragment";var i=e.documentElement;n=i?i.namespaceURI:Ft(null,"");break;default:var o=8===r?e.parentNode:e;n=Ft(o.namespaceURI||null,t=o.tagName)}var s=t.toLowerCase();return{namespace:n,ancestorInfo:Ca(null,s)}}(t);TA(ec,e),MA(ec,n,e)}function sc(e){TA(ec,e),TA(tc,e),TA(nc,e)}function ac(){return rc(ec.current)}function Ac(e){rc(nc.current);var t,n,r,i=rc(ec.current),o=(t=i,n=e.type,{namespace:Ft((r=t).namespace,n),ancestorInfo:Ca(r.ancestorInfo,n)});i!==o&&(MA(tc,e,e),MA(ec,o,e))}function lc(e){tc.current===e&&(TA(ec,e),TA(tc,e))}var uc=CA(0);function cc(e,t){return 0!=(e&t)}function dc(e){return 1&e}function fc(e,t){return 1&e|t}function hc(e,t){MA(uc,t,e)}function pc(e){TA(uc,e)}function gc(e,t){var n=e.memoizedState;if(null!==n)return null!==n.dehydrated;var r=e.memoizedProps;return void 0!==r.fallback&&(!0!==r.unstable_avoidThisFallback||!t)}function mc(e){for(var t=e;null!==t;){if(t.tag===f){var n=t.memoizedState;if(null!==n){var r=n.dehydrated;if(null===r||r.data===Da||Ka(r))return t}}else if(t.tag===m&&void 0!==t.memoizedProps.revealOrder){if(0!=(t.flags&lr))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)return null;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vc=null,yc=null,bc=!1;function wc(e,t){switch(e.tag){case 3:!function(e,t){1===t.nodeType?xa(e,t):8===t.nodeType||Ea(e,t)}(e.stateNode.containerInfo,t);break;case 5:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&(1===r.nodeType?xa(n,r):8===r.nodeType||Ea(n,r))}(e.type,e.memoizedProps,e.stateNode,t)}var n,r=((n=sm(5,null,null,0)).elementType="DELETED",n.type="DELETED",n);r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function _c(e,t){switch(t.flags=-1025&t.flags|2,e.tag){case 3:var n=e.stateNode.containerInfo;switch(t.tag){case 5:var r=t.type;t.pendingProps,function(e,t,n){Sa(e,t)}(n,r);break;case 6:!function(e,t){Pa(e,t)}(n,t.pendingProps)}break;case 5:e.type;var i=e.memoizedProps,o=e.stateNode;switch(t.tag){case 5:var s=t.type;t.pendingProps,function(e,t,n,r,i){!0!==t.suppressHydrationWarning&&Sa(n,r)}(0,i,o,s);break;case 6:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&Pa(n,r)}(0,i,o,t.pendingProps);break;case f:!function(e,t,n){t.suppressHydrationWarning}(0,i)}break;default:return}}function xc(e,t){switch(e.tag){case 5:var n=e.type;e.pendingProps;var r=function(e,t,n){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e}(t,n);return null!==r&&(e.stateNode=r,!0);case 6:var i=function(e,t){return""===t||3!==e.nodeType?null:e}(t,e.pendingProps);return null!==i&&(e.stateNode=i,!0);default:return!1}}function Ec(e){if(bc){var t=yc;if(!t)return _c(vc,e),bc=!1,void(vc=e);var n=t;if(!xc(e,t)){if(!(t=eA(n))||!xc(e,t))return _c(vc,e),bc=!1,void(vc=e);wc(vc,n)}vc=e,yc=tA(t)}}function Sc(e){var t=e.stateNode,n=e.memoizedProps,r=function(e,t,n){return cA(n,e),function(e,t){return e.nodeValue!==t}(e,t)}(t,n,e);if(r){var i=vc;if(null!==i)switch(i.tag){case 3:i.stateNode.containerInfo;!function(e,t,n){_a(t,n)}(0,t,n);break;case 5:i.type;var o=i.memoizedProps;i.stateNode;!function(e,t,n,r,i){!0!==t.suppressHydrationWarning&&_a(r,i)}(0,o,0,t,n)}}return r}function Pc(e){var t=e.memoizedState,n=null!==t?t.dehydrated:null;if(!n)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return function(e){for(var t=e.nextSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===n)return eA(t);n--}else"$"!==r&&r!==Ba&&r!==Da||n++}t=t.nextSibling}return null}(n)}function kc(e){for(var t=e.return;null!==t&&5!==t.tag&&3!==t.tag&&t.tag!==f;)t=t.return;vc=t}function Cc(e){if(e!==vc)return!1;if(!bc)return kc(e),bc=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Va(t,e.memoizedProps))for(var n=yc;n;)wc(e,n),n=eA(n);return kc(e),yc=e.tag===f?Pc(e):vc?eA(e.stateNode):null,!0}function Tc(){vc=null,yc=null,bc=!1}function Mc(){return bc}var Ic,Lc=[];function Rc(){for(var e=0;e<Lc.length;e++){Lc[e]._workInProgressVersionPrimary=null}Lc.length=0}function Oc(e,t){e._workInProgressVersionPrimary=t,Lc.push(e)}Ic={};var Dc,Bc,Fc=o.ReactCurrentDispatcher,zc=o.ReactCurrentBatchConfig;Bc={},Dc=new Set;var Nc=0,jc=null,Uc=null,Vc=null,Wc=!1,Gc=!1,Hc=null,Qc=null,$c=-1,qc=!1;function Yc(){var e=Hc;null===Qc?Qc=[e]:Qc.push(e)}function Zc(){var e=Hc;null!==Qc&&($c++,Qc[$c]!==e&&function(e){var t=je(jc.type);if(!Dc.has(t)&&(Dc.add(t),null!==Qc)){for(var n="",r=30,i=0;i<=$c;i++){for(var o=Qc[i],s=i===$c?e:o,a=i+1+". "+o;a.length<r;)a+=" ";n+=a+=s+"\n"}A("React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks\n\n   Previous render            Next render\n   ------------------------------------------------------\n%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",t,n)}}(e))}function Xc(e){null==e||Array.isArray(e)||A("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Hc,typeof e)}function Kc(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.")}function Jc(e,t){if(qc)return!1;if(null===t)return A("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Hc),!1;e.length!==t.length&&A("The final argument passed to %s changed size between renders. The order and size of this array must remain constant.\n\nPrevious: %s\nIncoming: %s",Hc,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var n=0;n<t.length&&n<e.length;n++)if(!us(e[n],t[n]))return!1;return!0}function ed(e,t,n,r,i,o){Nc=o,jc=t,Qc=null!==e?e._debugHookTypes:null,$c=-1,qc=null!==e&&e.type!==t.type,t.memoizedState=null,t.updateQueue=null,t.lanes=0,null!==e&&null!==e.memoizedState?Fc.current=Zd:Fc.current=null!==Qc?Yd:qd;var s=n(r,i);if(Gc){var a=0;do{if(Gc=!1,!(a<25))throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");a+=1,qc=!1,Uc=null,Vc=null,t.updateQueue=null,$c=-1,Fc.current=Xd,s=n(r,i)}while(Gc)}Fc.current=$d,t._debugHookTypes=Qc;var A=null!==Uc&&null!==Uc.next;if(Nc=0,jc=null,Uc=null,Vc=null,Hc=null,Qc=null,$c=-1,Wc=!1,A)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return s}function td(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes=Oi(e.lanes,n)}function nd(){if(Fc.current=$d,Wc){for(var e=jc.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wc=!1}Nc=0,jc=null,Uc=null,Vc=null,Qc=null,$c=-1,Hc=null,Ud=!1,Gc=!1}function rd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vc?jc.memoizedState=Vc=e:Vc=Vc.next=e,Vc}function id(){var e,t;if(null===Uc){var n=jc.alternate;e=null!==n?n.memoizedState:null}else e=Uc.next;if(null!==(t=null===Vc?jc.memoizedState:Vc.next))t=(Vc=t).next,Uc=e;else{if(null===e)throw Error("Rendered more hooks than during the previous render.");var r={memoizedState:(Uc=e).memoizedState,baseState:Uc.baseState,baseQueue:Uc.baseQueue,queue:Uc.queue,next:null};null===Vc?jc.memoizedState=Vc=r:Vc=Vc.next=r}return Vc}function od(e,t){return"function"==typeof t?t(e):t}function sd(e,t,n){var r,i=rd();r=void 0!==n?n(t):t,i.memoizedState=i.baseState=r;var o=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s=o.dispatch=Qd.bind(null,jc,o);return[i.memoizedState,s]}function ad(e,t,n){var r=id(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=Uc,s=o.baseQueue,a=i.pending;if(null!==a){if(null!==s){var l=s.next,u=a.next;s.next=u,a.next=l}o.baseQueue!==s&&A("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),o.baseQueue=s=a,i.pending=null}if(null!==s){var c=s.next,d=o.baseState,f=null,h=null,p=null,g=c;do{var m=g.lane;if(Li(Nc,m)){if(null!==p){var v={lane:0,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};p=p.next=v}if(g.eagerReducer===e)d=g.eagerState;else d=e(d,g.action)}else{var y={lane:m,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};null===p?(h=p=y,f=d):p=p.next=y,jc.lanes=Ri(jc.lanes,m),Jp(m)}g=g.next}while(null!==g&&g!==c);null===p?f=d:p.next=h,us(d,r.memoizedState)||nh(),r.memoizedState=d,r.baseState=f,r.baseQueue=p,i.lastRenderedState=d}var b=i.dispatch;return[r.memoizedState,b]}function Ad(e,t,n){var r=id(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=i.dispatch,s=i.pending,a=r.memoizedState;if(null!==s){i.pending=null;var A=s.next,l=A;do{a=e(a,l.action),l=l.next}while(l!==A);us(a,r.memoizedState)||nh(),r.memoizedState=a,null===r.baseQueue&&(r.baseState=a),i.lastRenderedState=a}return[a,o]}function ld(e,t,n){var r;null==(r=t)._currentPrimaryRenderer?r._currentPrimaryRenderer=Ic:r._currentPrimaryRenderer!==Ic&&A("Detected multiple renderers concurrently rendering the same mutable source. This is currently unsupported.");var i=(0,t._getVersion)(t._source),o=!1,s=function(e){return e._workInProgressVersionPrimary}(t);if(null!==s?o=s===i:(o=Li(Nc,e.mutableReadLanes))&&Oc(t,i),o){var a=n(t._source);return"function"==typeof a&&A("Mutable source should not return a function as the snapshot value. Functions may close over mutable values and cause tearing."),a}throw function(e){Lc.push(e)}(t),Error("Cannot read from mutable source during the current render without tearing. This is a bug in React. Please file an issue.")}function ud(e,t,n,r){var i=Zh;if(null===i)throw Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");var o=t._getVersion,s=o(t._source),a=Fc.current,l=a.useState((function(){return ld(i,t,n)})),u=l[0],c=l[1],d=u,f=Vc,h=e.memoizedState,p=h.refs,g=p.getSnapshot,m=h.source,v=h.subscribe,y=jc;if(e.memoizedState={refs:p,source:t,subscribe:r},a.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!us(s,e)){var r=n(t._source);if("function"==typeof r&&A("Mutable source should not return a function as the snapshot value. Functions may close over mutable values and cause tearing."),!us(d,r)){c(r);var a=Op(y);zi(i,a)}!function(e,t){e.entangledLanes|=t;for(var n=e.entanglements,r=t;r>0;){var i=Mi(r),o=1<<i;n[i]|=t,r&=~o}}(i,i.mutableReadLanes)}}),[n,t,r]),a.useEffect((function(){var e=r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=Op(y);zi(i,r)}catch(e){n((function(){throw e}))}}));return"function"!=typeof e&&A("Mutable source subscribe function must return an unsubscribe function."),e}),[t,r]),!us(g,n)||!us(m,t)||!us(v,r)){var b={pending:null,dispatch:null,lastRenderedReducer:od,lastRenderedState:d};b.dispatch=c=Qd.bind(null,jc,b),f.queue=b,f.baseQueue=null,d=ld(i,t,n),f.memoizedState=f.baseState=d}return d}function cd(e,t,n){var r=rd();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ud(r,e,t,n)}function dd(e,t,n){return ud(id(),e,t,n)}function fd(e){var t=rd();"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e;var n=t.queue={pending:null,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},r=n.dispatch=Qd.bind(null,jc,n);return[t.memoizedState,r]}function hd(e){return ad(od)}function pd(e){return Ad(od)}function gd(e,t,n,r){var i={tag:e,create:t,destroy:n,deps:r,next:null},o=jc.updateQueue;if(null===o)o={lastEffect:null},jc.updateQueue=o,o.lastEffect=i.next=i;else{var s=o.lastEffect;if(null===s)o.lastEffect=i.next=i;else{var a=s.next;s.next=i,i.next=a,o.lastEffect=i}}return i}function md(e){var t=rd(),n={current:e};return Object.seal(n),t.memoizedState=n,n}function vd(e){return id().memoizedState}function yd(e,t,n,r){var i=rd(),o=void 0===r?null:r;jc.flags|=e,i.memoizedState=gd(1|t,n,void 0,o)}function bd(e,t,n,r){var i=id(),o=void 0===r?null:r,s=void 0;if(null!==Uc){var a=Uc.memoizedState;if(s=a.destroy,null!==o)if(Jc(o,a.deps))return void gd(t,n,s,o)}jc.flags|=e,i.memoizedState=gd(1|t,n,s,o)}function wd(e,t){return"undefined"!=typeof jest&&Mg(jc),yd(516,4,e,t)}function _d(e,t){return"undefined"!=typeof jest&&Mg(jc),bd(516,4,e,t)}function xd(e,t){return yd(4,2,e,t)}function Ed(e,t){return bd(4,2,e,t)}function Sd(e,t){if("function"==typeof t){var n=t,r=e();return n(r),function(){n(null)}}if(null!=t){var i=t;i.hasOwnProperty("current")||A("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(i).join(", ")+"}");var o=e();return i.current=o,function(){i.current=null}}}function Pd(e,t,n){"function"!=typeof t&&A("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return yd(4,2,Sd.bind(null,t,e),r)}function kd(e,t,n){"function"!=typeof t&&A("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return bd(4,2,Sd.bind(null,t,e),r)}function Cd(e,t){}var Td=Cd;function Md(e,t){var n=void 0===t?null:t;return rd().memoizedState=[e,n],e}function Id(e,t){var n=id(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&(null!==r&&Jc(r,i[1])))return i[0];return n.memoizedState=[e,r],e}function Ld(e,t){var n=rd(),r=void 0===t?null:t,i=e();return n.memoizedState=[i,r],i}function Rd(e,t){var n=id(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&(null!==r&&Jc(r,i[1])))return i[0];var o=e();return n.memoizedState=[o,r],o}function Od(e){var t=fd(e),n=t[0],r=t[1];return wd((function(){var t=zc.transition;zc.transition=1;try{r(e)}finally{zc.transition=t}}),[e]),n}function Dd(e){var t=hd(),n=t[0],r=t[1];return _d((function(){var t=zc.transition;zc.transition=1;try{r(e)}finally{zc.transition=t}}),[e]),n}function Bd(e){var t=pd(),n=t[0],r=t[1];return _d((function(){var t=zc.transition;zc.transition=1;try{r(e)}finally{zc.transition=t}}),[e]),n}function Fd(e,t){var n=wl();xl(n<dl?dl:n,(function(){e(!0)})),xl(n>fl?fl:n,(function(){var n=zc.transition;zc.transition=1;try{e(!1),t()}finally{zc.transition=n}}))}function zd(){var e=fd(!1),t=e[0],n=e[1],r=Fd.bind(null,n);return md(r),[r,t]}function Nd(){var e=hd()[0];return[vd().current,e]}function jd(){var e=pd()[0];return[vd().current,e]}var Ud=!1;function Vd(e){var t=je(e.type)||"Unknown";We&&!Bc[t]&&(A("The object passed back from useOpaqueIdentifier is meant to be passed through to attributes only. Do not read the value directly."),Bc[t]=!0)}function Wd(){var e=oA.bind(null,Vd.bind(null,jc));if(Mc()){var t=!1,n=jc,r={$$typeof:ue,toString:o=function(){throw t||(t=!0,Ud=!0,i(e()),Ud=!1,Vd(n)),Error("The object passed back from useOpaqueIdentifier is meant to be passed through to attributes only. Do not read the value directly.")},valueOf:o},i=fd(r)[1];return 0==(2&jc.mode)&&(jc.flags|=516,gd(5,(function(){i(e())}),void 0,null)),r}var o,s=e();return fd(s),s}function Gd(){return hd()[0]}function Hd(){return pd()[0]}function Qd(e,t,n){"function"==typeof arguments[3]&&A("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var r=Rp(),i=Op(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;null===s?o.next=o:(o.next=s.next,s.next=o),t.pending=o;var a=e.alternate;if(e===jc||null!==a&&a===jc)Gc=Wc=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)){var l=t.lastRenderedReducer;if(null!==l){var u;u=Fc.current,Fc.current=Jd;try{var c=t.lastRenderedState,d=l(c,n);if(o.eagerReducer=l,o.eagerState=d,us(d,c))return}catch(e){}finally{Fc.current=u}}}"undefined"!=typeof jest&&(Tg(e),Ig(e)),Bp(e,i,r)}}var $d={readContext:nu,useCallback:Kc,useContext:Kc,useEffect:Kc,useImperativeHandle:Kc,useLayoutEffect:Kc,useMemo:Kc,useReducer:Kc,useRef:Kc,useState:Kc,useDebugValue:Kc,useDeferredValue:Kc,useTransition:Kc,useMutableSource:Kc,useOpaqueIdentifier:Kc,unstable_isNewReconciler:_},qd=null,Yd=null,Zd=null,Xd=null,Kd=null,Jd=null,ef=null,tf=function(){A("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},nf=function(){A("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};qd={readContext:function(e,t){return nu(e,t)},useCallback:function(e,t){return Hc="useCallback",Yc(),Xc(t),Md(e,t)},useContext:function(e,t){return Hc="useContext",Yc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",Yc(),Xc(t),wd(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",Yc(),Xc(n),Pd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",Yc(),Xc(t),xd(e,t)},useMemo:function(e,t){Hc="useMemo",Yc(),Xc(t);var n=Fc.current;Fc.current=Kd;try{return Ld(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",Yc();var r=Fc.current;Fc.current=Kd;try{return sd(e,t,n)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",Yc(),md(e)},useState:function(e){Hc="useState",Yc();var t=Fc.current;Fc.current=Kd;try{return fd(e)}finally{Fc.current=t}},useDebugValue:function(e,t){Hc="useDebugValue",Yc()},useDeferredValue:function(e){return Hc="useDeferredValue",Yc(),Od(e)},useTransition:function(){return Hc="useTransition",Yc(),zd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",Yc(),cd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",Yc(),Wd()},unstable_isNewReconciler:_},Yd={readContext:function(e,t){return nu(e,t)},useCallback:function(e,t){return Hc="useCallback",Zc(),Md(e,t)},useContext:function(e,t){return Hc="useContext",Zc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",Zc(),wd(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",Zc(),Pd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",Zc(),xd(e,t)},useMemo:function(e,t){Hc="useMemo",Zc();var n=Fc.current;Fc.current=Kd;try{return Ld(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",Zc();var r=Fc.current;Fc.current=Kd;try{return sd(e,t,n)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",Zc(),md(e)},useState:function(e){Hc="useState",Zc();var t=Fc.current;Fc.current=Kd;try{return fd(e)}finally{Fc.current=t}},useDebugValue:function(e,t){Hc="useDebugValue",Zc()},useDeferredValue:function(e){return Hc="useDeferredValue",Zc(),Od(e)},useTransition:function(){return Hc="useTransition",Zc(),zd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",Zc(),cd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",Zc(),Wd()},unstable_isNewReconciler:_},Zd={readContext:function(e,t){return nu(e,t)},useCallback:function(e,t){return Hc="useCallback",Zc(),Id(e,t)},useContext:function(e,t){return Hc="useContext",Zc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",Zc(),_d(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",Zc(),kd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",Zc(),Ed(e,t)},useMemo:function(e,t){Hc="useMemo",Zc();var n=Fc.current;Fc.current=Jd;try{return Rd(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",Zc();var r=Fc.current;Fc.current=Jd;try{return ad(e)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",Zc(),vd()},useState:function(e){Hc="useState",Zc();var t=Fc.current;Fc.current=Jd;try{return hd()}finally{Fc.current=t}},useDebugValue:function(e,t){return Hc="useDebugValue",Zc(),Td()},useDeferredValue:function(e){return Hc="useDeferredValue",Zc(),Dd(e)},useTransition:function(){return Hc="useTransition",Zc(),Nd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",Zc(),dd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",Zc(),Gd()},unstable_isNewReconciler:_},Xd={readContext:function(e,t){return nu(e,t)},useCallback:function(e,t){return Hc="useCallback",Zc(),Id(e,t)},useContext:function(e,t){return Hc="useContext",Zc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",Zc(),_d(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",Zc(),kd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",Zc(),Ed(e,t)},useMemo:function(e,t){Hc="useMemo",Zc();var n=Fc.current;Fc.current=ef;try{return Rd(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",Zc();var r=Fc.current;Fc.current=ef;try{return Ad(e)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",Zc(),vd()},useState:function(e){Hc="useState",Zc();var t=Fc.current;Fc.current=ef;try{return pd()}finally{Fc.current=t}},useDebugValue:function(e,t){return Hc="useDebugValue",Zc(),Td()},useDeferredValue:function(e){return Hc="useDeferredValue",Zc(),Bd(e)},useTransition:function(){return Hc="useTransition",Zc(),jd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",Zc(),dd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",Zc(),Hd()},unstable_isNewReconciler:_},Kd={readContext:function(e,t){return tf(),nu(e,t)},useCallback:function(e,t){return Hc="useCallback",nf(),Yc(),Md(e,t)},useContext:function(e,t){return Hc="useContext",nf(),Yc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",nf(),Yc(),wd(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",nf(),Yc(),Pd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",nf(),Yc(),xd(e,t)},useMemo:function(e,t){Hc="useMemo",nf(),Yc();var n=Fc.current;Fc.current=Kd;try{return Ld(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",nf(),Yc();var r=Fc.current;Fc.current=Kd;try{return sd(e,t,n)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",nf(),Yc(),md(e)},useState:function(e){Hc="useState",nf(),Yc();var t=Fc.current;Fc.current=Kd;try{return fd(e)}finally{Fc.current=t}},useDebugValue:function(e,t){Hc="useDebugValue",nf(),Yc()},useDeferredValue:function(e){return Hc="useDeferredValue",nf(),Yc(),Od(e)},useTransition:function(){return Hc="useTransition",nf(),Yc(),zd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",nf(),Yc(),cd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",nf(),Yc(),Wd()},unstable_isNewReconciler:_},Jd={readContext:function(e,t){return tf(),nu(e,t)},useCallback:function(e,t){return Hc="useCallback",nf(),Zc(),Id(e,t)},useContext:function(e,t){return Hc="useContext",nf(),Zc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",nf(),Zc(),_d(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",nf(),Zc(),kd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",nf(),Zc(),Ed(e,t)},useMemo:function(e,t){Hc="useMemo",nf(),Zc();var n=Fc.current;Fc.current=Jd;try{return Rd(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",nf(),Zc();var r=Fc.current;Fc.current=Jd;try{return ad(e)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",nf(),Zc(),vd()},useState:function(e){Hc="useState",nf(),Zc();var t=Fc.current;Fc.current=Jd;try{return hd()}finally{Fc.current=t}},useDebugValue:function(e,t){return Hc="useDebugValue",nf(),Zc(),Td()},useDeferredValue:function(e){return Hc="useDeferredValue",nf(),Zc(),Dd(e)},useTransition:function(){return Hc="useTransition",nf(),Zc(),Nd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",nf(),Zc(),dd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",nf(),Zc(),Gd()},unstable_isNewReconciler:_},ef={readContext:function(e,t){return tf(),nu(e,t)},useCallback:function(e,t){return Hc="useCallback",nf(),Zc(),Id(e,t)},useContext:function(e,t){return Hc="useContext",nf(),Zc(),nu(e,t)},useEffect:function(e,t){return Hc="useEffect",nf(),Zc(),_d(e,t)},useImperativeHandle:function(e,t,n){return Hc="useImperativeHandle",nf(),Zc(),kd(e,t,n)},useLayoutEffect:function(e,t){return Hc="useLayoutEffect",nf(),Zc(),Ed(e,t)},useMemo:function(e,t){Hc="useMemo",nf(),Zc();var n=Fc.current;Fc.current=Jd;try{return Rd(e,t)}finally{Fc.current=n}},useReducer:function(e,t,n){Hc="useReducer",nf(),Zc();var r=Fc.current;Fc.current=Jd;try{return Ad(e)}finally{Fc.current=r}},useRef:function(e){return Hc="useRef",nf(),Zc(),vd()},useState:function(e){Hc="useState",nf(),Zc();var t=Fc.current;Fc.current=Jd;try{return pd()}finally{Fc.current=t}},useDebugValue:function(e,t){return Hc="useDebugValue",nf(),Zc(),Td()},useDeferredValue:function(e){return Hc="useDeferredValue",nf(),Zc(),Bd(e)},useTransition:function(){return Hc="useTransition",nf(),Zc(),jd()},useMutableSource:function(e,t,n){return Hc="useMutableSource",nf(),Zc(),dd(e,t,n)},useOpaqueIdentifier:function(){return Hc="useOpaqueIdentifier",nf(),Zc(),Hd()},unstable_isNewReconciler:_};var rf=r.unstable_now,of=0,sf=-1;function af(){return of}function Af(){of=rf()}function lf(e){sf=rf(),e.actualStartTime<0&&(e.actualStartTime=rf())}function uf(e){sf=-1}function cf(e,t){if(sf>=0){var n=rf()-sf;e.actualDuration+=n,t&&(e.selfBaseDuration=n),sf=-1}}function df(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}var ff,hf,pf,gf,mf,vf,yf,bf,wf=o.ReactCurrentOwner,_f=!1;function xf(e,t,n,r){t.child=null===e?Xu(t,null,n,r):Zu(t,e.child,n,r)}function Ef(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&xA(o,r,"prop",je(n))}var s,a=n.render,A=t.ref;if(tu(t,i),wf.current=t,qe(!0),s=ed(e,t,a,r,A,i),1&t.mode){Pe();try{s=ed(e,t,a,r,A,i)}finally{ke()}}return qe(!1),null===e||_f?(t.flags|=1,xf(e,t,s,i),t.child):(td(e,t,i),rh(e,t,i))}function Sf(e,t,n,r,i,o){if(null===e){var s=n.type;if(function(e){return"function"==typeof e&&!am(e)&&void 0===e.defaultProps}(s)&&null===n.compare&&void 0===n.defaultProps){var a;return a=Gg(s),t.tag=p,t.type=a,Bf(t,s),Pf(e,t,a,r,i,o)}var A=s.propTypes;A&&xA(A,r,"prop",je(s));var l=um(n.type,null,r,t,t.mode,o);return l.ref=t.ref,l.return=t,t.child=l,l}var u=n.type,c=u.propTypes;c&&xA(c,r,"prop",je(u));var d=e.child;if(!Ii(i,o)){var f=d.memoizedProps,h=n.compare;if((h=null!==h?h:ds)(f,r)&&e.ref===t.ref)return rh(e,t,o)}t.flags|=1;var g=Am(d,r);return g.ref=t.ref,g.return=t,t.child=g,g}function Pf(e,t,n,r,i,o){if(t.type!==t.elementType){var s=t.elementType;if(s.$$typeof===Ae){var a=s,A=a._payload,l=a._init;try{s=l(A)}catch(e){s=null}var u=s&&s.propTypes;u&&xA(u,r,"prop",je(s))}}if(null!==e&&(ds(e.memoizedProps,r)&&e.ref===t.ref&&t.type===e.type)){if(_f=!1,!Ii(o,i))return t.lanes=e.lanes,rh(e,t,o);0!=(e.flags&mr)&&(_f=!0)}return Mf(e,t,n,r,o)}function kf(e,t,n){var r,i=t.pendingProps,o=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0==(4&t.mode)){var a={baseLanes:0};t.memoizedState=a,Hp(t,n)}else{if(!Ii(n,yi)){var A;if(null!==s)A=Ri(s.baseLanes,n);else A=n;Og(yi),t.lanes=t.childLanes=yi;var l={baseLanes:A};return t.memoizedState=l,Hp(t,A),null}var u={baseLanes:0};t.memoizedState=u,Hp(t,null!==s?s.baseLanes:n)}else null!==s?(r=Ri(s.baseLanes,n),t.memoizedState=null):r=n,Hp(t,r);return xf(e,t,o,n),t.child}ff={},hf={},pf={},gf={},mf={},vf=!1,yf={},bf={};var Cf=kf;function Tf(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=ur)}function Mf(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&xA(o,r,"prop",je(n))}var s,a;if(s=FA(t,DA(0,n,!0)),tu(t,i),wf.current=t,qe(!0),a=ed(e,t,n,r,s,i),1&t.mode){Pe();try{a=ed(e,t,n,r,s,i)}finally{ke()}}return qe(!1),null===e||_f?(t.flags|=1,xf(e,t,a,i),t.child):(td(e,t,i),rh(e,t,i))}function If(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&xA(o,r,"prop",je(n))}var s,a;NA(n)?(s=!0,GA(t)):s=!1,tu(t,i),null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Uu(t,n,r),Wu(t,n,r,i),a=!0):a=null===e?function(e,t,n,r){var i=e.stateNode,o=e.memoizedProps;i.props=o;var s=i.context,a=t.contextType,A=IA;A="object"==typeof a&&null!==a?nu(a):FA(e,DA(0,t,!0));var l=t.getDerivedStateFromProps,u="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||o===n&&s===A||Vu(e,i,n,A),pu();var c=e.memoizedState,d=i.state=c;if(fu(e,n,i,r),d=e.memoizedState,o===n&&c===d&&!zA()&&!gu())return"function"==typeof i.componentDidMount&&(e.flags|=4),!1;"function"==typeof l&&(Lu(e,t,l,n),d=e.memoizedState);var f=gu()||Nu(e,t,o,n,c,d,A);return f?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(e.flags|=4)):("function"==typeof i.componentDidMount&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=d),i.props=n,i.state=d,i.context=A,f}(t,n,r,i):function(e,t,n,r,i){var o=t.stateNode;Au(e,t);var s=t.memoizedProps,a=t.type===t.elementType?s:Ul(t.type,s);o.props=a;var A=t.pendingProps,l=o.context,u=n.contextType,c=IA;c="object"==typeof u&&null!==u?nu(u):FA(t,DA(0,n,!0));var d=n.getDerivedStateFromProps,f="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||s===A&&l===c||Vu(t,o,r,c),pu();var h=t.memoizedState,p=o.state=h;if(fu(t,r,o,i),p=t.memoizedState,s===A&&h===p&&!zA()&&!gu())return"function"==typeof o.componentDidUpdate&&(s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4)),"function"==typeof o.getSnapshotBeforeUpdate&&(s===e.memoizedProps&&h===e.memoizedState||(t.flags|=cr)),!1;"function"==typeof d&&(Lu(t,n,d,r),p=t.memoizedState);var g=gu()||Nu(t,n,a,r,h,p,c);return g?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=cr)):("function"==typeof o.componentDidUpdate&&(s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4)),"function"==typeof o.getSnapshotBeforeUpdate&&(s===e.memoizedProps&&h===e.memoizedState||(t.flags|=cr)),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,g}(e,t,n,r,i);var l=Lf(e,t,n,a,s,i),u=t.stateNode;return a&&u.props!==r&&(vf||A("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",je(t.type)||"a component"),vf=!0),l}function Lf(e,t,n,r,i,o){Tf(e,t);var s=0!=(t.flags&lr);if(!r&&!s)return i&&HA(t,n,!1),rh(e,t,o);var a,A=t.stateNode;if(wf.current=t,s&&"function"!=typeof n.getDerivedStateFromError)a=null,uf();else{if(qe(!0),a=A.render(),1&t.mode){Pe();try{A.render()}finally{ke()}}qe(!1)}return t.flags|=1,null!==e&&s?function(e,t,n,r){t.child=Zu(t,e.child,null,r),t.child=Zu(t,null,n,r)}(e,t,a,o):xf(e,t,a,o),t.memoizedState=A.state,i&&HA(t,n,!0),t.child}function Rf(e){var t=e.stateNode;t.pendingContext?VA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VA(e,t.context,!1),oc(e,t.containerInfo)}function Of(e,t,n){Rf(t);var r=t.updateQueue;if(null===e||null===r)throw Error("If the root does not have an updateQueue, we should have already bailed out. This error is likely caused by a bug in React. Please file an issue.");var i=t.pendingProps,o=t.memoizedState,s=null!==o?o.element:null;Au(e,t),fu(t,i,null,n);var a=t.memoizedState.element;if(a===s)return Tc(),rh(e,t,n);var A,l,u=t.stateNode;if(u.hydrate&&(l=(A=t).stateNode.containerInfo,yc=tA(l),vc=A,bc=!0,1)){var c=u.mutableSourceEagerHydrationData;if(null!=c)for(var d=0;d<c.length;d+=2){Oc(c[d],c[d+1])}var f=Xu(t,null,a,n);t.child=f;for(var h=f;h;)h.flags=-3&h.flags|hr,h=h.sibling}else xf(e,t,a,n),Tc();return t.child}function Df(e,t,n,r,i){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2);var o=t.pendingProps,s=n,a=s._payload,A=(0,s._init)(a);t.type=A;var l=t.tag=function(e){if("function"==typeof e)return am(e)?1:0;if(null!=e){var t=e.$$typeof;if(t===ie)return c;if(t===ae)return h}return 2}(A),u=Ul(A,o);switch(l){case 0:return Bf(t,A),t.type=A=Gg(A),Mf(null,t,A,u,i);case 1:return t.type=A=Hg(A),If(null,t,A,u,i);case c:return t.type=A=Qg(A),Ef(null,t,A,u,i);case h:if(t.type!==t.elementType){var d=A.propTypes;d&&xA(d,u,"prop",je(A))}return Sf(null,t,A,Ul(A.type,u),r,i)}var f="";throw null!==A&&"object"==typeof A&&A.$$typeof===Ae&&(f=" Did you wrap a component in React.lazy() more than once?"),Error("Element type is invalid. Received a promise that resolves to: "+A+". Lazy element type must resolve to a class or function."+f)}function Bf(e,t){if(t&&t.childContextTypes&&A("%s(...): childContextTypes cannot be defined on a function component.",t.displayName||t.name||"Component"),null!==e.ref){var n="",r=Ge();r&&(n+="\n\nCheck the render method of `"+r+"`.");var i=r||e._debugID||"",o=e._debugSource;o&&(i=o.fileName+":"+o.lineNumber),mf[i]||(mf[i]=!0,A("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",n))}if("function"==typeof t.getDerivedStateFromProps){var s=je(t)||"Unknown";gf[s]||(A("%s: Function components do not support getDerivedStateFromProps.",s),gf[s]=!0)}if("object"==typeof t.contextType&&null!==t.contextType){var a=je(t)||"Unknown";pf[a]||(A("%s: Function components do not support contextType.",a),pf[a]=!0)}}var Ff={dehydrated:null,retryLane:0};function zf(e){return{baseLanes:e}}function Nf(e,t){return{baseLanes:Ri(e.baseLanes,t)}}function jf(e,t){return Oi(e.childLanes,t)}function Uf(e,t,n){var r=t.pendingProps;Pm(t)&&(t.flags|=lr);var i=uc.current,o=!1;if(0!=(t.flags&lr)||function(e,t,n,r){return(null===t||null!==t.memoizedState)&&cc(e,2)}(i,e)?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0!==r.fallback&&!0!==r.unstable_avoidThisFallback&&(i=i|1),hc(t,i=dc(i)),null===e){void 0!==r.fallback&&Ec(t);var s=r.children,a=r.fallback;if(o){var A=Vf(t,s,a,n);return t.child.memoizedState=zf(n),t.memoizedState=Ff,A}if("number"==typeof r.unstable_expectedLoadTime){var l=Vf(t,s,a,n);return t.child.memoizedState=zf(n),t.memoizedState=Ff,t.lanes=hi,Og(hi),l}return function(e,t,n){var r=e.mode,i=fm({mode:"visible",children:t},r,n,null);return i.return=e,e.child=i,i}(t,s,n)}if(null!==e.memoizedState){if(o){var u=r.fallback,c=Hf(e,t,r.children,u,n),d=t.child,f=e.child.memoizedState;return d.memoizedState=null===f?zf(n):Nf(f,n),d.childLanes=jf(e,n),t.memoizedState=Ff,c}var h=Gf(e,t,r.children,n);return t.memoizedState=null,h}if(o){var p=r.fallback,g=Hf(e,t,r.children,p,n),m=t.child,v=e.child.memoizedState;return m.memoizedState=null===v?zf(n):Nf(v,n),m.childLanes=jf(e,n),t.memoizedState=Ff,g}var y=Gf(e,t,r.children,n);return t.memoizedState=null,y}function Vf(e,t,n,r){var i,o,s=e.mode,a=e.child,A={mode:"hidden",children:t};return 0==(2&s)&&null!==a?((i=a).childLanes=0,i.pendingProps=A,8&e.mode&&(i.actualDuration=0,i.actualStartTime=-1,i.selfBaseDuration=0,i.treeBaseDuration=0),o=dm(n,s,r,null)):(i=fm(A,s,0,null),o=dm(n,s,r,null)),i.return=e,o.return=e,i.sibling=o,e.child=i,o}function Wf(e,t){return Am(e,t)}function Gf(e,t,n,r){var i=e.child,o=i.sibling,s=Wf(i,{mode:"visible",children:n});return 0==(2&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==o&&(o.nextEffect=null,o.flags=8,t.firstEffect=t.lastEffect=o),t.child=s,s}function Hf(e,t,n,r,i){var o,s,a=t.mode,A=e.child,l=A.sibling,u={mode:"hidden",children:n};if(0==(2&a)&&t.child!==A){(o=t.child).childLanes=0,o.pendingProps=u,8&t.mode&&(o.actualDuration=0,o.actualStartTime=-1,o.selfBaseDuration=A.selfBaseDuration,o.treeBaseDuration=A.treeBaseDuration);var c=o.lastEffect;null!==c?(t.firstEffect=o.firstEffect,t.lastEffect=c,c.nextEffect=null):t.firstEffect=t.lastEffect=null}else o=Wf(A,u);return null!==l?s=Am(l,r):(s=dm(r,a,i,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,s}function Qf(e,t){e.lanes=Ri(e.lanes,t);var n=e.alternate;null!==n&&(n.lanes=Ri(n.lanes,t)),eu(e.return,t)}function $f(e,t){var n=Array.isArray(e),r=!n&&"function"==typeof ge(e);if(n||r){var i=n?"array":"iterable";return A("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",i,t,i),!1}return!0}function qf(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function Yf(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail,s=r.children;!function(e){if(void 0!==e&&"forwards"!==e&&"backwards"!==e&&"together"!==e&&!yf[e])if(yf[e]=!0,"string"==typeof e)switch(e.toLowerCase()){case"together":case"forwards":case"backwards":A('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break;case"forward":case"backward":A('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break;default:A('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}else A('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}(i),function(e,t){void 0===e||bf[e]||("collapsed"!==e&&"hidden"!==e?(bf[e]=!0,A('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):"forwards"!==t&&"backwards"!==t&&(bf[e]=!0,A('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}(o,i),function(e,t){if(("forwards"===t||"backwards"===t)&&null!=e&&!1!==e)if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!$f(e[n],n))return}else{var r=ge(e);if("function"==typeof r){var i=r.call(e);if(i)for(var o=i.next(),s=0;!o.done;o=i.next()){if(!$f(o.value,s))return;s++}}else A('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',t)}}(s,i),xf(e,t,s,n);var a=uc.current;cc(a,2)?(a=fc(a,2),t.flags|=lr):(null!==e&&0!=(e.flags&lr)&&function(e,t,n){for(var r=t;null!==r;){if(r.tag===f)null!==r.memoizedState&&Qf(r,n);else if(r.tag===m)Qf(r,n);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)return;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(t,t.child,n),a=dc(a));if(hc(t,a),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":var l,u=function(e){for(var t=e,n=null;null!==t;){var r=t.alternate;null!==r&&null===mc(r)&&(n=t),t=t.sibling}return n}(t.child);null===u?(l=t.child,t.child=null):(l=u.sibling,u.sibling=null),qf(t,!1,l,u,o,t.lastEffect);break;case"backwards":var c=null,d=t.child;for(t.child=null;null!==d;){var h=d.alternate;if(null!==h&&null===mc(h)){t.child=d;break}var p=d.sibling;d.sibling=c,c=d,d=p}qf(t,!0,c,null,o,t.lastEffect);break;case"together":qf(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}var Zf=!1;function Xf(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value;"value"in i||Zf||(Zf=!0,A("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var a=t.type.propTypes;if(a&&xA(a,i,"prop","Context.Provider"),Kl(t,s),null!==o){var l=function(e,t,n){if(us(n,t))return 0;var r="function"==typeof e._calculateChangedBits?e._calculateChangedBits(n,t):Wl;return(r&Wl)!==r&&A("calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",r),0|r}(r,s,o.value);if(0===l){if(o.children===i.children&&!zA())return rh(e,t,n)}else!function(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=void 0,s=i.dependencies;if(null!==s){o=i.child;for(var a=s.firstContext;null!==a;){if(a.context===t&&0!=(a.observedBits&n)){if(1===i.tag){var A=lu(bi,Ti(r));A.tag=ou,uu(i,A)}i.lanes=Ri(i.lanes,r);var l=i.alternate;null!==l&&(l.lanes=Ri(l.lanes,r)),eu(i.return,r),s.lanes=Ri(s.lanes,r);break}a=a.next}}else o=i.tag===u&&i.type===e.type?null:i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}var c=o.sibling;if(null!==c){c.return=o.return,o=c;break}o=o.return}i=o}}(t,r,l,n)}return xf(e,t,i.children,n),t.child}var Kf,Jf,eh,th=!1;function nh(){_f=!0}function rh(e,t,n){return null!==e&&(t.dependencies=e.dependencies),uf(),Jp(t.lanes),Ii(n,t.childLanes)?(function(e,t){if(null!==e&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==t.child){var n=t.child,r=Am(n,n.pendingProps);for(t.child=r,r.return=t;null!==n.sibling;)n=n.sibling,(r=r.sibling=Am(n,n.pendingProps)).return=t;r.sibling=null}}(e,t),t.child):null}function ih(e,t,n){var r=t.lanes;if(t._debugNeedsRemount&&null!==e)return function(e,t,n){var r=t.return;if(null===r)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,n.index=t.index,n.sibling=t.sibling,n.return=t.return,n.ref=t.ref,t===r.child)r.child=n;else{var i=r.child;if(null===i)throw new Error("Expected parent to have a child.");for(;i.sibling!==t;)if(null===(i=i.sibling))throw new Error("Expected to find the previous sibling.");i.sibling=n}var o=r.lastEffect;return null!==o?(o.nextEffect=e,r.lastEffect=e):r.firstEffect=r.lastEffect=e,e.nextEffect=null,e.flags=8,n.flags|=2,n}(e,t,um(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes));if(null!==e)if(e.memoizedProps!==t.pendingProps||zA()||t.type!==e.type)_f=!0;else{if(!Ii(n,r)){switch(_f=!1,t.tag){case 3:Rf(t),Tc();break;case 5:Ac(t);break;case 1:NA(t.type)&&GA(t);break;case 4:oc(t,t.stateNode.containerInfo);break;case u:Kl(t,t.memoizedProps.value);break;case d:Ii(n,t.childLanes)&&(t.flags|=4);var i=t.stateNode;i.effectDuration=0,i.passiveEffectDuration=0;break;case f:if(null!==t.memoizedState){if(Ii(n,t.child.childLanes))return Uf(e,t,n);hc(t,dc(uc.current));var o=rh(e,t,n);return null!==o?o.sibling:null}hc(t,dc(uc.current));break;case m:var s=0!=(e.flags&lr),a=Ii(n,t.childLanes);if(s){if(a)return Yf(e,t,n);t.flags|=lr}var l=t.memoizedState;if(null!==l&&(l.rendering=null,l.tail=null,l.lastEffect=null),hc(t,uc.current),a)break;return null;case b:case w:return t.lanes=0,kf(e,t,n)}return rh(e,t,n)}_f=0!=(e.flags&mr)}else _f=!1;switch(t.lanes=0,t.tag){case 2:return function(e,t,n,r){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2);var i,o,s=t.pendingProps;if(i=FA(t,DA(0,n,!1)),tu(t,r),n.prototype&&"function"==typeof n.prototype.render){var a=je(n)||"Unknown";ff[a]||(A("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",a,a),ff[a]=!0)}if(1&t.mode&&Ml.recordLegacyContextWarning(t,null),qe(!0),wf.current=t,o=ed(null,t,n,s,i,r),qe(!1),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var l=je(n)||"Unknown";hf[l]||(A("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",l,l,l),hf[l]=!0)}if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var u=je(n)||"Unknown";hf[u]||(A("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",u,u,u),hf[u]=!0),t.tag=1,t.memoizedState=null,t.updateQueue=null;var c=!1;NA(n)?(c=!0,GA(t)):c=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,au(t);var d=n.getDerivedStateFromProps;return"function"==typeof d&&Lu(t,n,d,s),ju(t,o),Wu(t,n,s,r),Lf(null,t,n,!0,c,r)}if(t.tag=0,1&t.mode){Pe();try{o=ed(null,t,n,s,i,r)}finally{ke()}}return xf(null,t,o,r),Bf(t,n),t.child}(e,t,t.type,n);case 16:return Df(e,t,t.elementType,r,n);case 0:var _=t.type,x=t.pendingProps;return Mf(e,t,_,t.elementType===_?x:Ul(_,x),n);case 1:var E=t.type,S=t.pendingProps;return If(e,t,E,t.elementType===E?S:Ul(E,S),n);case 3:return Of(e,t,n);case 5:return function(e,t,n){Ac(t),null===e&&Ec(t);var r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children;return Va(r,i)?s=null:null!==o&&Va(r,o)&&(t.flags|=16),Tf(e,t),xf(e,t,s,n),t.child}(e,t,n);case 6:return function(e,t){return null===e&&Ec(t),null}(e,t);case f:return Uf(e,t,n);case 4:return function(e,t,n){oc(t,t.stateNode.containerInfo);var r=t.pendingProps;return null===e?t.child=Zu(t,null,r,n):xf(e,t,r,n),t.child}(e,t,n);case c:var P=t.type,k=t.pendingProps;return Ef(e,t,P,t.elementType===P?k:Ul(P,k),n);case 7:return function(e,t,n){return xf(e,t,t.pendingProps,n),t.child}(e,t,n);case 8:return function(e,t,n){return xf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case d:return function(e,t,n){t.flags|=4;var r=t.stateNode;return r.effectDuration=0,r.passiveEffectDuration=0,xf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case u:return Xf(e,t,n);case 9:return function(e,t,n){var r=t.type;void 0===r._context?r!==r.Consumer&&(th||(th=!0,A("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):r=r._context;var i=t.pendingProps,o=i.children;"function"!=typeof o&&A("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),tu(t,n);var s,a=nu(r,i.unstable_observedBits);return wf.current=t,qe(!0),s=o(a),qe(!1),t.flags|=1,xf(e,t,s,n),t.child}(e,t,n);case h:var C=t.type,T=Ul(C,t.pendingProps);if(t.type!==t.elementType){var M=C.propTypes;M&&xA(M,T,"prop",je(C))}return Sf(e,t,C,T=Ul(C.type,T),r,n);case p:return Pf(e,t,t.type,t.pendingProps,r,n);case g:var I=t.type,L=t.pendingProps;return function(e,t,n,r,i){var o;return null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,NA(n)?(o=!0,GA(t)):o=!1,tu(t,i),Uu(t,n,r),Wu(t,n,r,i),Lf(null,t,n,!0,o,i)}(e,t,I,t.elementType===I?L:Ul(I,L),n);case m:return Yf(e,t,n);case v:case 21:case y:break;case b:return kf(e,t,n);case w:return Cf(e,t,n)}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function oh(e){e.flags|=4}function sh(e){e.flags|=ur}function ah(e,t){if(!Mc())switch(e.tailMode){case"hidden":for(var n=e.tail,r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":for(var i=e.tail,o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ah(e,t,n){var r,i,o,s=t.pendingProps;switch(t.tag){case 2:case 16:case p:case 0:case c:case 7:case 8:case d:case 9:case h:return null;case 1:return NA(t.type)&&jA(t),null;case 3:sc(t),UA(t),Rc();var a=t.stateNode;if(a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null===e||null===e.child)Cc(t)?oh(t):a.hydrate||(t.flags|=cr);return null;case 5:lc(t);var A=ic(),l=t.type;if(null!==e&&null!=t.stateNode)Jf(e,t,l,s),e.ref!==t.ref&&sh(t);else{if(!s){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return null}var _=ac();if(Cc(t))i=_,o=nA((r=t).stateNode,r.type,r.memoizedProps,0,i,r),r.updateQueue=o,null!==o&&oh(t);else{var x=Ua(l,s,A,_,t);Kf(x,t),t.stateNode=x,function(e,t,n,r,i){return ya(e,t,n),Na(t,n)}(x,l,s)&&oh(t)}null!==t.ref&&sh(t)}return null;case 6:var E=s;if(e&&null!=t.stateNode){var S=e.memoizedProps;eh(0,t,S,E)}else{if("string"!=typeof E&&null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var P=ic(),k=ac();Cc(t)?Sc(t)&&oh(t):t.stateNode=Wa(E,P,k,t)}return null;case f:pc(t);var C=t.memoizedState;if(0!=(t.flags&lr))return t.lanes=n,0!=(8&t.mode)&&df(t),t;var T=null!==C,M=!1;if(null===e)void 0!==t.memoizedProps.fallback&&Cc(t);else M=null!==e.memoizedState;if(T&&!M)if(0!=(2&t.mode))null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||cc(uc.current,1)?0===tp&&(tp=3):function(){0!==tp&&3!==tp||(tp=4);null!==Zh&&(Pi(ip)||Pi(op))&&jp(Zh,Kh)}();return(T||M)&&(t.flags|=4),null;case 4:return sc(t),null===e&&js(t.stateNode.containerInfo),null;case u:return Jl(t),null;case g:return NA(t.type)&&jA(t),null;case m:pc(t);var I=t.memoizedState;if(null===I)return null;var L=0!=(t.flags&lr),R=I.rendering;if(null===R)if(L)ah(I,!1);else{if(!(0===tp&&(null===e||0==(e.flags&lr))))for(var O=t.child;null!==O;){var D=mc(O);if(null!==D){L=!0,t.flags|=lr,ah(I,!1);var B=D.updateQueue;return null!==B&&(t.updateQueue=B,t.flags|=4),null===I.lastEffect&&(t.firstEffect=null),t.lastEffect=I.lastEffect,Ku(t,n),hc(t,fc(uc.current,2)),t.child}O=O.sibling}null!==I.tail&&bl()>cp()&&(t.flags|=lr,L=!0,ah(I,!1),t.lanes=hi,Og(hi))}else{if(!L){var F=mc(R);if(null!==F){t.flags|=lr,L=!0;var z=F.updateQueue;if(null!==z&&(t.updateQueue=z,t.flags|=4),ah(I,!0),null===I.tail&&"hidden"===I.tailMode&&!R.alternate&&!Mc()){var N=t.lastEffect=I.lastEffect;return null!==N&&(N.nextEffect=null),null}}else 2*bl()-I.renderingStartTime>cp()&&n!==yi&&(t.flags|=lr,L=!0,ah(I,!1),t.lanes=hi,Og(hi))}if(I.isBackwards)R.sibling=t.child,t.child=R;else{var j=I.last;null!==j?j.sibling=R:t.child=R,I.last=R}}if(null!==I.tail){var U=I.tail;I.rendering=U,I.tail=U.sibling,I.lastEffect=t.lastEffect,I.renderingStartTime=bl(),U.sibling=null;var V=uc.current;return hc(t,V=L?fc(V,2):dc(V)),U}return null;case v:case 21:case y:break;case b:case w:if(Qp(t),null!==e){var W=t.memoizedState;null!==e.memoizedState!==(null!==W)&&"unstable-defer-without-hiding"!==s.mode&&(t.flags|=4)}return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function lh(e,t){switch(e.tag){case 1:NA(e.type)&&jA(e);var n=e.flags;return n&gr?(e.flags=-4097&n|lr,0!=(8&e.mode)&&df(e),e):null;case 3:sc(e),UA(e),Rc();var r=e.flags;if(0!=(r&lr))throw Error("The root failed to unmount after an error. This is likely a bug in React. Please file an issue.");return e.flags=-4097&r|lr,e;case 5:return lc(e),null;case f:pc(e);var i=e.flags;return i&gr?(e.flags=-4097&i|lr,0!=(8&e.mode)&&df(e),e):null;case m:return pc(e),null;case 4:return sc(e),null;case u:return Jl(e),null;case b:case w:return Qp(e),null;default:return null}}function uh(e){switch(e.tag){case 1:var t=e.type.childContextTypes;null!=t&&jA(e);break;case 3:sc(e),UA(e),Rc();break;case 5:lc(e);break;case 4:sc(e);break;case f:case m:pc(e);break;case u:Jl(e);break;case b:case w:Qp(e)}}function ch(e,t){return{value:e,source:t,stack:ze(t)}}function dh(e,t){try{0;var n=t.value,r=t.source,i=t.stack,o=null!==i?i:"";if(null!=n&&n._suppressLogging){if(1===e.tag)return;console.error(n)}var s=r?je(r.type):null,a=s?"The above error occurred in the <"+s+"> component:":"The above error occurred in one of your React components:",A=je(e.type),l=a+"\n"+o+"\n\n"+(A?"React will try to recreate this component tree from scratch using the error boundary you provided, "+A+".":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://reactjs.org/link/error-boundaries to learn more about error boundaries.");console.error(l)}catch(e){setTimeout((function(){throw e}))}}Kf=function(e,t,n,r){for(var i,o,s=t.child;null!==s;){if(5===s.tag||6===s.tag)i=e,o=s.stateNode,i.appendChild(o);else if(4===s.tag);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)return;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Jf=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var s=function(e,t,n,r,i,o){var s=o;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var a=""+r.children,A=Ca(s.ancestorInfo,t);ka(null,a,A)}return ba(e,t,n,r)}(t.stateNode,n,o,r,0,ac());t.updateQueue=s,s&&oh(t)}},eh=function(e,t,n,r){n!==r&&oh(t)};var fh="function"==typeof WeakMap?WeakMap:Map;function hh(e,t,n){var r=lu(bi,n);r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){mg(i),dh(e,t)},r}function ph(e,t,n){var r=lu(bi,n);r.tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var o=t.value;r.payload=function(){return dh(e,t),i(o)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch?r.callback=function(){var n;qg(e),"function"!=typeof i&&(n=this,null===pp?pp=new Set([n]):pp.add(n),dh(e,t));var r=t.value,o=t.stack;this.componentDidCatch(r,{componentStack:null!==o?o:""}),"function"!=typeof i&&(Ii(e.lanes,1)||A("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",je(e.type)||"Unknown"))}:r.callback=function(){qg(e)},r}function gh(e,t,n){var r,i=e.pingCache;if(null===i?(i=e.pingCache=new fh,r=new Set,i.set(t,r)):void 0===(r=i.get(t))&&(r=new Set,i.set(t,r)),!r.has(n)){r.add(n);var o=bg.bind(null,e,t,n);t.then(o,o)}}function mh(e,t,n,r,i){if(n.flags|=pr,n.firstEffect=n.lastEffect=null,null!==r&&"object"==typeof r&&"function"==typeof r.then){var o=r;if(0==(2&n.mode)){var s=n.alternate;s?(n.updateQueue=s.updateQueue,n.memoizedState=s.memoizedState,n.lanes=s.lanes):(n.updateQueue=null,n.memoizedState=null)}var a=cc(uc.current,1),A=t;do{if(A.tag===f&&gc(A,a)){var l=A.updateQueue;if(null===l){var u=new Set;u.add(o),A.updateQueue=u}else l.add(o);if(0==(2&A.mode)){if(A.flags|=lr,n.flags|=mr,n.flags&=-2981,1===n.tag)if(null===n.alternate)n.tag=g;else{var c=lu(bi,1);c.tag=ou,uu(n,c)}return void(n.lanes=Ri(n.lanes,1))}return gh(e,o,i),A.flags|=gr,void(A.lanes=i)}A=A.return}while(null!==A);r=new Error((je(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==tp&&(tp=2),r=ch(r,n);var d=t;do{switch(d.tag){case 3:var h=r;d.flags|=gr;var p=Ti(i);return d.lanes=Ri(d.lanes,p),void cu(d,hh(d,h,p));case 1:var m=r,v=d.type,y=d.stateNode;if(0==(d.flags&lr)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&!gg(y))){d.flags|=gr;var b=Ti(i);return d.lanes=Ri(d.lanes,b),void cu(d,ph(d,m,b))}}d=d.return}while(null!==d)}var vh;vh=new Set;var yh="function"==typeof WeakSet?WeakSet:Set,bh=function(e,t){t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()};function wh(e){var t=e.ref;null!==t&&("function"==typeof t?(tr(null,t,null,null),nr()&&yg(e,rr())):t.current=null)}function _h(e,t){(tr(null,t,null),nr())&&yg(e,rr())}function xh(e,t){switch(t.tag){case 0:case c:case p:case y:case 5:case 6:case 4:case g:return;case 1:if(t.flags&cr&&null!==e){var n=e.memoizedProps,r=e.memoizedState,i=t.stateNode;t.type!==t.elementType||vf||(i.props!==t.memoizedProps&&A("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",je(t.type)||"instance"),i.state!==t.memoizedState&&A("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",je(t.type)||"instance"));var o=i.getSnapshotBeforeUpdate(t.elementType===t.type?n:Ul(t.type,n),r),s=vh;void 0!==o||s.has(t.type)||(s.add(t.type),A("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",je(t.type))),i.__reactInternalSnapshotBeforeUpdate=o}return;case 3:if(t.flags&cr)Xa(t.stateNode.containerInfo);return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Eh(e,t,n,r){switch(n.tag){case 0:case c:case p:case y:return function(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,o=i;do{if((o.tag&e)===e){var s=o.create;o.destroy=s();var a=o.destroy;void 0!==a&&"function"!=typeof a&&A("An effect function must not return anything besides a function, which is used for clean-up.%s",null===a?" You returned null. If your effect does not require clean up, return undefined (or nothing).":"function"==typeof a.then?"\n\nIt looks like you wrote useEffect(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching":" You returned: "+a)}o=o.next}while(o!==i)}}(3,n),void function(e){var t=e.updateQueue,n=null!==t?t.lastEffect:null;if(null!==n){var r=n.next,i=r;do{var o=i,s=o.next,a=o.tag;0!=(4&a)&&0!=(1&a)&&(fg(e,i),dg(e,i)),i=s}while(i!==r)}}(n);case 1:var i=n.stateNode;if(4&n.flags)if(null===t)n.type!==n.elementType||vf||(i.props!==n.memoizedProps&&A("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",je(n.type)||"instance"),i.state!==n.memoizedState&&A("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",je(n.type)||"instance")),i.componentDidMount();else{var o=n.elementType===n.type?t.memoizedProps:Ul(n.type,t.memoizedProps),s=t.memoizedState;n.type!==n.elementType||vf||(i.props!==n.memoizedProps&&A("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",je(n.type)||"instance"),i.state!==n.memoizedState&&A("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",je(n.type)||"instance")),i.componentDidUpdate(o,s,i.__reactInternalSnapshotBeforeUpdate)}var a=n.updateQueue;return void(null!==a&&(n.type!==n.elementType||vf||(i.props!==n.memoizedProps&&A("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",je(n.type)||"instance"),i.state!==n.memoizedState&&A("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",je(n.type)||"instance")),mu(0,a,i)));case 3:var l=n.updateQueue;if(null!==l){var u=null;if(null!==n.child)switch(n.child.tag){case 5:case 1:u=n.child.stateNode}mu(0,l,u)}return;case 5:var h=n.stateNode;if(null===t&&4&n.flags)!function(e,t,n,r){Na(t,n)&&e.focus()}(h,n.type,n.memoizedProps);return;case 6:case 4:case m:case g:case v:case 21:case b:case w:return;case d:var _=n.memoizedProps;_.onCommit;var x=_.onRender;n.stateNode.effectDuration;var E=af();return void("function"==typeof x&&x(n.memoizedProps.id,null===t?"mount":"update",n.actualDuration,n.treeBaseDuration,n.actualStartTime,E,e.memoizedInteractions));case f:return void function(e,t){if(null===t.memoizedState){var n=t.alternate;if(null!==n){var r=n.memoizedState;if(null!==r){var i=r.dehydrated;null!==i&&function(e){Hr(e)}(i)}}}}(0,n)}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Sh(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;t?qa(r):Ya(n.stateNode,n.memoizedProps)}else if(6===n.tag){var i=n.stateNode;t?i.nodeValue="":Za(i,n.memoizedProps)}else if(n.tag!==b&&n.tag!==w||null===n.memoizedState||n===e){if(null!==n.child){n.child.return=n,n=n.child;continue}}else;if(n===e)return;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ph(e){var t=e.ref;if(null!==t){var n,r=e.stateNode;e.tag,n=r,"function"==typeof t?t(n):(t.hasOwnProperty("current")||A("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",je(e.type)),t.current=n)}}function kh(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function Ch(e,t,n){switch(function(e){if(qA&&"function"==typeof qA.onCommitFiberUnmount)try{qA.onCommitFiberUnmount($A,e)}catch(e){YA||(YA=!0,A("React instrumentation encountered an error: %s",e))}}(t),t.tag){case 0:case c:case h:case p:case y:var r=t.updateQueue;if(null!==r){var i=r.lastEffect;if(null!==i){var o=i.next,s=o;do{var a=s,l=a.destroy,u=a.tag;void 0!==l&&(0!=(4&u)?fg(t,s):_h(t,l)),s=s.next}while(s!==o)}}return;case 1:wh(t);var d=t.stateNode;return void("function"==typeof d.componentWillUnmount&&function(e,t){tr(null,bh,null,e,t),nr()&&yg(e,rr())}(t,d));case 5:return void wh(t);case 4:return void Dh(e,t);case v:case 18:case 21:return}}function Th(e,t,n){for(var r=t;;)if(Ch(e,r),null===r.child||4===r.tag){if(r===t)return;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Mh(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null,e._debugOwner=null}function Ih(e){return 5===e.tag||3===e.tag||4===e.tag}function Lh(e){var t,n,r=function(e){for(var t=e.return;null!==t;){if(Ih(t))return t;t=t.return}throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),i=r.stateNode;switch(r.tag){case 5:t=i,n=!1;break;case 3:case 4:t=i.containerInfo,n=!0;break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}16&r.flags&&(Qa(t),r.flags&=-17);var o=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||Ih(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue e;if(null===t.child||4===t.tag)continue e;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}(e);n?Rh(e,o,t):Oh(e,o,t)}function Rh(e,t,n){var r=e.tag,i=5===r||6===r;if(i){var o=i?e.stateNode:e.stateNode.instance;t?function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)}(n,o,t):function(e,t){var n;8===e.nodeType?(n=e.parentNode).insertBefore(t,e):(n=e).appendChild(t),null==e._reactRootContainer&&null===n.onclick&&va(n)}(n,o)}else if(4===r);else{var s=e.child;if(null!==s){Rh(s,t,n);for(var a=s.sibling;null!==a;)Rh(a,t,n),a=a.sibling}}}function Oh(e,t,n){var r=e.tag,i=5===r||6===r;if(i){var o=i?e.stateNode:e.stateNode.instance;t?function(e,t,n){e.insertBefore(t,n)}(n,o,t):function(e,t){e.appendChild(t)}(n,o)}else if(4===r);else{var s=e.child;if(null!==s){Oh(s,t,n);for(var a=s.sibling;null!==a;)Oh(a,t,n),a=a.sibling}}}function Dh(e,t,n){for(var r,i,o,s,a=t,A=!1;;){if(!A){var l=a.return;e:for(;;){if(null===l)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");var u=l.stateNode;switch(l.tag){case 5:r=u,i=!1;break e;case 3:case 4:r=u.containerInfo,i=!0;break e}l=l.return}A=!0}if(5===a.tag||6===a.tag)Th(e,a),i?(o=r,s=a.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):$a(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(Ch(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)return;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(A=!1)}a.sibling.return=a.return,a=a.sibling}}function Bh(e,t,n){Dh(e,t);var r=t.alternate;Mh(t),null!==r&&Mh(r)}function Fh(e,t){switch(t.tag){case 0:case c:case h:case p:case y:return void function(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,o=i;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,void 0!==s&&s()}o=o.next}while(o!==i)}}(3,t);case 1:case d:case g:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r,o=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&function(e,t,n,r,i,o){vA(e,i),wa(e,t,n,r,i)}(n,s,o,i,r)}return;case 6:if(null===t.stateNode)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var a=t.stateNode,A=t.memoizedProps;null!==e&&e.memoizedProps;return void function(e,t,n){e.nodeValue=n}(a,0,A);case 3:var l=t.stateNode;return void(l.hydrate&&(l.hydrate=!1,Hr(l.containerInfo)));case f:return function(e){if(null!==e.memoizedState){Ap=bl(),Sh(e.child,!0)}}(t),void zh(t);case m:return void zh(t);case v:case 21:break;case b:case w:return void Sh(t,null!==t.memoizedState)}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function zh(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new yh),t.forEach((function(t){var r=wg.bind(null,e,t);n.has(t)||(!0!==t.__reactDoNotTraceInteractions&&(r=i.unstable_wrap(r)),n.add(t),t.then(r,r))}))}}function Nh(e,t){if(null!==e){var n=e.memoizedState;if(null===n||null!==n.dehydrated){var r=t.memoizedState;return null!==r&&null===r.dehydrated}}return!1}function jh(e){Qa(e.stateNode)}if("function"==typeof Symbol&&Symbol.for){var Uh=Symbol.for;Uh("selector.component"),Uh("selector.has_pseudo_class"),Uh("selector.role"),Uh("selector.test_id"),Uh("selector.text")}var Vh=[];var Wh=Math.ceil,Gh=o.ReactCurrentDispatcher,Hh=o.ReactCurrentOwner,Qh=o.IsSomeRendererActing,$h=16,qh=32,Yh=0,Zh=null,Xh=null,Kh=0,Jh=0,ep=CA(0),tp=0,np=null,rp=0,ip=0,op=0,sp=0,ap=null,Ap=0,lp=1/0;function up(){lp=bl()+500}function cp(){return lp}var dp=null,fp=!1,hp=null,pp=null,gp=!1,mp=null,vp=90,yp=0,bp=[],wp=[],_p=null,xp=0,Ep=null,Sp=0,Pp=null,kp=bi,Cp=0,Tp=0,Mp=!1,Ip=null,Lp=!1;function Rp(){return 0!=(48&Yh)?bl():kp!==bi?kp:kp=bl()}function Op(e){var t=e.mode;if(0==(2&t))return 1;if(0==(4&t))return wl()===cl?1:2;if(0===Cp&&(Cp=rp),0!==Tl.transition)return 0!==Tp&&(Tp=null!==ap?ap.pendingLanes:0),function(e,t){var n=Ti(di&~t);return 0===n&&0===(n=Ti(di&~e))&&(n=Ti(di)),n}(Cp,Tp);var n,r=wl();0!=(4&Yh)&&r===dl?n=Ci(12,Cp):n=Ci(function(e){switch(e){case 99:return li;case 98:return ui;case 97:case 96:return 8;case 95:return 2;default:return 0}}(r),Cp);return n}function Dp(e){var t,n=e.mode;return 0==(2&n)?1:0==(4&n)?wl()===cl?1:2:(0===Cp&&(Cp=rp),0===(t=Ti(fi&~Cp))&&(t=Ti(fi)),t)}function Bp(e,t,n){!function(){if(xp>50)throw xp=0,Ep=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Sp>50&&(Sp=0,A("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}(),function(e){if(We&&0!=(Yh&$h)&&!Ud)switch(e.tag){case 0:case c:case p:var t=Xh&&je(Xh.type)||"Unknown",n=t;if(!Pg.has(n))Pg.add(n),A("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",je(e.type)||"Unknown",t,t);break;case 1:kg||(A("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),kg=!0)}}(e);var r=Fp(e,t);if(null===r)return function(e){var t=e.tag;if(3!==t&&1!==t&&0!==t&&t!==c&&t!==h&&t!==p&&t!==y)return;if(0!=(e.flags&fr))return;var n=je(e.type)||"ReactComponent";if(null!==Sg){if(Sg.has(n))return;Sg.add(n)}else Sg=new Set([n]);if(Mp);else{var r=Ve;try{$e(e),A("Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in %s.",1===t?"the componentWillUnmount method":"a useEffect cleanup function")}finally{r?$e(e):Qe()}}}(e),null;Bi(r,t,n),r===Zh&&(op=Ri(op,t),4===tp&&jp(r,Kh));var i=wl();1===t?0!=(8&Yh)&&0==(48&Yh)?(Bg(r,t),Up(r)):(zp(r,n),Bg(r,t),0===Yh&&(up(),Pl())):(0==(4&Yh)||i!==dl&&i!==cl||(null===_p?_p=new Set([r]):_p.add(r)),zp(r,n),Bg(r,t)),ap=r}function Fp(e,t){e.lanes=Ri(e.lanes,t);var n=e.alternate;null!==n&&(n.lanes=Ri(n.lanes,t)),null===n&&0!=(1026&e.flags)&&xg(e);for(var r=e,i=e.return;null!==i;)i.childLanes=Ri(i.childLanes,t),null!==(n=i.alternate)?n.childLanes=Ri(n.childLanes,t):0!=(1026&i.flags)&&xg(e),r=i,i=i.return;return 3===r.tag?r.stateNode:null}function zp(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.pendingLanes,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=n;s>0;){var a=Mi(s),A=1<<a,l=o[a];l===bi?0!=(A&r)&&0==(A&i)||(o[a]=Ei(A,t)):l<=t&&(e.expiredLanes|=A),s&=~A}}(e,t);var r=xi(e,e===Zh?Kh:0),i=wi;if(0!==r){if(null!==n){if(e.callbackPriority===i)return;Sl(n)}var o,s;if(i===li)s=Up.bind(null,e),null===gl?(gl=[s],ml=JA(ol,kl)):gl.push(s),o=ul;else if(14===i)o=El(cl,Up.bind(null,e));else{o=El(function(e){switch(e){case li:case 14:return 99;case 13:case 12:case 11:case ui:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error("Invalid update priority: "+e+". This is a bug in React.")}}(i),Np.bind(null,e))}e.callbackPriority=i,e.callbackNode=o}else null!==n&&(Sl(n),e.callbackNode=null,e.callbackPriority=0)}function Np(e){if(kp=bi,Cp=0,Tp=0,0!=(48&Yh))throw Error("Should not already be working.");var t=e.callbackNode;if(cg()&&e.callbackNode!==t)return null;var n=xi(e,e===Zh?Kh:0);if(0===n)return null;var r=function(e,t){var n=Yh;Yh|=$h;var r=Yp();Zh===e&&Kh===t||(up(),$p(e,t),Fg(e,t));var i=Xp(e);for(;;)try{ng();break}catch(t){qp(e,t)}return Yl(),Kp(i),Zp(r),Yh=n,null!==Xh?0:(Zh=null,Kh=0,tp)}(e,n);if(Ii(rp,op))$p(e,0);else if(0!==r){if(2===r&&(Yh|=64,e.hydrate&&(e.hydrate=!1,Xa(e.containerInfo)),0!==(n=Si(e))&&(r=eg(e,n))),1===r){var i=np;throw $p(e,0),jp(e,n),zp(e,bl()),i}var o=e.current.alternate;e.finishedWork=o,e.finishedLanes=n,function(e,t,n){switch(t){case 0:case 1:throw Error("Root did not complete. This is a bug in React.");case 2:case 5:sg(e);break;case 3:if(jp(e,n),ki(n)&&!(Ng>0)){var r=Ap+500-bl();if(r>10){if(0!==xi(e,0))break;var i=e.suspendedLanes;if(!Li(i,n)){Rp(),Fi(e,i);break}e.timeoutHandle=Ga(sg.bind(null,e),r);break}}sg(e);break;case 4:if(jp(e,n),function(e){return(e&di)===e}(n))break;var o=function(e,t){for(var n=e.eventTimes,r=bi;t>0;){var i=Mi(t),o=1<<i,s=n[i];s>r&&(r=s),t&=~o}return r}(e,n),s=o,a=bl()-s,A=((l=a)<120?120:l<480?480:l<1080?1080:l<1920?1920:l<3e3?3e3:l<4320?4320:1960*Wh(l/1960))-a;if(A>10){e.timeoutHandle=Ga(sg.bind(null,e),A);break}sg(e);break;default:throw Error("Unknown root exit status.")}var l}(e,r,n)}return zp(e,bl()),e.callbackNode===t?Np.bind(null,e):null}function jp(e,t){t=Oi(t,sp),function(e,t){e.suspendedLanes|=t,e.pingedLanes&=~t;for(var n=e.expirationTimes,r=t;r>0;){var i=Mi(r),o=1<<i;n[i]=bi,r&=~o}}(e,t=Oi(t,op))}function Up(e){if(0!=(48&Yh))throw Error("Should not already be working.");var t,n;if(cg(),e===Zh&&Ii(e.expiredLanes,Kh)?(n=eg(e,t=Kh),Ii(rp,op)&&(n=eg(e,t=xi(e,t)))):n=eg(e,t=xi(e,0)),0!==e.tag&&2===n&&(Yh|=64,e.hydrate&&(e.hydrate=!1,Xa(e.containerInfo)),0!==(t=Si(e))&&(n=eg(e,t))),1===n){var r=np;throw $p(e,0),jp(e,t),zp(e,bl()),r}var i=e.current.alternate;return e.finishedWork=i,e.finishedLanes=t,sg(e),zp(e,bl()),null}function Vp(e,t){var n=Yh;Yh|=1;try{return e(t)}finally{0===(Yh=n)&&(up(),Pl())}}function Wp(e,t){var n=Yh;Yh&=-2,Yh|=8;try{return e(t)}finally{0===(Yh=n)&&(up(),Pl())}}function Gp(e,t){var n=Yh;if(0!=(48&n))return A("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),e(t);Yh|=1;try{return e?xl(cl,e.bind(null,t)):void 0}finally{Yh=n,Pl()}}function Hp(e,t){MA(ep,Jh,e),Jh=Ri(Jh,t),rp=Ri(rp,t)}function Qp(e){Jh=ep.current,TA(ep,e)}function $p(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Ha(n)),null!==Xh)for(var r=Xh.return;null!==r;)uh(r),r=r.return;Zh=e,Xh=Am(e.current,null),Kh=Jh=rp=t,tp=0,np=null,ip=0,op=0,sp=0,Pp=null,Ml.discardPendingWarnings()}function qp(e,t){for(;;){var n=Xh;try{if(Yl(),nd(),Qe(),Hh.current=null,null===n||null===n.return)return tp=1,np=t,void(Xh=null);8&n.mode&&cf(n,!0),mh(e,n.return,n,t,Kh),ig(n)}catch(e){t=e,Xh===n&&null!==n?(n=n.return,Xh=n):n=Xh;continue}return}}function Yp(){var e=Gh.current;return Gh.current=$d,null===e?$d:e}function Zp(e){Gh.current=e}function Xp(e){var t=i.__interactionsRef.current;return i.__interactionsRef.current=e.memoizedInteractions,t}function Kp(e){i.__interactionsRef.current=e}function Jp(e){ip=Ri(e,ip)}function eg(e,t){var n=Yh;Yh|=$h;var r=Yp();Zh===e&&Kh===t||($p(e,t),Fg(e,t));for(var i=Xp(e);;)try{tg();break}catch(t){qp(e,t)}if(Yl(),Kp(i),Yh=n,Zp(r),null!==Xh)throw Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Zh=null,Kh=0,tp}function tg(){for(;null!==Xh;)rg(Xh)}function ng(){for(;null!==Xh&&!hl();)rg(Xh)}function rg(e){var t,n=e.alternate;$e(e),0!=(8&e.mode)?(lf(e),t=Eg(n,e,Jh),cf(e,!0)):t=Eg(n,e,Jh),Qe(),e.memoizedProps=e.pendingProps,null===t?ig(e):Xh=t,Hh.current=null}function ig(e){var t=e;do{var n=t.alternate,r=t.return;if(0==(t.flags&pr)){$e(t);var i=void 0;if(0==(8&t.mode)?i=Ah(n,t,Jh):(lf(t),i=Ah(n,t,Jh),cf(t,!1)),Qe(),null!==i)return void(Xh=i);if(og(t),null!==r&&0==(r.flags&pr))null===r.firstEffect&&(r.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=t.firstEffect),r.lastEffect=t.lastEffect),t.flags>1&&(null!==r.lastEffect?r.lastEffect.nextEffect=t:r.firstEffect=t,r.lastEffect=t)}else{var o=lh(t);if(null!==o)return o.flags&=2047,void(Xh=o);if(0!=(8&t.mode)){cf(t,!1);for(var s=t.actualDuration,a=t.child;null!==a;)s+=a.actualDuration,a=a.sibling;t.actualDuration=s}null!==r&&(r.firstEffect=r.lastEffect=null,r.flags|=pr)}var A=t.sibling;if(null!==A)return void(Xh=A);Xh=t=r}while(null!==t);0===tp&&(tp=5)}function og(e){if(e.tag!==w&&e.tag!==b||null===e.memoizedState||Ii(Jh,yi)||0==(4&e.mode)){var t=0;if(0!=(8&e.mode)){for(var n=e.actualDuration,r=e.selfBaseDuration,i=null===e.alternate||e.child!==e.alternate.child,o=e.child;null!==o;)t=Ri(t,Ri(o.lanes,o.childLanes)),i&&(n+=o.actualDuration),r+=o.treeBaseDuration,o=o.sibling;if(e.tag===f&&null!==e.memoizedState){var s=e.child;null!==s&&(r-=s.treeBaseDuration)}e.actualDuration=n,e.treeBaseDuration=r}else for(var a=e.child;null!==a;)t=Ri(t,Ri(a.lanes,a.childLanes)),a=a.sibling;e.childLanes=t}}function sg(e){var t=wl();return xl(cl,ag.bind(null,e,t)),null}function ag(e,t){do{cg()}while(null!==mp);if(Ml.flushLegacyContextWarning(),Ml.flushPendingUnsafeLifecycleWarnings(),0!=(48&Yh))throw Error("Should not already be working.");var n=e.finishedWork,r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null;var i,o=Ri(n.lanes,n.childLanes);if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t;for(var r=e.entanglements,i=e.eventTimes,o=e.expirationTimes,s=n;s>0;){var a=Mi(s),A=1<<a;r[a]=0,i[a]=bi,o[a]=bi,s&=~A}}(e,o),null!==_p&&!function(e){return 0!=(24&e)}(o)&&_p.has(e)&&_p.delete(e),e===Zh&&(Zh=null,Xh=null,Kh=0),n.flags>1?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var s=Yh;Yh|=qh;var a=Xp(e);Hh.current=null,Ip=ja(e.containerInfo),Lp=!1,dp=i;do{if(tr(null,Ag,null),nr()){if(null===dp)throw Error("Should be working on an effect.");var A=rr();yg(dp,A),dp=dp.nextEffect}}while(null!==dp);Ip=null,Af(),dp=i;do{if(tr(null,lg,null,e,t),nr()){if(null===dp)throw Error("Should be working on an effect.");var l=rr();yg(dp,l),dp=dp.nextEffect}}while(null!==dp);e.containerInfo,xs(za),Hi(Fa),Fa=null,za=null,e.current=n,dp=i;do{if(tr(null,ug,null,e,r),nr()){if(null===dp)throw Error("Should be working on an effect.");var u=rr();yg(dp,u),dp=dp.nextEffect}}while(null!==dp);dp=null,pl(),Kp(a),Yh=s}else e.current=n,Af();var c=gp;if(gp)gp=!1,mp=e,yp=r,vp=t;else for(dp=i;null!==dp;){var d=dp.nextEffect;dp.nextEffect=null,8&dp.flags&&jg(dp),dp=d}if(0!==(o=e.pendingLanes)){if(null!==Pp){var f=Pp;Pp=null;for(var h=0;h<f.length;h++)Dg(e,f[h],e.memoizedInteractions)}Bg(e,o)}else pp=null;if(c||zg(e,r),1===o?e===Ep?xp++:(xp=0,Ep=e):xp=0,XA(n.stateNode,t),Vh.forEach((function(e){return e()})),zp(e,bl()),fp){fp=!1;var p=hp;throw hp=null,p}return 0!=(8&Yh)||Pl(),null}function Ag(){for(;null!==dp;){var e=dp.alternate;Lp||null===Ip||(0!=(8&dp.flags)?Sr(dp,Ip)&&(Lp=!0):dp.tag===f&&Nh(e,dp)&&Sr(dp,Ip)&&(Lp=!0));var t=dp.flags;0!=(t&cr)&&($e(dp),xh(e,dp),Qe()),0!=(t&dr)&&(gp||(gp=!0,El(fl,(function(){return cg(),null})))),dp=dp.nextEffect}}function lg(e,t){for(;null!==dp;){$e(dp);var n=dp.flags;if(16&n&&jh(dp),n&ur){var r=dp.alternate;null!==r&&kh(r)}switch(1038&n){case 2:Lh(dp),dp.flags&=-3;break;case 6:Lh(dp),dp.flags&=-3,Fh(dp.alternate,dp);break;case hr:dp.flags&=-1025;break;case 1028:dp.flags&=-1025,Fh(dp.alternate,dp);break;case 4:Fh(dp.alternate,dp);break;case 8:Bh(e,dp)}Qe(),dp=dp.nextEffect}}function ug(e,t){for(;null!==dp;){$e(dp);var n=dp.flags;if(36&n)Eh(e,dp.alternate,dp);n&ur&&Ph(dp),Qe(),dp=dp.nextEffect}}function cg(){if(90!==vp){var e=vp>fl?fl:vp;return vp=90,xl(e,pg)}return!1}function dg(e,t){bp.push(t,e),gp||(gp=!0,El(fl,(function(){return cg(),null})))}function fg(e,t){wp.push(t,e),e.flags|=fr;var n=e.alternate;null!==n&&(n.flags|=fr),gp||(gp=!0,El(fl,(function(){return cg(),null})))}function hg(e){var t=e.create;e.destroy=t()}function pg(){if(null===mp)return!1;var e=mp,t=yp;if(mp=null,yp=0,0!=(48&Yh))throw Error("Cannot flush passive effects while already rendering.");Mp=!0;var n=Yh;Yh|=qh;var r=Xp(e),i=wp;wp=[];for(var o=0;o<i.length;o+=2){var s=i[o],a=i[o+1],A=s.destroy;s.destroy=void 0,a.flags&=-8193;var l=a.alternate;if(null!==l&&(l.flags&=-8193),"function"==typeof A){if($e(a),tr(null,A,null),nr()){if(null===a)throw Error("Should be working on an effect.");yg(a,rr())}Qe()}}var u=bp;bp=[];for(var c=0;c<u.length;c+=2){var d=u[c],f=u[c+1];if($e(f),tr(null,hg,null,d),nr()){if(null===f)throw Error("Should be working on an effect.");yg(f,rr())}Qe()}for(var h=e.current.firstEffect;null!==h;){var p=h.nextEffect;h.nextEffect=null,8&h.flags&&jg(h),h=p}return Kp(r),zg(e,t),Mp=!1,Yh=n,Pl(),Sp=null===mp?0:Sp+1,!0}function gg(e){return null!==pp&&pp.has(e)}var mg=function(e){fp||(fp=!0,hp=e)};function vg(e,t,n){uu(e,hh(e,ch(n,t),1));var r=Rp(),i=Fp(e,1);null!==i&&(Bi(i,1,r),zp(i,r),Bg(i,1))}function yg(e,t){if(3!==e.tag)for(var n=e.return;null!==n;){if(3===n.tag)return void vg(n,e,t);if(1===n.tag){var r=n.type,i=n.stateNode;if("function"==typeof r.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&!gg(i)){var o=ch(t,e);uu(n,ph(n,o,1));var s=Rp(),a=Fp(n,1);if(null!==a)Bi(a,1,s),zp(a,s),Bg(a,1);else if("function"==typeof i.componentDidCatch&&!gg(i))try{i.componentDidCatch(t,o)}catch(e){}return}}n=n.return}else vg(e,e,t)}function bg(e,t,n){var r=e.pingCache;null!==r&&r.delete(t);var i=Rp();Fi(e,n),Zh===e&&Li(Kh,n)&&(4===tp||3===tp&&ki(Kh)&&bl()-Ap<500?$p(e,0):sp=Ri(sp,n)),zp(e,i),Bg(e,n)}function wg(e,t){var n;null!==(n=e.stateNode)&&n.delete(t),function(e,t){0===t&&(t=Dp(e));var n=Rp(),r=Fp(e,t);null!==r&&(Bi(r,t,n),zp(r,n),Bg(r,t))}(e,0)}var _g=null;function xg(e){if(0==(Yh&$h)&&6&e.mode){var t=e.tag;if(2===t||3===t||1===t||0===t||t===c||t===h||t===p||t===y){var n=je(e.type)||"ReactComponent";if(null!==_g){if(_g.has(n))return;_g.add(n)}else _g=new Set([n]);var r=Ve;try{$e(e),A("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{r?$e(e):Qe()}}}}var Eg,Sg=null;Eg=function(e,t,n){var r=gm(null,t);try{return ih(e,t,n)}catch(i){if(null!==i&&"object"==typeof i&&"function"==typeof i.then)throw i;if(Yl(),nd(),uh(t),gm(t,r),8&t.mode&&lf(t),tr(null,ih,null,e,t,n),nr())throw rr();throw i}};var Pg,kg=!1;Pg=new Set;var Cg={current:!1};function Tg(e){if(!0===Qh.current&&!0!==Cg.current){var t=Ve;try{$e(e),A("It looks like you're using the wrong act() around your test interactions.\nBe sure to use the matching version of act() corresponding to your renderer:\n\n// for react-dom:\nimport {act} from 'react-dom/test-utils';\n// ...\nact(() => ...);\n\n// for react-test-renderer:\nimport TestRenderer from react-test-renderer';\nconst {act} = TestRenderer;\n// ...\nact(() => ...);")}finally{t?$e(e):Qe()}}}function Mg(e){0!=(1&e.mode)&&!1===Qh.current&&!1===Cg.current&&A("An update to %s ran an effect, but was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",je(e.type))}var Ig=function(e){if(0===Yh&&!1===Qh.current&&!1===Cg.current){var t=Ve;try{$e(e),A("An update to %s inside a test was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",je(e.type))}finally{t?$e(e):Qe()}}},Lg=!1;function Rg(e,t){return 1e3*t+e.interactionThreadID}function Og(e){null===Pp?Pp=[e]:Pp.push(e)}function Dg(e,t,n){if(n.size>0){var r=e.pendingInteractionMap,o=r.get(t);null!=o?n.forEach((function(e){o.has(e)||e.__count++,o.add(e)})):(r.set(t,new Set(n)),n.forEach((function(e){e.__count++})));var s=i.__subscriberRef.current;if(null!==s){var a=Rg(e,t);s.onWorkScheduled(n,a)}}}function Bg(e,t){Dg(e,t,i.__interactionsRef.current)}function Fg(e,t){var n=new Set;if(e.pendingInteractionMap.forEach((function(e,r){Ii(t,r)&&e.forEach((function(e){return n.add(e)}))})),e.memoizedInteractions=n,n.size>0){var r=i.__subscriberRef.current;if(null!==r){var o=Rg(e,t);try{r.onWorkStarted(n,o)}catch(e){El(cl,(function(){throw e}))}}}}function zg(e,t){var n,r=e.pendingLanes;try{if(null!==(n=i.__subscriberRef.current)&&e.memoizedInteractions.size>0){var o=Rg(e,t);n.onWorkStopped(e.memoizedInteractions,o)}}catch(e){El(cl,(function(){throw e}))}finally{var s=e.pendingInteractionMap;s.forEach((function(e,t){Ii(r,t)||(s.delete(t),e.forEach((function(e){if(e.__count--,null!==n&&0===e.__count)try{n.onInteractionScheduledWorkCompleted(e)}catch(e){El(cl,(function(){throw e}))}})))}))}}var Ng=0;function jg(e){e.sibling=null,e.stateNode=null}var Ug=null,Vg=null,Wg=function(e){Ug=e};function Gg(e){if(null===Ug)return e;var t=Ug(e);return void 0===t?e:t.current}function Hg(e){return Gg(e)}function Qg(e){if(null===Ug)return e;var t=Ug(e);if(void 0===t){if(null!=e&&"function"==typeof e.render){var n=Gg(e.render);if(e.render!==n){var r={$$typeof:ie,render:n};return void 0!==e.displayName&&(r.displayName=e.displayName),r}}return e}return t.current}function $g(e,t){if(null===Ug)return!1;var n=e.elementType,r=t.type,i=!1,o="object"==typeof r&&null!==r?r.$$typeof:null;switch(e.tag){case 1:"function"==typeof r&&(i=!0);break;case 0:("function"==typeof r||o===Ae)&&(i=!0);break;case c:(o===ie||o===Ae)&&(i=!0);break;case h:case p:(o===ae||o===Ae)&&(i=!0);break;default:return!1}if(i){var s=Ug(n);if(void 0!==s&&s===Ug(r))return!0}return!1}function qg(e){null!==Ug&&"function"==typeof WeakSet&&(null===Vg&&(Vg=new WeakSet),Vg.add(e))}var Yg=function(e,t){if(null!==Ug){var n=t.staleFamilies,r=t.updatedFamilies;cg(),Gp((function(){Xg(e.current,r,n)}))}},Zg=function(e,t){e.context===IA&&(cg(),Gp((function(){wm(t,e,null,null)})))};function Xg(e,t,n){var r=e.alternate,i=e.child,o=e.sibling,s=e.tag,a=e.type,A=null;switch(s){case 0:case p:case 1:A=a;break;case c:A=a.render}if(null===Ug)throw new Error("Expected resolveFamily to be set during hot reload.");var l=!1,u=!1;if(null!==A){var d=Ug(A);void 0!==d&&(n.has(d)?u=!0:t.has(d)&&(1===s?u=!0:l=!0))}null!==Vg&&(Vg.has(e)||null!==r&&Vg.has(r))&&(u=!0),u&&(e._debugNeedsRemount=!0),(u||l)&&Bp(e,1,bi),null===i||u||Xg(i,t,n),null!==o&&Xg(o,t,n)}var Kg,Jg=function(e,t){var n=new Set,r=new Set(t.map((function(e){return e.current})));return em(e.current,r,n),n};function em(e,t,n){var r=e.child,i=e.sibling,o=e.tag,s=e.type,a=null;switch(o){case 0:case p:case 1:a=s;break;case c:a=s.render}var A=!1;null!==a&&t.has(a)&&(A=!0),A?function(e,t){if(function(e,t){var n=e,r=!1;for(;;){if(5===n.tag)r=!0,t.add(n.stateNode);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return r;for(;null===n.sibling;){if(null===n.return||n.return===e)return r;n=n.return}n.sibling.return=n.return,n=n.sibling}return!1}(e,t))return;var n=e;for(;;){switch(n.tag){case 5:return void t.add(n.stateNode);case 4:case 3:return void t.add(n.stateNode.containerInfo)}if(null===n.return)throw new Error("Expected to reach root first.");n=n.return}}(e,n):null!==r&&em(r,t,n),null!==i&&em(i,t,n)}Kg=!1;try{var tm=Object.preventExtensions({});new Map([[tm,null]]),new Set([tm])}catch(e){Kg=!0}var nm=1;function rm(e,t,n,r){this.tag=e,this.key=n,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=r,this.flags=0,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.lanes=0,this.childLanes=0,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugID=nm++,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,Kg||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}var im,om,sm=function(e,t,n,r){return new rm(e,t,n,r)};function am(e){var t=e.prototype;return!(!t||!t.isReactComponent)}function Am(e,t){var n=e.alternate;null===n?((n=sm(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n._debugID=e._debugID,n._debugSource=e._debugSource,n._debugOwner=e._debugOwner,n._debugHookTypes=e._debugHookTypes,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null,n.actualDuration=0,n.actualStartTime=-1),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue;var r=e.dependencies;switch(n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.selfBaseDuration=e.selfBaseDuration,n.treeBaseDuration=e.treeBaseDuration,n._debugNeedsRemount=e._debugNeedsRemount,n.tag){case 2:case 0:case p:n.type=Gg(e.type);break;case 1:n.type=Hg(e.type);break;case c:n.type=Qg(e.type)}return n}function lm(e,t){e.flags&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null;var n=e.alternate;if(null===n)e.childLanes=0,e.lanes=t,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type;var r=n.dependencies;e.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},e.selfBaseDuration=n.selfBaseDuration,e.treeBaseDuration=n.treeBaseDuration}return e}function um(e,t,n,r,i,o){var s=2,a=e;if("function"==typeof e)am(e)?(s=1,a=Hg(a)):a=Gg(a);else if("string"==typeof e)s=5;else e:switch(e){case J:return dm(n.children,i,o,t);case ce:s=8,i|=16;break;case ee:s=8,i|=1;break;case te:return function(e,t,n,r){"string"!=typeof e.id&&A('Profiler must specify an "id" as a prop');var i=sm(d,e,r,8|t);return i.elementType=te,i.type=te,i.lanes=n,i.stateNode={effectDuration:0,passiveEffectDuration:0},i}(n,i,o,t);case oe:return function(e,t,n,r){var i=sm(f,e,r,t);return i.type=oe,i.elementType=oe,i.lanes=n,i}(n,i,o,t);case se:return function(e,t,n,r){var i=sm(m,e,r,t);return i.type=se,i.elementType=se,i.lanes=n,i}(n,i,o,t);case de:return fm(n,i,o,t);case fe:return function(e,t,n,r){var i=sm(w,e,r,t);return i.type=fe,i.elementType=fe,i.lanes=n,i}(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ne:s=u;break e;case re:s=9;break e;case ie:s=c,a=Qg(a);break e;case ae:s=h;break e;case Ae:s=16,a=null;break e;case le:s=y;break e}var l="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(l+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var p=r?je(r.type):null;throw p&&(l+="\n\nCheck the render method of `"+p+"`."),Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+"."+l)}var g=sm(s,n,t,i);return g.elementType=e,g.type=a,g.lanes=o,g._debugOwner=r,g}function cm(e,t,n){var r;r=e._owner;var i=um(e.type,e.key,e.props,r,t,n);return i._debugSource=e._source,i._debugOwner=e._owner,i}function dm(e,t,n,r){var i=sm(7,e,r,t);return i.lanes=n,i}function fm(e,t,n,r){var i=sm(b,e,r,t);return i.type=de,i.elementType=de,i.lanes=n,i}function hm(e,t,n){var r=sm(6,e,null,t);return r.lanes=n,r}function pm(e,t,n){var r=null!==e.children?e.children:[],i=sm(4,r,e.key,t);return i.lanes=n,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function gm(e,t){return null===e&&(e=sm(2,null,null,0)),e.tag=t.tag,e.key=t.key,e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.dependencies=t.dependencies,e.mode=t.mode,e.flags=t.flags,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.lanes=t.lanes,e.childLanes=t.childLanes,e.alternate=t.alternate,e.actualDuration=t.actualDuration,e.actualStartTime=t.actualStartTime,e.selfBaseDuration=t.selfBaseDuration,e.treeBaseDuration=t.treeBaseDuration,e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugNeedsRemount=t._debugNeedsRemount,e._debugHookTypes=t._debugHookTypes,e}function mm(e,t,n){switch(this.tag=t,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=-1,this.context=null,this.pendingContext=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Di(0),this.expirationTimes=Di(bi),this.pendingLanes=0,this.suspendedLanes=0,this.pingedLanes=0,this.expiredLanes=0,this.mutableReadLanes=0,this.finishedLanes=0,this.entangledLanes=0,this.entanglements=Di(0),this.mutableSourceEagerHydrationData=null,this.interactionThreadID=i.unstable_getThreadID(),this.memoizedInteractions=new Set,this.pendingInteractionMap=new Map,t){case 1:this._debugRootType="createBlockingRoot()";break;case 2:this._debugRootType="createRoot()";break;case 0:this._debugRootType="createLegacyRoot()"}}function vm(e,t,n,r){var i=new mm(e,t,n),o=function(e){var t;return t=2===e?7:1===e?3:0,ZA&&(t|=8),sm(3,null,null,t)}(t);return i.current=o,o.stateNode=i,au(o),i}function ym(e,t){var n=(0,t._getVersion)(t._source);null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)}function bm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:K,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function wm(e,t,n,i){!function(e,t){if(qA&&"function"==typeof qA.onScheduleFiberRoot)try{qA.onScheduleFiberRoot($A,e,t)}catch(e){YA||(YA=!0,A("React instrumentation encountered an error: %s",e))}}(t,e);var o,s=t.current,a=Rp();"undefined"!=typeof jest&&(o=s,!1===Lg&&void 0===r.unstable_flushAllWithoutAsserting&&(2&o.mode||4&o.mode)&&(Lg=!0,A("In Concurrent or Sync modes, the \"scheduler\" module needs to be mocked to guarantee consistent behaviour across tests and browsers. For example, with jest: \njest.mock('scheduler', () => require('scheduler/unstable_mock'));\n\nFor more info, visit https://reactjs.org/link/mock-scheduler")),Tg(s));var l=Op(s),u=function(e){if(!e)return IA;var t=ir(e),n=QA(t);if(1===t.tag){var r=t.type;if(NA(r))return WA(t,r,n)}return n}(n);null===t.context?t.context=u:t.pendingContext=u,We&&null!==Ve&&!im&&(im=!0,A("Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",je(Ve.type)||"Unknown"));var c=lu(a,l);return c.payload={element:e},null!==(i=void 0===i?null:i)&&("function"!=typeof i&&A("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i),c.callback=i),uu(s,c),Bp(s,l,a),l}function _m(e){var t=e.current;return t.child?(t.child.tag,t.child.stateNode):null}function xm(e,t){var n,r,i=e.memoizedState;null!==i&&null!==i.dehydrated&&(i.retryLane=(n=i.retryLane,r=t,0!==n&&n<r?n:r))}function Em(e,t){xm(e,t);var n=e.alternate;n&&xm(n,t)}function Sm(e){var t=function(e){var t=xr(e);if(!t)return null;for(var n=t;;){if(5===n.tag||6===n.tag)return n;if(n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.tag===v?t.stateNode.instance:t.stateNode}im=!1,om={};var Pm=function(e){return!1};var km,Cm,Tm,Mm,Im,Lm,Rm,Om,Dm=function(e,t,r){var i=t[r],o=Array.isArray(e)?e.slice():n({},e);return r+1===t.length?(Array.isArray(o)?o.splice(i,1):delete o[i],o):(o[i]=Dm(e[i],t,r+1),o)},Bm=function(e,t){return Dm(e,t,0)},Fm=function(e,t,r,i){var o=t[i],s=Array.isArray(e)?e.slice():n({},e);i+1===t.length?(s[r[i]]=s[o],Array.isArray(s)?s.splice(o,1):delete s[o]):s[o]=Fm(e[o],t,r,i+1);return s},zm=function(e,t,n){if(t.length===n.length){for(var r=0;r<n.length-1;r++)if(t[r]!==n[r])return void s("copyWithRename() expects paths to be the same except for the deepest key");return Fm(e,t,n,0)}s("copyWithRename() expects paths of the same length")},Nm=function(e,t,r,i){if(r>=t.length)return i;var o=t[r],s=Array.isArray(e)?e.slice():n({},e);return s[o]=Nm(e[o],t,r+1,i),s},jm=function(e,t,n){return Nm(e,t,0,n)},Um=function(e,t){for(var n=e.memoizedState;null!==n&&t>0;)n=n.next,t--;return n};function Vm(e){var t=Er(e);return null===t?null:t.stateNode}function Hm(e){return null}function $m(){return Ve}function qm(e,t,n){this._internalRoot=function(e,t,n){var r=null!=n&&!0===n.hydrate;null!=n&&n.hydrationOptions;var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null,o=function(e,t,n,r){return vm(e,t,n)}(e,t,r);if(function(e,t){t[lA]=e}(o.current,e),e.nodeType,js(e.nodeType===Ut?e.parentNode:e),i)for(var s=0;s<i.length;s++){ym(o,i[s])}return o}(e,t,n)}function Ym(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}km=function(e,t,r,i){var o=Um(e,t);if(null!==o){var s=jm(o.memoizedState,r,i);o.memoizedState=s,o.baseState=s,e.memoizedProps=n({},e.memoizedProps),Bp(e,1,bi)}},Cm=function(e,t,r){var i=Um(e,t);if(null!==i){var o=Bm(i.memoizedState,r);i.memoizedState=o,i.baseState=o,e.memoizedProps=n({},e.memoizedProps),Bp(e,1,bi)}},Tm=function(e,t,r,i){var o=Um(e,t);if(null!==o){var s=zm(o.memoizedState,r,i);o.memoizedState=s,o.baseState=s,e.memoizedProps=n({},e.memoizedProps),Bp(e,1,bi)}},Mm=function(e,t,n){e.pendingProps=jm(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),Bp(e,1,bi)},Im=function(e,t){e.pendingProps=Bm(e.memoizedProps,t),e.alternate&&(e.alternate.pendingProps=e.pendingProps),Bp(e,1,bi)},Lm=function(e,t,n){e.pendingProps=zm(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),Bp(e,1,bi)},Rm=function(e){Bp(e,1,bi)},Om=function(e){Pm=e},qm.prototype.render=function(e){var t=this._internalRoot;"function"==typeof arguments[1]&&A("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var n=t.containerInfo;if(8!==n.nodeType){var r=Sm(t.current);r&&r.parentNode!==n&&A("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}wm(e,t,null,null)},qm.prototype.unmount=function(){"function"==typeof arguments[0]&&A("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot,t=e.containerInfo;wm(null,e,null,(function(){dA(t)}))};var Zm,Xm=o.ReactCurrentOwner,Km=!1;function Jm(e){return e?9===e.nodeType?e.documentElement:e.firstChild:null}function ev(e,t){var n=t||function(e){var t=Jm(e);return!(!t||1!==t.nodeType||!t.hasAttribute(I))}(e);if(!n)for(var r,i=!1;r=e.lastChild;)!i&&1===r.nodeType&&r.hasAttribute(I)&&(i=!0,A("render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.")),e.removeChild(r);return!n||t||Km||(Km=!0,s("render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v18. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML.")),function(e,t){return new qm(e,0,t)}(e,n?{hydrate:!0}:void 0)}function tv(e,t,n,r,i){Zm(n),function(e,t){null!==e&&"function"!=typeof e&&A("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e)}(void 0===i?null:i,"render");var o,s=n._reactRootContainer;if(s){if(o=s._internalRoot,"function"==typeof i){var a=i;i=function(){var e=_m(o);a.call(e)}}wm(t,o,e,i)}else{if(s=n._reactRootContainer=ev(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=_m(o);l.call(e)}}Wp((function(){wm(t,o,e,i)}))}return _m(o)}Zm=function(e){if(e._reactRootContainer&&8!==e.nodeType){var t=Sm(e._reactRootContainer._internalRoot.current);t&&t.parentNode!==e&&A("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=Jm(e);!(!r||!pA(r))&&!n&&A("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),1===e.nodeType&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&A("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},or=function(e){e.tag===f&&(Bp(e,4,Rp()),Em(e,4))},function(e){sr=e}((function(e){if(e.tag===f){var t=Rp(),n=pi;Bp(e,n,t),Em(e,n)}})),function(e){ar=e}((function(e){if(e.tag===f){var t=Rp(),n=Op(e);Bp(e,n,t),Em(e,n)}})),function(e){Ar=e}((function(e,t){try{return t()}finally{}}));var nv,rv,iv,ov=!1;function sv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Ym(t))throw Error("Target container is not a DOM element.");return bm(e,t,null,n)}"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||A("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Mn=function(e,t,n){switch(t){case"input":return void ht(e,n);case"textarea":return void function(e,t){Tt(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&xt(n,!!t.multiple,r,!1)}(e,n)}},nv=function(e,t,n,r,i){var o=Yh;Yh|=4;try{return xl(dl,e.bind(null,t,n,r,i))}finally{0===(Yh=o)&&(up(),Pl())}},rv=function(){0==(49&Yh)?(function(){if(null!==_p){var e=_p;_p=null,e.forEach((function(e){!function(e){e.expiredLanes|=24&e.pendingLanes}(e),zp(e,bl())}))}Pl()}(),cg()):0!=(Yh&$h)&&A("unstable_flushDiscreteUpdates: Cannot flush updates when React is already rendering.")},iv=function(e,t){var n=Yh;Yh|=2;try{return e(t)}finally{0===(Yh=n)&&(up(),Pl())}},Bn=Vp,Fn=nv,zn=rv,Nn=iv;var av={Events:[pA,gA,mA,On,Dn,cg,Cg]},Av=function(e){var t=e.findFiberByHostInstance,n=o.ReactCurrentDispatcher;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return A("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{$A=t.inject(e),qA=t}catch(e){A("React instrumentation encountered an error: %s.",e)}return!0}({bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:km,overrideHookStateDeletePath:Cm,overrideHookStateRenamePath:Tm,overrideProps:Mm,overridePropsDeletePath:Im,overridePropsRenamePath:Lm,setSuspenseHandler:Om,scheduleUpdate:Rm,currentDispatcherRef:n,findHostInstanceByFiber:Vm,findFiberByHostInstance:t||Hm,findHostInstancesForRefresh:Jg,scheduleRefresh:Yg,scheduleRoot:Zg,setRefreshHandler:Wg,getCurrentFiber:$m})}({findFiberByHostInstance:hA,bundleType:1,version:Cl,rendererPackageName:"react-dom"});if(!Av&&C&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var lv=window.location.protocol;/^(https?|file):$/.test(lv)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+("file:"===lv?"\nYou might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq":""),"font-weight:bold")}Wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=av,Wm.createPortal=sv,Wm.findDOMNode=function(e){var t=Xm.current;return null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||A("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",je(t.type)||"A component"),t.stateNode._warnedAboutRefsInRender=!0),null==e?null:1===e.nodeType?e:function(e,t){var n=ir(e);if(void 0===n)throw"function"==typeof e.render?Error("Unable to find node on an unmounted component."):Error("Argument appears to not be a ReactComponent. Keys: "+Object.keys(e));var r=Er(n);if(null===r)return null;if(1&r.mode){var i=je(n.type)||"Component";if(!om[i]){om[i]=!0;var o=Ve;try{$e(r),1&n.mode?A("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,i):A("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,i)}finally{o?$e(o):Qe()}}}return r.stateNode}(e,"findDOMNode")},Wm.flushSync=Gp,Wm.hydrate=function(e,t,n){if(!Ym(t))throw Error("Target container is not a DOM element.");return fA(t)&&void 0===t._reactRootContainer&&A("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call createRoot(container, {hydrate: true}).render(element)?"),tv(null,e,t,!0,n)},Wm.render=function(e,t,n){if(!Ym(t))throw Error("Target container is not a DOM element.");return fA(t)&&void 0===t._reactRootContainer&&A("You are calling ReactDOM.render() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.render(element)?"),tv(null,e,t,!1,n)},Wm.unmountComponentAtNode=function(e){if(!Ym(e))throw Error("unmountComponentAtNode(...): Target container is not a DOM element.");if(fA(e)&&void 0===e._reactRootContainer&&A("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.unmount()?"),e._reactRootContainer){var t=Jm(e);return t&&!pA(t)&&A("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),Wp((function(){tv(null,null,e,!1,(function(){e._reactRootContainer=null,dA(e)}))})),!0}var n=Jm(e),r=!(!n||!pA(n)),i=1===e.nodeType&&Ym(e.parentNode)&&!!e.parentNode._reactRootContainer;return r&&A("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},Wm.unstable_batchedUpdates=Vp,Wm.unstable_createPortal=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ov||(ov=!0,s('The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 18+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.')),sv(e,t,n)},Wm.unstable_renderSubtreeIntoContainer=function(e,t,n,r){return function(e,t,n,r){if(!Ym(n))throw Error("Target container is not a DOM element.");if(null==e||void 0===e._reactInternals)throw Error("parentComponent must be a valid React Component");return tv(e,t,n,!1,r)}(e,t,n,r)},Wm.version=Cl}(),Vm.exports=Wm;var qm=Vm.exports,Ym=[{id:1,name:"Gadow",obf:1},{id:2,name:"Waldsieversdorf",obf:10},{id:3,name:"Rathenow",obf:11},{id:4,name:"Brieselang",obf:12},{id:5,name:"Lehnin",obf:13},{id:6,name:"Potsdam",obf:15},{id:7,name:"Wünsdorf",obf:16},{id:8,name:"Baruth",obf:17},{id:9,name:"Jüterbog",obf:18},{id:10,name:"Königs Wusterhausen",obf:19},{id:11,name:"Bad Wilsnack",obf:2},{id:12,name:"Luckau",obf:20},{id:13,name:"Lieberose",obf:21},{id:14,name:"Erkner",obf:22},{id:15,name:"Briesen",obf:23},{id:16,name:"Siehdichum",obf:24},{id:17,name:"Herzberg",obf:25},{id:18,name:"Hohenleipisch",obf:26},{id:19,name:"Calau",obf:27},{id:20,name:"Senftenberg",obf:28},{id:21,name:"Cottbus",obf:29},{id:22,name:"Neustadt",obf:3},{id:23,name:"Drebkau",obf:30},{id:24,name:"Neuruppin",obf:4},{id:25,name:"Neuendorf",obf:5},{id:26,name:"Boitzenburg",obf:6},{id:27,name:"Milmersdorf",obf:7},{id:28,name:"Eberswalde",obf:8},{id:29,name:"Strausberg",obf:9},{id:30,name:"Dippmannsdorf",obf:14}],Zm=[{id:1,name:"Wittenberge",obf:1},{id:2,name:"Dobberzin",obf:1},{id:3,name:"Birkholz",obf:1},{id:4,name:"Karstädt",obf:1},{id:5,name:"Groß Linde",obf:1},{id:6,name:"Putlitz",obf:1},{id:7,name:"Lenzen",obf:1},{id:8,name:"Falkenhagen",obf:10},{id:9,name:"Rehfelde",obf:10},{id:10,name:"Buckow",obf:10},{id:11,name:"Neuhardenberg",obf:10},{id:12,name:"Diedersdorf",obf:10},{id:13,name:"Hermersdorf",obf:10},{id:14,name:"Rhinow",obf:11},{id:15,name:"Rathenow",obf:11},{id:16,name:"Nennhausen",obf:11},{id:17,name:"Kater",obf:11},{id:18,name:"Premnitz",obf:11},{id:19,name:"Klein Behnitz",obf:12},{id:20,name:"Friesack",obf:12},{id:21,name:"Falkensee",obf:12},{id:22,name:"Haage",obf:12},{id:23,name:"Schönwalde-Glien",obf:12},{id:24,name:"Werbig",obf:13},{id:25,name:"Brandenburg",obf:13},{id:26,name:"Wusterwitz",obf:13},{id:27,name:"Görzke",obf:13},{id:28,name:"Golzow",obf:13},{id:29,name:"Lehnin",obf:13},{id:30,name:"Groß Kreutz",obf:13},{id:31,name:"Päwesin",obf:13},{id:32,name:"Ziesar",obf:13},{id:33,name:"Mahlsdorf",obf:14},{id:34,name:"Grabow",obf:14},{id:35,name:"Marzahna",obf:14},{id:36,name:"Treuenbrietzen",obf:14},{id:37,name:"Niemegk",obf:14},{id:38,name:"Brück",obf:14},{id:39,name:"Wiesenburg",obf:14},{id:40,name:"Hagelberg",obf:14},{id:41,name:"Beelitz",obf:15},{id:42,name:"Potsdam",obf:15},{id:43,name:"Güterfelde",obf:15},{id:44,name:"Michendorf",obf:15},{id:45,name:"Borkwalde",obf:15},{id:46,name:"Ferch",obf:15},{id:47,name:"Großbeeren",obf:16},{id:48,name:"Ludwigsfelde",obf:16},{id:49,name:"Trebbin",obf:16},{id:50,name:"Zossen",obf:16},{id:51,name:"Sperenberg",obf:16},{id:52,name:"Wunder",obf:17},{id:53,name:"Merzdorf",obf:17},{id:54,name:"Stülpe",obf:17},{id:55,name:"Luckenwalde",obf:17},{id:56,name:"Märtensmühle",obf:17},{id:57,name:"Kemnitz",obf:17},{id:58,name:"Glashütte",obf:17},{id:59,name:"Malterhausen",obf:18},{id:60,name:"Jüterbog",obf:18},{id:61,name:"Keilberg",obf:18},{id:62,name:"Welsickendorf",obf:18},{id:63,name:"Riesdorfer Heide",obf:18},{id:64,name:"Hohenseefeld",obf:18},{id:65,name:"Görsdorf",obf:18},{id:66,name:"Dahme",obf:18},{id:67,name:"Mittenwalde",obf:19},{id:68,name:"Königs Wusterhausen",obf:19},{id:69,name:"Halbe",obf:19},{id:70,name:"Teupitz",obf:19},{id:71,name:"Schönefeld",obf:19},{id:72,name:"Heidesee",obf:19},{id:73,name:"Plattenburg",obf:2},{id:74,name:"Meyenburg",obf:2},{id:75,name:"Langnow",obf:2},{id:76,name:"Groß Pankow",obf:2},{id:77,name:"Karthan",obf:2},{id:78,name:"Stepenitz",obf:2},{id:79,name:"Glöwen",obf:2},{id:80,name:"Gumtow",obf:2},{id:81,name:"Lübben",obf:20},{id:82,name:"Luckau",obf:20},{id:83,name:"Walddrehna",obf:20},{id:84,name:"Paserin",obf:20},{id:85,name:"Schönwalde",obf:20},{id:86,name:"Golßen",obf:20},{id:87,name:"Krausnick",obf:20},{id:88,name:"Kasel-Golzig",obf:20},{id:89,name:"Wittmannsdorf",obf:21},{id:90,name:"Mochow",obf:21},{id:91,name:"Lieberose",obf:21},{id:92,name:"Ullersdorf",obf:21},{id:93,name:"Goyatz",obf:21},{id:94,name:"Marienberg",obf:21},{id:95,name:"Straupitz",obf:21},{id:96,name:"Storkow",obf:22},{id:97,name:"Scharmützelsee",obf:22},{id:98,name:"Spreenhagen",obf:22},{id:99,name:"Fürstenwalde",obf:22},{id:100,name:"Grünheide",obf:22},{id:101,name:"Kersdorf",obf:23},{id:102,name:"Steinhöfel",obf:23},{id:103,name:"Neubrück",obf:23},{id:104,name:"Wilmersdorf",obf:23},{id:105,name:"Lindenberg",obf:23},{id:106,name:"Friedland",obf:23},{id:107,name:"Groß Muckrow",obf:23},{id:108,name:"Beeskow",obf:23},{id:109,name:"Eisenhüttenstadt",obf:24},{id:110,name:"Müllrose",obf:24},{id:111,name:"Fünfeichen",obf:24},{id:112,name:"Frankfurt Oder",obf:24},{id:113,name:"Treppeln",obf:24},{id:114,name:"Neuzelle",obf:24},{id:115,name:"Dammendorf",obf:24},{id:116,name:"Schlieben",obf:25},{id:117,name:"Uebigau",obf:25},{id:118,name:"Doberlug",obf:25},{id:119,name:"Buchhain",obf:25},{id:120,name:"Hohenbucko",obf:25},{id:121,name:"Falkenberg",obf:25},{id:122,name:"Schönewalde",obf:25},{id:123,name:"Herzberg",obf:25},{id:124,name:"Sallgast",obf:26},{id:125,name:"Elsterwerda",obf:26},{id:126,name:"Gorden",obf:26},{id:127,name:"Schönborn",obf:26},{id:128,name:"Babben",obf:26},{id:129,name:"Rehain",obf:26},{id:130,name:"Sonnewalde",obf:26},{id:131,name:"Finsterwalde",obf:26},{id:132,name:"Lübbenau",obf:27},{id:133,name:"Zinnitz",obf:27},{id:134,name:"Vetschau",obf:27},{id:135,name:"Gollmitz",obf:27},{id:136,name:"Calau",obf:27},{id:137,name:"Lipten",obf:27},{id:138,name:"Neupetershain",obf:27},{id:139,name:"Guteborn",obf:28},{id:140,name:"Senftenberg",obf:28},{id:141,name:"Schwarzheide",obf:28},{id:142,name:"Lauchhammer",obf:28},{id:143,name:"Großräschen",obf:28},{id:144,name:"Hermsdorf",obf:28},{id:145,name:"Jänschwalde",obf:29},{id:146,name:"Pinnow",obf:29},{id:147,name:"Peitz",obf:29},{id:148,name:"Cottbus",obf:29},{id:149,name:"Burg",obf:29},{id:150,name:"Guben",obf:29},{id:151,name:"Dossow",obf:3},{id:152,name:"Heiligengrabe",obf:3},{id:153,name:"Berlinchen",obf:3},{id:154,name:"Königsberg",obf:3},{id:155,name:"Stolpe",obf:3},{id:156,name:"Lüttgen Dreetz",obf:3},{id:157,name:"Tramnitz",obf:3},{id:158,name:"Forst",obf:30},{id:159,name:"Drebkau",obf:30},{id:160,name:"Neuhausen",obf:30},{id:161,name:"Spremberg",obf:30},{id:162,name:"Felixsee",obf:30},{id:163,name:"Döbern",obf:30},{id:164,name:"Trebendorf",obf:30},{id:165,name:"Fehrbellin",obf:4},{id:166,name:"Lindow",obf:4},{id:167,name:"Neuruppin",obf:4},{id:168,name:"Temnitz",obf:4},{id:169,name:"Rheinsberg",obf:4},{id:170,name:"Zehdenick",obf:5},{id:171,name:"Fürstenberg/Havel",obf:5},{id:172,name:"Stechlin",obf:5},{id:173,name:"Gransee",obf:5},{id:174,name:"Teschendorf",obf:5},{id:175,name:"Oranienburg",obf:5},{id:176,name:"Mühlenbeck",obf:5},{id:177,name:"Löwenberg",obf:5},{id:178,name:"Oberkrämer",obf:5},{id:179,name:"Schönermark",obf:6},{id:180,name:"Bebersee",obf:6},{id:181,name:"Werderhof",obf:6},{id:182,name:"Alt Placht",obf:6},{id:183,name:"Leistenbrück",obf:6},{id:184,name:"Brüsenwalde",obf:6},{id:185,name:"Große Heide",obf:6},{id:186,name:"Gartz",obf:7},{id:187,name:"Randowbruch",obf:7},{id:188,name:"Greiffenberg",obf:7},{id:189,name:"Angermünde",obf:7},{id:190,name:"Berkholz",obf:7},{id:191,name:"Passow",obf:7},{id:192,name:"Eberswalde",obf:8},{id:193,name:"Bernau",obf:8},{id:194,name:"Schorfheide",obf:8},{id:195,name:"Joachimsthal",obf:8},{id:196,name:"Oderberg",obf:8},{id:197,name:"Werneuchen",obf:8},{id:198,name:"Wandlitz",obf:8},{id:199,name:"Tornow",obf:8},{id:200,name:"Biesenthal",obf:8},{id:201,name:"Neuenhagen",obf:9},{id:202,name:"Strausberg",obf:9},{id:203,name:"Prötzel",obf:9},{id:204,name:"Brunow",obf:9},{id:205,name:"Wriezen",obf:9},{id:206,name:"Freienwalde",obf:9},{id:207,name:"Marzehns",obf:14},{id:208,name:"Groß Kölpin",obf:7}];return"serviceWorker"in navigator&&window.addEventListener("load",(function(){})),class{constructor(){this.selectedObf=null,this.selectedRevier=null,this.views={},this.currentView=null,this.dataValid={geoData:!1,data:!0},this.currentLayerKey=null,this.currentViewKey="",this.selectedYear="2021",this.selectedLayer="ivus_verbiss",this.selectedResolution=8,this.is3D=!1,this.currentArea={8:"undefined",9:null,10:null};const e=this.getHash();this.toOverview(e),this.getHash()}toOverview(e){this.selectedResolution=8,this.getMaskLayer("./geo/land.geojson",0,this.selectedResolution),e||(this.currentArea[this.selectedResolution]="undefined",this.getH3Layer("./interpolation/"+this.selectedYear+"/"+this.selectedLayer+"/"+this.selectedResolution+"/fid_"+this.currentArea[this.selectedResolution]+"_"+this.selectedResolution+".json","global",this.selectedResolution))}getHash(){if(window.location.hash){var e=window.location.hash.substring(1).split(",");return!(!e[0]||!parseInt(e[0]))&&(this.currentArea[9]=parseInt(e[0]),e[1]&&parseInt(e[1])?(this.currentArea[10]=parseInt(e[1]),this.focusObf(this.currentArea[10])):this.focusLand(this.currentArea[9]),!0)}return!1}setHash(){this.currentArea[10]?window.location.hash="#"+this.currentArea[9]+","+this.currentArea[10]:this.currentArea[9]&&(window.location.hash="#"+this.currentArea[9])}changeYear(e){this.selectedYear!=newYear&&(this.selectedYear=e)}changeLayer(e){this.selectedLayer!=e&&(this.selectedLayer=e,this.getH3Layer("./interpolation/"+this.selectedYear+"/"+this.selectedLayer+"/"+this.selectedResolution+"/fid_"+this.currentArea[this.selectedResolution]+"_"+this.selectedResolution+".json","global",this.selectedResolution))}updateDropDowns(){this.obfDropDown&&(this.obfDropDown.value=this.currentArea[9]?this.currentArea[9]:0),this.revierDropDown&&(this.revierDropDown.value=this.currentArea[10]?this.currentArea[10]:0)}createObfDropdown(e,t){const n=this;this.obfDropDown=document.createElement("SELECT");let r=document.createElement("OPTION");r.innerText="Oberförsterei",r.setAttribute("value",0),this.obfDropDown.append(r);for(var i=0;i<Ym.length;i++){let e=document.createElement("OPTION");e.innerText=Ym[i].name,e.setAttribute("value",Ym[i].id),this.obfDropDown.append(e)}document.getElementById(e).append(this.obfDropDown),this.obfDropDown.addEventListener("change",(e=>{const r=e.target.options[e.target.selectedIndex].value;if(0!==r){n.focusLand(r);var i=Ym.filter((e=>e.id===parseInt(r)));0!==i.length&&n.createRevierDropdown(t,parseInt(i[0].obf))}}))}createRevierDropdown(e,t){const n=Zm.filter((e=>e.obf===t)),r=this;this.revierDropDown=document.createElement("SELECT");let i=document.createElement("OPTION");i.innerText="Revier",i.setAttribute("value",0),this.revierDropDown.append(i);for(var o=0;o<n.length;o++){let e=document.createElement("OPTION");e.innerText=n[o].name,e.setAttribute("value",n[o].id),this.revierDropDown.append(e)}document.getElementById(e).innerHTML="",document.getElementById(e).append(this.revierDropDown),this.revierDropDown.addEventListener("change",(e=>{var t=e.target.options[e.target.selectedIndex].value;0!==t&&r.focusObf(t)}))}createAreaInfo(e){this.infoElementId=e,this.updateAreaInfo()}updateAreaInfo(){let e=[],t=[];if(!this.infoElementId)return;document.getElementById(this.infoElementId).innerHTML="",this.currentArea[10]&&(t=Zm.filter((e=>e.id==this.currentArea[10]))),this.currentArea[9]&&(e=Ym.filter((e=>e.id==parseInt(this.currentArea[9]))));const n=document.createElement("DIV");if(n.classList.add("ge-info-window"),e.length>0){let t=document.createElement("DIV");t.classList.add("ge-row","ge-selection");let r=document.createElement("DIV");r.innerText=e[0].name,t.append(r);let i=document.createElement("DIV");i.innerHTML="&#x2715;",i.addEventListener("click",(()=>obj.removeLayer("9"))),t.append(i),n.append(t)}if(t.length>0){let e=document.createElement("DIV");e.classList.add("ge-row","ge-selection");let r=document.createElement("DIV");r.innerText=t[0].name,e.append(r);let i=document.createElement("DIV");i.innerHTML="&#x2715;",i.addEventListener("click",(()=>obj.removeLayer("10"))),e.append(i),n.append(e)}if(0==e.length){const e=document.createElement("DIV");e.classList.add("ge-subheader"),e.innerText="Wähle eine Oberförsterei",n.append(e)}else{const e=document.createElement("DIV");e.classList.add("ge-subheader"),e.innerText="Wähle ein Revier",n.append(e)}document.getElementById(this.infoElementId).append(n)}removeLayer(e){e&&this.currentArea[e]&&(this.currentArea[e]=null,this.selectedResolution=e-1,this.updateNavigation())}updateNavigation(){this.updateAreaList(),this.updateAreaInfo(),this.updateList(),this.updateRevierList(),this.updateDropDowns(),this.currentArea[10]?(document.body.classList.add("ge-res-10"),document.body.classList.remove("ge-res-9","ge-res-8")):this.currentArea[9]?(document.body.classList.add("ge-res-9"),document.body.classList.remove("ge-res-10","ge-res-8")):(document.body.classList.add("ge-res-8"),document.body.classList.remove("ge-res-10","ge-res-9")),this.getH3Layer(),8!==this.selectedResolution&&this.getMaskLayer("./geo/"+(9==this.selectedResolution?"obf":"reviere")+"/"+this.currentArea[this.selectedResolution]+".geojson",this.currentArea[this.selectedResolution],this.selectedResolution)}checkMobileNavigation(){document.getElementById("ge-mobile-navigation")}createAreaList(e){this.areaList=e,this.updateAreaList()}updateAreaList(){this.areaList&&(document.getElementById(this.areaList).innerHTML="",this.currentArea[9]?document.getElementById(this.areaList).append(this.getReviereList(this.currentArea[9])):this.currentArea[8]&&document.getElementById(this.areaList).append(this.getObfList()))}getObfList(){const e=this;this.oBfListElementId="ge-area-list-Obf";var t=Ym.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0));let n=document.createElement("DIV");n.classList.add("ge-area-list"),n.setAttribute("id",this.listElementId);for(var r=0;r<t.length;r++){let i=document.createElement("DIV");i.setAttribute("data-id",t[r].id),i.setAttribute("data-obf",t[r].obf),i.addEventListener("click",(t=>e.focusLand(t.target.getAttribute("data-id")))),i.innerText=t[r].name,n.append(i)}return n}getReviereList(e){const t=this;this.revierListElementId="ge-area-list-Revier";const n=Ym.filter((t=>parseInt(t.id)===parseInt(e)));if(n.length<1)return;const r=Zm.filter((e=>parseInt(e.obf)===parseInt(n[0].obf)));if(r.length<1)return;var i=r.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0));let o=document.createElement("DIV");o.classList.add("ge-area-list"),o.setAttribute("id",this.revierListElementId);for(var s=0;s<i.length;s++){let e=document.createElement("DIV");e.setAttribute("data-id",i[s].id),e.addEventListener("click",(e=>t.focusObf(e.target.getAttribute("data-id")))),e.innerText=i[s].name,o.append(e)}return o}updateList(){if(!this.oBfListElementId)return;const e=document.getElementById(this.oBfListElementId);if(!e||!e.hasChildNodes())return;const t=document.getElementById(this.oBfListElementId).childNodes;for(var n=0;n<t.length;n++){const e=t[n].getAttribute("data-id");e&&e==this.currentArea[9]?t[n].classList.add("active"):t[n].classList.remove("active")}}updateRevierList(){if(!this.revierListElementId)return;const e=document.getElementById(this.revierListElementId);if(!e||!e.hasChildNodes())return;const t=document.getElementById(this.revierListElementId).childNodes;for(var n=0;n<t.length;n++){const e=t[n].getAttribute("data-id");e&&e==this.currentArea[10]?t[n].classList.add("active"):t[n].classList.remove("active")}}addJsonLayer(e){this._loadJson(e).then((e=>{}))}getMaskLayer(e,t,n){this._loadJson(e).then((e=>{8==n?this.maskLayer=e.features[0]:(this.focus=this.childMaskLayer!==e.features[0],this.childMaskLayer=e.features[0]),this.refreshReact()}))}getH3Layer(){var e="./interpolation/"+this.selectedYear+"/"+this.selectedLayer+"/"+this.selectedResolution+"/fid_"+this.currentArea[this.selectedResolution]+"_"+this.selectedResolution+".json";this._loadJson(e).then((e=>{this.h3Layer=e,this.refreshReact()})).catch((e=>{console.log(e)}))}changeView(e){this.is3D!==e.viewState.pitch>0&&(this.is3D=e.viewState.pitch>0,this.refreshReact())}refreshReact(){var e=this;qm.render(A.createElement(Um,{data:this.h3Layer,maskData:this.maskLayer,childMaskData:this.childMaskLayer,parent:function(t){e.changeView(t)},show3D:this.is3D,resolution:this.selectedResolution}),document.getElementById("react-gl"))}addView(e,t){this.views[e]=t}focusLand(e){0==e?this.selectedResolution=8:(this.selectedResolution=9,this.currentArea[this.selectedResolution]=e,this.currentArea[10]=null,this.setHash()),this.updateNavigation()}focusObf(e){0==e?this.selectedResolution=9:(this.selectedResolution=10,this.currentArea[this.selectedResolution]=e,this.setHash()),this.updateNavigation()}async _loadJson(e){return(await fetch(e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}})).json()}}}));
//# sourceMappingURL=bundle.iife.js.map
